"use strict";(globalThis.webpackChunk_coral_xyz_app_extension=globalThis.webpackChunk_coral_xyz_app_extension||[]).push([[611,195],{45195:(e,r,n)=>{n.r(r),n.d(r,{default:()=>i});var a=n(2784),s=n(20604),t=n(2784);const o=(0,s.jl5)("app-extension/ledger-iframe"),i=()=>{const e=(0,a.useRef)(null);return(0,a.useEffect)((()=>{let r;return navigator.serviceWorker.ready.then((()=>{o.debug("ledger iframe ready"),r=e=>{if(!(0,s.xrP)(e))return void o.error("invalid event origin");const r=e.data;r.type===s.ZwH&&(o.debug("handleMessage",r),navigator.serviceWorker.controller?.postMessage(r))},window.addEventListener("message",r),navigator.serviceWorker.onmessage=r=>{if(!(0,s.xrP)(r))return;const n=r.data;o.debug("onmessage",n),e.current?.contentWindow?.postMessage(n,"*")}})).catch((e=>o.error("service worker not ready",e))),()=>{navigator.serviceWorker.onmessage=null,window.removeEventListener("message",r)}}),[]),o.debug("rendering hidden iframe for ledger",s.kxH),t.createElement("iframe",{ref:e,src:s.kxH,allow:"hid 'src'",tabIndex:-1,style:{display:"none"}})}}}]);