"use strict";(globalThis.webpackChunk_coral_xyz_app_extension=globalThis.webpackChunk_coral_xyz_app_extension||[]).push([[288],{71130:(e,t,n)=>{n.r(t),n.d(t,{BlankApp:()=>bu,MOTION_VARIANTS:()=>ku,WithSuspense:()=>vu,default:()=>ou});var o=n(2784),l=n(88932),i=n(2942),r=n(20604),a=n(36375),s=n(3210),c=n(88367),d=n(60041),m=n(61676),u=n(85380),p=n(85612);const g=async e=>{try{const t=await fetch(`${r.FvS}/preferences`),n=await t.json();if(!n.xnftPreferences)throw new Error(n.message);n.xnftPreferences.map((async t=>{await e.request({method:r.SG6,params:[t.xnftId,{notifications:t.notifications||!1}]})}))}catch(e){console.warn(`Error while refreshing xnft preferences ${e}`)}};var h=n(76160),f=n(84190),x=n(78797),y=n(56961),v=n(83422),b=n(538),E=n(53476),k=n(41755),w=n(31563);const C=(0,d.W2)((e=>({searchField:{marginTop:0,marginBottom:0,width:"inherit",display:"flex","& .MuiOutlinedInput-root":{border:"none !important",background:"transparent","& input":{paddingTop:4,paddingBottom:4},"& fieldset":{border:"none !important"}}},icon:{background:e.custom.colors.textBackground},iconInner:{background:e.custom.colors.fontColor},topImage:{maxWidth:"25vw"},horizontalCenter:{display:"flex",justifyContent:"center"},container:{marginLeft:"16px",marginRight:"16px"},roundBtn:{marginLeft:8,borderRadius:20,width:20,height:20,cursor:"pointer",background:"#FFFFFF",border:"2px solid #F0F0F2",fontSize:10},add:{width:17,paddingBottom:6,paddingRight:1},iconCircular:{width:"32px",height:"32px",borderRadius:"16px",marginRight:"8px",color:e.custom.colors.positive},iconCircularBig:{width:"40px",height:"40px",borderRadius:"16px",marginRight:"8px",color:e.custom.colors.positive},hoverParent:{"&:hover $hoverChild, & .Mui-focused $hoverChild":{visibility:"visible"}},hoverChild:{visibility:"hidden"},text:{color:e.custom.colors.fontColor2},smallText:{fontSize:12,color:e.custom.colors.fontColor2},userText:{fontSize:16,marginTop:4,color:e.custom.colors.fontColor2},userTextSmall:{fontSize:14,color:e.custom.colors.fontColor2},timestamp:{fontSize:14,minWidth:60,color:e.custom.colors.fontColor2},smallTitle:{color:e.custom.colors.smallTextColor,fontWeight:600},smallSubTitle:{color:e.custom.colors.smallTextColor,fontWeight:500},contactIconOuter:{background:e.custom.colors.textBorder},menuItem:{fontWeight:400,fontSize:14,color:e.custom.colors.fontColor,padding:"12px 16px"},menu:{"& .MuiList-root":{padding:0},paddingTop:0,paddingBottom:0,minWidth:184,color:e.custom.colors.fontColor}})));var S=n(2784);const T=({searchFilter:e,setSearchFilter:t})=>{const n=C(),o=(0,d.Pg)();return S.createElement(a.oi,{autoFocus:!0,className:n.searchField,placeholder:"Search",startAdornment:S.createElement(w.Z,{sx:{color:o.custom.colors.icon,mr:"10px"}}),value:e,setValue:async e=>{const n=e.target.value;t(n)},inputProps:{style:{height:"48px"}}})};var R=n(2784);const j=({name:e})=>{const t=(0,d.Pg)();return R.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4}},R.createElement("div",{style:{color:t.custom.colors.icon}},e),R.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},R.createElement(a.lp,{style:{width:"22px"}})))};var I=n(58516),N=n(2784);function F({selected:e,onClick:t,children:n}){const o=(0,d.Pg)();return N.createElement(v.Z,{style:{display:"flex",padding:12,background:e?I.q:"",borderRadius:8,color:o.custom.colors.fontColor,cursor:"pointer"},sx:{"&:hover":{background:I.q}},onClick:t},n)}var P=n(2784);const L=({contacts:e,selectedIndex:t,setSelectedContact:n})=>e.length?P.createElement("div",null,P.createElement(j,{name:"Friends"}),e.map(((e,o)=>P.createElement(A,{selected:t===o,contact:e,setSelectedContact:n})))):null;function A({contact:e,selected:t,setSelectedContact:n}){return P.createElement(F,{selected:t,onClick:()=>{n(e)}},P.createElement(a.tB,{size:55,image:e.image}),P.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},e.username))}var B=n(2784);const Z=({groups:e,selectedIndex:t,setOpen:n})=>e.length?B.createElement("div",null,B.createElement(j,{name:"Group chats"}),e.map(((e,o)=>B.createElement(O,{group:e,selected:t===o,setOpen:n})))):null;function O({group:e,selected:t,setOpen:n}){const{push:o}=(0,s.HJj)();return B.createElement(F,{selected:t,onClick:()=>{o({title:e?.name,componentId:r.Zzd,componentProps:{fromInbox:!0,id:e.collectionId,title:e?.name}}),n(!1)}},B.createElement(a.tB,{size:55,image:e.image}),B.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},e.name))}var $=n(2784);const D=({nfts:e,selectedIndex:t,setOpen:n})=>e.length?$.createElement("div",null,$.createElement(j,{name:"Collectibles"}),e.map(((e,o)=>$.createElement(z,{selected:t===o,nft:e,setOpen:n})))):null;function z({nft:e,selected:t,setOpen:n}){const o=(0,s.rTu)(),l=(0,s.y20)(o.blockchain),{push:i}=(0,s.HJj)();return $.createElement(F,{selected:t,onClick:()=>{i({title:e?.name,componentId:r.LYo,componentProps:{nftId:e.id,publicKey:o.publicKey,connectionUrl:l}}),n(!1)}},$.createElement(a.tB,{size:55,image:e.image}),$.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},e.name))}var M=n(2784);const _=({selectedIndex:e,tokens:t,setOpen:n})=>t.length?M.createElement("div",null,M.createElement(j,{name:"Tokens"}),t.map(((t,o)=>M.createElement(U,{selected:e===o,token:t,setOpen:n})))):null;function U({selected:e,token:t,setOpen:n}){const{push:o}=(0,s.HJj)(),l=(0,s.rTu)();return M.createElement(F,{selected:e,onClick:()=>{o({title:`${(0,r.LFn)(r.$OA.SOLANA)} / ${t.name}`,componentId:r.ue$,componentProps:{blockchain:"solana",tokenAddress:t.address,publicKey:l.publicKey}}),n(!1)}},M.createElement(a.tB,{size:55,image:t.image}),M.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},t.name))}var K=n(2784);function W({xnfts:e,selectedIndex:t,setOpen:n}){return e.length?K.createElement("div",null,K.createElement(j,{name:"Applications"}),e.map(((e,o)=>K.createElement(q,{selected:t===o,xnft:e,setOpen:n})))):null}function q({xnft:e,selected:t,setOpen:n}){const o=(0,s.KPt)();return K.createElement(F,{selected:t,onClick:()=>{n(!1),o(e.publicKey)}},K.createElement(a.tB,{size:55,image:e.image}),K.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},e.name))}var H=n(26852);const V=e=>{const{uuid:t}=(0,s.aFb)();return(0,H.gW)(t).filter((t=>t.remoteUsername?.toLowerCase().includes(e?.toLowerCase()))).map((e=>({username:e.remoteUsername,image:e.remoteUserImage,uuid:e.remoteUserId})))},G=e=>{const{uuid:t}=(0,s.aFb)();return(0,s.Ude)({uuid:t}).filter((t=>t.name?.toLowerCase()?.includes(e.toLowerCase()))).map((e=>({name:e.name||"",image:e.image||"",collectionId:e.collectionId||""})))},J=e=>{const t=(0,s.cPJ)(),{contents:n,state:o}=(0,E.$P)((0,s.W5L)({publicKey:t?.publicKey,blockchain:r.$OA.SOLANA}));return"loading"===o||"hasError"===o?[]:n.filter((t=>t&&(t.name?.toLowerCase()?.includes(e.toLowerCase())||t.collectionName?.toLowerCase()?.includes(e.toLowerCase())))).map((e=>({name:e.name||"",image:e.imageUrl||"",id:e.id||""})))},Y=e=>{const t=(0,s.cPJ)(),[n,,o]=(0,s.U2V)((0,s.gvR)({publicKey:t?.publicKey,blockchain:r.$OA.SOLANA}),[],[t]);return o?[]:n.filter((t=>t&&t.name?.toLowerCase().includes(e.toLowerCase()))).map((e=>({name:e.name||"",id:e.mint||"",image:e.logo||"",address:e.address||""})))},X=e=>{const t=(0,s.cPJ)(),n=(0,s.VzB)(),{contents:o,state:l}=(0,E.$P)((0,s.cHG)({publicKey:t?.publicKey,connectionUrl:n}));return"loading"===l||"hasError"===l?[]:o.filter((t=>t.title?.toLowerCase()?.includes(e.toLowerCase()))).map((e=>({name:e.title||"",image:e.iconUrl||"",id:e.id||"",publicKey:e.install.account.xnft.toString()})))};var Q=n(93014),ee=n(2784);const te=({searchFilter:e,arrowIndex:t,setOpen:n,setSelectedContact:o})=>{const l=(0,d.Pg)(),i=V(e),r=G(e),a=J(e),s=X(e),c=Y(e),m=i.length+r.length+a.length+s.length+c.length,u=(0,Q.C)(t,m);if(!e)return ee.createElement("div",null);const p=[{component:ee.createElement("div",null,ee.createElement(L,{selectedIndex:u<i.length?u:null,contacts:i,setSelectedContact:o})),count:i.length,isFirst:i.length>0},{component:ee.createElement("div",null,ee.createElement(Z,{selectedIndex:u>=i.length&&u<i.length+r.length?u-i.length:null,groups:r,setOpen:n})),count:r.length,isFirst:0===i.length&&r.length>0},{component:ee.createElement("div",null,ee.createElement(D,{selectedIndex:u>=i.length+r.length&&u<i.length+r.length+a.length?u-i.length-r.length:null,nfts:a,setOpen:n})),count:a.length,isFirst:0===i.length&&0===r.length&&a.length>0},{component:ee.createElement("div",null,ee.createElement(W,{selectedIndex:u>=i.length+r.length+a.length&&u<i.length+r.length+a.length+s.length?u-i.length-r.length-a.length:null,xnfts:s,setOpen:n})),count:s.length,isFirst:0===i.length&&0===r.length&&0===a.length&&s.length>0},{component:ee.createElement("div",null,ee.createElement(_,{selectedIndex:u>=i.length+r.length+a.length+s.length&&u<i.length+r.length+a.length+s.length+c.length?u-i.length-r.length-a.length-s.length:null,tokens:c,setOpen:n})),count:c.length,isFirst:0===i.length&&0===r.length&&0===a.length&&0===s.length&&c.length>0}];return ee.createElement("div",{style:{padding:16}},p.map((e=>ee.createElement(ee.Fragment,null,e.count>0&&!e.isFirst?ee.createElement(y.Z,{style:{backgroundColor:l.custom.colors.nav,marginTop:12,marginBottom:12}}):null,e.component))))};var ne=n(2784);const oe={marginLeft:"auto",marginRight:"auto"},le=()=>{const[e,t]=(0,E.FV)(s.WO0),n=(0,s.x5$)(),[l,i]=(0,o.useState)(0);return(0,o.useEffect)((()=>{function e(e){"unlocked"===n&&("k"===e.key&&e.metaKey&&(t((e=>!e)),e.preventDefault()),27!==e.which&&27!==e.keyCode||t(!1),38===e.which?i((e=>e-1)):40===e.which&&i((e=>e+1)))}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n]),ne.createElement(b.Z,{slotProps:{backdrop:{style:{backdropFilter:"blur(6px)"}}},open:e},ne.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},ne.createElement("div",{style:{zIndex:1,paddingLeft:"16px",paddingRight:"16px",paddingTop:"10px",paddingBottom:"10px",height:"56px",display:"flex"},onClick:()=>t(!1)}),ne.createElement("div",{style:{flex:1}},ne.createElement(v.Z,{sx:{...oe},style:{height:"100%"},onClick:()=>t(!1)},ne.createElement(ie,{setOpen:t,arrowIndex:l}))),ne.createElement("div",{style:{zIndex:1,paddingLeft:"16px",paddingRight:"16px",paddingTop:"10px",paddingBottom:"10px",height:"56px",display:"flex"},onClick:()=>t(!1)})))};function ie({arrowIndex:e,setOpen:t}){const[n,l]=(0,o.useState)(""),i=V(n),a=G(n),c=J(n),m=X(n),u=Y(n),p=i.length+a.length+c.length+m.length+u.length,{push:g}=(0,s.HJj)(),h=(0,s.rTu)(),f=(0,s.y20)(h.blockchain),x=(0,d.Pg)(),{isXs:v}=(0,s.kCD)(),b=(0,s.KPt)();return ne.createElement("div",{onKeyDown:n=>{if(13===n.keyCode){const n=(0,Q.C)(e,p),o=n<i.length?n:null,l=n>=i.length&&n-i.length<a.length?n-i.length:null,s=n>=i.length+a.length&&n-i.length-a.length<c.length?n-i.length-a.length:null,d=n>=i.length+a.length+c.length&&n-i.length-a.length-c.length<m.length?n-i.length-a.length-c.length:null,x=n>=i.length+a.length+c.length+m.length&&n-i.length-a.length-c.length-m.length<u.length?n-i.length-a.length-c.length-m.length:null;if(o||0===o){const e=i[o];return g({title:`@${e?.username}`,componentId:r.CdA,componentProps:{userId:e?.uuid,id:e?.uuid,username:e?.username}}),void t(!1)}if(l||0===l){const e=a[l];return g({title:e?.name,componentId:r.Zzd,componentProps:{fromInbox:!0,id:e.collectionId,title:e?.name}}),void t(!1)}if(s||0===s){const e=c[s];return g({title:e?.name,componentId:r.LYo,componentProps:{nftId:e.id,publicKey:h.publicKey,connectionUrl:f}}),void t(!1)}if(d||0===d){const e=m[d];t(!1),b(e.publicKey)}if(x||0===x){const e=u[x];return g({title:`${(0,r.LFn)(r.$OA.SOLANA)} / ${e.name}`,componentId:r.ue$,componentProps:{blockchain:"solana",tokenAddress:e.address,publicKey:h.publicKey}}),void t(!1)}}},style:{boxShadow:24,height:""!==n.trim()?"100%":void 0,background:x.custom.colors.backgroundBackdrop,borderRadius:"12px",display:"flex",flexDirection:"column",width:v?343:500,marginLeft:"auto",marginRight:"auto"},onClick:e=>{e.stopPropagation(),e.preventDefault()}},ne.createElement(T,{searchFilter:n,setSearchFilter:l}),""!==n.trim()?ne.createElement(ne.Fragment,null,ne.createElement(y.Z,{style:{backgroundColor:x.custom.colors.nav}}),ne.createElement("div",{style:{flex:1}},ne.createElement(k.L,null,ne.createElement(te,{arrowIndex:e,searchFilter:n,setOpen:t,setSelectedContact:e=>{g({title:`@${e?.username}`,componentId:r.CdA,componentProps:{userId:e?.uuid,id:e?.uuid,username:e?.username}}),t(!1)}})))):null)}var re=n(73557),ae=n(39857),se=n(87486),ce=n(95875),de=n(92252),me=n(7864),ue=n(69208),pe=n(52529),ge=n(79312),he=n(33853),fe=n(50169),xe=n(68269),ye=n(83311),ve=n(23866),be=n(21373),Ee=n(19161),ke=n(86845),we=n(2784);const Ce=({blockchain:e,name:t,publicKey:n,type:o,isFirst:l,isLast:i,showDetailMenu:r,onClick:s})=>{const c=(0,d.Pg)(),m=(0,be.HJ)();return we.createElement(a.HC,{button:!0,key:n.toString(),isFirst:l,isLast:i,detail:r?we.createElement(me.Z,{style:{cursor:"pointer",color:c.custom.colors.secondary}}):null,onClick:s||(()=>m.push("edit-wallets-wallet-detail",{blockchain:e,publicKey:n,name:t,type:o})),style:{height:"48px",display:"flex",width:"100%"}},we.createElement(Ee.JE,{name:t,publicKey:n,style:{fontWeight:500,lineHeight:"24px",fontSize:"16px"},nameStyle:{color:c.custom.colors.fontColor,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"75px"}}),o?we.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginLeft:"4px"}},we.createElement(Bt,{type:o})):null)};var Se=n(2784);function Te(){const e=(0,be.HJ)(),t=(0,s.aFb)(),n=(0,s.OuZ)(72,t.username),l=(0,d.Pg)(),{close:i}=(0,ve.M$)();return(0,o.useEffect)((()=>{e.setOptions({headerTitle:""})}),[e]),Se.createElement("div",{style:{height:"100%",justifyContent:"space-between",flexDirection:"column",display:"flex"}},Se.createElement("div",null,Se.createElement(a.e4,{src:n,loadingStyles:{margin:"8px auto 16px auto",height:"72px",width:"72px",display:"block"},style:{marginBottom:"16px",marginTop:"8px",width:"72px",borderRadius:"36px",marginLeft:"auto",marginRight:"auto",display:"block"}}),Se.createElement(ge.Z,{style:{color:l.custom.colors.fontColor,fontSize:"24px",fontWeight:500,textAlign:"center",marginLeft:"32px",marginRight:"32px"}},"Your new wallet will be associated with @",t.username),Se.createElement(ge.Z,{style:{marginLeft:"32px",marginRight:"32px",marginTop:"8px",fontSize:"16px",fontWeight:500,color:l.custom.colors.secondary,textAlign:"center"}},"This connection will be public, so if you'd prefer to create a separate identity, create a new account.")),Se.createElement("div",{style:{marginLeft:"16px",marginRight:"16px"}},Se.createElement(a.KM,{label:`Continue as @${t.username}`,onClick:()=>e.push("edit-wallets-blockchain-selector")}),Se.createElement(a.tf,{label:"Create a new account",style:{marginTop:"16px",marginBottom:"16px",backgroundColor:"transparent"},onClick:()=>{i(),(0,r.GnJ)()}})))}function Re({blockchain:e,publicKey:t}){const n=(0,be.HJ)();return(0,o.useEffect)((()=>{const e=n.title;return n.setOptions({headerTitle:""}),()=>{n.setOptions({headerTitle:e})}}),[n]),t?Se.createElement(Ie,{blockchain:e,publicKey:t}):Se.createElement(je,{blockchain:e})}function je({blockchain:e}){const t=(0,be.HJ)(),n=(0,s.aFb)(),l=(0,be.HJ)(),i=(0,ve.M$)(),c=(0,s.G5b)(),d=(0,s.dI)(),{close:m}=(0,ve.M$)(),{signMessageForWallet:u}=(0,s.ioA)(),p=(0,s.T$u)(),g=p[e],h=p?.[e]?.hdPublicKeys?.length>0,[f,x]=(0,o.useState)(""),[y,b]=(0,o.useState)(!1),[E,k]=(0,o.useState)(!1);return Se.createElement(Se.Fragment,null,Se.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},Se.createElement(v.Z,{sx:{margin:"24px"}},Se.createElement(Ee.h4,{text:"Create or import a wallet"}),Se.createElement(Ee.MR,null,"Add a new wallet for @",n.username," on Backpack.")),Se.createElement(ke.U,{menuItems:{[d?"Create a new wallet":"Setup recovery phrase"]:{onClick:()=>d?(async()=>{if(E)return;let t;if(b(!0),k(!0),g&&h)t=await c.request({method:r.tGE,params:[e]});else{const n=await c.request({method:r.o4m,params:[e,0]}),o=await u(e,n.publicKey,(0,r.yYu)(n.publicKey),{mnemonic:!0,signedWalletDescriptors:[{...n,signature:""}]}),l={...n,signature:o};g?await c.request({method:r.hHE,params:[l]}):await c.request({method:r.h4z,params:[{mnemonic:!0,signedWalletDescriptors:[l]}]}),t=n.publicKey}x(t),k(!1)})():l.push("create-or-import-mnemonic",{blockchain:e,keyringExists:g}),icon:e=>Se.createElement(a.wl,e)},"Advanced wallet import":{onClick:()=>t.push("import-wallet",{blockchain:e}),icon:e=>Se.createElement(a.J,e)}}})),Se.createElement(ve.Gx,{openDrawer:y,setOpenDrawer:e=>{b(e),e||i.close()},backdropProps:{style:{opacity:.8,background:"#18181b"}}},Se.createElement(Ne,{blockchain:e,publicKey:f,onClose:()=>{b(!1),m()},isLoading:E})))}function Ie({blockchain:e,publicKey:t}){const n=(0,be.HJ)(),o=(0,s.SjB)().includes(e),l={"Other recovery phrase":{onClick:()=>n.push("import-from-mnemonic",{blockchain:e,inputMnemonic:!0,keyringExists:o,publicKey:t}),icon:e=>Se.createElement(a.bD,e),detailIcon:Se.createElement(a.lp,null)},"Private key":{onClick:()=>n.push("import-from-secret-key",{blockchain:e,publicKey:t}),icon:e=>Se.createElement(a.wl,e),detailIcon:Se.createElement(a.lp,null)},"Hardware wallet":{onClick:()=>{(0,r.XNd)(e,"search",t),window.close()},icon:e=>Se.createElement(a.T2,e),detailIcon:Se.createElement(a.lp,null)}};return Se.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},Se.createElement(v.Z,{sx:{margin:"24px"}},Se.createElement(Ee.h4,{text:"Recover a wallet"}),Se.createElement(Ee.MR,null,"Recover a wallet using one of the following:")),Se.createElement(ke.U,{menuItems:l}))}const Ne=({blockchain:e,publicKey:t,onClose:n,isLoading:o=!1})=>{const l=(0,d.Pg)(),i=(0,s.ZaQ)(t);return Se.createElement("div",{style:{height:"232px",backgroundColor:l.custom.colors.bg2,padding:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"}},o?Se.createElement(a.gb,null):Se.createElement(Se.Fragment,null,Se.createElement("div",null,Se.createElement(ge.Z,{style:{marginTop:"16px",textAlign:"center",fontWeight:500,fontSize:"18px",lineHeight:"24px",color:l.custom.colors.fontColor}},"Wallet Created"),Se.createElement("div",{style:{textAlign:"center",marginTop:"24px"}},Se.createElement(a.nQ,null))),Se.createElement("div",null,Se.createElement(Ce,{blockchain:e,name:i,publicKey:t,showDetailMenu:!1,isFirst:!0,isLast:!0,onClick:()=>{n()}}))))};var Fe=n(12908),Pe=n(2784);function Le({blockchain:e,keyringExists:t}){const n=(0,be.HJ)(),o={"Generate new phrase":{onClick:()=>n.push("create-mnemonic",{blockchain:e,keyringExists:t}),icon:e=>Pe.createElement(a.bD,e),detailIcon:Pe.createElement(a.lp,null)},"Import recovery phrase":{onClick:()=>n.push("set-and-sync-mnemonic",{blockchain:e,keyringExists:t}),icon:e=>Pe.createElement(a.J,e),detailIcon:Pe.createElement(a.lp,null)}};return Pe.createElement(v.Z,{sx:{flex:1,display:"flex",flexDirection:"column",height:"100%"}},Pe.createElement(v.Z,{style:{padding:"0 16px 0 16px"}},Pe.createElement(v.Z,{style:{margin:8}},Pe.createElement(Ee.h4,{text:"Set your Backpack secret recovery phrase",style:{fontWeight:500}}),Pe.createElement(Ee.MR,null,"Create or import a secret recovery phrase. This will be used to create new wallets, so make sure you don't lose it. Only you will have access to this secret."))),Pe.createElement(ke.U,{menuItems:o}))}function Ae({blockchain:e,keyringExists:t}){const n=(0,be.HJ)(),l=(0,d.Pg)(),i=(0,s.G5b)(),{close:a}=(0,ve.M$)(),{signMessageForWallet:c}=(0,s.ioA)(),[m,u]=(0,o.useState)(!1),[p,g]=(0,o.useState)(null);return(0,o.useEffect)((()=>{const e=n.title;return n.setOptions({headerTitle:""}),()=>{n.setOptions({headerTitle:e})}}),[n,l]),Pe.createElement(Pe.Fragment,null,Pe.createElement(Fe.eL,{readOnly:!0,buttonLabel:"Next",subtitle:"Write it down and store it in a safe place.",onNext:async n=>{const o=await i.request({method:r.o4m,params:[e,0,n]}),l=await c(e,o.publicKey,(0,r.yYu)(o.publicKey),{mnemonic:n,signedWalletDescriptors:[{...o,signature:""}]});await(async(e,n)=>{let o;await i.request({method:r.opN,params:[e]}),o=t?await i.request({method:r.hHE,params:[n]}):await i.request({method:r.h4z,params:[{mnemonic:e,signedWalletDescriptors:[n]}]}),g(o),u(!0)})(n,{...o,signature:l})}}),Pe.createElement(ve.Gx,{openDrawer:m,setOpenDrawer:e=>{e||a(),u(e)},backdropProps:{style:{opacity:.8,background:"#18181b"}}},Pe.createElement(Ne,{blockchain:e,publicKey:p,onClose:()=>{u(!1),a()}})))}var Be=n(2784);function Ze({blockchain:e}){const t=(0,be.HJ)(),n=(0,s.dI)(),l=(0,s.aFb)(),i=(0,s.SjB)().includes(e);(0,o.useEffect)((()=>{const e=t.title;return t.setOptions({headerTitle:""}),()=>{t.setOptions({headerTitle:e})}}),[t]);const c={...n?{"Backpack recovery phrase":{onClick:()=>t.push("import-from-mnemonic",{blockchain:e,keyringExists:i,inputMnemonic:!1}),icon:e=>Be.createElement(a.rC,e),detail:Be.createElement(a.lp,null)}}:{},"Other recovery phrase":{onClick:()=>t.push("import-from-mnemonic",{blockchain:e,keyringExists:i,inputMnemonic:!0}),icon:e=>Be.createElement(a.bD,e),detail:Be.createElement(a.lp,null)},"Private key":{onClick:()=>t.push("import-from-secret-key",{blockchain:e}),icon:e=>Be.createElement(a.Dx,e),detail:Be.createElement(a.lp,null)},"Hardware wallet":{onClick:()=>{(0,r.XNd)(e,"import"),window.close()},icon:e=>Be.createElement(a.T2,e),detail:Be.createElement(a.BE,null)}};return Be.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},Be.createElement(v.Z,{sx:{margin:"24px"}},Be.createElement(Ee.h4,{text:"Import a wallet"}),Be.createElement(Ee.MR,null,"Import a wallet to @",l.username," on Backpack using one of the following:")),Be.createElement(ke.U,{menuItems:c}))}var Oe=n(14600),$e=n(46501);n(5585),new Oe.z(Oe.Q);var De=n(73181),ze=n(43298),Me=n(2784);function _e(){const e=(0,s.G5b)(),t=(0,s.Jao)(),[n,l]=(0,o.useState)(!1),{close:i}=(0,ve.M$)();return Me.createElement(Me.Fragment,null,Me.createElement(Fe.eL,{key:"MnemonicInput",buttonLabel:"Import",onNext:async n=>{(async n=>{await e.request({method:r.opN,params:[n]}),t.length>0&&await e.request({method:r.I3u,params:[t]})})(n),l(!0)}}),Me.createElement(ve.Gx,{openDrawer:n,setOpenDrawer:e=>{l(e),e||i()},backdropProps:{style:{opacity:.8,background:"#18181b"}}},Me.createElement(Ue,{onClose:()=>{l(!1),i()}})))}const Ue=({onClose:e})=>{const t=(0,d.Pg)();return Me.createElement("div",{style:{height:"232px",backgroundColor:t.custom.colors.bg2,padding:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"}},Me.createElement("div",null,Me.createElement(ge.Z,{style:{marginTop:"16px",textAlign:"center",fontWeight:500,fontSize:"18px",lineHeight:"24px",color:t.custom.colors.fontColor}},"Recovery Phrase Set"),Me.createElement("div",{style:{textAlign:"center",marginTop:"24px"}},Me.createElement(a.nQ,null))),Me.createElement(a.KM,{label:"Done",onClick:()=>e()}))};function Ke({blockchain:e,keyringExists:t,inputMnemonic:n,forceSetMnemonic:l,publicKey:i}){const a=(0,be.HJ)(),c=(0,d.Pg)(),m=(0,s.G5b)(),{step:u,nextStep:p}=(0,De.h)(),{close:g}=(0,ve.M$)(),{signMessageForWallet:h}=(0,s.ioA)(),f=(0,s.Jao)(),[x,y]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!0),[E,k]=(0,o.useState)(i??null),[w,C]=(0,o.useState)(null);(0,o.useEffect)((()=>{const e=a.title;return a.setOptions({headerTitle:""}),()=>{a.setOptions({headerTitle:e})}}),[a,c]);const S=[...n?[Me.createElement(Fe.eL,{key:"MnemonicInput",buttonLabel:"Next",onNext:async e=>{b(e),p()}}),Me.createElement(We,{key:"InputName",onNext:e=>{C(e),p()}})]:[],Me.createElement(ze.v,{key:"ImportWallets",blockchain:e,mnemonic:v,recovery:i,allowMultiple:!1,onNext:async o=>{const i=o[0],a=(0,r.yYu)(i.publicKey),s=await h(i.blockchain,i.publicKey,a,{mnemonic:v,signedWalletDescriptors:[{...i,signature:""}]});await(async o=>{let i;if(l){await m.request({method:r.opN,params:[v]}),i=await m.request({method:r.hHE,params:[o]});const e=f.filter((e=>e.publicKey!==i));e.length>0&&await m.request({method:r.I3u,params:[e]})}else if(n){const n=(0,$e.iw)(e,v,o.derivationPath);i=t?await m.request({method:r.oH7,params:[e,n,w]}):await m.request({method:r.h4z,params:[{signature:o.signature,blockchain:e,publicKey:o.publicKey,privateKey:n}]})}else i=t?await m.request({method:r.hHE,params:[o]}):await m.request({method:r.h4z,params:[{mnemonic:!0,signedWalletDescriptors:[o]}]});k(i),y(!0)})({...i,signature:s})}})];return Me.createElement(Me.Fragment,null,S[u],Me.createElement(ve.Gx,{openDrawer:x,setOpenDrawer:e=>{y(e),e||g()},backdropProps:{style:{opacity:.8,background:"#18181b"}}},Me.createElement(Ne,{blockchain:e,publicKey:E,onClose:()=>{y(!1),g()}})))}function We({onNext:e}){const[t,n]=(0,o.useState)("");return Me.createElement(v.Z,{sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",padding:"0 16px 0 16px"}},Me.createElement(v.Z,{sx:{margin:"24px"}},Me.createElement(Ee.h4,{text:"Enter a name for the wallet"})),Me.createElement(v.Z,{sx:{margin:"0 16px"}},Me.createElement(a.oi,{autoFocus:!0,placeholder:"Name",value:t,setValue:e=>n(e.target.value)})),Me.createElement(v.Z,null,Me.createElement(a.KM,{label:"Next",onClick:()=>e(t),style:{marginBottom:16}})))}var qe=n(21916),He=n(2784);function Ve({blockchain:e,publicKey:t}){const n=(0,s.G5b)(),l=(0,be.HJ)(),i=(0,d.Pg)(),a=(0,s.SjB)().includes(e),{signMessageForWallet:c}=(0,s.ioA)(),{close:m}=(0,ve.M$)(),[u,p]=(0,o.useState)(!1),[g,h]=(0,o.useState)("");(0,o.useEffect)((()=>{const e=l.title;return l.setOptions({headerTitle:""}),()=>{l.setOptions({headerTitle:e})}}),[l,i]);let f=t?[{blockchain:e,publicKey:t}]:void 0;return He.createElement(He.Fragment,null,He.createElement(qe.p,{blockchain:e,onNext:async({blockchain:e,privateKey:t,publicKey:o,name:l})=>{if(a)o=await n.request({method:r.oH7,params:[e,t,l]});else{const l=await c(e,o,(0,r.yYu)(o),{blockchain:e,publicKey:o,privateKey:t,signature:""});o=await n.request({method:r.h4z,params:[{blockchain:e,publicKey:o,privateKey:t,signature:l}]})}h(o),p(!0)},serverPublicKeys:f}),He.createElement(ve.Gx,{openDrawer:u,setOpenDrawer:e=>{p(e),e||m()},backdropProps:{style:{opacity:.8,background:"#18181b"}}},He.createElement(Ne,{blockchain:e,publicKey:g,onClose:()=>{p(!1),m()}})))}const Ge=({blockchain:e,publicKey:t,type:n})=>{const l=(0,d.Pg)(),i=(0,be.HJ)(),c=(0,s.G5b)(),[m,u]=(0,o.useState)(!1),[p,g]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{i.setOptions({headerTitle:"Remove Wallet"})}),[i]),o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",paddingBottom:"16px"}},o.createElement("div",{style:{marginLeft:"36px",marginRight:"36px",marginTop:"45px",textAlign:"center"}},o.createElement(a.aN,{fill:l.custom.colors.negative}),o.createElement(ge.Z,{style:{fontWeight:500,fontSize:"24px",lineHeight:"32px",textAlign:"center",marginTop:"30px",color:l.custom.colors.fontColor}},`Are you sure you want to remove ${(0,r.R1Z)(t)}?`),o.createElement(ge.Z,{style:{textAlign:"center",color:l.custom.colors.secondary,fontSize:"16px",lineHeight:"24px",fontWeight:500,marginTop:"8px"}},"derived"===n?o.createElement(o.Fragment,null,"Removing from Backpack will not delete the wallet’s contents. It will still be available by importing your secret recovery phrase in a new Backpack."):"ledger"===n?o.createElement(o.Fragment,null,"Removing from Backpack will not delete the wallet’s contents. It will still be available by connecting your ledger."):"dehydrated"===n?o.createElement(o.Fragment,null,"Removing from Backpack will remove the connection between your username and this public key. You can always add it back later by adding the wallet to Backpack."):o.createElement(o.Fragment,null,"Removing from Backpack will delete the wallet’s keypair. Make sure you have exported and saved the private key before removing."))),o.createElement("div",{style:{display:"flex",marginLeft:"16px",marginRight:"16px"}},o.createElement(a.tf,{label:"Cancel",style:{marginRight:"8px"},onClick:()=>i.pop()}),o.createElement(a.KM,{label:"Remove",style:{backgroundColor:l.custom.colors.negative},onClick:async()=>{g(!0),"dehydrated"===n?await c.request({method:r.Ob,params:[e,t]}):await c.request({method:r.A4Y,params:[e,t]}),g(!1),u(!0)},disabled:p}))),o.createElement(ve.Gx,{openDrawer:m,setOpenDrawer:u,backdropProps:{style:{opacity:.8,background:"#18181b"}},onClose:()=>{u(!1),i.pop(2)}},o.createElement("div",{style:{borderTopLeftRadius:"12px",borderTopRightRadius:"12px",height:"100%",background:l.custom.colors.background}},o.createElement("div",{style:{height:"100%",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",background:l.custom.colors.drawerGradient,paddingTop:"32px",paddingBottom:"16px",paddingLeft:"16px",paddingRight:"16px"}},o.createElement("div",{style:{marginLeft:"36px",marginRight:"36px",textAlign:"center"}},o.createElement(a.nQ,null)),o.createElement("div",null,o.createElement(ge.Z,{style:{fontWeight:500,fontSize:"24px",lineHeight:"32px",textAlign:"center",marginTop:"16px",marginBottom:"32px",color:l.custom.colors.fontColor}},"Wallet removed"),o.createElement(a.KM,{label:"Done",onClick:()=>{i.pop(2)}}))))))},Je=({publicKey:e,name:t,blockchain:n})=>{const[l,i]=(0,o.useState)(t),c=(0,be.HJ)(),m=(0,d.Pg)(),u=(0,s.G5b)();(0,o.useEffect)((()=>{c.setOptions({headerTitle:"Rename Wallet"})}),[c]);const p=e.slice(0,4)+"..."+e.slice(e.length-4),g=""===l.trim();return o.createElement("form",{onSubmit:async t=>{t.preventDefault(),await u.request({method:r.gg$,params:[e,l,n]}),c.pop()},style:{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"}},o.createElement("div",{style:{marginTop:"112px"}},o.createElement(a.oi,{autoFocus:!0,value:l,setValue:e=>i(e.target.value)}),o.createElement(ge.Z,{style:{color:m.custom.colors.secondary,textAlign:"center",marginTop:"10px"}},"(",p,")")),o.createElement("div",{style:{display:"flex"}},o.createElement(a.tf,{label:"Cancel",onClick:()=>{c.pop()},style:{marginRight:"8px"}}),o.createElement(a.KM,{label:"Set",type:"submit",disabled:g})))};var Ye=n(54231),Xe=n(79194),Qe=n(67174),et=n(5497),tt=n(2784);function nt(){const e=(0,be.HJ)(),t=(0,s.G5b)(),n=(0,s.vsx)(),l=(0,s.N64)(),i=(0,s.iSY)(),[a,c]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(0,et.BZ)().then((e=>{c("granted"===window.Notification.permission&&e)})).catch(console.error)}),[window.Notification.permission]);const d=async e=>{await t.request({method:r.PK6,params:[e]})},m=async e=>{await t.request({method:r.byt,params:[e]})},u=async e=>{await t.request({method:r.Ioi,params:[e]})},p=async e=>{e?(c(!0),window.open("/permissions.html?notifications=true","_blank","noreferrer")):(await(0,et.X$)(),await(0,et.mq)(),c(!1))},g={"Auto-Lock Timer":{onClick:()=>e.push("preferences-auto-lock")},"Trusted Sites":{onClick:()=>e.push("preferences-trusted-sites")}};r.Kld&&(g["Dark Mode"]={onClick:()=>d(!n),detail:tt.createElement(ot,{enabled:n,onSwitch:e=>d(e)})}),g["Developer Mode"]={onClick:()=>m(!l),detail:tt.createElement(ot,{enabled:l,onSwitch:e=>m(e)})},g.Notifications={onClick:()=>p(!a),detail:tt.createElement(ot,{enabled:a,onSwitch:e=>p(e)})},r.nDh&&(g["Aggregate Wallets"]={onClick:()=>u(!i),detail:tt.createElement(ot,{enabled:i,onSwitch:e=>u(e)})});const h={Solana:{onClick:()=>e.push("preferences-solana"),icon:()=>{const e=(0,s.qYF)(r.$OA.SOLANA);return tt.createElement("img",{src:e,style:{width:"12px",height:"12px",marginRight:"8px"}})}},Ethereum:{onClick:()=>e.push("preferences-ethereum"),icon:()=>{const e=(0,s.qYF)(r.$OA.ETHEREUM);return tt.createElement("img",{src:e,style:{width:"12px",height:"12px",marginRight:"8px"}})}}};return(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Preferences"})}),[]),tt.createElement("div",null,tt.createElement(ke.U,{menuItems:g}),tt.createElement(ke.U,{menuItems:h}))}function ot({enabled:e,onSwitch:t}){return tt.createElement(lt,{enabled:e,onChange:()=>t(!e)})}function lt({enabled:e,onChange:t,disableUiState:n=!1}){const o=it();return tt.createElement(Qe.Z,{disableRipple:!0,disabled:n,checked:e,onChange:t,classes:{switchBase:o.switchBase,track:e?o.trackChecked:o.track,colorPrimary:n?o.disabled:o.colorPrimary}})}const it=(0,d.W2)((e=>({switchBase:{"&:hover":{backgroundColor:"transparent !important","@media (hover: none)":{backgroundColor:"transparent !important"}}},colorPrimary:{"&.Mui-checked":{color:e.custom.colors.brandColor}},disabled:{"&.Mui-checked":{color:`${e.custom.colors.brandColor} !important`,opacity:.5}},track:{},trackChecked:{backgroundColor:`${e.custom.colors.brandColor} !important`}}))),rt=({blockchain:e,publicKey:t,name:n,type:l})=>{const i=(0,be.HJ)(),c=(0,d.Pg)(),m=(0,s.G5b)(),[u,p]=(0,o.useState)(!1),[g,h]=(0,o.useState)(n),f=(0,E.sJ)((0,s.wFe)(t)),x=(0,s.sGt)(),y=(0,E.Zl)(s.otN);(0,o.useEffect)((()=>{(async()=>{let n="";try{n=await m.request({method:r.Hc8,params:[t,e]})}catch{n=(0,r.R1Z)(t)}h(n),i.setOptions({headerTitle:n})})()}),[]);const v=!!x.find((e=>e.publicKey===t)),b={"Wallet Address":{onClick:()=>(p(!0),setTimeout((()=>p(!1)),1e3),void navigator.clipboard.writeText(t)),detail:o.createElement(Xe.D,{tooltipOpen:u},o.createElement("div",{style:{display:"flex"}},o.createElement(ge.Z,{style:{color:c.custom.colors.secondary,marginRight:"8px"}},t.slice(0,4)+"..."+t.slice(t.length-4)),o.createElement(Ye.Z,{style:{width:"20px",color:c.custom.colors.icon}})))},"Rename Wallet":{onClick:()=>i.push("edit-wallets-rename",{publicKey:t,name:g,blockchain:e})}},k={"Show Private Key":{onClick:()=>i.push("show-private-key-warning",{publicKey:t})}},w={"Remove Wallet":{onClick:()=>{v||i.push("edit-wallets-remove",{blockchain:e,publicKey:t,name:n,type:l})},style:{color:c.custom.colors.negative,opacity:v?.6:1}}},C={"App Signing":{onClick:async()=>{await m.request({method:r.BPM,params:[t,!f]})},detail:o.createElement(ot,{enabled:!f,onSwitch:async()=>{await m.request({method:r.BPM,params:[t,!f]})}})}};return o.createElement("div",null,"dehydrated"===l?o.createElement("div",{style:{marginLeft:"16px",marginRight:"16px",marginBottom:"32px"}},o.createElement(Ee.N9,{icon:o.createElement(a.aN,null)}),o.createElement(ge.Z,{style:{color:c.custom.colors.fontColor,fontSize:"20px",fontWeight:500,textAlign:"center",marginLeft:"28px",marginRight:"28px",marginBottom:"16px"}},"Some more steps are needed to recover this wallet"),o.createElement(a.tf,{label:"Recover",onClick:()=>{i.push("add-connect-wallet",{blockchain:e,publicKey:t,isRecovery:!0})}})):null,o.createElement("div",null,o.createElement(ke.U,{menuItems:b})),"dehydrated"!==l?o.createElement(ke.U,{menuItems:C}):null,"hardware"!==l&&"dehydrated"!==l?o.createElement(ke.U,{menuItems:k}):null,o.createElement(ke.U,{menuItems:w}),o.createElement("div",{style:{padding:"16px"}},o.createElement(a.KM,{fullWidth:!0,label:v?"This is your primary wallet":"Set as primary",disabled:v||"dehydrated"===l,onClick:async()=>{await fetch(`${r.FvS}/users/activePubkey`,{method:"POST",body:JSON.stringify({publicKey:t}),headers:{"Content-Type":"application/json"}}),y((n=>n.map((n=>n.blockchain!==e?n:n.primary&&n.publicKey!==t?{...n,primary:!1}:n.publicKey===t?{...n,primary:!0}:n))))}})))};var at=n(69603),st=n(80162),ct=n(92655),dt=n(5530),mt=n(11259),ut=n(12354),pt=n(83993),gt=n(2784);const ht=(0,d.W2)((e=>({passwordField:{"& .MuiOutlinedInput-root":{"& fieldset":{border:`${e.custom.colors.borderFull}`},"&:hover fieldset":{border:`solid 2pt ${e.custom.colors.primaryButton}`}}},privateKeyField:{borderRadius:"12px",border:e.custom.colors.borderFull,"& .MuiOutlinedInput-root":{"& fieldset":{border:`solid 1pt ${e.custom.colors.border}`},"& textarea":{border:"none"},"&:hover fieldset":{border:`solid 1pt ${e.custom.colors.border}`},"&.Mui-focused fieldset":{border:`solid 1pt ${e.custom.colors.border} !important`}}},mnemonicInputRoot:{color:e.custom.colors.secondary,borderRadius:"8px",marginTop:"4px","& .MuiOutlinedInput-root":{backgroundColor:e.custom.colors.nav,borderRadius:"8px",height:"40px","& fieldset":{border:"none"}},"& .MuiInputBase-input":{color:e.custom.colors.fontColor,backgroundColor:e.custom.colors.nav,borderRadius:"8px",fontSize:"12px",fontWeight:700},"& .MuiInputAdornment-root":{color:e.custom.colors.secondary,fontWeight:500}},listRoot:{color:e.custom.colors.fontColor,padding:"0",margin:"0 8px",borderRadius:"4px",fontSize:"14px"},listItemRoot:{alignItems:"start",borderRadius:"4px",background:e.custom.colors.nav,padding:"8px",height:"56px",marginBottom:"1px",border:`${e.custom.colors.borderFull}`},listItemIconRoot:{minWidth:"inherit",height:"20px",width:"20px",marginRight:"8px"}})));function ft({publicKey:e}){const t=ht(),n=(0,s.G5b)(),l=(0,be.HJ)(),[i,c]=(0,o.useState)(""),[d,m]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=l.navButtonRight;return l.setOptions({headerTitle:"Show private key"}),()=>{l.setOptions({headerRight:e})}}),[]),gt.createElement("form",{noValidate:!0,onSubmit:async t=>{let o;t.preventDefault();try{o=await n.request({method:r.vOL,params:[i,e]})}catch(t){return console.error(t),void m(!0)}l.push("show-private-key",{privateKey:o})},style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},gt.createElement(v.Z,{sx:{margin:"32px 24px 0 24px"}},gt.createElement(Ee.N9,{style:{width:"40px",height:"40px",marginBottom:"24px"},icon:gt.createElement(a.aN,{fill:"#E95050",width:"40px",height:"40px"})}),gt.createElement(Ee.h4,{text:"Warning",style:{textAlign:"center"}}),gt.createElement(v.Z,{sx:{marginTop:"24px"}},gt.createElement(mt.Z,{className:t.listRoot},gt.createElement(ut.ZP,{className:t.listItemRoot},gt.createElement(pt.Z,{className:t.listItemIconRoot},gt.createElement(at.Z,{htmlColor:"#EF4444",style:{height:"20px",width:"20px"}})),"Backpack support will never ask for your private key."),gt.createElement(ut.ZP,{className:t.listItemRoot},gt.createElement(pt.Z,{className:t.listItemIconRoot},gt.createElement(dt.Z,{htmlColor:"#EF4444",style:{height:"20px",width:"20px"}})),"Never share your private key or enter it into an app or website."),gt.createElement(ut.ZP,{className:t.listItemRoot},gt.createElement(pt.Z,{className:t.listItemIconRoot},gt.createElement(ct.Z,{htmlColor:"#EF4444",style:{height:"20px",width:"20px"}})),"Anyone with your private key will have complete control of your account.")))),gt.createElement(v.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},gt.createElement(v.Z,{sx:{marginBottom:"8px"}},gt.createElement(a.oi,{autoFocus:!0,error:d,placeholder:"Password",inputProps:{name:"password"},value:i,type:"password",setValue:e=>c(e.target.value)})),gt.createElement(a.O3,{label:"Show private key",type:"submit",disabled:0===i.length})))}function xt({privateKey:e}){const t=(0,d.Pg)(),n=ht(),{close:l}=(0,ve.M$)(),i=(0,be.HJ)();return(0,o.useEffect)((()=>{i.setOptions({headerTitle:"Private key"})}),[]),gt.createElement(v.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},gt.createElement(v.Z,null,gt.createElement(v.Z,{sx:{margin:"32px 24px 0 24px"}},gt.createElement(Ee.N9,{icon:gt.createElement(a.tE,null),style:{width:"40px",height:"40px",marginBottom:"24px"}}),gt.createElement(Ee.h4,{text:"Private key",style:{textAlign:"center"}}),gt.createElement(Ee.MR,{style:{textAlign:"center",fontSize:"14px"}},"Never give out your private key")),gt.createElement(v.Z,{sx:{margin:"0 16px"}},gt.createElement(Ee.nv,{rows:3,readOnly:!0,value:e,rootClass:n.privateKeyField}),gt.createElement(v.Z,{sx:{marginTop:"4px"}},gt.createElement(Fe.qi,{text:e,icon:gt.createElement(st.Z,{style:{color:t.custom.colors.fontColor}}),style:{height:"50px",border:t.custom.colors.borderFull}})))),gt.createElement(v.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},gt.createElement(a.tf,{label:"Close",onClick:()=>l(),style:{border:t.custom.colors.borderFull,height:"50px"}})))}const yt=(0,d.W2)((e=>({addressButton:{padding:0,color:e.custom.colors.secondary,textTransform:"none",fontWeight:500,lineHeight:"24px",fontSize:"14px","&:hover":{backgroundColor:"transparent","& svg":{visibility:"visible"}}}})));function vt({wallet:e,style:t,buttonStyle:n,showIcon:l=!0}){const{setOpen:i}=function(){const e=(0,o.useContext)(Ot);if(null===e)throw new Error("Context not available");return e}();return o.createElement(bt,{wallet:e,onClick:e=>{e.stopPropagation(),i(!0)},style:t,buttonStyle:n,showIcon:l})}function bt({wallet:e,onClick:t,style:n,buttonStyle:l,showIcon:i=!0}){const r=yt(),c=(0,d.Pg)(),[m,u]=(0,o.useState)(!1),p=(0,s.qYF)(e.blockchain);return o.createElement("div",{style:{flex:1,display:"flex",justifyContent:"space-between",...n}},o.createElement(pe.Z,{disableRipple:!0,className:r.addressButton,onClick:t,style:{border:c.custom.colors.borderFull,background:c.custom.colors.nav,padding:"5px",paddingLeft:"8px",borderRadius:"30px",...l}},i?o.createElement("div",{style:{width:"15px",marginRight:"6px",display:"flex",flexDirection:"column",justifyContent:"center"}}," ",o.createElement(a.e4,{noSkeleton:!0,src:p,style:{width:"15px"}})):null,o.createElement(ge.Z,{style:{fontSize:"14px",fontWeight:500}},e.name),o.createElement(ce.Z,{style:{width:"18px",color:c.custom.colors.icon}})))}function Et({openDrawer:e,setOpenDrawer:t,filter:n}){const l=(0,d.Pg)();return o.createElement(ve.Gx,{openDrawer:e,setOpenDrawer:t,paperProps:{sx:{height:"90%",background:l.custom.colors.backgroundBackdrop}},backdropProps:{style:{opacity:.8,background:"#18181b"}}},o.createElement("div",{style:{height:"100%",background:l.custom.colors.backgroundBackdrop}},o.createElement(k.L,null,o.createElement(kt,{filter:n}))))}function kt({filter:e}){return o.createElement(be.I6,{initialRoute:{name:"root"},options:()=>({title:""})},o.createElement(be.y4,{name:"root",component:t=>o.createElement(wt,{filter:e,...t})}),o.createElement(be.y4,{name:"add-connect-wallet",component:e=>o.createElement(Re,e)}),o.createElement(be.y4,{name:"edit-wallets-wallet-detail",component:e=>o.createElement(rt,e)}),o.createElement(be.y4,{name:"edit-wallets-remove",component:e=>o.createElement(Ge,e)}),o.createElement(be.y4,{name:"edit-wallets-rename",component:e=>o.createElement(Je,e)}),o.createElement(be.y4,{name:"edit-wallets-add-connect-preview",component:e=>o.createElement(Te,e)}),o.createElement(be.y4,{name:"edit-wallets-blockchain-selector",component:e=>o.createElement(St,e)}),o.createElement(be.y4,{name:"create-or-import-mnemonic",component:e=>o.createElement(Le,e)}),o.createElement(be.y4,{name:"set-and-sync-mnemonic",component:e=>o.createElement(_e,e)}),o.createElement(be.y4,{name:"import-wallet",component:e=>o.createElement(Ze,e)}),o.createElement(be.y4,{name:"create-mnemonic",component:e=>o.createElement(Ae,e)}),o.createElement(be.y4,{name:"import-from-mnemonic",component:e=>o.createElement(Ke,e)}),o.createElement(be.y4,{name:"import-from-secret-key",component:e=>o.createElement(Ve,e)}),o.createElement(be.y4,{name:"show-private-key-warning",component:e=>o.createElement(ft,e)}),o.createElement(be.y4,{name:"show-private-key",component:e=>o.createElement(xt,e)}))}function wt({filter:e}){const t=(0,be.HJ)(),n=(0,s.rTu)(),l=(0,s.wUG)().filter(e||(()=>!0)),i=l.filter((e=>!e.isCold)),r=l.filter((e=>e.isCold)),a=(0,s.Jao)().map((e=>({...e,name:"",type:"dehydrated"})));return(0,o.useEffect)((()=>(t.setOptions({headerTitle:"Wallets",headerRight:o.createElement(Ct,null)}),()=>{t.setOptions({headerRight:null})})),[]),o.createElement(Tt,{activeWallet:n,activeWallets:i.concat(a),coldWallets:r})}function Ct(){const e=(0,d.Pg)(),{push:t}=(0,be.HJ)();return o.createElement(pe.Z,{onClick:()=>{t("edit-wallets-add-connect-preview")},disableElevation:!0,disableRipple:!0,style:{minWidth:"24px",width:"24px",height:"24px"}},o.createElement(de.Z,{style:{color:e.custom.colors.icon}}))}function St(){const e=(0,be.HJ)();return(0,s.fwt)(),(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Select a network"})}),[e]),o.createElement(v.Z,{style:{padding:"0 16px 16px",marginTop:12}},o.createElement(he.ZP,{container:!0,spacing:1.5},Object.entries(xe.q).filter((([,e])=>e.Enabled)).map((([t,n])=>o.createElement(he.ZP,{item:!0,xs:6},o.createElement(ye.f,{icon:o.createElement(n.Icon,null),text:n.Name,onClick:()=>(t=>{e.push("add-connect-wallet",{blockchain:t})})(t)}))))))}function Tt({activeWallet:e,activeWallets:t,coldWallets:n}){const{close:l}=(0,ve.M$)(),i=(0,s.G5b)(),a=(0,d.Pg)(),c=async e=>{await i.request({method:r.lgK,params:[e.publicKey.toString(),e.blockchain]})};return o.createElement("div",{style:{paddingTop:0,display:"flex",flexDirection:"column",height:"100%"}},o.createElement("div",{style:{padding:"16px",paddingTop:"0px",flex:1}},0===t.length?o.createElement("div",{style:{backgroundColor:a.custom.colors.nav,padding:"16px",borderRadius:"10px"}},o.createElement(ge.Z,{style:{color:a.custom.colors.icon,textAlign:"center",fontWeight:500}},"No active wallets found")):o.createElement(Rt,{wallets:t,clickWallet:async e=>{"dehydrated"!==e.type&&(await c(e),l())},style:{borderRadius:"10px",overflow:"hidden",marginLeft:0,marginRight:0},selectedWalletPublicKey:e.publicKey})),n.length>0?o.createElement("div",{style:{background:a.custom.colorsInverted.background,padding:"16px"}},o.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.createElement("div",{style:{marginBottom:"12px",display:"flex"}},o.createElement(ge.Z,{style:{fontWeight:500,color:a.custom.colorsInverted.fontColor,fontSize:"14px",lineHeight:"20px",display:"flex",flexDirection:"column",justifyContent:"center"}},"Disabled app signing"),o.createElement(fe.Z,{placement:"bottom",arrow:!0,title:"These wallets can't sign for apps.",componentsProps:{tooltip:{sx:{width:"250px",fontSize:"14px",bgcolor:a.custom.colorsInverted.copyTooltipColor,color:a.custom.colorsInverted.copyTooltipTextColor,"& .MuiTooltip-arrow":{color:a.custom.colorsInverted.copyTooltipColor}}}}},o.createElement(ue.Z,{style:{width:"16px",marginLeft:"5px",color:a.custom.colorsInverted.secondary}})))),o.createElement(Rt,{inverted:!0,wallets:n,clickWallet:async e=>{"dehydrated"!==e.type&&(await c(e),l())},style:{borderRadius:"10px",overflow:"hidden",marginLeft:0,marginRight:0},selectedWalletPublicKey:e.publicKey})):null)}function Rt({wallets:e,clickWallet:t,style:n,selectedWalletPublicKey:l,inverted:i}){return o.createElement(a.aV,{style:n,inverted:i},e.map(((n,l)=>{const r=0===l,a=l===e.length-1;return o.createElement(jt,{inverted:i,key:l,wallet:n,isSelected:!1,isFirst:r,isLast:a,onClick:t})})))}function jt({wallet:e,isSelected:t,isFirst:n,isLast:l,onClick:i,inverted:r}){const c=!!(0,s.sGt)().find((t=>t.publicKey===e.publicKey&&t.blockchain===e.blockchain)),m=(0,d.Pg)(),u=(0,be.HJ)(),{publicKey:p,name:g,blockchain:h,type:f}=e;return o.createElement(a.HC,{inverted:r,key:p.toString(),onClick:()=>i(e),isFirst:n,isLast:l,disableBottomBorder:!0,style:{padding:"12px",height:"72px",marginBottom:l?0:"8px",borderRadius:"10px",border:t?`solid 2px ${r?m.custom.colorsInverted.secondary:m.custom.colors.secondary}`:"dehydrated"===f?`solid 2px ${m.custom.colors.borderRedMed}`:c?"solid 2px linear-gradient(129.99deg, #3EECB8 0%, #A372FE 50%, #FE7D4A 100%), linear-gradient(0deg, #FFFFFF, #FFFFFF)":"none"},button:"dehydrated"!==f},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},o.createElement("div",{style:{display:"flex"}},o.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",width:"32px",height:"100%",marginRight:"8px"}},o.createElement(Zt,{blockchain:h,style:{maxWidth:"19px",marginLeft:"auto",marginRight:"auto"}})),o.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:"4px"}},o.createElement(Lt,{name:g,publicKey:p,type:f,isSelected:t,inverted:r,isPrimary:c}))),o.createElement("div",{style:{display:"flex"}},o.createElement("div",{style:{marginRight:"4px",display:"flex",flexDirection:"column",justifyContent:"center"}},"dehydrated"===f?o.createElement(Pt,{inverted:r,onClick:()=>{u.push("add-connect-wallet",{blockchain:e.blockchain,publicKey:e.publicKey,isRecovery:!0})}}):o.createElement(Nt,{inverted:r,onClick:async()=>{await navigator.clipboard.writeText(p)}})),o.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},o.createElement(Ft,{inverted:r,onClick:()=>{u.push("edit-wallets-wallet-detail",{...e})}})))))}function It({onClick:e,inverted:t,sx:n,children:l}){const i=(0,d.Pg)();return o.createElement(pe.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",sx:{padding:"4px 12px",textTransform:"none",color:t?i.custom.colorsInverted.fontColor:i.custom.colors.fontColor,backgroundColor:t?i.custom.colorsInverted.bg2:i.custom.colors.bg2,"&:hover":{backgroundColor:t?`${i.custom.colorsInverted.walletCopyButtonHover} !important`:`${i.custom.colors.walletCopyButtonHover} !important`},...n},onClick:e},l)}function Nt({onClick:e,inverted:t}){const[n,l]=(0,o.useState)(!1);return o.createElement(It,{onClick:t=>{t.stopPropagation(),l(!0),setTimeout((()=>l(!1)),1e3),e()},inverted:t},o.createElement(o.Fragment,null,n?"Copied!":"Copy"))}function Ft({onClick:e,inverted:t}){const n=(0,d.Pg)();return o.createElement(It,{onClick:t=>{t.stopPropagation(),e()},inverted:t,sx:{padding:"4px",minWidth:"32px"}},o.createElement(me.Z,{style:{color:n.custom.colors.icon}}))}function Pt({onClick:e,inverted:t}){return o.createElement(It,{onClick:t=>{t.stopPropagation(),e()},inverted:t},o.createElement(o.Fragment,null,"Recover"))}function Lt({publicKey:e,name:t,type:n,isSelected:l=!1,inverted:i,isPrimary:a}){const s=(0,d.Pg)();return o.createElement("div",null,o.createElement("div",{style:{display:"flex"}},o.createElement(ge.Z,{style:{fontSize:"16px",fontWeight:l?600:500,color:"dehydrated"===n?s.custom.colors.negative:""}},"dehydrated"===n?"Not recovered":t),"dehydrated"!==n&&a?o.createElement(ge.Z,{style:{marginLeft:"4px",fontSize:"14px",fontWeight:500,color:i?s.custom.colorsInverted.secondary:s.custom.colors.secondary,display:"flex",flexDirection:"column",justifyContent:"center"}},"(primary)"):null),o.createElement("div",{style:{display:"flex",height:"24px"}},o.createElement(At,{type:n,fill:i?l?s.custom.colorsInverted.secondary:void 0:l?s.custom.colors.secondary:void 0}),o.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},o.createElement(ge.Z,{style:{color:i?s.custom.colorsInverted.secondary:s.custom.colors.secondary,fontSize:"14px"}},(0,r.R1Z)(e)))))}function At({type:e,fill:t}){const n={padding:"5px"};switch(e){case"imported":return o.createElement(a.Dx,{fill:t,style:n});case"hardware":return o.createElement(a.T2,{fill:t,style:n});case"derived":return o.createElement(a.bD,{fill:t,style:n});default:return null}}function Bt({type:e}){const t=(0,d.Pg)();return"derived"===e?o.createElement(o.Fragment,null):o.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"2px",paddingBottom:"2px",backgroundColor:t.custom.colors.bg2,height:"20px",borderRadius:"10px"}},o.createElement(ge.Z,{style:{color:t.custom.colors.fontColor,fontSize:"12px",lineHeight:"16px",fontWeight:600}},"imported"===e?"IMPORTED":"HARDWARE"))}function Zt({blockchain:e,style:t}){const n=(0,s.qYF)(e);return o.createElement("img",{src:n,style:t})}const Ot=o.createContext(null);function $t({children:e}){const[t,n]=(0,o.useState)(!1);return o.createElement(Ot.Provider,{value:{open:t,setOpen:n}},o.createElement(o.Fragment,null,e,o.createElement(Et,{openDrawer:t,setOpenDrawer:n})))}var Dt=n(90454),zt=n(57310),Mt=n(62267),_t=n(96027),Ut=n(65154),Kt=n(49565),Wt=n(14117);const qt=(0,d.W2)((e=>({blockchainLogo:{width:"12px",borderRadius:"2px",color:e.custom.colors.secondary},blockchainCard:{backgroundColor:"inherit",marginBottom:"12px",marginLeft:"12px",marginRight:"12px",borderRadius:"12px",border:e.custom.colors.borderFull},cardHeaderAvatar:{display:"flex",justifyContent:"center",flexDirection:"column"},cardHeaderRoot:{padding:"6px",paddingLeft:"16px",paddingRight:"16px",height:"36px",width:"100%"},cardHeaderTitle:{fontWeight:500,fontSize:"14px"},cardHeaderContent:{color:e.custom.colors.fontColor},cardContentRoot:{padding:"0 !important"},cardListRoot:{padding:"0 !important",height:"100%"},tokenListItem:{borderTop:`solid 1pt ${e.custom.colors.border}`,backgroundColor:`${e.custom.colors.nav} !important`,paddingTop:0,paddingBottom:0,paddingLeft:"12px",paddingRight:"12px",padding:0,height:"68px"},balancesTableCellContainer:{width:"100%",height:"100%",display:"flex"},tokenListItemContent:{color:e.custom.colors.fontColor,flex:1,paddingTop:"10px",paddingBottom:"10px"},tokenListItemRow:{display:"flex",justifyContent:"space-between"},logoIcon:{borderRadius:"22px",width:"44px",height:"44px"},tokenListItemIcon:{paddingTop:"12px",paddingBottom:"12px",marginRight:"12px"},tokenName:{height:"24px",fontWeight:500,fontSize:"16px",maxWidth:"200px",overflow:"hidden",color:e.custom.colors.fontColor,lineHeight:"24px"},tokenAmount:{fontWeight:500,fontSize:"14px",color:e.custom.colors.secondary,lineHeight:"20px"},tokenBalance:{fontWeight:500,fontSize:"16px",color:e.custom.colors.fontColor,lineHeight:"24px"},tokenBalanceChangeNeutral:{fontWeight:500,fontSize:"14px",color:e.custom.colors.secondary,float:"right",lineHeight:"20px"},tokenBalanceChangePositive:{fontWeight:500,fontSize:"14px",color:e.custom.colors.positive,float:"right",lineHeight:"20px"},tokenBalanceChangeNegative:{fontWeight:500,fontSize:"14px",color:e.custom.colors.negative,float:"right",lineHeight:"20px"},tokenListItemIconRoot:{minWidth:"44px"},expand:{width:"18px",color:e.custom.colors.secondary}})));function Ht({props:e}){const{icon:t,title:n,subtitle:l,usdValue:i,balanceChange:a}=e,s=qt(),c=(a??0)>.004?"positive":(a??0)<-.004?"negative":"neutral",d="positive"===c?o.createElement(ge.Z,{className:s.tokenBalanceChangePositive},"+",(0,r.gCK)(a.toLocaleString())):"negative"===c?o.createElement(ge.Z,{className:s.tokenBalanceChangeNegative},(0,r.gCK)(a.toLocaleString())):null;return o.createElement("div",{className:s.balancesTableCellContainer},t?o.createElement(pt.Z,{className:s.tokenListItemIcon,classes:{root:s.tokenListItemIconRoot}},o.createElement(on,{src:t,className:s.logoIcon,onError:e=>{e.currentTarget.src=r.rId}})):null,o.createElement("div",{className:s.tokenListItemContent},o.createElement("div",{className:s.tokenListItemRow},o.createElement(ge.Z,{className:s.tokenName},n),o.createElement(ge.Z,{className:s.tokenBalance},i?(0,r.gCK)(i):"-")),o.createElement("div",{className:s.tokenListItemRow},l?o.createElement(ge.Z,{className:s.tokenAmount},l):null,d,i?null:o.createElement(ge.Z,{className:s.tokenBalanceChangeNeutral},"-"))))}function Vt({style:e,children:t}){const n=qt();return o.createElement(Gt,null,o.createElement(_t.Z,{className:n.blockchainCard,elevation:0,style:e},t))}function Gt(e){const[t,n]=(0,o.useState)(!0);return o.createElement(Jt.Provider,{value:{showContent:t,setShowContent:n}},e.children)}const Jt=o.createContext(null);function Yt(){const e=o.useContext(Jt);if(null===e)throw new Error("Context not available");return e}function Xt({disableToggle:e,wallet:t}){const{showContent:n,setShowContent:l}=Yt();return o.createElement(Qt,{blockchain:t.blockchain,disableToggle:e,showContent:n,setShowContent:l})}function Qt({blockchain:e,disableToggle:t,showContent:n,setShowContent:l}){const i=qt(),a=(0,d.Pg)(),c=(0,r.LFn)(e),m=(0,s.qYF)(e),u=(0,E.sJ)(s.cL2),p=(0,s.rTu)();return o.createElement("div",{style:{width:"100%",borderRadius:0,padding:0,backgroundColor:a.custom.colors.nav}},o.createElement(Ut.Z,{avatar:m?o.createElement(on,{className:i.blockchainLogo,src:m}):void 0,title:o.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.createElement("div",{style:{display:"flex",width:"100%"}},o.createElement(ge.Z,{style:{fontWeight:500,lineHeight:"24px",fontSize:"14px",display:"flex",justifyContent:"center",flexDirection:"column"}},c),o.createElement(vt,{showIcon:!1,wallet:p,buttonStyle:{border:void 0,padding:0,marginLeft:"5px"}})),u?o.createElement(pe.Z,{disableRipple:!0,style:{width:"18px",minWidth:"18px",marginLeft:"8px",padding:0},onClick:()=>!t&&l(!n)},n?o.createElement(Mt.Z,{className:i.expand}):o.createElement(ce.Z,{className:i.expand})):null),classes:{root:`${i.cardHeaderRoot}`,content:i.cardHeaderContent,title:i.cardHeaderTitle,avatar:i.cardHeaderAvatar}}))}function en({style:e,children:t}){const n=qt(),{showContent:l}=Yt();return o.createElement(Kt.Z,{classes:{root:n.cardContentRoot},style:e},o.createElement(mt.Z,{style:{display:l?void 0:"none"},classes:{root:n.cardListRoot}},t))}function tn({id:e,props:t,style:n,children:l,childrenRenderer:i,onClick:r}){return o.createElement(nn,{id:e,props:t,style:n,children:l,childrenRenderer:i,onClick:r})}function nn({style:e,children:t,onClick:n}){const l=qt();return o.createElement(Wt.Z,{disableRipple:!0,className:l.tokenListItem,onClick:n,style:e},t)}function on(e){return o.createElement("img",{...e,onError:({currentTarget:t})=>{t.onerror=e.onError||null,t.src=e.src},src:(0,r.fi)(e.src)})}var ln=n(2784);const rn=64,an=(0,zt.p)({width:rn,height:rn,cornerRadius:15,cornerSmoothing:.8}),sn=(0,d.W2)((e=>({pluginIconRoot:{minWidth:rn,marginLeft:"auto",marginRight:"auto"},pluginIconButton:{width:rn,height:rn,overflow:"hidden",clipPath:`path('${an}')`,padding:0,backgroundColor:e.custom.colors.nav,"&:hover":{opacity:d.IP}},pluginTitle:{fontWeight:500,color:e.custom.colors.fontColor,fontSize:"12px",lineHeight:"16px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})));function cn(){return ln.createElement(dn,null)}function dn(){const e=(0,E.sJ)(s.cL2),t=(0,s.rTu)(),n=(0,s.QCC)(),o=n.filter((e=>e.blockchain===r.$OA.SOLANA)),l=(0,s.VzB)(),[i,,c]=(0,s.U2V)((0,E.k9)(o.map((e=>(0,s.G4p)({publicKey:e.publicKey,connectionUrl:l})))),[],[l]);if(1===n.length){const e=n[0];if(e.blockchain!==r.$OA.SOLANA)return ln.createElement(a.ub,{icon:e=>ln.createElement(m.Z,e),title:`${xe.q[e.blockchain].Name} xNFTs not yet supported`,subtitle:"Switch to Solana to use xNFTs",buttonText:"",onClick:()=>{}})}const d=i.reduce(((e,t)=>t.length+e),0);return c||0!==d?ln.createElement(ln.Fragment,null,o.map((e=>ln.createElement(mn,{key:e.publicKey,wallet:e})))):ln.createElement(a.ub,{icon:e=>ln.createElement(m.Z,e),title:"No xNFTs",subtitle:"Get started with your first xNFT",buttonText:"Browse xNFTs",onClick:()=>window.open(r.pPQ),header:e?null:ln.createElement(Qt,{blockchain:t.blockchain,showContent:!0,setShowContent:()=>{}})})}function mn({wallet:e}){const t=(0,d.Pg)(),n=(0,s.VzB)(),[o,,l]=(0,s.U2V)((0,s.G4p)({publicKey:e.publicKey,connectionUrl:n}),[],[e]);return l||0!==o.length?ln.createElement("div",{style:{marginLeft:"12px",marginRight:"12px",marginBottom:"12px",borderRadius:"10px",overflow:"hidden",border:`${t.custom.colors.borderFull}`}},ln.createElement(Gt,null,ln.createElement(un,{isLoading:l,plugins:o}))):null}function un({isLoading:e,plugins:t}){const n=(0,d.Pg)(),{isXs:o}=(0,a.kC)(),l=(0,s.KPt)(),{showContent:i}=Yt(),r=o?4:6;return ln.createElement(ln.Fragment,null,i?ln.createElement("div",{style:{paddingTop:"18px",paddingBottom:"18px",paddingLeft:"10px",paddingRight:"10px",background:n.custom.colors.nav,borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px"}},ln.createElement(he.ZP,{container:!0},e?Array.from(Array(r).keys()).map(((e,t)=>ln.createElement(he.ZP,{item:!0,key:t,xs:o?3:2,style:{marginTop:t>=r?"24px":0}},ln.createElement(fn,null)))):ln.createElement(ln.Fragment,null,ln.createElement(pn,{isXs:o}),t.map(((e,t)=>ln.createElement(he.ZP,{item:!0,key:e.url,xs:o?3:2,style:{marginTop:t+1>=r?"24px":0}},ln.createElement(gn,{plugin:e,onClick:()=>(e=>{l(e.install.account.xnft.toString())})(e)}))))))):null)}function pn({isXs:e}){const t=(0,d.Pg)();return ln.createElement(he.ZP,{item:!0,key:"xnft-library",xs:e?3:2},ln.createElement(hn,{title:"xNFT.gg ↗",iconStyle:{padding:14,background:t.custom.colorsInverted.nav},iconUrl:`${r.pPQ}/logo.svg`,onClick:()=>window.open(r.pPQ,"_blank")}))}function gn({plugin:e,onClick:t}){return ln.createElement(hn,{title:e.title,iconUrl:e.iconUrl,onClick:t})}function hn({title:e,iconStyle:t,iconUrl:n,onClick:o}){const l=sn();return ln.createElement("div",{style:{width:"72px",height:"88px",display:"flex",justifyContent:"space-between",flexDirection:"column",marginLeft:"auto",marginRight:"auto"}},ln.createElement(pe.Z,{variant:"contained",disableElevation:!0,className:l.pluginIconButton,onClick:()=>o(),classes:{root:l.pluginIconRoot}},ln.createElement(a.e4,{src:n,style:{width:rn,height:rn,...t??{}}})),ln.createElement(ge.Z,{className:l.pluginTitle},e))}function fn(){return ln.createElement("div",{style:{width:"72px",height:"88px",display:"flex",justifyContent:"space-between",flexDirection:"column",marginLeft:"auto",marginRight:"auto"}},ln.createElement(Dt.Z,{height:rn,width:rn,sx:{transform:"none",clipPath:`path('${an}')`,marginLeft:"auto",marginRight:"auto",background:"rgba(0,0,0,0.15)"}}),ln.createElement(Dt.Z,{height:12,width:48,sx:{transform:"none",marginLeft:"auto",marginRight:"auto",background:"rgba(0,0,0,0.15)"}}))}var xn=n(83596),yn=(n(85890),n(52322)),vn=n(44201),bn=n(82488),En=n(66579),kn=n(27352),wn=n(55799);const Cn=6e4,Sn=(0,kn.Ps)("\n  query GetBalanceSummary($address: String!, $providerId: ProviderID!) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        balances {\n          id\n          aggregate {\n            id\n            percentChange\n            value\n            valueChange\n          }\n        }\n      }\n    }\n  }\n"),Tn=e=>(0,yn.jsx)(vn.SV,{fallbackRender:e=>(0,yn.jsx)(bn.q,{children:JSON.stringify(e.error)}),children:(0,yn.jsx)(o.Suspense,{fallback:(0,yn.jsx)(En.e,{}),children:(0,yn.jsx)(Rn,{...e})})});function Rn({pollingInterval:e,style:t}){const n=(0,s.rTu)(),{data:l}=(0,wn.C)(null!=e?e:Cn,Sn,{variables:{address:n.publicKey,providerId:n.blockchain.toUpperCase()}}),i=(0,o.useMemo)((()=>{var e,t,n,o;return null!==(o=null===(n=null===(t=null===(e=l.user)||void 0===e?void 0:e.wallet)||void 0===t?void 0:t.balances)||void 0===n?void 0:n.aggregate)&&void 0!==o?o:{percentChange:0,value:0,valueChange:0}}),[l.user]);return(0,yn.jsx)(En.G,{...i,style:{marginTop:24,...t}})}n(14499);var jn=n(36734),In=n(15890),Nn=n(19486),Fn=n(79632),Pn=n(38942),Ln=n(72967),An=n(87048),Bn=n(11314),Zn=n(95820),On=n(56249),$n=n(28286);const Dn=(0,kn.Ps)("\n  mutation SendFriendRequest($otherUserId: String!, $accept: Boolean!) {\n    sendFriendRequest(otherUserId: $otherUserId, accept: $accept)\n  }\n");function zn({onAccept:e,onDecline:t,remoteUserId:n}){const l=(0,Bn.v)(),{uuid:i}=(0,s.aFb)(),r=(0,s.fAp)({userId:n}),a=(0,s.awr)(),[c]=(0,jn.D)(Dn),d=(0,o.useCallback)((async t=>{t.stopPropagation(),await c({variables:{accept:!0,otherUserId:n}}),e&&await e(i,n),await a({userId:n,friendshipValue:{requested:!1,areFriends:!0,remoteRequested:!1}})}),[e,n,c,a,i]),m=(0,o.useCallback)((async e=>{e.stopPropagation(),await c({variables:{accept:!1,otherUserId:n}}),t&&await t(i,n),await a({userId:n,friendshipValue:{requested:!1,areFriends:!1,remoteRequested:!1}})}),[t,n,c,a,i]);return(null==r?void 0:r.remoteRequested)&&!(null==r?void 0:r.areFriends)?(0,yn.jsxs)(An.XStack,{alignItems:"center",gap:10,marginTop:5,children:[(0,yn.jsx)($n.V,{content:"Accept",contentStyle:{color:l.custom.colors.blue},onClick:d}),(0,yn.jsx)($n.V,{content:"Decline",onClick:m})]}):null}function Mn({notification:e,onAcceptFriendRequest:t,onClick:n,onDeclineFriendRequest:o}){return"friend_requests"===e.source||"friend_requests_accept"===e.source?(0,yn.jsx)(Un,{notification:e,onClick:n,onAcceptFriendRequest:t,onDeclineFriendRequest:o}):e.app?(0,yn.jsx)(_n,{notification:e,onClick:n}):null}function _n({notification:e,onClick:t}){const n=(0,Bn.v)(),l=(0,o.useCallback)((()=>t?t(e):{}),[e,t]);return(0,yn.jsx)(Zn._,{style:{backgroundColor:e.viewed?"$nav":n.custom.colors.unreadBackground,hoverTheme:!0},icon:(0,yn.jsx)(On.O,{image:e.app.image,size:44}),onClick:l,children:(0,yn.jsxs)(An.XStack,{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,yn.jsx)(bn.q,{color:"$fontColor",fontSize:"$base",children:e.app.name}),(0,yn.jsx)(bn.q,{color:"$secondary",fontSize:"$sm",children:(0,r.IAd)(e.timestamp)})]})})}function Un({notification:e,onAcceptFriendRequest:t,onClick:n,onDeclineFriendRequest:l}){const a=(0,Bn.v)(),s=(0,i.tR)({remoteUserId:e.body.from}),c=(0,o.useCallback)((()=>n?n(e):{}),[e,n]);return(0,yn.jsx)(Zn._,{style:{backgroundColor:e.viewed?"$nav":a.custom.colors.unreadBackground,cursor:"pointer",hoverTheme:!0},icon:(0,yn.jsx)(On.O,{image:null==s?void 0:s.image,radius:22,size:44}),onClick:c,children:(0,yn.jsxs)(An.YStack,{flex:1,children:[(0,yn.jsxs)(An.XStack,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4,children:[(0,yn.jsx)(bn.q,{color:"$fontColor",fontSize:"$base",children:e.title.replace("Accepted","accepted")}),(0,yn.jsx)(bn.q,{color:"$secondary",fontSize:"$sm",children:(0,r.IAd)(e.timestamp)})]}),(0,yn.jsxs)(An.YStack,{children:[(0,yn.jsxs)(bn.q,{color:"$secondary",fontSize:"$sm",maxWidth:"90%",numberOfLines:1,ellipsizeMode:"tail",children:["@",s.username]}),(0,yn.jsx)(zn,{onAccept:t,onDecline:l,remoteUserId:e.body.from})]})]})})}function Kn({notificationGroups:e,onAcceptFriendRequest:t,onDeclineFriendRequest:n,onItemClick:l}){const i=(0,o.useCallback)((e=>e.id),[]),r=(0,o.useCallback)((({item:e,section:o,index:i})=>{const r=0===i,a=i===o.data.length-1;return(0,yn.jsx)(Fn.a,{disableBottomRadius:!a,disableTopRadius:!r,children:(0,yn.jsx)(Mn,{notification:e,onClick:l,onAcceptFriendRequest:t,onDeclineFriendRequest:n})})}),[t,n,l]),a=(0,o.useCallback)((({section:e})=>(0,yn.jsx)(Pn.g,{style:{marginBottom:0,marginTop:16},title:e.date})),[]);return(0,yn.jsx)(Nn.Z,{style:{marginHorizontal:16,marginBottom:24},stickySectionHeadersEnabled:!1,showsVerticalScrollIndicator:!1,sections:e,keyExtractor:i,renderItem:r,renderSectionHeader:a,SectionSeparatorComponent:Ln.A,ItemSeparatorComponent:An.Separator})}const Wn=3e4,qn=(0,kn.Ps)("\n  query GetNotifications($filters: NotificationFiltersInput) {\n    user {\n      id\n      notifications(filters: $filters) {\n        edges {\n          node {\n            id\n            app {\n              id\n              address\n              image\n              name\n            }\n            body\n            dbId\n            source\n            timestamp\n            title\n            viewed\n          }\n        }\n      }\n    }\n  }\n"),Hn=(0,kn.Ps)("\n  mutation MarkNotificationsAsRead($ids: [Int!]!) {\n    markNotificationsAsRead(ids: $ids)\n  }\n"),Vn=({loaderComponent:e,...t})=>(0,yn.jsx)(o.Suspense,{fallback:e,children:(0,yn.jsx)(Gn,{...t})});function Gn({onAcceptFriendRequest:e,onDeclineFriendRequest:t,onItemClick:n,pollingInterval:l}){const[,i]=(0,s.O4c)(),[a]=(0,jn.D)(Hn),{data:c}=(0,wn.C)(null!=l?l:Wn,qn,{fetchPolicy:"cache-and-network",variables:{filters:{limit:50,sortDirection:xn.Sr.Desc}}}),d=(0,o.useMemo)((()=>{var e,t,n;return null!==(n=null===(t=null===(e=c.user)||void 0===e?void 0:e.notifications)||void 0===t?void 0:t.edges.map((e=>e.node)))&&void 0!==n?n:[]}),[c.user]),m=(0,o.useMemo)((()=>function(e){const t=[],n=e.map((e=>JSON.stringify(e.body))),o=e.slice().filter(((e,t)=>"friend_requests"!==e.source||n.indexOf(JSON.stringify(e.body))===t));for(let e=0;e<o.length;e++){const n=(0,r.p6d)(new Date(o[e].timestamp));0===t.length||t[t.length-1].date!==n?t.push({date:n,data:[o[e]]}):t[t.length-1].data.push(o[e])}return t}(d)),[d]);return(0,In.useAsyncEffect)((async()=>{const e=d.reduce(((e,t)=>(t.viewed||e.push(t.dbId),e)),[]);0!==e.length&&(await a({variables:{ids:e}}),i(0))}),[a,d,i]),(0,yn.jsx)(Kn,{notificationGroups:m,onItemClick:n,onAcceptFriendRequest:e,onDeclineFriendRequest:t})}var Jn=n(65519),Yn=n(11230),Xn=n(40342),Qn=n(25686),eo=n(87665),to=n(45960),no=n(61034),oo=n(762);const lo=(0,kn.Ps)("\n  query GetTokenListEntryLogo($providerId: ProviderID!, $filters: TokenListEntryFiltersInput) {\n    tokenList(providerId: $providerId, filters: $filters) {\n      id\n      logo\n    }\n  }\n"),io=Xn.Z.create({lucideContainer:{display:"flex",alignItems:"center",justifyContent:"center"},swapContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}}),ro=({containerSize:e,size:t})=>(0,yn.jsx)(Qn.Z,{style:[io.lucideContainer,{height:null!=e?e:t,width:null!=e?e:t}],children:(0,yn.jsx)(to.E,{color:"$negative",size:t})}),ao=({containerSize:e,size:t})=>(0,yn.jsx)(Qn.Z,{style:[io.lucideContainer,{height:null!=e?e:t,width:null!=e?e:t}],children:(0,yn.jsx)(no.J,{color:"$positive",size:t})}),so=({containerSize:e,size:t})=>(0,yn.jsx)(Qn.Z,{style:[io.lucideContainer,{height:null!=e?e:t,width:null!=e?e:t}],children:(0,yn.jsx)(oo.X,{color:"$negative",size:t})}),co=({mint:e,size:t})=>(0,yn.jsx)(On.O,{image:e?`https://swr.xnfts.dev/nft-data/metaplex-nft/${e}/image`:r.Z8B,radius:8,size:t}),mo=({containerSize:e,size:t,symbols:n})=>{var o,l,i,a;const c=(0,s.rTu)(),{data:d}=(0,eo.kJ)(lo,{variables:{providerId:c.blockchain.toUpperCase(),filters:{symbols:n}}});return(0,yn.jsxs)(Qn.Z,{style:[io.swapContainer,{width:e,height:e}],children:[(0,yn.jsx)(On.O,{style:{marginRight:10,marginBottom:15},radius:"$circular",size:t,image:null!==(l=null===(o=d.tokenList[0])||void 0===o?void 0:o.logo)&&void 0!==l?l:r.rId}),(0,yn.jsx)(On.O,{style:{marginLeft:-15,zIndex:10},radius:"$circular",size:t,image:null!==(a=null===(i=d.tokenList[1])||void 0===i?void 0:i.logo)&&void 0!==a?a:r.rId})]})},uo=({size:e,symbol:t})=>{var n,o;const l=(0,s.rTu)(),{data:i}=(0,eo.kJ)(lo,{variables:{providerId:l.blockchain.toUpperCase(),filters:{symbols:[t]}}});return(0,yn.jsx)(On.O,{size:e,radius:"$circular",image:null!==(o=null===(n=i.tokenList[0])||void 0===n?void 0:n.logo)&&void 0!==o?o:r.rId})};function po(e,t){try{const[n,...o]=e.split(" ");return n.includes(".")?`${parseFloat(n).toFixed(null!=t?t:5).replace(/0+$/,"")} ${o.join(" ")}`:e}catch{return e}}function go({blockchain:e,onClick:t,transaction:n}){var l;const i=(0,s.rTu)(),a=(0,s.y20)(e.toLowerCase()),c=(0,s.sAm)(e.toLowerCase()),d=function(e,t){var n,l;const i=null!==(l=null===(n=t.description)||void 0===n?void 0:n.replace(/\.$/,""))&&void 0!==l?l:"";switch(t.type){case Yn.TransactionType.BURN:case Yn.TransactionType.BURN_NFT:return function(e,t){var n,o;try{const l=t.split("burned ")[1],[i,...r]=l.split(" ");return{card:{tl:"Burned",tr:`-${l}`,icon:(0,yn.jsx)(ro,{size:30,containerSize:44})},details:{amount:i,icon:(0,yn.jsx)(ro,{size:100}),item:r.join(" "),nft:null!==(o=null===(n=e.nfts)||void 0===n?void 0:n[0])&&void 0!==o?o:void 0,title:"Burned NFT"}}}catch{return null}}(t,i);case Yn.TransactionType.NFT_LISTING:return function(e,t){var n,o,l,i;try{const a=t.split("listed ")[1],[s,c]=a.split(" for "),[d,m]=c.split(" on ");return{card:{tl:s,tr:po(d),bl:`Listed on ${(0,r.Au0)(m)}`,icon:(0,yn.jsx)(co,{mint:null!==(o=null===(n=e.nfts)||void 0===n?void 0:n[0])&&void 0!==o?o:void 0,size:44})},details:{amount:d,item:s,nft:null!==(i=null===(l=e.nfts)||void 0===l?void 0:l[0])&&void 0!==i?i:void 0,title:"Listed NFT"}}}catch{return null}}(t,i);case Yn.TransactionType.NFT_CANCEL_LISTING:return function(e,t){var n,o,l,i;try{const a=t.split("cancelled ")[1],[s,c]=a.split(" listing for "),[d,m]=c.split(" on ");return{card:{tl:d,tr:po(s),bl:`Canceled listing on ${(0,r.Au0)(m)}`,icon:(0,yn.jsx)(co,{mint:null!==(o=null===(n=e.nfts)||void 0===n?void 0:n[0])&&void 0!==o?o:void 0,size:44})},details:{amount:s,item:d,nft:null!==(i=null===(l=e.nfts)||void 0===l?void 0:l[0])&&void 0!==i?i:void 0,title:"Canceled NFT Listing"}}}catch{return null}}(t,i);case Yn.TransactionType.NFT_MINT:return function(e,t){var n,o,l,i;try{const a=t.split("minted ")[1],[s,c]=a.split(" for "),[d,m]=c.split(" on ");return{card:{tl:s,tr:`-${po(d)}`,bl:`Minted on ${(0,r.Au0)(m)}`,icon:(0,yn.jsx)(co,{mint:null!==(o=null===(n=e.nfts)||void 0===n?void 0:n[0])&&void 0!==o?o:void 0,size:44})},details:{amount:d,item:s,nft:null!==(i=null===(l=e.nfts)||void 0===l?void 0:l[0])&&void 0!==i?i:void 0,title:"Minted NFT"}}}catch{return null}}(t,i);case Yn.TransactionType.NFT_SALE:return function(e,t,n){var o,l,i,a;try{const[s,c]=n.split(" sold "),[d,m]=c.split(" to "),[u,p]=m.split(" for "),[g,h]=p.split(" on ");return{card:{tl:d,tr:po(g),bl:`${e===s?"Sold":"Bought"} on ${(0,r.Au0)(h)}`,icon:(0,yn.jsx)(co,{mint:null!==(l=null===(o=t.nfts)||void 0===o?void 0:o[0])&&void 0!==l?l:void 0,size:44})},details:{amount:g,item:d,nft:null!==(a=null===(i=t.nfts)||void 0===i?void 0:i[0])&&void 0!==a?a:void 0,title:(e===s?"Sold":"Bought")+" NFT"}}}catch(e){return null}}(e,t,i);case Yn.TransactionType.SWAP:return function(e){try{const t=e.split("swapped ")[1].split(" for "),n=t.map((e=>e.split(" ")));return{card:{tl:`${n[0][1]} -> ${n[1][1]}`,tr:`+${po(t[1])}`,br:`-${po(t[0])}`,icon:(0,yn.jsx)(o.Suspense,{children:(0,yn.jsx)(mo,{containerSize:44,size:24,symbols:[n[0][1],n[1][1]]})})},details:{icon:(0,yn.jsx)(o.Suspense,{children:(0,yn.jsx)(mo,{containerSize:100,size:75,symbols:[n[0][1],n[1][1]]})}),title:`Swapped ${n[0][1]} for ${n[1][1]}`}}}catch{return null}}(i);case Yn.TransactionType.TRANSFER:return function(e,t){try{const[n,l]=t.split(" transferred "),[i,a]=l.split(" to "),s=n===e?"Sent":"Received";return{card:{tl:s,tr:`${"Sent"===s?"-":"+"}${po(i)}`,bl:"Sent"===s?`To: ${(0,r.R1Z)(a)}`:`From: ${(0,r.R1Z)(n)}`,icon:(0,yn.jsx)(o.Suspense,{children:(0,yn.jsx)(uo,{size:44,symbol:i.split(" ")[1]})})},details:{amount:i,icon:(0,yn.jsx)(o.Suspense,{children:(0,yn.jsx)(uo,{size:100,symbol:i.split(" ")[1]})}),title:"Transfer"}}}catch{return null}}(e,i);case Yn.TransactionType.UPGRADE_PROGRAM_INSTRUCTION:return function(e){return{card:{tl:"Program Upgrade",tr:"",bl:e.source?(0,r.Au0)(e.source):void 0},details:{title:"Program Upgraded"}}}(t);default:return null}}(i.publicKey,n),m=(0,o.useCallback)((()=>{var e;return t?t(n,(0,r.yUu)(c,null!==(e=n.hash)&&void 0!==e?e:"",a),d):{}}),[a,d,c,t,n]),u=n.error?(0,yn.jsx)(so,{size:30,containerSize:44}):null!==(l=null==d?void 0:d.card.icon)&&void 0!==l?l:(0,yn.jsx)(ao,{size:30,containerSize:44});return(0,yn.jsx)(Zn._,{style:{backgroundColor:"$nav",cursor:"pointer",hoverTheme:!0},icon:u,onClick:m,children:(0,yn.jsx)(ho,{blockchain:e,details:d,transaction:n})})}function ho({blockchain:e,details:t,transaction:n}){var o,l,i,r;const a=(null===(o=null==t?void 0:t.card.br)||void 0===o?void 0:o.startsWith("+"))?"$positive":(null===(l=null==t?void 0:t.card.br)||void 0===l?void 0:l.startsWith("-"))?"$negative":"$secondary",s=(null==t?void 0:t.card.tr.startsWith("+"))?"$positive":(null==t?void 0:t.card.tr.startsWith("-"))?"$negative":void 0;return t?(0,yn.jsxs)(An.YStack,{display:"flex",flex:1,children:[(0,yn.jsxs)(An.XStack,{display:"flex",flex:1,justifyContent:"space-between",children:[(0,yn.jsx)(bn.q,{children:t.card.tl}),(0,yn.jsx)(bn.q,{flex:0,fontSize:"$sm",color:s,textAlign:"right",children:t.card.tr})]}),t.card.bl||t.card.br?(0,yn.jsxs)(An.XStack,{display:"flex",flex:1,alignItems:"center",justifyContent:"space-between",children:[(0,yn.jsx)(bn.q,{color:"$secondary",fontSize:"$xs",children:null!==(i=t.card.bl)&&void 0!==i?i:""}),(0,yn.jsx)(bn.q,{flex:0,color:a,fontSize:"$xs",children:null!==(r=t.card.br)&&void 0!==r?r:""})]}):null]}):(0,yn.jsx)(fo,{blockchain:e,transaction:n})}function fo({blockchain:e,transaction:t}){const n=(0,s.qYF)(e.toLowerCase());return(0,yn.jsxs)(An.XStack,{flex:1,alignItems:"center",children:[(0,yn.jsxs)(An.YStack,{flex:1,justifyContent:"space-between",children:[(0,yn.jsxs)(An.XStack,{alignItems:"center",children:[(0,yn.jsx)(On.O,{style:{marginRight:10},radius:2,size:12,image:n}),(0,yn.jsxs)(bn.q,{children:[t.hash.slice(0,4),"..."]}),(0,yn.jsx)(bn.q,{children:t.hash.slice(t.hash.length-5)})]}),(0,yn.jsx)(bn.q,{color:"$secondary",fontSize:"$xs",children:new Date(t.timestamp).toLocaleString()})]}),(0,yn.jsx)(Jn.G,{color:"$secondary"})]})}function xo({blockchain:e,onItemClick:t,transactions:n}){const l=(0,o.useCallback)((e=>e.id),[]),i=(0,o.useCallback)((({item:n,section:o,index:l})=>{const i=0===l,r=l===o.data.length-1;return(0,yn.jsx)(Fn.a,{disableBottomRadius:!r,disableTopRadius:!i,children:(0,yn.jsx)(go,{blockchain:e,transaction:n,onClick:t})})}),[e,t]),r=(0,o.useCallback)((({section:e})=>(0,yn.jsx)(Pn.g,{style:{marginBottom:0},title:e.date})),[]);return(0,yn.jsx)(Nn.Z,{style:{marginHorizontal:16,marginTop:16,marginBottom:24},stickySectionHeadersEnabled:!1,showsVerticalScrollIndicator:!1,sections:n,keyExtractor:l,renderItem:i,renderSectionHeader:r,SectionSeparatorComponent:Ln.A,ItemSeparatorComponent:An.Separator})}function yo({details:e,style:t}){let n;return n=e.details.nft?(0,yn.jsx)(co,{mint:e.details.nft,size:168}):e.details.icon?e.details.icon:(0,yn.jsx)(ao,{size:100}),(0,yn.jsx)(An.YStack,{alignItems:"center",justifyContent:"center",width:"100%",...t,children:n})}var vo=n(33229),bo=n(26454),Eo=n(68294);const ko=vo.Z.select({native:Eo.pz,web:async e=>(window.open(e),!0)});function wo({details:e,style:t,transaction:n}){var o;const l=(0,s.rTu)(),i=(0,s.y20)(l.blockchain),a=(0,s.sAm)(l.blockchain);return(0,yn.jsxs)(bo.Z,{style:{width:"100%",...t},children:[n.timestamp?(0,yn.jsx)(bo.U,{label:"Date",value:(0,r.p6d)(new Date(n.timestamp),!0)}):null,e.details.item?(0,yn.jsx)(bo.U,{label:"Item",value:e.details.item}):null,e.details.amount?(0,yn.jsx)(bo.U,{label:"Amount",value:(0,yn.jsx)(Co,{amount:e.details.amount})}):null,(0,yn.jsx)(bo.U,{label:"Source",value:(0,r.Au0)(null!==(o=n.source)&&void 0!==o?o:"Unknown")}),n.fee?(0,yn.jsx)(bo.U,{label:"Network Fee",value:n.fee}):null,n.feePayer&&n.feePayer!==l.publicKey?(0,yn.jsx)(bo.U,{label:"Network Fee Payer",value:(0,r.R1Z)(n.feePayer)}):null,(0,yn.jsx)(bo.U,{label:"Status",value:(0,yn.jsx)(To,{error:!!n.error})}),(0,yn.jsx)(bo.U,{label:"Signature",value:(0,yn.jsx)(So,{hash:n.hash}),onClick:()=>ko((0,r.yUu)(a,n.hash,i))})]})}function Co({amount:e}){const t=e.startsWith("-")?"$negative":e.startsWith("+")?"$positive":"$fontColor";return(0,yn.jsx)(bn.q,{color:t,fontSize:"$sm",children:e})}function So({hash:e}){return(0,yn.jsxs)(An.XStack,{alignItems:"center",gap:4,children:[(0,yn.jsx)(bn.q,{color:"$blue",fontSize:"$sm",children:(t=e,`${t.slice(0,4)}...${t.slice(t.length-5)}`)}),(0,yn.jsx)(Jn.G,{color:"$blue",size:14})]});var t}function To({error:e}){return e?(0,yn.jsx)(bn.q,{color:"$negative",fontSize:"$sm",children:"Failed"}):(0,yn.jsx)(bn.q,{color:"$positive",fontSize:"$sm",children:"Confirmed"})}function Ro({containerStyle:e,details:t,headerStyle:n,tableStyle:o,transaction:l}){return(0,yn.jsxs)(An.YStack,{alignItems:"center",gap:24,justifyContent:"center",...e,children:[(0,yn.jsx)(yo,{style:n,details:t}),(0,yn.jsx)(wo,{style:o,details:t,transaction:l})]})}const jo=6e4,Io=(0,kn.Ps)("\n  query GetTransactions($address: String!, $providerId: ProviderID!, $filters: TransactionFiltersInput) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        provider {\n          providerId\n        }\n        transactions(filters: $filters) {\n          edges {\n            node {\n              id\n              description\n              fee\n              feePayer\n              error\n              hash\n              nfts\n              source\n              timestamp\n              type\n            }\n          }\n        }\n      }\n    }\n  }\n"),No=({loaderComponent:e,...t})=>(0,yn.jsx)(o.Suspense,{fallback:e,children:(0,yn.jsx)(Fo,{...t})});function Fo({contractOrMint:e,onItemClick:t,pollingInterval:n}){var l;const i=(0,s.rTu)(),{data:a}=(0,wn.C)(null!=n?n:jo,Io,{variables:{address:i.publicKey,providerId:i.blockchain.toUpperCase(),filters:{token:e}}}),c=(0,o.useMemo)((()=>{var e;return null===(e=a.user)||void 0===e?void 0:e.wallet}),[a.user]),d=(0,o.useMemo)((()=>{var e,t;return function(e){const t=[],n=e.filter((e=>e.timestamp));for(let o=0;o<n.length;o++){const l=(0,r.p6d)(new Date(e[o].timestamp));0===t.length||t[t.length-1].date!==l?t.push({date:l,data:[n[o]]}):t[t.length-1].data.push(n[o])}return t}(null!==(t=null===(e=null==c?void 0:c.transactions)||void 0===e?void 0:e.edges.map((e=>e.node)))&&void 0!==t?t:[])}),[c]);return(0,yn.jsx)(xo,{blockchain:null!==(l=null==c?void 0:c.provider.providerId)&&void 0!==l?l:xn.F7.Solana,onItemClick:t,transactions:d})}var Po=n(7688),Lo=n(8301),Ao=n(2784);const Bo=(0,d.W2)((()=>({searchField:{marginLeft:"12px",marginRight:"12px",marginTop:"16px",marginBottom:"16px",width:"inherit",display:"flex","& .MuiOutlinedInput-root":{"& input":{paddingTop:0,paddingBottom:0}}},skeleton:{background:"rgba(0,0,0,0.15)"}})));function Zo({onClickRow:e,customFilter:t=(()=>!0)}){const n=Bo(),[l,i]=(0,o.useState)("");return Ao.createElement(Ao.Fragment,null,Ao.createElement(a.oi,{className:n.searchField,placeholder:"Search",value:l,setValue:e=>i(e.target.value),inputProps:{style:{height:"48px"}}}),Ao.createElement($o,{searchFilter:l,onClickRow:e,customFilter:t}))}function Oo({onClickRow:e,tokenAccounts:t,customFilter:n=(()=>!0)}){const l=Bo(),[i,r]=(0,o.useState)("");return Ao.createElement(Ao.Fragment,null,Ao.createElement(a.oi,{className:l.searchField,placeholder:"Search",value:i,setValue:e=>r(e.target.value),inputProps:{style:{height:"48px"}}}),Ao.createElement($o,{onClickRow:e,tokenAccounts:t,searchFilter:i,customFilter:n}))}function $o({onClickRow:e,tokenAccounts:t,searchFilter:n="",customFilter:o=(()=>!0)}){const l=(0,s.QCC)();return Ao.createElement(Ao.Fragment,null,l.map((l=>Ao.createElement(Do,{key:l.publicKey.toString(),onClickRow:e,searchFilter:n,customFilter:o,wallet:l,tokenAccounts:t}))))}function Do({onClickRow:e,tokenAccounts:t,wallet:n,searchFilter:l="",customFilter:i=(()=>!0)}){const r=n.blockchain,a=(0,s.y20)(r),c=(0,s.U2V)((0,s.gvR)({publicKey:n.publicKey.toString(),blockchain:r}),[],[n.publicKey,a]),[d,,m]=t?[t,"hasValue"]:c,[u,p]=(0,o.useState)(l),g=u.toLowerCase(),h=d.filter((e=>e.name&&(e.name.toLowerCase().startsWith(g)||e.ticker.toLowerCase().startsWith(g)))).filter(i);(0,o.useEffect)((()=>{p(l)}),[l]);const f=h.length>100,x=f?{height:36+68*Math.min(h.length,6)+"px"}:{};return Ao.createElement(Vt,{style:x},Ao.createElement(en,{style:f?{height:"calc(100% - 36px)"}:{}},m?Ao.createElement(zo,null):f?Ao.createElement(Po.Z,null,(({height:t,width:o})=>Ao.createElement(Lo.t7,{height:t,width:o,itemCount:h.length,itemSize:68,itemData:{tokenList:h,blockchain:r,onClickRow:t=>e(r,t,n.publicKey.toString())},overscanCount:12},Mo))):Ao.createElement(Ao.Fragment,null,h.map((t=>Ao.createElement(_o,{key:t.address,token:t,onClick:t=>e(r,t,n.publicKey.toString())}))))))}const zo=()=>{const e=Bo();return Ao.createElement(tn,null,Ao.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center"}},Ao.createElement(Dt.Z,{variant:"circular",width:44,height:44,className:e.skeleton}),Ao.createElement("div",{style:{marginLeft:"5px",width:"50%"}},Ao.createElement(Dt.Z,{width:"50%",height:40,className:e.skeleton,style:{marginTop:"-6px"}}),Ao.createElement(Dt.Z,{width:"80%",height:20,className:e.skeleton,style:{marginTop:"-6px"}}))))},Mo=({index:e,data:t,style:n})=>{const o=t.tokenList[e];return Ao.createElement(_o,{key:o.mint,token:o,onClick:()=>t.onClickRow(o),style:n})};function _o({onClick:e,token:t,style:n}){let o=t.ticker;return t.displayBalance&&(o=`${t.displayBalance.toLocaleString()} ${o}`),Ao.createElement(tn,{onClick:()=>e(t),style:n},Ao.createElement(Ht,{props:{icon:t.logo,title:t.name,subtitle:o,usdValue:t.usdBalance,balanceChange:t.recentUsdBalanceChange}}))}var Uo=n(2784);const Ko=(0,d.W2)((()=>({balancesHeaderContainer:{paddingLeft:"24px",paddingRight:"24px",marginTop:"24px",width:"100%",borderRadius:"12px"},totalBalance:{fontWeight:600,fontSize:"40px",lineHeight:"36px",color:"inherit"}})));function Wo(){const e=(0,d.Pg)(),t=Ko(),[{totalBalance:n,totalChange:o,percentChange:l},,i]=(0,s.U2V)(s.FVY,{totalBalance:0,totalChange:0,percentChange:0});return Uo.createElement("div",{style:{display:"flex"}},Uo.createElement("div",{className:t.balancesHeaderContainer,style:{textAlign:"center",marginLeft:"12px",marginRight:"12px",borderRadius:"12px"}},Uo.createElement(ge.Z,{className:t.totalBalance,style:{color:e.custom.colors.fontColor}},i?Uo.createElement(Dt.Z,{sx:{backgroundColor:e.custom.colors.balanceSkeleton}}):(0,r.gCK)(n)),Uo.createElement("div",{style:{display:"flex",marginTop:"16px"}},Uo.createElement("div",{style:{flex:1}}),Uo.createElement(ge.Z,{style:{color:0===o?e.custom.colors.neutral:o<0?e.custom.colors.negative:e.custom.colors.positive,paddingLeft:"0px",paddingRight:"0px",paddingTop:"2px",paddingBottom:"2px",marginRight:"12px",lineHeight:"24px"}},i?Uo.createElement(Dt.Z,{width:"100px",sx:{backgroundColor:e.custom.colors.balanceSkeleton}}):Uo.createElement(Uo.Fragment,null,o>0?"+":"",(0,r.gCK)(o))),Uo.createElement(ge.Z,{style:{color:0===o?e.custom.colors.neutral:o<0?e.custom.colors.negative:e.custom.colors.positive,paddingLeft:"8px",paddingRight:"8px",paddingTop:"2px",paddingBottom:"2px",backgroundColor:i?void 0:0===o?e.custom.colors.balanceChangeNeutral:o<0?e.custom.colors.balanceChangeNegative:e.custom.colors.balanceChangePositive,borderRadius:"28px",lineHeight:"24px"}},i?Uo.createElement(Dt.Z,{width:"100px",sx:{backgroundColor:e.custom.colors.balanceSkeleton}}):Uo.createElement(Uo.Fragment,null,o>0?"+":"",Number.isFinite(l)?`${l?.toFixed(2)}%`:"0.00%")),Uo.createElement("div",{style:{flex:1}}))))}var qo=n(85469),Ho=n(8141),Vo=n(92033),Go=n(3697),Jo=n(35503),Yo=n(66198),Xo=n(11188),Qo=n(54174),el=n(49494),tl=n(49222),nl=n(33757),ol=n(19619),ll=n(2784);function il({onButtonClick:e,onCancelButtonClick:t,buttonLabel:n,buttonStyle:o,buttonLabelStyle:l,cancelButtonLabel:i,cancelButtonStyle:r,cancelButtonLabelStyle:s,children:c,topHalfStyle:m,wrapperStyle:u}){const p=(0,d.Pg)();return ll.createElement("div",{style:{background:"transparent",display:"flex",flexDirection:"column",height:"100%",...u}},ll.createElement("div",{style:{height:"100%",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center",background:p.custom.colors.background,borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}},ll.createElement("div",{style:{flex:1,background:p.custom.colors.drawerGradient,...m}},c),ll.createElement("div",{style:{marginBottom:"24px",marginLeft:"12px",marginRight:"12px",display:"flex",justifyContent:"space-between"}},i?ll.createElement(a.tf,{style:{marginRight:"8px",...r},buttonLabelStyle:s,onClick:t,label:i}):null,n?ll.createElement(a.KM,{style:o,buttonLabelStyle:l,onClick:e,label:n}):null)))}var rl=n(64008),al=n(76668),sl=n(2784);const{Zero:cl}=Qo,dl=(0,d.W2)((e=>({tooltipIcon:{color:e.custom.colors.secondary,height:14},container:{display:"flex",flexDirection:"column",height:"100%"},topHalf:{paddingTop:"24px",paddingBottom:"38px",marginLeft:"16px",marginRight:"16px"},bottomHalfWrapper:{borderTop:`${e.custom.colors.borderFull}`,backgroundColor:e.custom.colors.bg3,flex:1,paddingBottom:"16px",paddingTop:"38px",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",position:"relative"},bottomHalf:{display:"flex",flexDirection:"column",justifyContent:"space-between",margin:"0 16px 16px 16px",height:"100%"},fromFieldRoot:{marginTop:0,marginBottom:0,"& .MuiOutlinedInput-root":{"& fieldset":{border:`${e.custom.colors.borderFull}`},"&:hover fieldset":{border:`solid 2pt ${e.custom.colors.primaryButton}`},"& input":{border:"none"}}},receiveFieldRoot:{marginTop:0,marginBottom:0,"& .MuiOutlinedInput-root":{"& fieldset":{border:`${e.custom.colors.borderFull} !important`},"&:hover fieldset":{border:`${e.custom.colors.borderFull}`},"& input":{border:"none"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:`${e.custom.colors.secondary} !important`}},switchTokensContainer:{backgroundColor:e.custom.colors.switchTokensButton,width:"44px",height:"44px",zIndex:2,display:"flex",justifyContent:"center",flexDirection:"column",borderRadius:"22px",position:"absolute",top:120,left:24},switchTokensButton:{border:`${e.custom.colors.borderFull}`,width:"44px",height:"44px",marginLeft:"auto",marginRight:"auto"},switchIcon:{color:e.custom.colors.icon},cannotSwitch:{border:"2px solid red"},loadingContainer:{backgroundColor:e.custom.colors.nav,width:"38px",height:"38px",borderRadius:"19px",display:"flex",justifyContent:"center",flexDirection:"column",marginLeft:"auto",marginRight:"auto"},tokenSelectorButton:{display:"flex"},tokenSelectorButtonLabel:{color:e.custom.colors.fontColor,fontSize:"14px",fontWeight:600,lineHeight:"24px"},expandMore:{color:e.custom.colors.secondary,fontSize:"18px",marginLeft:"6px"},tokenLogo:{marginRight:"8px",width:"20px",height:"20px",borderRadius:"10px"},tokenLogoLarge:{marginRight:"8px",width:"32px",height:"32px",borderRadius:"10px"},confirmationTitle:{color:e.custom.colors.secondary,fontSize:"14px",fontWeight:500,lineHeight:"20px",textAlign:"center"},confirmationAmount:{color:e.custom.colors.fontColor,fontSize:"24px",fontWeight:500,lineHeight:"32px",textAlign:"center"},swapInfoRow:{marginBottom:"8px",display:"flex",justifyContent:"space-between"},swapInfoTitleLeft:{color:e.custom.colors.secondary,lineHeight:"20px",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center"},swapInfoTitleRight:{color:e.custom.colors.fontColor,lineHeight:"20px",fontSize:"14px",fontWeight:500},feesTooltipTable:{tableCollapse:"collapse"},feesTooltipTableHeading:{fontWeight:500,textAlign:"left",paddingRight:10},feesTooltipTableValue:{textAlign:"right"}})));function ml({blockchain:e}){const{close:t}=(0,ve.M$)(),n=(0,s.vsx)(),l=(0,be.HJ)();if((0,o.useEffect)((()=>{l.setOptions({headerTitle:"Swap",style:n?{background:"#1D1D20"}:void 0})}),[l,n]),e&&e!==r.$OA.SOLANA)throw new Error("only Solana swaps are supported currently");return sl.createElement(ul,{isInDrawer:!0,close:t})}function ul({isInDrawer:e,close:t=(()=>{})}){const n=(0,s.vsx)(),l=dl(),{swapToFromMints:i,fromToken:c,canSwitch:d}=(0,s.xYw)(),[m,u]=(0,o.useState)(!1),{blockchain:p}=(0,s.rTu)(),g=(0,s.G5b)(),h=!c;return p!==r.$OA.SOLANA?sl.createElement(a.ub,{icon:e=>sl.createElement(Jo.Z,e),title:`${xe.q[p].Name} Swaps Soon`,subtitle:"For now, please use a Solana wallet to swap"}):sl.createElement(sl.Fragment,null,sl.createElement("form",{onSubmit:e=>{e.preventDefault(),u(!0)},className:l.container,style:n?{background:"#1D1D20"}:void 0,noValidate:!0},sl.createElement("div",{className:l.topHalf},sl.createElement(jl,{disabled:!d,onClick:i}),h?sl.createElement(Dt.Z,{height:80,style:{borderRadius:"12px"}}):sl.createElement(gl,null)),sl.createElement("div",{className:l.bottomHalfWrapper},sl.createElement("div",{className:l.bottomHalf},h?sl.createElement(Dt.Z,{height:80,style:{borderRadius:"12px"}}):sl.createElement("div",null,sl.createElement(hl,null),sl.createElement("div",{style:{marginTop:"24px",marginLeft:"8px",marginRight:"8px"}},sl.createElement(Sl,null))),sl.createElement(bl,null)))),sl.createElement(ol.x,{openDrawer:m,setOpenDrawer:u},sl.createElement(pl,{onClose:()=>u(!1),onViewBalances:()=>{e?(u(!1),t()):g.request({method:r.c_U,params:[r.H4y]})}})))}const pl=({onClose:e,onViewBalances:t})=>{const{executeSwap:n}=(0,s.xYw)(),[l,i]=(0,o.useState)(s.Whv.CONFIRMATION),r=async()=>{i(s.Whv.CONFIRMING);const e=await n();i(e?s.Whv.CONFIRMED:s.Whv.ERROR)};return sl.createElement("div",null,l===s.Whv.CONFIRMATION?sl.createElement(El,{onConfirm:r}):null,l===s.Whv.CONFIRMING?sl.createElement(kl,{isConfirmed:!1,onViewBalances:t}):null,l===s.Whv.CONFIRMED?sl.createElement(kl,{isConfirmed:!0,onViewBalances:t}):null,l===s.Whv.ERROR?sl.createElement(wl,{onCancel:()=>e(),onRetry:r}):null)};function gl(){const e=dl(),{fromAmount:t,setFromAmount:n,fromToken:o,availableForSwap:l,exceedsBalance:i}=(0,s.xYw)();return sl.createElement(sl.Fragment,null,sl.createElement(a.pU,{leftLabel:"Sending",rightLabelComponent:sl.createElement(a.IQ,{amount:l,onSetAmount:n,decimals:o.decimals})}),sl.createElement(al.J,{type:"number",placeholder:"0",endAdornment:sl.createElement(Il,null),rootClass:e.fromFieldRoot,value:t,setValue:n,decimals:o.decimals,isError:i}))}function hl(){const e=dl(),t=(0,d.Pg)(),{toAmount:n,toToken:o,isLoadingRoutes:l}=(0,s.xYw)();return sl.createElement(sl.Fragment,null,sl.createElement(a.pU,{leftLabel:"Receiving"}),sl.createElement(Ee.nv,{placeholder:"0",startAdornment:l?sl.createElement(a.gb,{iconStyle:{display:"flex",color:t.custom.colors.secondary,marginRight:"10px"},size:24,thickness:5}):null,endAdornment:sl.createElement(Nl,null),rootClass:e.receiveFieldRoot,type:"number",value:n&&o?el.formatUnits(n,o.decimals):"",disabled:!0,inputProps:{style:{textFill:`${t.custom.colors.fontColor} !important`}}}))}const fl=()=>sl.createElement(a.O3,{label:"Swaps unavailable",disabled:!0}),xl=()=>sl.createElement(a.O3,{label:"Invalid swap",disabled:!0}),yl=()=>sl.createElement(a.O3,{label:"Insufficient balance",disabled:!0}),vl=()=>sl.createElement(a.O3,{label:"Insufficient balance for fee",disabled:!0}),bl=()=>{const{toAmount:e,toMint:t,fromAmount:n,fromMint:o,isJupiterError:l,exceedsBalance:i,feeExceedsBalance:c,isLoadingRoutes:d,isLoadingTransactions:m}=(0,s.xYw)(),u=(0,s.DMg)(o),p=!n||!e||d||m;if(o===t)return sl.createElement(xl,null);if(i)return sl.createElement(yl,null);if(c&&!p)return sl.createElement(vl,null);if(l||0===u.length)return sl.createElement(fl,null);let g;return g=o===r.VUJ&&t===r.e_K?"Wrap":o===r.e_K&&t===r.VUJ?"Unwrap":"Review",sl.createElement(a.KM,{type:"submit",label:g,disabled:p})};function El({onConfirm:e}){const t=dl();return sl.createElement(il,{onButtonClick:e,buttonLabel:"Confirm"},sl.createElement(ge.Z,{className:t.confirmationTitle,style:{marginTop:"32px"}},"You Receive"),sl.createElement("div",{style:{marginTop:"8px",marginBottom:"38px"}},sl.createElement(Cl,null)),sl.createElement("div",{style:{margin:"24px 24px 68px 24px"}},sl.createElement(Sl,{compact:!1})))}function kl({isConfirmed:e,onViewBalances:t}){const n=dl();return sl.createElement("div",{style:{height:"264px",paddingTop:"52px",position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between"}},sl.createElement("div",null,sl.createElement(ge.Z,{className:n.confirmationTitle},e?"Swap Confirmed!":"Swapping.."),sl.createElement("div",{style:{marginTop:"8px",marginBottom:"16px"}},sl.createElement(Cl,null)),sl.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column"}},e?sl.createElement("div",{style:{textAlign:"center"}},sl.createElement(a.nQ,null)):sl.createElement(a.gb,{size:48,iconStyle:{display:"flex",marginLeft:"auto",marginRight:"auto"},thickness:6}))),e?sl.createElement("div",{style:{marginBottom:"16px",marginLeft:"16px",marginRight:"16px"}},sl.createElement(a.tf,{onClick:()=>t(),label:"View Balances"})):null)}function wl({onRetry:e,onCancel:t}){const n=dl();return sl.createElement(il,{buttonLabel:"Retry",onButtonClick:e,cancelButtonLabel:"Back",onCancelButtonClick:t},sl.createElement(ge.Z,{className:n.confirmationTitle,style:{marginTop:"40px",marginBottom:"16px"}},"Error :("),sl.createElement("div",{style:{textAlign:"center",marginBottom:"24px"}},sl.createElement(a.aM,null)))}function Cl(){const{toAmount:e,toToken:t}=(0,s.xYw)();return sl.createElement(rl.j,{token:{logo:t.logo,ticker:t.ticker,decimals:t.decimals},amount:e})}function Sl({compact:e=!0}){const{fromAmount:t,toAmount:n,fromToken:o,toToken:l,priceImpactPct:i,isLoadingRoutes:c,isLoadingTransactions:d,transactionFees:m,swapFee:u}=(0,s.xYw)();if(c||d)return sl.createElement("div",{style:{textAlign:"center"}},sl.createElement(a.gb,{size:48,iconStyle:{margin:"32px 0",marginLeft:"auto",marginRight:"auto"},thickness:6}));if(!(t&&n&&o&&l))return sl.createElement(Tl,{compact:e,youPay:"-",rate:"-",priceImpact:"-",networkFee:"-"});const p=o.decimals-l.decimals,g=t.gt(cl)?el.commify(((e,t)=>t>0?e.mulUnsafe(tl.xs.from(10**t)):t<0?e.divUnsafe(tl.xs.from(10**Math.abs(t))):e)(tl.xs.from(n).divUnsafe(tl.xs.from(t)),p).toString()):"0";return sl.createElement(Tl,{compact:e,youPay:`${(0,r.Our)(t,o.decimals)} ${o.ticker}`,rate:`1 ${o.ticker} ≈ ${g.substring(0,10)} ${l.ticker}`,priceImpact:`${0===i?0:i>.1?i.toFixed(2):"< 0.1"}%`,networkFee:m?`~ ${Bl(m.total)} SOL`:"-",swapFee:u,transactionFees:m})}function Tl({youPay:e,rate:t,networkFee:n,priceImpact:o,compact:l,swapFee:i,transactionFees:r}){const a=dl(),s=[];return l||s.push({label:"You Pay",value:e}),s.push({label:"Rate",value:t}),s.push({label:"Estimated Fees",value:n,tooltip:r&&i?sl.createElement("table",{className:a.feesTooltipTable},sl.createElement("tbody",null,Object.entries(r?.fees??{}).map((([e,t])=>sl.createElement("tr",{key:e},sl.createElement("th",{className:a.feesTooltipTableHeading},e),sl.createElement("td",{className:a.feesTooltipTableValue},Bl(t)," SOL")))),i.pct>0?sl.createElement("tr",null,sl.createElement("td",{colSpan:2,style:{opacity:.5}},"Quote includes a ",i.pct,"% Backpack fee")):null)):null}),s.push({label:"Price Impact",value:o}),sl.createElement(sl.Fragment,null,s.map((e=>sl.createElement(Rl,{key:e.label,...e}))))}const Rl=({label:e,value:t,tooltip:n})=>{const l=dl(),[i,r]=(0,o.useState)(!1);return sl.createElement("div",{className:l.swapInfoRow},sl.createElement("div",{onMouseOver:()=>r(!0),onMouseOut:()=>r(!1)},sl.createElement(ge.Z,{className:l.swapInfoTitleLeft},e,n?sl.createElement(fe.Z,{title:n,arrow:!0,open:i},sl.createElement(ue.Z,{className:l.tooltipIcon})):null)),sl.createElement(ge.Z,{className:l.swapInfoTitleRight},t))};function jl({onClick:e,disabled:t=!1}){const n=dl();return sl.createElement("div",{className:n.switchTokensContainer},sl.createElement(Yo.Z,{disableRipple:!0,className:n.switchTokensButton,onClick:e,disabled:Boolean(t)},sl.createElement(Go.Z,{className:n.switchIcon})))}function Il(){const{fromToken:e,isInDrawer:t}=(0,s.xYw)();return t?sl.createElement(Fl,{token:e,input:!0,isFromMint:!0}):sl.createElement(Pl,{token:e,input:!0,isFromMint:!0})}function Nl(){const{toToken:e,isInDrawer:t}=(0,s.xYw)();return t?sl.createElement(Fl,{token:e,input:!1,isFromMint:!1}):sl.createElement(Pl,{token:e,input:!1,isFromMint:!1})}function Fl({token:e,input:t,isFromMint:n}){const o=(0,be.HJ)();return sl.createElement(Ll,{token:e,push:()=>{o.push("select-token",{isFromMint:n,input:t})}})}function Pl({token:e,input:t,isFromMint:n}){(0,s.HJj)();const[l,i]=(0,o.useState)(!1);return sl.createElement(sl.Fragment,null,sl.createElement(Ll,{token:e,push:()=>{i(!0)}}),sl.createElement(ve.zw,{openDrawer:l,setOpenDrawer:i},sl.createElement(be.I6,{initialRoute:{name:"root"},options:()=>({title:""}),navButtonLeft:sl.createElement(ve.PZ,{onClick:()=>{i(!1)}})},sl.createElement(be.y4,{name:"root",component:()=>sl.createElement(Al,{isFromMint:n,input:t,close:()=>i(!1)})}))))}function Ll({token:e,push:t}){const n=dl();return sl.createElement(Xo.Z,{position:"end"},sl.createElement(nl.zx,{onClick:()=>t(),style:{backgroundColor:"transparent",width:"auto",justifyContent:"right"}},e?sl.createElement("img",{className:n.tokenLogo,src:e.logo,onError:e=>e.currentTarget.style.display="none"}):null,sl.createElement(ge.Z,{className:n.tokenSelectorButtonLabel},e?e.ticker:null),sl.createElement(ce.Z,{className:n.expandMore})))}function Al({customFilter:e=(()=>!0),input:t,isFromMint:n,close:l}){const i=(0,be.HJ)(),r=(0,s.vsx)(),a=(0,d.Pg)(),{fromTokens:c,toTokens:m,setFromMint:u,setToMint:p}=(0,s.xYw)(),g=n?u:p;(0,o.useEffect)((()=>{i.setOptions({headerTitle:"Select Token",style:r?{background:a.custom.colors.background}:void 0})}),[i,r,a]);const h=t?c:m;return sl.createElement(Oo,{onClickRow:(e,t)=>{g(t.mint),l?l():i.pop()},tokenAccounts:h,customFilter:e})}const Bl=e=>el.formatUnits(e,9).replace(/(0.0{2,}[1-9])(\d+)/,"$1");var Zl=n(72036),Ol=n(48330),$l=n(2784);function Dl({...e}){const t=(0,s.QCC)();if(1===t.length){const{blockchain:e,publicKey:n}=t[0];return $l.createElement(Ul,{blockchain:e,publicKey:n})}return e.blockchain&&e.publicKey?$l.createElement(Ul,e):$l.createElement(zl,e)}function zl(){const{close:e}=(0,ve.M$)(),t=(0,s.QCC)();return $l.createElement("div",{style:{height:t.length<=3?"100%":void 0,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"12px",paddingBottom:"16px"}},$l.createElement("div",null,t.map((({blockchain:e,name:t,publicKey:n})=>$l.createElement(Ml,{key:e,blockchain:e,name:t,publicKey:n})))),$l.createElement("div",{style:{flex:1}}),$l.createElement(a.tf,{label:"Close",onClick:()=>e()}))}function Ml({blockchain:e,name:t,publicKey:n}){const l=(0,d.Pg)(),[i,r]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(!1),p=(0,s.qYF)(e),g=e.slice(0,1).toUpperCase()+e.slice(1);return $l.createElement($l.Fragment,null,$l.createElement("div",{style:{marginBottom:"12px",borderRadius:"8px",padding:"16px",background:l.custom.colors.nav,border:`${l.custom.colors.borderFull}`}},$l.createElement(ge.Z,{style:{color:l.custom.colors.fontColor,fontWeight:500}},"Your ",g," address"),$l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},$l.createElement("div",null,$l.createElement(ge.Z,{style:{fontWeight:500,fontSize:"14px",marginTop:"6px",marginBottom:"6px",color:l.custom.colors.secondary}},`${t} (${(0,Ee.R1)(n)})`),$l.createElement("img",{src:p,style:{width:"14px",borderRadius:"2px"}})),$l.createElement("div",{style:{display:"flex"}},$l.createElement(Yo.Z,{disableRipple:!0,onClick:()=>{u(!0)},style:{backgroundColor:l.custom.colors.bg2,padding:"10px",marginRight:"6px",width:"40px",height:"40px"}},$l.createElement(Ol.Z,{style:{color:l.custom.colors.fontColor,width:"20px",height:"20px"}})),$l.createElement(Xe.D,{tooltipOpen:i},$l.createElement(Yo.Z,{disableRipple:!0,onClick:()=>(async()=>{r(!0),setTimeout((()=>r(!1)),1e3),await navigator.clipboard.writeText(n.toString())})(),style:{backgroundColor:l.custom.colors.bg2,padding:"10px",width:"40px",height:"40px"}},$l.createElement(st.Z,{style:{color:l.custom.colors.fontColor,width:"20px",height:"20px"}})))))),$l.createElement(b.Z,{open:m,onClose:()=>u(!1)},$l.createElement("div",{style:{width:"300px",height:"325px",top:"50%",left:"50%",position:"absolute",transform:"translate(-50%, -50%)",backgroundColor:l.custom.colors.nav,margin:0,borderRadius:"12px"}},$l.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},$l.createElement("div",{style:{position:"absolute",top:10,left:10}},$l.createElement(ve.PZ,{buttonStyle:{position:"relative"},onClick:()=>u(!1)})),$l.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",height:"100%"}},$l.createElement("div",{style:{display:"flex",marginLeft:"auto",marginRight:"auto"}},$l.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:"8px"}},$l.createElement("img",{src:p,style:{width:"20px",height:"20px",borderRadius:"2px"}})),$l.createElement(ge.Z,{style:{fontSize:"22px",color:l.custom.colors.fontColor}},g)),$l.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"24px",marginBottom:"16px"}},$l.createElement(Kl,{data:n.toString()})),$l.createElement(Xe.D,{tooltipOpen:a},$l.createElement("div",{style:{display:"relative"}},$l.createElement(Yo.Z,{disableRipple:!0,style:{padding:0,textTransform:"none",display:"flex",flexDirection:"column",marginLeft:"auto",marginRight:"auto"},onClick:()=>(async()=>{c(!0),setTimeout((()=>c(!1)),1e3),await navigator.clipboard.writeText(n.toString())})()},$l.createElement(ge.Z,{style:{textAlign:"center",color:l.custom.colors.fontColor,fontSize:"16px"}},t),$l.createElement(ge.Z,{style:{textAlign:"center",color:l.custom.colors.secondary}},"(",(0,Ee.R1)(n),")")))))))))}const _l=(0,d.W2)((e=>({subtext:{width:"264px",marginLeft:"auto",marginRight:"auto",marginTop:"16px",color:e.custom.colors.secondary,size:"14px",fontWeight:500,fontSize:"14px",textAlign:"center",lineHeight:"20px"},depositTextFieldRoot:{margin:0,"& .MuiOutlinedInput-root":{paddingRight:0,"& fieldset":{border:`${e.custom.colors.borderFull} !important`,paddingLeft:0,paddingRight:0},"&.Mui-focused fieldset":{borderColor:`${e.custom.colors.primaryButton} !important`}},"& .MuiOutlinedInput-input":{cursor:"pointer",color:e.custom.colors.secondary},"&:hover .MuiOutlinedInput-root":{paddingLeft:0,paddingRight:0}},copyIcon:{"&:hover":{cursor:"pointer"}},copyContainer:{"&:hover":{cursor:"pointer"}}})));function Ul({blockchain:e,publicKey:t}){const n=_l(),l=(0,d.Pg)(),[i,r]=(0,o.useState)(!1),a=(0,s.ZaQ)(t),c=xe.q[e],m=t.toString().slice(0,12)+"..."+t.toString().slice(t.toString().length-12);return $l.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},$l.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"64px",marginBottom:"80px",width:"180px"}},$l.createElement(Kl,{data:t.toString(),style:{width:"180px",height:"180px",padding:"7.83px"}})),$l.createElement("div",null,$l.createElement(ge.Z,{style:{fontSize:"16px",textAlign:"center",marginBottom:"8px",color:l.custom.colors.fontColor}},a),$l.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"0 12px"}},$l.createElement(Xe.D,{tooltipOpen:i},$l.createElement("div",{onClick:()=>(async()=>{r(!0),setTimeout((()=>r(!1)),1e3),await navigator.clipboard.writeText(t.toString())})(),style:{width:"100%"},className:n.copyContainer},$l.createElement(Ee.nv,{value:m,rootClass:n.depositTextFieldRoot,endAdornment:$l.createElement(st.Z,{className:n.copyIcon,style:{pointerEvents:"none",color:l.custom.colors.secondary,position:"absolute",right:"17px"}}),inputProps:{readOnly:!0}}))))),$l.createElement("div",null,$l.createElement(ge.Z,{className:n.subtext},$l.createElement($l.Fragment,null,"This address can only receive ",c.GasTokenName," and"," ",c.AppTokenName," tokens on ",c.Name,"."))))}function Kl({data:e,style:t}){return $l.createElement("div",{style:{backgroundColor:"#fff",borderRadius:"8px",height:"148px",width:"148px",display:"flex",justifyContent:"center",flexDirection:"column",padding:"8px",...t}},$l.createElement("img",{src:`https://qr.backpack.workers.dev/qz=0?${e}`,alt:e}))}var Wl=n(2784);const ql=(0,d.W2)((e=>({searchField:{marginLeft:"12px",marginRight:"12px",marginTop:"16px",marginBottom:"16px",width:"inherit",display:"flex","& .MuiOutlinedInput-root":{"& input":{paddingTop:0,paddingBottom:0}}},logoIcon:{borderRadius:"22px",width:"44px",height:"44px"},tokenListItemRow:{display:"flex",justifyContent:"space-between"},tokenListItemIcon:{paddingTop:"12px",paddingBottom:"12px"},tokenAmount:{fontWeight:500,fontSize:"14px",color:e.custom.colors.secondary,lineHeight:"20px"},balancesTableCellContainer:{width:"100%",height:"100%",display:"flex"},tokenListItemContent:{color:e.custom.colors.fontColor,flex:1,paddingTop:"10px",paddingBottom:"10px"},addressButton:{padding:0,color:e.custom.colors.secondary,textTransform:"none",fontWeight:500,lineHeight:"24px",fontSize:"14px",marginLeft:"8px","&:hover":{backgroundColor:"transparent","& svg":{visibility:"visible"}}},skeleton:{background:"rgba(0,0,0,0.15)"},copyIcon:{visibility:"hidden",width:"16px",marginLeft:"6px"}})));function Hl({blockchain:e,publicKey:t}){const n=(0,s.QCC)(),[l,i]=(0,o.useState)(""),{push:r}=(0,be.HJ)(),a=ql();if(e&&!t||!e&&t)throw new Error("invariant violation");return e&&t?Wl.createElement(Wl.Fragment,null,Wl.createElement(Ee.nv,{placeholder:"Search",value:l,setValue:i,rootClass:a.searchField,inputProps:{style:{height:"48px"}}}),Wl.createElement(Vl,{searchFilter:l,key:e,blockchain:e,publicKey:t,onStartRamp:({publicKey:e,blockchain:t})=>{r("stripe",{publicKey:e,blockchain:t})}})):Wl.createElement(Wl.Fragment,null,Wl.createElement(Ee.nv,{placeholder:"Search",value:l,setValue:i,rootClass:a.searchField,inputProps:{style:{height:"48px"}}}),Wl.createElement("div",{style:{flex:1}},n.map((({blockchain:e,publicKey:t})=>Wl.createElement(Vl,{searchFilter:l,key:e,blockchain:e,publicKey:t,onStartRamp:({publicKey:e,blockchain:t})=>{r("stripe",{publicKey:e,blockchain:t})}})))))}function Vl({blockchain:e,publicKey:t,onStartRamp:n,searchFilter:o}){const l=(0,s.ZaQ)(t);return Wl.createElement(Vt,null,Wl.createElement(Xt,{wallet:{name:l,publicKey:t,blockchain:e}}),Wl.createElement(en,null,xe.q[e].RampSupportedTokens.filter((({title:e,subtitle:t})=>e.toLowerCase().includes(o.toLocaleLowerCase())||t.toLowerCase().includes(o.toLowerCase()))).map((o=>Wl.createElement(tn,{onClick:()=>n({blockchain:e,token:o,publicKey:t})},Wl.createElement(Gl,{token:o}))))))}function Gl({token:e}){const{icon:t,title:n,subtitle:o}=e,l=ql();return Wl.createElement("div",{className:l.balancesTableCellContainer},t?Wl.createElement(pt.Z,{className:l.tokenListItemIcon,classes:{root:l.tokenListItemIconRoot}},Wl.createElement(a.e4,{src:t,className:l.logoIcon,onError:e=>e.currentTarget.style.display="none"})):null,Wl.createElement("div",{className:l.tokenListItemContent},Wl.createElement("div",{className:l.tokenListItemRow},Wl.createElement(ge.Z,{className:l.tokenName},n)),Wl.createElement("div",{className:l.tokenListItemRow},o?Wl.createElement(ge.Z,{className:l.tokenAmount},o):null)))}var Jl=n(84708),Yl=n(46069),Xl=n(55486),Ql=n(82073),ei=n(54485);const ti=e=>({address:e,chainId:0,decimals:0,logoURI:r.rId,name:"Unknown",symbol:"UNK"}),ni=e=>ei.NftEventTypes.includes(e?.type)||"NonFungible"===e?.tokenTransfers[0]?.tokenStandard,oi=e=>{const t=new Date(1e3*e);let n=t.getHours(),o=t.getMinutes(),l=n>=12?"pm":"am";return n%=12,n=n||12,o=o<10?"0"+o:o,t.getDate()+" "+new Intl.DateTimeFormat("en-US",{month:"long"}).format(t)+", at "+n+":"+o+" "+l},li=e=>{const t=new Date(1e3*e);return t.getDate()+" "+new Intl.DateTimeFormat("en-US",{month:"long"}).format(t)+", "+t.getFullYear()},ii=e=>{const t=[];let n="";for(const o of e){const e=new Date(1e3*o?.timestamp).toDateString();e!==n&&(n=e,t.push([])),t[t.length-1].push(o)}return t},ri=e=>e.replaceAll("_"," ").split(" ").map((e=>e.charAt(0)+e.slice(1).toLowerCase())).join(" "),ai=(e,t)=>e?.tokenTransfers[0]?.fromUserAccount===t.publicKey||e?.nativeTransfers[0]?.fromUserAccount===t.publicKey||e?.tokenTransfers[0]?.toUserAccount!==t.publicKey&&e?.nativeTransfers[0]?.toUserAccount!==t.publicKey&&null,si=(e,t,n)=>{switch(t.type){case ei.TransactionType.BURN:case ei.TransactionType.BURN_NFT:return"Burned";case ei.TransactionType.TRANSFER:return ai(t,e)?"Sent":!1===ai(t,e)?"Received":"App Interaction";case ei.TransactionType.SWAP:return"Swap";case ei.TransactionType.NFT_SALE:return t?.events?.nft?.seller===n?"Sold":"Bought";case ei.TransactionType.NFT_LISTING:return"Listed";case ei.TransactionType.NFT_CANCEL_LISTING:return"Listed Canceled";case ei.TransactionType.NFT_MINT:return"Minted NFT";default:let o="App Interaction";return t?.transactionError&&(o="Failed"),o}},ci=(e,t,n,o)=>{switch(t.type){case ei.TransactionType.TRANSFER:return ai(t,e)?`To: ${(0,r.R1Z)(t?.tokenTransfers[0]?.toUserAccount||t?.nativeTransfers[0]?.toUserAccount)}`:!1===ai(t,e)?`From: ${(0,r.R1Z)(t?.tokenTransfers[0]?.fromUserAccount||t?.nativeTransfers[0]?.fromUserAccount)}`:t?.source&&t?.source!==ei.TransactionType.UNKNOWN?ri(t?.source):"";case ei.TransactionType.SWAP:const[l,i]=mi(t,n);return l.symbolOrAddress&&i.symbolOrAddress?[l.symbolOrAddress,i.symbolOrAddress].join(" -> "):"";case ei.TransactionType.NFT_LISTING:return`Listed on ${ri(t.source)}`;case ei.TransactionType.NFT_SALE:return`${t?.events?.nft?.buyer===e.publicKey?"Bought":"Sold"} on ${ri(t.source)}`;case ei.TransactionType.NFT_CANCEL_LISTING:return`Canceled listing on ${ri(t.source)}`;case ei.TransactionType.NFT_MINT:return(0,r.R1Z)(o?.onChainMetadata?.metadata?.collection?.key);default:return t?.source===ei.Source.CARDINAL_RENT?"Rent Paid":(0,r.R1Z)(t?.instructions[0].programId)}},di=(e,t)=>{let n=[];if(t.type===ei.TransactionType.SWAP){const o=t.events?.swap?.nativeInput,l=t.events?.swap?.nativeOutput,i=o?r.e_K:t.events?.swap?.tokenInputs?.[0]?.mint||t.tokenTransfers?.[0]?.mint,a=l?r.e_K:t.events?.swap?.tokenOutputs?.[0]?.mint||t.tokenTransfers?.[1]?.mint;i&&e.get(i)&&n.push(e.get(i)??ti(i)),a&&e.get(a)&&n.push(e.get(a)??ti(a))}else if(t.type===ei.TransactionType.TRANSFER){const o=t.tokenTransfers?.[0]?.mint;o&&e.get(o)&&n.push(e.get(o))}return n},mi=(e,t)=>{const n={tokenIcon:r.rId,amountWithSymbol:"",symbolOrAddress:""};try{const{nativeInput:o,nativeOutput:l,tokenInputs:[i],tokenOutputs:[a]}=e.events.swap;return[[o,i],[l,a]].map((([e,o])=>{try{const{mint:n,amount:l}=e?{mint:r.VUJ,amount:(Number(e.amount)/Ql.LAMPORTS_PER_SOL).toFixed(5)}:{mint:o.mint,amount:(Number(o.rawTokenAmount.tokenAmount)/10**o.rawTokenAmount.decimals).toFixed(5)},i=t.concat({address:r.VUJ,symbol:"SOL",logoURI:s.Wsp}).find((e=>e?.address===n)),a=i?.symbol||(0,r.R1Z)(n);return{tokenIcon:i?.logoURI||r.rId,symbolOrAddress:a,amountWithSymbol:[l,a].join(" ")}}catch(e){return console.error(e),n}}))}catch(e){return console.error(e),[n,n]}};function ui(e){const t=e.split("_").map((e=>e.toLowerCase())).map((e=>1===e.length?e:`${e[0].toUpperCase()}${e.slice(1)}`));return"Nft"===t[0]&&(t[0]=t[0].toUpperCase()),t.join(" ")}var pi=n(91279),gi=n(34617),hi=n(4433),fi=n(22402),xi=n(95680),yi=n(8314),vi=n(2784);const bi={Swap:({tokenLogoOne:e,tokenLogoTwo:t})=>vi.createElement("div",{style:{display:"flex",alignItems:"center"}},vi.createElement("img",{style:{borderRadius:"50%",width:"24px",height:"24px",marginRight:"10px",marginBottom:"15px",zIndex:"10"},src:e}),vi.createElement("img",{style:{borderRadius:"50%",width:"24px",height:"24px",marginRight:"15px",marginLeft:"-15px"},src:t})),Transfer:({tokenLogo:e})=>vi.createElement("img",{style:{borderRadius:"50%",width:"44px",height:"44px",marginRight:"15px"},src:e}),Sol:()=>vi.createElement("img",{style:{borderRadius:"50%",width:"44px",height:"44px",marginRight:"15px"},src:s.Wsp}),Nft:({nftUrl:e})=>vi.createElement("img",{style:{borderRadius:"4px",width:"44px",height:"44px",marginRight:"15px"},src:e}),Sent:()=>vi.createElement("div",{style:{width:"44px",height:"44px",borderRadius:"22px",marginRight:"12px",display:"flex",justifyContent:"center",flexDirection:"column"}},vi.createElement(pi.Z,{style:{color:"#8F929E",marginLeft:"auto",marginRight:"auto"}})),Received:()=>vi.createElement("div",{style:{width:"44px",height:"44px",borderRadius:"22px",marginRight:"12px",display:"flex",justifyContent:"center",flexDirection:"column"}},vi.createElement(gi.Z,{style:{color:"#8F929E",marginLeft:"auto",marginRight:"auto"}})),NftDefault:()=>vi.createElement(hi.Z,{style:{borderRadius:"4px",width:"44px",height:"44px",marginRight:"15px",fill:"#99A4B4"}}),Error:()=>vi.createElement("div",{style:{width:"44px",height:"44px",borderRadius:"22px",marginRight:"12px",display:"flex",justifyContent:"center",flexDirection:"column"}},vi.createElement(fi.Z,{style:{color:"#E95050",marginLeft:"auto",marginRight:"auto"}})),Burn:()=>vi.createElement("div",{style:{width:"44px",height:"44px",borderRadius:"22px",marginRight:"12px",display:"flex",justifyContent:"center",flexDirection:"column"}},vi.createElement(xi.Z,{style:{color:"#E95050",marginLeft:"auto",marginRight:"auto"}})),Default:()=>vi.createElement("div",{style:{width:"44px",height:"44px",borderRadius:"22px",marginRight:"12px",display:"flex",justifyContent:"center",flexDirection:"column"}},vi.createElement(yi.Z,{style:{color:"#35A63A",marginLeft:"auto",marginRight:"auto"}}))};var Ei=n(2784);const ki=(0,d.W2)((e=>({title:{color:e.custom.colors.fontColor,fontSize:"16px",fontWeight:500,lineHeight:"24px"},caption:{color:e.custom.colors.secondary,fontSize:"12px",fontWeight:500,lineHeight:"24px",whiteSpace:"nowrap",overflow:"hidden"},textReceived:{fontSize:"16px",color:e.custom.colors.positive,lineHeight:"24px",textAlign:"end"},textSent:{fontSize:"16px",color:e.custom.colors.negative,lineHeight:"24px",textAlign:"end"},textSecondary:{fontSize:"16px",color:e.custom.colors.negative,lineHeight:"24px",textAlign:"end"},lineDataWrapper:{display:"flex",flexDirection:"column",justifyContent:"center"}})));function wi({transaction:e,isFirst:t,isLast:n,setMetadata:o,setTransactionDetail:l}){const i=ki(),r=(0,d.Pg)(),c=(0,s.AvJ)(),{contents:m,state:u}=(0,E.$P)((0,s.nkL)({transaction:e})),p=(0,s.rTu)(),g=di(c,e),h="hasValue"===u&&m||void 0,f=function(e,t,n){switch(t.type){case ei.TransactionType.BURN:case ei.TransactionType.BURN_NFT:return"Burned";case ei.TransactionType.TRANSFER:const o=n?.onChainMetadata?.metadata?.data?.name;return ni(t)&&o?o:ai(t,e)?"Sent":!1===ai(t,e)?"Received":"App Interaction";case ei.TransactionType.SWAP:return"Token Swap";case ei.TransactionType.NFT_MINT:{const e=n?.onChainMetadata?.metadata?.data?.name;return`Minted: ${e}`}default:let l="App Interaction";const i=n?.onChainMetadata?.metadata?.data?.name;return ni(t)&&i?i:(t?.transactionError&&(l="Failed"),l)}}(p,e,h),x=ci(p,e,g,h);return Ei.createElement(ut.ZP,{button:!0,disableRipple:!0,onClick:()=>{o(h),l(e)},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",backgroundColor:r.custom.colors.nav,borderBottom:n?void 0:`solid 1pt ${r.custom.colors.border1}`,...(0,a.Z9)(t,n,12),borderBottomLeftRadius:n?"12px":0,borderBottomRightRadius:n?"12px":0}},Ei.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},Ei.createElement("div",{style:{flex:1,display:"flex"}},Ei.createElement("div",{className:i.lineDataWrapper},Ei.createElement(Ci,{loading:"loading"===u,transaction:e,tokenData:g})),Ei.createElement("div",null,Ei.createElement(ge.Z,{className:i.title},f),Ei.createElement(ge.Z,{className:i.caption},x))),Ei.createElement("div",{className:i.lineDataWrapper},Ei.createElement(Si,{transaction:e,tokenData:g,metadata:h}))))}function Ci({loading:e,transaction:t,tokenData:n}){const o=(0,s.rTu)();if(e)return Ei.createElement(Dt.Z,{sx:{mr:"15px"},variant:"rounded",height:"44px",width:"44px"});if(t?.transactionError)return Ei.createElement(bi.Error,null);if(t.type===ei.TransactionType.SWAP){const[e,o]=mi(t,n);return Ei.createElement(bi.Swap,{tokenLogoOne:e.tokenIcon,tokenLogoTwo:o.tokenIcon})}if(ni(t),t.type===ei.TransactionType.TRANSFER){if(t.source===ei.Source.SYSTEM_PROGRAM)return Ei.createElement(bi.Sol,null);const e=n[0]?.logoURI;return e?Ei.createElement(bi.Transfer,{tokenLogo:e}):"NonFungible"===t?.tokenTransfers?.[0]?.tokenStandard?Ei.createElement(bi.NftDefault,null):ai(t,o)?Ei.createElement(bi.Sent,null):Ei.createElement(bi.Received,null)}return t?.type===ei.TransactionType.BURN||t?.type===ei.TransactionType.BURN_NFT?Ei.createElement(bi.Burn,null):Ei.createElement(bi.Default,null)}function Si({transaction:e,tokenData:t,metadata:n}){const o=(0,s.rTu)(),l=ki();if(e?.transactionError)return Ei.createElement("div",{className:l.caption},"Failed");if(e.type===ei.TransactionType.SWAP){const[n,o]=mi(e,t);return Ei.createElement(Ei.Fragment,null,o?.amountWithSymbol?Ei.createElement("div",{className:l.textReceived},"+",o.amountWithSymbol):null,n?.amountWithSymbol?Ei.createElement("div",{className:l.textSecondary},"-",n.amountWithSymbol):null)}if(e?.type===ei.TransactionType.BURN||e?.type===ei.TransactionType.BURN_NFT)return Ei.createElement("div",{className:l.textSecondary},e?.tokenTransfers[0]?.tokenAmount);if(ni(e))return Ei.createElement("div",null);if(e.type===ei.TransactionType.TRANSFER){if(ai(e,o))return e.source===ei.Source.SYSTEM_PROGRAM?Ei.createElement("div",{className:l.textSent},"-",(0,r.CRI)(e?.nativeTransfers[0]?.amount/10**9)+" SOL"):Ei.createElement("div",{className:l.textSent},"-",new Number(e?.tokenTransfers?.[0]?.tokenAmount.toFixed(5))+" "+(t[0]?.symbol||n?.onChainMetadata?.metadata?.data?.symbol||""));if(!1===ai(e,o))return e.source===ei.Source.SYSTEM_PROGRAM?Ei.createElement("div",{className:l.textReceived},"+",(0,r.CRI)(e?.nativeTransfers[0]?.amount/10**9)+" SOL"):Ei.createElement("div",{className:l.textReceived},"+",new Number(e?.tokenTransfers?.[0]?.tokenAmount.toFixed(5))+" "+(t[0]?.symbol||n?.onChainMetadata?.metadata?.data?.symbol||""))}return Ei.createElement("div",null)}var Ti=n(81680),Ri=n(2784);function ji({minimize:e}){const t=(0,d.Pg)();return Ri.createElement("div",{style:{height:"100%",display:e?"none":void 0}},Ri.createElement(a.ub,{icon:e=>Ri.createElement(Ti.Z,e),title:"No Recent Activity",subtitle:"Get started by adding your first xNFT",onClick:()=>window.open(r.pPQ),buttonText:"Browse the xNFT Library",contentStyle:{color:e?t.custom.colors.secondary:"inherit"},minimize:e}))}var Ii=n(58774),Ni=n(81587),Fi=n(21122),Pi=n(22529),Li=n(2784);const Ai=(0,d.W2)((e=>({transactionCard:{display:"flex",padding:"16px",paddingTop:"24px",flexDirection:"column",height:"100%",alignItems:"center",backgroundColor:e.custom.colors.background,overflowY:"scroll"},nft:{borderRadius:"10px",width:"168px",height:"168px",objectFit:"cover"},ctaButton:{margin:"16px",width:"100%",color:e.custom.colors.fontColor,backgrounColor:e.custom.colors.secondaryButton},detailList:{marginTop:"16px",paddingTop:0,paddingBottom:0,marginLeft:"16px",marginRight:"16px",borderRadius:"14px",width:"100%",fontSize:"14px",border:e.custom.colors.tableCellBorder},firstRow:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",borderBottom:e.custom.colors.tableCellBorder,borderTopLeftRadius:"12px",borderTopRightRadius:"12px",backgroundColor:e.custom.colors.nav},middleRow:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",borderBottom:e.custom.colors.tableCellBorder,backgroundColor:e.custom.colors.nav},lastRow:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",backgroundColor:e.custom.colors.nav,"&:hover":{cursor:"pointer"}},cell:{width:"100%",display:"flex",justifyContent:"space-between"},cellValue:{display:"flex",alignItems:"center",fontWeight:500,color:e.custom.colors.fontColor},confirmedStatus:{color:"#35A63A"},failedStatus:{color:"#E95050"},label:{color:e.custom.colors.secondary,textTransform:"capitalize"},transferAmount:{fontSize:"30px",color:e.custom.colors.fontColor,fontWeight:600,marginTop:"8px"},tokenLogo:{borderRadius:"50%",width:"56px",height:"56px"},addressExplorerRow:{"&:hover":{cursor:"pointer"}},detailCardHeaderSwapContainer:{display:"flex",alignItems:"center",marginTop:"40px",marginBottom:"40px"},detailCardHeaderSwapArrow:{color:e.custom.colors.alpha,width:"80px",fontSize:"35px"},detailCardHeaderSwapColumn:{display:"flex",alignItems:"center",flexDirection:"column"},detailCardHeaderSwapText:{fontSize:"16px",lineHeight:"24px",color:e.custom.colors.fontColor,marginTop:"5px",textAlign:"center",minHeight:"24px"}})));function Bi({metadata:e,transaction:t,setMetadata:n,setTransactionDetail:l}){const i=(0,d.Pg)(),r=Ai(),c=(0,s.AvJ)(),m=(0,s.rTu)(),u=(0,re.s0)(),[p,g]=(0,o.useState)(!0),[h,f]=(0,o.useState)(void 0),x=di(c,t);return(0,o.useEffect)((()=>{e&&e.onChainMetadata&&e.onChainMetadata.metadata&&fetch(e.onChainMetadata.metadata.data.uri).then((e=>e.json())).then(f).catch(console.error)}),[e]),Li.createElement(ve.zw,{openDrawer:p,setOpenDrawer:g},Li.createElement("div",{style:{height:"100%",background:i.custom.colors.background}},Li.createElement(be.I6,{initialRoute:{name:"transactionDetails"},options:()=>({title:si(m,t,m?.publicKey)}),navButtonLeft:Li.createElement(Pi.I4,{onClick:()=>{l(null),n(null),g(!1)}})},Li.createElement(be.y4,{name:"transactionDetails",component:n=>Li.createElement(_t.Z,{...n,className:r.transactionCard},Li.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"6px"}},Li.createElement(Zi,{transaction:t,tokenData:x,metadata:e,offChainMetadata:h})),t?.type===ei.TransactionType.NFT_SALE&&t?.events?.nft?.buyer===m.publicKey?Li.createElement(a.KM,{className:r.ctaButton,label:"View in your gallery",onClick:()=>{u("/nfts")}}):null,Li.createElement(Oi,{transaction:t,tokenData:x,offChainMetadata:h}))}))))}function Zi({transaction:e,tokenData:t,metadata:n,offChainMetadata:o}){const l=Ai(),i=(0,d.Pg)(),c=(0,s.rTu)();if(e?.transactionError)return Li.createElement(Ii.Z,{sx:{height:100,width:100},htmlColor:"#F13236"});if(e.type===ei.TransactionType.SWAP){const[n,o]=mi(e,t);return Li.createElement("div",{className:l.detailCardHeaderSwapContainer},Li.createElement("div",{className:l.detailCardHeaderSwapColumn},Li.createElement(a.e4,{className:l.tokenLogo,src:n.tokenIcon}),Li.createElement("div",{className:l.detailCardHeaderSwapText},n.amountWithSymbol)),Li.createElement(Ni.Z,{className:l.detailCardHeaderSwapArrow}),Li.createElement("div",{className:l.detailCardHeaderSwapColumn},Li.createElement(a.e4,{className:l.tokenLogo,src:o.tokenIcon}),Li.createElement("div",{className:l.detailCardHeaderSwapText},o.amountWithSymbol)))}const m=o?.image,u=e?.events?.nft?.amount?e?.events?.nft?.amount/10**9:null;if(ni(e)&&m)return Li.createElement(Li.Fragment,null,Li.createElement(a.e4,{className:l.nft,src:m}),u?Li.createElement("div",{style:{display:"flex",alignItems:"center",paddingTop:"16px"}},Li.createElement(a.e4,{style:{borderRadius:"50%",width:"16px",height:"16px",marginRight:"5px"},src:s.Wsp}),Li.createElement("div",{style:{fontSize:"16px",color:i.custom.colors.fontColor}},u+" SOL")):null);if(e.type===ei.TransactionType.TRANSFER){if(e.source===ei.Source.SYSTEM_PROGRAM)return Li.createElement(Li.Fragment,null,Li.createElement(a.e4,{className:l.tokenLogo,src:s.Wsp}),Li.createElement("div",{className:l.transferAmount},ai(e,c)?"- "+e?.nativeTransfers?.[0]?.amount/10**9+" SOL":"+ "+e?.nativeTransfers?.[0]?.amount/10**9+" SOL"));const o=t[0]?.logoURI||r.rId,i=t[0]?.symbol||n?.onChainMetadata?.metadata?.data?.symbol;return o?Li.createElement(Li.Fragment,null,o===r.rId?Li.createElement("img",{className:l.tokenLogo,src:o}):Li.createElement(a.e4,{className:l.tokenLogo,src:o}),Li.createElement("div",{className:l.transferAmount},ai(e,c)?"- "+e?.tokenTransfers?.[0]?.tokenAmount+" "+(i&&i):"+ "+e?.tokenTransfers?.[0]?.tokenAmount+" "+(i&&i))):"NonFungible"===e?.tokenTransfers?.[0]?.tokenStandard?Li.createElement(hi.Z,{style:{borderRadius:"2px",width:"168px",height:"168px",fill:"#99A4B4"}}):ai(e,c)?Li.createElement(pi.Z,{style:{color:"#8F929E",width:"56px",height:"56px"}}):Li.createElement(gi.Z,{style:{color:"#8F929E",width:"56px",height:"56px"}})}return e?.type===ei.TransactionType.BURN||e?.type===ei.TransactionType.BURN?Li.createElement(xi.Z,{style:{color:"#E95050",width:"56px",height:"56px"}}):Li.createElement(Fi.Z,{sx:{height:100,width:100},htmlColor:"#35A63A"})}function Oi({transaction:e,tokenData:t,offChainMetadata:n}){const o=Ai(),l=(0,d.Pg)(),i=(0,s.sAm)(r.$OA.SOLANA),a=(0,s.y20)(r.$OA.SOLANA),c=(0,s.rTu)();return Li.createElement(mt.Z,{className:o.detailList},Li.createElement("div",{className:o.firstRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Date"),Li.createElement("div",{className:o.cellValue},oi(e?.timestamp)))),e.type?Li.createElement("div",{className:o.middleRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Type"),Li.createElement("div",{className:o.cellValue},ui(e.type)))):null,n?Li.createElement("div",{className:o.middleRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Item"),Li.createElement("div",{className:o.cellValue},n.name))):null,e.source?Li.createElement("div",{className:o.middleRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Source"),Li.createElement("div",{className:o.cellValue},ui(e.source)))):null,e?.type!==ei.TransactionType.UNKNOWN&&e.type!==ei.TransactionType.TRANSFER||!ai(e,c)?null:Li.createElement("div",{className:o.addressExplorerRow},Li.createElement("div",{className:o.middleRow,onClick:()=>{window.open((0,r.brO)(i,e?.tokenTransfers?.[0]?.toUserAccount||e?.nativeTransfers?.[0]?.toUserAccount,a))}},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"To"),Li.createElement("div",{className:o.cellValue},(0,r.R1Z)(e?.tokenTransfers?.[0]?.toUserAccount||e?.nativeTransfers?.[0]?.toUserAccount),Li.createElement(Yl.Z,{style:{color:l.custom.colors.icon,paddingLeft:"2px"}}))))),e?.type!==ei.TransactionType.UNKNOWN&&e.type!==ei.TransactionType.TRANSFER||!1!==ai(e,c)?null:Li.createElement("div",{className:o.middleRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"From"),Li.createElement("div",{className:o.cellValue},(0,r.R1Z)(e?.tokenTransfers?.[0]?.fromUserAccount||e?.nativeTransfers?.[0]?.fromUserAccount)))),e?.type===ei.TransactionType.SWAP?Li.createElement($i,{transaction:e,tokenData:t}):null,Li.createElement("div",{className:o.middleRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Network Fee"),Li.createElement("div",{className:o.cellValue},e?.fee/10**9," SOL"))),Li.createElement("div",{className:o.middleRow},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Status"),e?.transactionError?Li.createElement("div",{className:o.failedStatus},"Failed"):Li.createElement("div",{className:o.confirmedStatus},"Confirmed"))),Li.createElement("div",{className:o.lastRow,onClick:()=>{window.open((0,r.yUu)(i,e.signature,a))}},Li.createElement("div",{className:o.cell},Li.createElement("div",{className:o.label},"Signature"),Li.createElement("div",{className:o.cellValue,style:{color:l.custom.colors.blue}},(0,r.R1Z)(e?.signature),Li.createElement(Yl.Z,{fontSize:"small",style:{fontSize:"16px",color:l.custom.colors.blue,paddingLeft:"2px"}})))))}const $i=({transaction:e,tokenData:t})=>{const n=Ai(),[o,l]=mi(e,t);return Li.createElement(Li.Fragment,null,o?.amountWithSymbol?Li.createElement("div",{className:n.middleRow},Li.createElement("div",{className:n.cell},Li.createElement("div",{className:n.label},"You paid"),Li.createElement("div",{className:n.cellValue},o.amountWithSymbol))):null,l?.amountWithSymbol?Li.createElement("div",{className:n.middleRow},Li.createElement("div",{className:n.cell},Li.createElement("div",{className:n.label},"You Received"),Li.createElement("div",{className:n.confirmedStatus},l.amountWithSymbol))):null)};var Di=n(2784);function zi({blockchain:e,address:t,contractAddresses:n,transactions:l,style:i,minimize:c}){const m=(0,d.Pg)(),[u,p]=(0,o.useState)(null),[g,h]=(0,o.useState)(null),f=(0,s.sAm)(r.$OA.SOLANA),x=(0,s.y20)(r.$OA.SOLANA),y=l||(0,s.Spp)({blockchain:e,address:t,contractAddresses:n});if(u)return Di.createElement(Bi,{metadata:g,transaction:u,setMetadata:h,setTransactionDetail:p});const v=ii(y);return y?.length>0?Di.createElement("div",{style:{paddingBottom:"16px"}},v.map(((e,t)=>Di.createElement("div",{key:t,style:{marginLeft:"16px",marginTop:"16px",marginRight:"16px"}},Di.createElement(a.mx,{text:li(e[0].timestamp)}),Di.createElement(mt.Z,{style:{marginTop:"5px",paddingTop:0,paddingBottom:0,borderRadius:"14px",border:`${m.custom.colors.borderFull}`,...i}},e.map(((t,n)=>Di.createElement(Xl.SV,{key:t.signature,fallback:Di.createElement("div",{onClick:()=>{window.open((0,r.yUu)(f,t.signature,x))}},t.signature)},Di.createElement(wi,{transaction:t,isFirst:0===n,isLast:n===e.length-1,setMetadata:h,setTransactionDetail:p}))))))))):Di.createElement(ji,{minimize:!!c})}var Mi=n(2784);const _i=(0,d.W2)((e=>({txSig:{color:e.custom.colors.fontColor,fontSize:"16px",fontWeight:500,lineHeight:"24px"},txDate:{color:e.custom.colors.secondary,fontSize:"12px",fontWeight:500,lineHeight:"24px"}})));function Ui(){const{blockchain:e,publicKey:t}=(0,s.rTu)(),n=e===r.$OA.SOLANA?{component:zi,hook:s.QL9}:{component:Hi,hook:s.ngu};return Mi.createElement(Ki,{address:t,...n})}function Ki({address:e,component:t,hook:n}){const o=n({address:e})??[],l=e=>e?.timestamp||e?.date?.getTime()||0,i=[...o].sort(((e,t)=>l(e)>l(t)?-1:1));return Mi.createElement(t,{transactions:i})}function Wi({blockchain:e,address:t,contractAddresses:n,transactions:o,style:l,minimize:i=!1}){return Mi.createElement(Hi,{blockchain:e,address:t,contractAddresses:n,transactions:o,style:l,minimize:i})}function qi(){return Mi.createElement("div",{style:{height:"68px",display:"flex",justifyContent:"center",flexDirection:"column"}},Mi.createElement("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"}},Mi.createElement(a.gb,{iconStyle:{width:"35px",height:"35px"}})))}function Hi({blockchain:e,address:t,contractAddresses:n,transactions:o,style:l}){const i=(0,d.Pg)(),r=(0,s.Spp)({blockchain:e,address:t,contractAddresses:n,transactions:o});return l||(l={}),r.length>0?Mi.createElement("div",{style:{paddingBottom:"16px"}},Mi.createElement(mt.Z,{style:{marginTop:"16px",paddingTop:0,paddingBottom:0,marginLeft:"16px",marginRight:"16px",borderRadius:"14px",border:`${i.custom.colors.borderFull}`,...l}},r.map(((e,t)=>Mi.createElement(Vi,{key:t,transaction:e,isFirst:0===t,isLast:t===r.length-1}))))):null}function Vi({transaction:e,isFirst:t,isLast:n}){const o=_i(),l=(0,d.Pg)(),i=(0,s.sAm)(e.blockchain),c=(0,s.y20)(e.blockchain),m=(0,s.qYF)(e.blockchain);return Mi.createElement(ut.ZP,{button:!0,disableRipple:!0,onClick:()=>{window.open((0,r.yUu)(i,e.signature,c))},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",height:"68px",backgroundColor:l.custom.colors.nav,borderBottom:n?void 0:`solid 1pt ${l.custom.colors.border}`,...(0,a.Z9)(t,n,12)}},Mi.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},Mi.createElement("div",{style:{flex:1,display:"flex"}},Mi.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},null),Mi.createElement("div",null,Mi.createElement(ge.Z,{className:o.txSig},Mi.createElement("img",{style:{width:"12px",borderRadius:"2px",marginRight:"10px"},src:m}),e.signature.slice(0,4),"...",e.signature.slice(e.signature.length-5)),Mi.createElement(ge.Z,{className:o.txDate},(e.date?e.date:new Date(1e3*e.timestamp)).toLocaleString()))),Mi.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},Mi.createElement(Yl.Z,{style:{color:l.custom.colors.icon}}))))}var Gi=n(2784);const Ji=(0,d.W2)((e=>({tokenHeaderButtonContainer:{display:"flex",justifyContent:"space-between",marginLeft:"auto",marginRight:"auto",marginTop:"24px"},positivePercent:{color:e.custom.colors.positive},negativePercent:{color:e.custom.colors.negative},usdBalanceLabel:{color:e.custom.colors.secondary,fontWeight:500,fontSize:"14px",textAlign:"center",marginTop:"4px",lineHeight:"24px"},headerButtonLabel:{color:e.custom.colors.fontColor,fontSize:"14px",lineHeight:"24px",fontWeight:500}})));function Yi({blockchain:e,tokenAddress:t,publicKey:n}){const l=(0,s.zUN)();if(!e||!t)return null;const i=e===r.$OA.ETHEREUM?l.publicKey:t,a=e===r.$OA.ETHEREUM?[t]:void 0;return Gi.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},Gi.createElement(Xi,{blockchain:e,tokenAddress:t,publicKey:n}),Gi.createElement(o.Suspense,{fallback:Gi.createElement(qi,null)},Gi.createElement(Wi,{blockchain:e,address:i,contractAddresses:a,minimize:!0,style:{marginTop:0}})))}function Xi({blockchain:e,tokenAddress:t,publicKey:n}){const o=Ji(),[l]=(0,s.U2V)((0,s.b00)({publicKey:n,blockchain:e,tokenAddress:t}),null);if(!l)return null;const i=void 0===l.recentPercentChange?"":l.recentPercentChange>0?o.positivePercent:o.negativePercent;return Gi.createElement("div",{style:{paddingTop:"38px",marginBottom:"24px"}},Gi.createElement("div",null,Gi.createElement(rl.j,{token:l,amount:l.nativeBalance,displayLogo:!1}),l.priceData?Gi.createElement(ge.Z,{className:o.usdBalanceLabel},(0,r.gCK)(l.usdBalance),"   ",Gi.createElement("span",{className:i},l.recentPercentChange,"%")):null),Gi.createElement("div",{className:o.tokenHeaderButtonContainer},Gi.createElement(or,{rampEnabled:e===r.$OA.SOLANA&&"SOL"===l.ticker||e===r.$OA.ETHEREUM&&"ETH"===l.ticker,blockchain:e,address:t,publicKey:n,swapEnabled:e===r.$OA.SOLANA})))}function Qi({style:e,labelComponent:t,label:n,routes:l}){const i=Ji(),[r,a]=(0,o.useState)(!1),s=l[0];return Gi.createElement(Gi.Fragment,null,Gi.createElement(nl.zx,{style:e,onClick:()=>a(!0)},t||Gi.createElement(ge.Z,{className:i.headerButtonLabel},n)),Gi.createElement(ve.zw,{openDrawer:r,setOpenDrawer:a},Gi.createElement("div",{style:{height:"100%"}},Gi.createElement(be.I6,{initialRoute:s,options:e=>function(e,{route:t}){const n=e.find((e=>e.name===t.name));if(!n)throw new Error("route not found");return{title:n.title}}(l,e),navButtonLeft:Gi.createElement(ve.PZ,{onClick:()=>a(!1)})},l.map((e=>Gi.createElement(be.y4,{key:e.name,name:e.name,component:e.component})))))))}var er=n(2784);const tr=(0,d.W2)((e=>({outerContainer:{height:"80vh",display:"flex",justifyContent:"center",flexDirection:"column"},innerContainer:{justifyContent:"center",display:"flex",color:e.custom.colors.secondary},innerContainerPad:{padding:"0px 30px",justifyContent:"center",display:"flex"}}))),nr=({blockchain:e,publicKey:t})=>{const{close:n}=(0,ve.M$)(),[,l]=(0,o.useState)(!1),[i,r]=(0,o.useState)(""),[,s]=(0,o.useState)(!1),c=tr(),d=()=>{l(!0),r(""),fetch(`https://auth.xnfts.dev/onramp/session?publicKey=${t}&chain=${e}`,{method:"POST"}).then((async e=>{const t=await e.json();l(!1),s(t.secret),window.open(`https://doof72pbjabye.cloudfront.net/stripe.html?clientSecret=${t.secret}`,"blank","toolbar=no,\n            location=no,\n            status=no,\n            menubar=no,\n            scrollbars=yes,\n            resizable=no,\n            width=400,\n            height=600"),n()})).catch((e=>{console.error(e),r("Error while fetching token from Stripe"),l(!1)}))};return(0,o.useEffect)((()=>{d()}),[e,t]),er.createElement("div",{className:c.outerContainer}," ",i?er.createElement(er.Fragment,null,er.createElement("div",{className:c.innerContainer},er.createElement(ge.Z,{variant:"subtitle1"},i)),er.createElement("br",null),er.createElement("div",{className:c.innerContainerPad},er.createElement(a.KM,{label:"Try again",onClick:()=>d()}))):null,i?null:er.createElement("div",{className:c.innerContainer},er.createElement(a.gb,null)," "))};function or({blockchain:e,address:t,publicKey:n,rampEnabled:l,swapEnabled:i}){const a=(0,s.fwt)(),c=a&&a[r.gYp]&&l;return o.createElement("div",{style:{display:"flex",marginLeft:"auto",marginRight:"auto",justifyContent:"center",gap:"16px"}},c?o.createElement(ar,{blockchain:e,address:t}):null,o.createElement(rr,{blockchain:e,publicKey:n}),o.createElement(ir,{blockchain:e,address:t,publicKey:n}),i?o.createElement(lr,{blockchain:e,address:t}):null)}function lr({blockchain:e,address:t}){const n=(0,d.Pg)(),l=({routes:e=[]})=>o.createElement(sr,{label:"Swap",labelComponent:o.createElement(qo.Z,{style:{color:n.custom.colors.fontColor,display:"flex",marginLeft:"auto",marginRight:"auto"}}),routes:e,disabled:0===e.length}),i=()=>o.createElement(s.sd_,{tokenAddress:t,isInDrawer:!0},o.createElement(r,null)),r=()=>{const{canSwap:n,isLoading:i}=(0,s.xYw)();return i?o.createElement(l,null):n?o.createElement(l,{routes:[{name:"swap",component:e=>o.createElement(ml,{...e,tokenAddress:t}),title:"Swap",props:{blockchain:e}},{title:"Select Token",name:"select-token",component:e=>o.createElement(Al,e)}]}):null};return o.createElement(i,null)}function ir({blockchain:e,address:t,publicKey:n}){const l=(0,d.Pg)();return o.createElement(sr,{label:"Send",labelComponent:o.createElement(Ho.Z,{style:{color:l.custom.colors.fontColor,display:"flex",marginLeft:"auto",marginRight:"auto"}}),routes:e&&t?[{name:"select-user",component:e=>o.createElement(Zl.uT,e),title:"",props:{blockchain:e,address:t,publicKey:n}},{name:"send",component:e=>o.createElement(Jl.vw,e),title:"Send"}]:[{name:"select-token",component:cr,title:"Select Token"},{name:"select-user",component:e=>o.createElement(Zl.UJ,e),title:""},{name:"send",component:e=>o.createElement(Jl.vw,e),title:""}]})}function rr({blockchain:e,publicKey:t}){const n=(0,d.Pg)();return o.createElement(sr,{label:"Receive",labelComponent:o.createElement(Vo.Z,{style:{color:n.custom.colors.fontColor,display:"flex",marginLeft:"auto",marginRight:"auto"}}),routes:[{component:Dl,title:"Deposit",name:"deposit",props:{blockchain:e,publicKey:t}}]})}function ar({blockchain:e,address:t}){const n=(0,d.Pg)();return o.createElement(sr,{label:"Buy",labelComponent:o.createElement(a.B_,{fill:n.custom.colors.fontColor,style:{display:"flex",marginLeft:"auto",marginRight:"auto"}}),routes:e&&t?[{name:"stripe",component:e=>o.createElement(nr,e),title:"Buy",props:{blockchain:e,publicKey:t}}]:[{component:Hl,title:"Buy",name:"onramp",props:{blockchain:e,publicKey:t}},{component:e=>o.createElement(nr,e),title:"Buy using Link",name:"stripe"}]})}function sr({label:e,labelComponent:t,routes:n,disabled:l=!1}){const i=(0,d.Pg)();return o.createElement("div",{style:{width:"52px",height:"70px",opacity:l?.5:1,pointerEvents:l?"none":"auto"}},o.createElement(Qi,{style:{padding:0,width:"42px",height:"42px",minWidth:"42px",borderRadius:"21px",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.15)",marginLeft:"auto",marginRight:"auto",display:"block",marginBottom:"8px"},label:"",labelComponent:t,routes:n}),o.createElement(ge.Z,{style:{color:i.custom.colors.secondary,fontSize:"14px",fontWeight:500,lineHeight:"20px",textAlign:"center"}},e))}function cr(){const{push:e}=(0,be.HJ)();return o.createElement(Zo,{onClickRow:(t,n)=>{e("select-user",{blockchain:t,token:n,name:n.ticker})},customFilter:e=>!(!e.mint||e.mint!==r.VUJ)||!(!e.address||e.address!==r.aYU)||!e.nativeBalance.isZero()})}var dr=n(2784);function mr(){const e=(0,s.fwt)(),{push:t}=(0,s.HJj)(),n=(0,s.rTu)().blockchain===r.$OA.SOLANA,o=e.GQL_BALANCES?Tn:Wo;return dr.createElement("div",null,dr.createElement(o,null),dr.createElement("div",{style:{marginTop:"20px",marginBottom:"20px"}},dr.createElement(or,{rampEnabled:!0,swapEnabled:n})),dr.createElement($o,{onClickRow:(e,n,o)=>{t({title:`${(0,r.LFn)(e)} / ${n.ticker}`,componentId:r.ue$,componentProps:{blockchain:e,tokenAddress:n.address,publicKey:o}})},customFilter:e=>!(!e.mint||e.mint!==r.VUJ)||!(!e.address||e.address!==r.aYU)||!e.nativeBalance.isZero()}))}var ur=n(87409),pr=n(51880),gr=n(77256),hr=n(2784);function fr(){return hr.createElement(hr.Fragment,null,hr.createElement(xr,null),hr.createElement(xr,null),hr.createElement(xr,null),hr.createElement(xr,null))}function xr(){const e=(0,d.Pg)();return hr.createElement("div",{onClick:()=>{},style:{paddingLeft:"19px",paddingRight:"19px",paddingTop:"10px",paddingBottom:"10px",display:"flex",height:"38px",backgroundColor:e.custom.colors.nav,marginBottom:10}},hr.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center"}},hr.createElement("div",{style:{width:50}},hr.createElement(Dt.Z,{variant:"circular",width:40,height:40})),hr.createElement("div",{style:{marginLeft:"5px",width:"100%"}},hr.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},hr.createElement(Dt.Z,{width:"40%",height:20,style:{marginTop:"-6px"}})),hr.createElement(Dt.Z,{width:"80%",height:20,style:{marginTop:"-6px"}}))))}var yr=n(2784);let vr=0;const br=(0,pr.Z)((e=>(0,gr.Z)({container:{padding:0,color:e.custom.colors.fontColor2},horizontalCenter:{justifyContent:"center",display:"flex"},title:{marginTop:20,marginBottom:20,color:e.custom.colors.fontColor4,display:"flex",alignItems:"center",gap:8},drawerContainer:{padding:10,height:"80vh"}}))),Er=({image:e,setOpenDrawer:t})=>{const n=(0,s.vsx)(),l=br({isDark:n}),{props:i,title:c}=(0,s.Dtc)(),[m,u]=(0,o.useState)([]),[p,g]=(0,o.useState)(""),[h,f]=(0,o.useState)(0),[x,y]=(0,o.useState)(0),[v,b]=(0,o.useState)(!0),[E,k]=(0,o.useState)([]),{username:w}=(0,s.aFb)(),C=(0,d.Pg)(),S=(0,re.TH)().pathname,T=(e,t)=>{clearTimeout(vr),vr=setTimeout((()=>{R(e,t)}),250)},R=async(e="",t=0)=>{b(!0),f(t);const n=await fetch(`${r.FvS}/nft/members?room=${"/messages/groupchat"===S?i.id:i.collectionId}&mint=${i.nftMint}&type=collection&limit=25&offset=${t}&prefix=${e}`),o=await n.json();u(o.members),y(o.count),b(!1),k((e=>0===e.length?o.members.slice(0,3):e)),b(!1)};return(0,o.useEffect)((()=>{R()}),[]),yr.createElement(ur.ZP,{sx:{"& .MuiDrawer-paper":{background:n?C.custom.colors.background:C.custom.colors.nav,height:"90vh",borderTopLeftRadius:"15px",borderTopRightRadius:"15px","&::-webkit-scrollbar":{display:"none"}}},anchor:"bottom",open:!0,onClose:()=>t(!1)},yr.createElement("div",{className:l.drawerContainer},yr.createElement("div",{className:l.horizontalCenter},yr.createElement(ge.Z,{variant:"h5",className:l.title},yr.createElement(a.e4,{src:e,style:{borderRadius:"50%",height:40,width:40}})," ",i.title||c)),0!==x?yr.createElement(kr,{count:x,members:[...E.map((e=>({image:e.image}))),{image:`https://swr.xnfts.dev/avatars/${w}`}]}):null,yr.createElement(a.Rj,{searchFilter:p,setSearchFilter:g,placeholder:"Search username",onChange:e=>{g(e),T(e,0)}}),yr.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:5,color:C.custom.colors.smallTextColor}},yr.createElement("div",{style:{padding:5,cursor:"pointer",fontWeight:600,fontSize:"14px",color:C.custom.colors.blue},onClick:()=>{T(p,Math.max(h-1,0))}},0!==h?"Prev":""),25===m.length?yr.createElement("div",{style:{padding:5,cursor:"pointer",fontWeight:600,fontSize:"14px",color:C.custom.colors.blue},onClick:()=>{T(p,h+1)}},"Next"):null),v?yr.createElement(fr,null):null,v?null:yr.createElement("div",{className:l.container},0!==m.filter((e=>e.username?.toLocaleLowerCase().includes(p?.toLocaleLowerCase()))).length?yr.createElement(se.Z7,{style:{border:"none"},itemStyle:{backgroundColor:n?C.custom.colors.background:void 0,border:"none"},setMembers:u,users:m.filter((e=>e.username?.toLocaleLowerCase().includes(p?.toLocaleLowerCase())))}):yr.createElement("div",null))))};function kr({count:e,members:t}){const n=(0,d.Pg)(),o=e>=1e6?`${(e/1e6).toFixed(2)}m`:e>=1e3?`${(e/1e3).toFixed(2)}k`:e;return yr.createElement("div",{style:{justifyContent:"center",display:"flex",alignItems:"center",paddingBottom:20}},t.map(((e,t)=>yr.createElement(a.ug,{size:30,key:t,src:e.image,loadingStyles:{height:30,width:30,borderRadius:"50%"},style:{border:`solid 2px ${n.custom.colors.nav}`,borderRadius:"50%",height:30,...t>0?{marginLeft:"-12px"}:{}}}))),yr.createElement("div",{style:{color:n.custom.colors.smallTextColor,paddingLeft:10}},o," members"))}var wr=n(73906),Cr=n(17055),Sr=n(52679),Tr=n(2784);const Rr=()=>{const{props:e}=(0,s.Dtc)(),t=e.userId,n=e.username,l=(0,s.fAp)({userId:t}),i=(0,s.awr)(),c=(0,d.Pg)(),[m,u]=(0,o.useState)(null),p=Boolean(m),g=()=>{u(null)},h=async e=>{await(0,r.QTz)({to:t,sendRequest:e}),i({userId:t,friendshipValue:{requested:e}}),g()};return Tr.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},Tr.createElement(wr.Z,{onClick:e=>{u(e.currentTarget)},style:{cursor:"pointer",color:c.custom.colors.icon}}),Tr.createElement(Sr.Z.Root,{open:p,anchorEl:m,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:g,TransitionComponent:Cr.Z},Tr.createElement(Sr.Z.Group,null,Tr.createElement(Sr.Z.Item,{disabled:l?.blocked,onClick:async()=>{l?.areFriends?(await(0,r.DoY)({to:t}),i({userId:t,friendshipValue:{areFriends:!1}}),a.Am.success("Friend removed",`We've removed @${n} from your friends.`)):l?.requested?h(!1):(h(!0),a.Am.success((l?.remoteRequested,""),l?.remoteRequested?`You and ${n} are now connected`:`We'll let ${n} know you want to connect.`)),g()}},l?.areFriends?"Remove from Friends":l?.requested?"Cancel Pending Request":l?.remoteRequested?"Accept Friend Request":"Add to Friends")),Tr.createElement(Sr.Z.Group,null,Tr.createElement(Sr.Z.Item,{disabled:l?.spam,onClick:async()=>{const e=!l?.blocked;i({userId:t,friendshipValue:{blocked:e,requested:!e&&l.requested}}),await fetch(`${r.FvS}/friends/block`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,block:e})}),e&&a.Am.success("Blocked",`@${n} shouldn't be showing up in your DMs from now on.`),g()}},l?.blocked?"Unblock":"Block"),Tr.createElement(Sr.Z.Item,{onClick:async()=>{const e=!l?.spam;await fetch(`${r.FvS}/friends/spam`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,spam:e})}),i({userId:t,friendshipValue:{spam:e}}),g()}},l?.spam?"Remove spam":"Mark as spam"))))};var jr=n(2784);const Ir=(0,d.W2)((e=>({blockchainCard:{position:"relative",marginBottom:"12px",marginLeft:"12px",marginRight:"12px",borderRadius:"12px",border:e.custom.colors.border,height:"117px",overflow:"hidden",pointerEvents:"all",backgroundColor:"transparent !important","&:hover":{cursor:"pointer"}},imageBackground:{zIndex:2,position:"relative",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#000",pointerEvents:"all"},image:{zIndex:1,position:"relative",height:"117px",width:"547px",backgroundSize:"547px 234px",backgroundRepeat:"no-repeat",backgroundPosition:"0px 0px",pointerEvents:"all","&:hover":{backgroundPosition:"0px -117px"}},skeleton:{position:"absolute",zIndex:"0",top:"0px",left:"0px",height:"100%",width:"100%",transform:"none",pointerEvents:"none",backgroundColor:e.custom.colors.balanceSkeleton},hidden:{visibility:"hidden"},none:{display:"none",pointerEvents:"none"},visuallyHidden:{zIndex:-1,pointerEvents:"none",visibility:"hidden",position:"absolute",top:"1000px"}})));function Nr({allWalletCollections:e}){const[t,n]=(0,o.useState)(!1),l=(0,o.useRef)(null),i=(0,E.sJ)(s.$4J),r=Ir(),a=(0,s.KPt)();(0,o.useLayoutEffect)((()=>{if(!l.current)return;const e=l.current;if(!e.complete)return e.onload=()=>{n(!0)},()=>{e&&(e.onload=()=>null)};n(!0)}),[]);const c=!t,d=!!e?.find((e=>!!e.collections?.find((e=>e.metadataCollectionId===i.madladsCollection&&e.itemIds.length>0)))),m=!!e?.find((e=>!!e.collections?.find((e=>e.metadataCollectionId===i.wlCollection&&e.itemIds.length>0)))),u=d&&i.hasMadladBanner?i.hasMadladBanner:m&&i.hasWLBanner?i.hasWLBanner:i.banner;return jr.createElement(_t.Z,{onClick:()=>{i.isLive&&a("CkqWjTWzRMAtYN3CSs8Gp4K9H891htmaN1ysNXqcULc8")},className:r.blockchainCard,elevation:0},jr.createElement(Dt.Z,{className:`${r.skeleton}  ${c?"":r.none}`}),jr.createElement("img",{ref:l,className:r.visuallyHidden,src:u}),jr.createElement("div",{className:`${r.imageBackground} ${c?r.hidden:""}`},jr.createElement("div",{className:`${r.image}`,style:{backgroundImage:`url(${u})`}})))}var Fr=n(80078),Pr=n(77210),Lr=n(2784);function Ar({renderItems:e,children:t,className:n,style:l}){const[i,r]=(0,o.useState)(null),a=()=>{r(null)};return Lr.createElement("div",{className:n,style:l,onContextMenu:e=>{e.preventDefault(),r(null===i?{mouseX:e.clientX+2,mouseY:e.clientY-6}:null)}},t,Lr.createElement(Pr.Z,{open:null!==i,onClose:a,anchorReference:"anchorPosition",anchorPosition:null!==i?{top:i.mouseY,left:i.mouseX}:void 0},e(a)))}var Br=n(2784);const Zr=(0,d.W2)((()=>({button:{"&:hover":{opacity:d.IP},"&:hover .openXnft":{display:"flex"},"&:hover .xnftIcon":{width:"100%"},"&:hover .appIcon":{transform:"rotate(360deg)"}}})));function Or({collection:e}){const t=(0,s.rTu)(),n=(0,s.y20)(t.blockchain),o=Zr(),{push:l}=(0,s.HJj)(),i=(0,d.Pg)(),c=e.itemIds.map((e=>({publicKey:t.publicKey,nftId:e})));c.length=Math.min(c.length,4);const m=(0,E.sJ)((0,s.b8K)({nftIds:c,blockchain:t.blockchain})),u=[...m,null,null,null,null];if(u.length=4,!m)return null;const p=m[0],g=()=>{l({title:p.collectionName,componentId:r.CMC,componentProps:{id:e.id,publicKey:t.publicKey,connectionUrl:n}})};return Br.createElement(Ar,{renderItems:e=>Br.createElement(Fr.Z,{onClick:g},"View Items")},Br.createElement(Br.Fragment,null,Br.createElement(pe.Z,{className:o.button,onClick:g,disableRipple:!0,style:{textTransform:"none",padding:"4px",borderRadius:"8px",position:"relative",overflow:"hidden",minWidth:"153.5px",minHeight:"153.5px",height:"100%",width:"100%",aspectRatio:"1",display:"flex",flexDirection:"column",background:i.custom.colors.background}},Br.createElement("div",{style:{display:"flex",flexDirection:"row",width:"100%",height:"100%",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",overflow:"hidden"}},u.map(((e,t)=>Br.createElement("div",{key:e?.id??t,style:{position:"relative",width:"50%",height:"50%"}},Br.createElement("div",{style:{position:"absolute",top:"3px",right:"3px",bottom:"3px",left:"3px",overflow:"hidden",borderRadius:"8px"}},Br.createElement("div",{style:{position:"relative",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},e?Br.createElement(a.e4,{style:{width:"100%"},loadingStyles:{height:"100%"},removeOnError:!0,src:e.imageUrl,onError:e=>{e.currentTarget.src=r.Z8B}}):null))))))),Br.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},Br.createElement(ge.Z,{onClick:g,component:"div",style:{display:"flex",justifyContent:"flex-start",fontSize:"14px",color:i.custom.colors.fontColor,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",cursor:"pointer",padding:"8px 8px 8px 0px",flexGrow:1}},Br.createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},p.collectionName),e.itemIds.length>0?Br.createElement("span",{style:{marginLeft:"8px",color:i.custom.colors.secondary}},e.itemIds.length):null))))}var $r=n(14466),Dr=n(48502),zr=n(2784);const Mr=(0,d.W2)((e=>({xnftIcon:{background:e.custom.colors.nav,color:e.custom.colors.fontColor,borderRadius:"24px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden",width:"32px",flexWrap:"nowrap",transition:"width 100ms 200ms ease-out","& .appIcon":{transition:"transform 300ms ease-out"}},button:{"&:hover":{opacity:d.IP},"&:hover .openXnft":{display:"flex"},"&:hover .xnftIcon":{width:"100%"},"&:hover .appIcon":{transform:"rotate(360deg)"}}})));function _r({nft:e,subtitle:t,showCollectionChat:n}){const o=(0,s.rTu)(),l=(0,s.y20)(o.blockchain),{push:i}=(0,s.HJj)(),a=(0,s.KPt)(),c=(0,E.sJ)((0,s.HCD)({publicKey:o.publicKey,nftId:e.id,connectionUrl:l})),d=(0,E.sJ)((0,s.lBE)(e.metadataCollectionId)),m=(0,$r.Mz)(),{contents:u,state:p}=(0,E.$P)((0,s.pyx)(e?{collection:e.metadataCollectionId,mint:e.mint}:null));if(!e)return null;const g=c??n?d:null,h="hasValue"===p&&u||null,f=t=>{t.stopPropagation(),h&&a(h+"/"+e.mint)},x=async()=>{await i({title:e.name,componentId:r.LYo,componentProps:{nftId:e.id,publicKey:o.publicKey,connectionUrl:l}})},y=async t=>{await m(g,e.mint),t.stopPropagation()};return zr.createElement(Dr.N,{nft:e},(n=>zr.createElement(Ar,{renderItems:e=>zr.createElement(qr,{onOpenDetails:x,onOpenChat:g?y:void 0,onOpenXnft:h?f:void 0,onOpenSend:n,closeMenu:e})},zr.createElement(zr.Fragment,null,zr.createElement(Ur,{onClick:h?f:x,nft:e,isXnft:!!h}),zr.createElement(Wr,{nft:e,subtitle:t,onOpenDetails:x,onOpenChat:g?y:void 0,onOpenXnft:h?f:void 0,onOpenSend:n})))))}function Ur({nft:e,isXnft:t,onClick:n}){const o=Mr(),l=(0,d.Pg)();return zr.createElement(pe.Z,{className:o.button,onClick:n,disableRipple:!0,style:{textTransform:"none",padding:0,borderRadius:"8px",position:"relative",overflow:"hidden",minWidth:"153.5px",minHeight:"153.5px",height:"100%",width:"100%",aspectRatio:"1",display:"flex",flexDirection:"column",background:l.custom.colors.background}},zr.createElement(a.e4,{className:"nftImage",style:{width:"100%"},loadingStyles:{height:"100%"},removeOnError:!0,src:e.imageUrl,onError:e=>{e.currentTarget.src=r.Z8B}}),"Mad Lads"===e.collectionName?zr.createElement(Kr,{nft:e}):null,zr.createElement("div",{style:{width:"100%",position:"absolute",left:0,bottom:8,zIndex:2,display:"flex",justifyContent:"flex-start",padding:"0 8px",gap:"6px"}},t?zr.createElement("div",{className:`${o.xnftIcon} xnftIcon`},zr.createElement(a.LB,{className:"appIcon",style:{width:"16px",height:"16px",margin:"8px",flexShrink:0}}),zr.createElement(ge.Z,{sx:{flexShrink:0,width:"100px"}},"Open xNFT")):null))}function Kr({nft:e}){const{contents:t,state:n}=(0,E.$P)((0,s.X2K)(e.mint));return"hasError"===n?null:zr.createElement("div",{style:{width:"100%",position:"absolute",left:0,top:8,zIndex:2,display:"flex",justifyContent:"flex-start",padding:"0 8px",gap:"6px"}},"hasValue"===n&&t.isStaked?zr.createElement(zr.Fragment,null,zr.createElement(ge.Z,{style:{color:"#000",fontSize:"14px",fontWeight:600}},"STAKED")):null)}function Wr({nft:e,subtitle:t,onOpenDetails:n,onOpenChat:o,onOpenXnft:l,onOpenSend:i}){const r=(0,d.Pg)();return zr.createElement("div",{style:{padding:"0px",display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},zr.createElement(ge.Z,{onClick:n,component:"div",style:{display:"flex",justifyContent:"flex-start",fontSize:"14px",color:r.custom.colors.fontColor,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",cursor:"pointer",padding:"8px 8px 8px 0px",flexGrow:1}},zr.createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},t?.name??e.name),t?.length?zr.createElement("span",{style:{marginLeft:"8px",color:r.custom.colors.secondary}},t?.length??""):null),zr.createElement(Hr,{onOpenDetails:n,onOpenChat:o,onOpenXnft:l,onOpenSend:i}))}function qr({onOpenChat:e,onOpenXnft:t,onOpenDetails:n,onOpenSend:o,closeMenu:l}){return zr.createElement(zr.Fragment,null,t?zr.createElement(Fr.Z,{onClick:t},"Open xNFT"):null,e?zr.createElement(Fr.Z,{onClick:async t=>{l(),await e(t)}},"Chat"):null,zr.createElement(Fr.Z,{sx:{width:"100px"},onClick:n},"View"),zr.createElement(Fr.Z,{onClick:()=>{l(),o()}},"Send"))}function Hr({onOpenChat:e,onOpenXnft:t,onOpenDetails:n,onOpenSend:l}){const[i,r]=(0,o.useState)(null),a=(0,d.Pg)();return zr.createElement(zr.Fragment,null,zr.createElement(Yo.Z,{disableRipple:!0,sx:{padding:0,height:"5px"},onClick:e=>r(e.currentTarget)},zr.createElement(wr.Z,{style:{color:a.custom.colors.secondary}})),zr.createElement(Sr.Z.Root,{open:Boolean(i),anchorEl:i,onClose:()=>r(null)},zr.createElement(Sr.Z.Group,null,t?zr.createElement(Sr.Z.Item,{onClick:t},"Open xNFT"):null,zr.createElement(Sr.Z.Item,{sx:{width:"100px"},onClick:async()=>{await n(),r(null)}},"View"),e?zr.createElement(Sr.Z.Item,{onClick:async t=>{r(null),await e(t)}},"Chat"):null,zr.createElement(Sr.Z.Item,{onClick:()=>{l(),r(null)}},"Send"))))}var Vr=n(2784);function Gr({blockchainCollections:e,prependItems:t=[]}){const[n,l]=(0,o.useState)(new Array(e.length).fill(!1)),i=(0,o.useRef)(null);return Vr.createElement(Po.Z,null,(({width:o,height:l})=>{const r=Math.floor((o-24)/174);return Vr.createElement("div",{style:{position:"relative",height:`${l}px`,width:`${o}px`,pointerEvents:"all"}},Vr.createElement(Lo.S_,{key:JSON.stringify({blockchainCollections:e,numberOfItemsPerRow:r,prependItems:t.length}),ref:i,itemKey:o=>{const l=oa(o,e,n,r,t);return l?l.key:0},outerElementType:k.L,height:l,width:o,itemCount:la(e,n,r,t),itemSize:o=>{const l=oa(o,e,n,r,t);return l?l.height:0},style:{overflow:"hidden"}},(({index:o,style:l})=>{const i=oa(o,e,n,r,t);return i?Vr.createElement("div",{style:l},i.component):null})))}))}const Jr=function(){return Vr.createElement(ea,{top:!0,bottom:!1})},Yr=function(){return Vr.createElement(ea,{top:!1,bottom:!0})},Xr=function({itemsPerRow:e}){const t=new Array(e).fill(null);return Vr.createElement(ea,{top:!1,bottom:!1},Vr.createElement("div",{style:{display:"flex",height:"191.5px",justifyContent:"space-between",flex:"0 0 auto",paddingLeft:"12px",paddingRight:"12px"}},t.map((()=>Vr.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",marginTop:"6px"}},Vr.createElement("div",{style:{width:"153.5px",height:"153.5px",position:"relative",borderRadius:"8px",overflow:"hidden"}},Vr.createElement(Dt.Z,{style:{width:"153.5px",height:"153.5px",transform:"none",transformOrigin:"none"}})),Vr.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},Vr.createElement("div",{style:{height:"26px",display:"flex",flexDirection:"column",justifyContent:"center"}},Vr.createElement(Dt.Z,{style:{width:"100px",height:"10.5px",transform:"none",transformOrigin:"none"}}))))))))},Qr=function({blockchainIndex:e,itemStartIndex:t,itemsPerRow:n,blockchainCollections:l}){const i=l[e],r=(0,s.wUG)().find((e=>e.publicKey===i.publicKey)),c=r?.blockchain,d=i.collections,m=(0,s.y20)(c),u=t+n<=d.length?n:d.length%n,p=new Array(n).fill(null);for(let e=t;e<t+u;e++)p[e-t]=d[e];return Vr.createElement(ea,{top:!1,bottom:!1},Vr.createElement("div",{style:{display:"flex",padding:"6px",justifyContent:"space-evenly",flex:"0 0 auto"}},p.map((e=>Vr.createElement("div",{key:e?e.id:null,style:{position:"relative",width:"153.5px",height:"179.5px",overflow:"hidden",margin:"0px 6px"}},e?Vr.createElement(o.Suspense,{fallback:Vr.createElement(a.gb,null)},Vr.createElement(ta,{publicKey:i.publicKey,connectionUrl:m,collection:e})):null)))))},ea=(0,d.zo)("div")((({theme:e})=>({top:t,bottom:n})=>({position:"relative",backgroundColor:"inherit",marginLeft:"12px",marginRight:"12px",overflow:"hidden",borderLeft:e.custom.colors.borderFull,borderRight:e.custom.colors.borderFull,background:e.custom.colors.nav,...t?{borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderTop:e.custom.colors.borderFull,minHeight:"12px"}:{},...n?{borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",borderBottom:e.custom.colors.borderFull,marginBottom:"12px",minHeight:"12px"}:{}})));function ta({publicKey:e,connectionUrl:t,collection:n}){const o=n.itemIds?.find((e=>!!e)),l=(0,E.sJ)((0,s.E1m)({publicKey:e,connectionUrl:t,nftId:o}));return l?n.itemIds.length>1?Vr.createElement(Or,{collection:n}):Vr.createElement(_r,{nft:l,subtitle:{length:n.itemIds.length,name:l.collectionName},showCollectionChat:!0}):null}const na=(e,t,n)=>{let o=0;return o=e?Math.ceil(e.length/t):1,n&&(o=-1),o},oa=(e,t,n,o,l)=>{if(e<l.length)return l[e];e-=l.length;let i=0;const r=t.findIndex(((t,l)=>{const r=t.collections,a=n[l],s=na(r,o,a);return!(0===s||i+s+2<=e&&(i+=s+2,1))}));if(r<0)return null;const a=n[r],s=t[r],c=s?s.collections:null,d=na(c,o,a),m=e-i,u=m-1;if(0===m)return{height:12,key:`header${r}`,component:Vr.createElement(Jr,null)};if(u>=d)return{height:24,key:`footer${r}`,component:Vr.createElement(Yr,null)};const p=u*o;return c?{height:191.5,key:`items${r}${p}${o}`,component:Vr.createElement(Qr,{itemStartIndex:p,blockchainIndex:r,blockchainCollections:t,itemsPerRow:o})}:{height:191.5,key:`loading${r}${o}`,component:Vr.createElement(Xr,{itemsPerRow:o})}},la=(e,t,n,o)=>{const l=o.length;return e.reduce(((e,o,l)=>{const i=o.collections,r=t[l],a=na(i,n,r);return 0==a?e:e+a+2}),l)};var ia=n(2784);function ra(){const e=(0,E.$P)(s.$4J),t=((0,s.rTu)(),(0,s.QCC)()),{contents:n,state:l}=((0,E.sJ)(s.cL2),(0,E.$P)(s.Ojk)),i="loading"===l,r="hasValue"===l&&n||null,c="hasValue"===e.state?e.contents:{isLive:!1},d=(0,o.useMemo)((()=>ia.createElement(Gr,{prependItems:c.isLive?[{height:129,key:"oneEntry",component:ia.createElement(Nr,{allWalletCollections:r})}]:[],blockchainCollections:r??t.map((e=>({publicKey:e.publicKey,collections:null})))})),[c,r]),m=0===(r?r.map((e=>e.collections)).flat().reduce(((e,t)=>null===t?e:t.itemIds.length+e),0):0)&&!i;return ia.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:"100%",zIndex:0}},m?ia.createElement(ia.Fragment,null,c.isLive?ia.createElement(Nr,{allWalletCollections:r}):null,ia.createElement(a.ub,{icon:e=>ia.createElement(hi.Z,e),title:"No NFTs",subtitle:"Get started with your first NFT",buttonText:"Browse Magic Eden",onClick:()=>window.open("https://magiceden.io"),verticallyCentered:!c,style:{height:c.isLive?void 0:"100%"}})):ia.createElement("div",{style:{display:"flex",flex:1,position:"relative"}},d))}var aa=n(2784);function sa({publicKey:e,connectionUrl:t,id:n}){return aa.createElement("div",{style:{height:"100%"}},aa.createElement(ca,{id:n,publicKey:e,connectionUrl:t}))}function ca({id:e,publicKey:t,connectionUrl:n}){const{contents:o,state:l}=(0,E.$P)(s.Ojk),i="hasValue"===l&&o||null,r=i?i.map((e=>e.collections)).flat().find((t=>t.id===e)):null;return void 0===e?null:aa.createElement(aa.Fragment,null,aa.createElement(da,{publicKey:t,connectionUrl:n,collection:r}))}function da({collection:e,publicKey:t,connectionUrl:n}){const l=(0,o.useRef)(null);return aa.createElement(Po.Z,null,(({width:o,height:i})=>{const r=Math.floor((o-24)/174);return aa.createElement("div",{style:{position:"relative",height:`${i}px`,width:`${o}px`,pointerEvents:"all"}},aa.createElement(Lo.S_,{key:JSON.stringify({numberOfItemsPerRow:r,collection:e}),ref:l,itemKey:o=>ua(o,r,e,t,n).key,outerElementType:k.L,height:i,width:o,itemCount:ma(r,e),itemSize:o=>ua(o,r,e,t,n).height,style:{overflow:"hidden"}},(({index:o,style:l})=>{const i=ua(o,r,e,t,n);return aa.createElement("div",{style:l},i.component)})))}))}const ma=(e,t)=>t?Math.ceil(t.itemIds.length/e)+2:3,ua=(e,t,n,o,l)=>{const i=ma(t,n);return 0===e?{height:12,key:`header${e}`,component:aa.createElement(ha,null)}:e===i-1?{height:24,key:`footer${e}`,component:aa.createElement(fa,null)}:n?{height:191.5,key:`items${e}`,component:aa.createElement(ga,{itemStartIndex:e,itemsPerRow:t,collection:n,publicKey:o,connectionUrl:l})}:{height:191.5,key:`loading${e}`,component:aa.createElement(Xr,{itemsPerRow:t})}};function pa({publicKey:e,connectionUrl:t,nftId:n}){const{contents:o,state:l}=(0,E.$P)((0,s.E1m)({publicKey:e,connectionUrl:t,nftId:n})),i="hasValue"===l&&o||null;return i?aa.createElement(_r,{nft:i}):null}const ga=function({itemStartIndex:e,itemsPerRow:t,collection:n,publicKey:l,connectionUrl:i}){const r=(e-1)*t,s=r+t,c=new Array(t).fill(null);return n.itemIds.slice(r,s).forEach(((e,t)=>{c[t]=e})),aa.createElement(xa,{top:!1,bottom:!1},aa.createElement("div",{style:{display:"flex",padding:"6px",justifyContent:"space-evenly",flex:"0 0 auto"}},c.map((e=>aa.createElement("div",{key:e,style:{position:"relative",width:"153.5px",height:"179.5px",overflow:"hidden",margin:"0px 6px"}},null!==e&&n?aa.createElement(o.Suspense,{fallback:aa.createElement(a.gb,null)},aa.createElement(pa,{publicKey:l,connectionUrl:i,nftId:e})):null)))))},ha=function(){return aa.createElement(xa,{top:!0,bottom:!1})},fa=function(){return aa.createElement(xa,{top:!1,bottom:!0})},xa=(0,d.zo)("div")((({theme:e})=>({top:t,bottom:n})=>({position:"relative",backgroundColor:"inherit",marginLeft:"12px",marginRight:"12px",overflow:"hidden",borderLeft:e.custom.colors.borderFull,borderRight:e.custom.colors.borderFull,background:e.custom.colors.nav,...t?{borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderTop:e.custom.colors.borderFull,minHeight:"12px"}:{},...n?{borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",borderBottom:e.custom.colors.borderFull,marginBottom:"12px",minHeight:"12px"}:{}})));var ya=n(88823),va=n(69621),ba=n(2784);const Ea=(0,d.W2)((()=>({container:{width:"100%",height:"100%",backgroundImage:"/assets/one/distressed-background.png",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},centerAlign:{display:"flex",justifyContent:"center"},btnOuter:{padding:15}}))),ka=({id:e})=>ba.createElement("div",{style:{height:"100%"}},ba.createElement(Ca,{id:e}));function wa({collectionId:e,nftMint:t}){const{username:n,uuid:o}=(0,s.aFb)(),l=(0,s.vsx)(),i=(0,s.cPJ)();return ba.createElement(ya.W,{username:n||"",type:"collection",roomId:e||"-",userId:o,isDarkMode:l,publicKey:i?.publicKey,nftMint:t})}function Ca({id:e}){const t=Ea(),{push:n}=(0,s.HJj)();return ba.createElement("div",{className:t.container},ba.createElement("div",{className:t.centerAlign},ba.createElement("img",{src:"/assets/one/cream-circle.png",style:{height:"50vh",marginTop:"10vh"}})),ba.createElement("div",{className:t.centerAlign},ba.createElement("img",{src:"/assets/one/vito-smoke.png",style:{height:"70vh",marginTop:"-60vh"}})),ba.createElement("div",{className:t.centerAlign},ba.createElement("img",{src:"/assets/one/vito.png",style:{height:"70vh",marginTop:"-70vh"}})),ba.createElement("br",null),ba.createElement("div",{className:t.btnOuter},ba.createElement(a.KM,{onClick:()=>n({title:"Chat",componentId:r.xhr,componentProps:{id:e}}),label:ba.createElement("div",{style:{display:"flex"}},ba.createElement("div",null,"Enter the chat")," ",ba.createElement("div",{style:{marginLeft:5}}," ",ba.createElement(va.Z,null)," "))})))}var Sa=n(51441),Ta=n(21759),Ra=n(2784);const ja={"& .MuiBadge-badge":{color:"white",backgroundColor:"#E33E3F",height:16,minWidth:16}},Ia=(0,pr.Z)((()=>({badge:{fontSize:10}}))),Na=({style:e})=>{const[t]=(0,s.O4c)(),n=Ia();return t?Ra.createElement(Ta.Z,{sx:ja,badgeContent:t,classes:{badge:n.badge}},Ra.createElement(Sa.Z,{style:e})):Ra.createElement(Sa.Z,{style:e})},Fa=(0,d.W2)((e=>({searchField:{marginTop:"16px",marginBottom:"16px",width:"inherit",display:"flex","& .MuiOutlinedInput-root":{"& input":{paddingTop:0,paddingBottom:0}}},icon:{background:e.custom.colors.textBackground},iconInner:{background:e.custom.colors.fontColor},topImage:{maxWidth:"25vw"},horizontalCenter:{display:"flex",justifyContent:"center"},container:{marginLeft:"16px",marginRight:"16px"},roundBtn:{marginLeft:8,borderRadius:20,width:20,height:20,cursor:"pointer",background:"#FFFFFF",border:"2px solid #F0F0F2",fontSize:10},add:{width:17,paddingBottom:6,paddingRight:1},iconCircular:{width:"32px",height:"32px",borderRadius:"16px",marginRight:"8px",color:e.custom.colors.positive},iconCircularBig:{width:"40px",height:"40px",borderRadius:"16px",marginRight:"8px",color:e.custom.colors.positive},hoverParent:{"&:hover $hoverChild, & .Mui-focused $hoverChild":{visibility:"visible"}},hoverChild:{visibility:"hidden"},text:{color:e.custom.colors.fontColor2},smallText:{fontSize:12,color:e.custom.colors.fontColor2},userText:{fontSize:16,marginTop:4,color:e.custom.colors.fontColor2},userTextSmall:{fontSize:14,color:e.custom.colors.fontColor2},timestamp:{fontSize:14,minWidth:60,color:e.custom.colors.fontColor2},smallTitle:{color:e.custom.colors.smallTextColor,fontWeight:600},smallSubTitle:{color:e.custom.colors.smallTextColor,fontWeight:500},contactIconOuter:{background:e.custom.colors.textBorder},menuItem:{fontWeight:400,fontSize:14,color:e.custom.colors.fontColor,padding:"12px 16px"},menu:{"& .MuiList-root":{padding:0},paddingTop:0,paddingBottom:0,minWidth:184,color:e.custom.colors.fontColor}})));var Pa=n(2784);const La=({allChats:e,requests:t})=>{const n=Fa(),[l,i]=(0,o.useState)(""),r=e.filter((e=>1===e.areFriends)),s=(0,d.Pg)(),c=r.filter((e=>e.remoteUsername.includes(l))).map((e=>({image:e.remoteUserImage,id:e.remoteUserId,username:e.remoteUsername,areFriends:!!e.areFriends,requested:!!e.requested,remoteRequested:!!e.remoteRequested})));return Pa.createElement("div",{className:n.container},Pa.createElement(a.oi,{className:n.searchField,placeholder:"Search",startAdornment:Pa.createElement(w.Z,{sx:{color:s.custom.colors.icon,mr:"10px"}}),value:l,setValue:async e=>{const t=e.target.value;i(t)},inputProps:{style:{height:"48px"}}}),c.length>0?Pa.createElement("div",{style:{marginTop:"24px"}},Pa.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},Pa.createElement(a.mx,{text:"Your friends"}),t.received.length>0?Pa.createElement(Aa,{requests:t}):null),Pa.createElement("div",{style:{marginBottom:15}},Pa.createElement(se.Z7,{users:c}))):Pa.createElement(Pa.Fragment,null,t.received.length>0?Pa.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between",marginBottom:"8px",marginTop:"24px"}},Pa.createElement(Aa,{requests:t})):null,Pa.createElement(a.ub,{icon:e=>Pa.createElement(a.xC,{fill:s.custom.colors.icon,...e}),title:""===l?"No friends":`No results for '${l}'`,subtitle:""===l?"Request users to become friends in the messaging tab":"",style:{paddingLeft:0,paddingRight:0,marginTop:"24px"}})))},Aa=({requests:e})=>{const t=(0,d.Pg)(),n=(0,be.HJ)();return Pa.createElement("div",{style:{marginLeft:"4px",display:"flex",flexDirection:"row-reverse"}},Pa.createElement(ge.Z,{sx:{cursor:"pointer"},color:t.custom.colors.fontColor3,fontSize:14,onClick:()=>n.push("contact-requests",{description:Pa.createElement(Pa.Fragment,null,"These people wanted to add you as a friend.",Pa.createElement("br",null)," Click someone to view their profile."),requests:e})},"Request",e.received.length>1?"s":""," (",e.received.length,")"))};var Ba=n(2784);const Za=()=>{const e=(0,be.HJ)(),{uuid:t}=(0,s.aFb)(),n=(0,H.gW)(t),[l,i]=(0,o.useState)({received:[],sent:[]});return(0,o.useEffect)((()=>{(async function(){const[e,t]=await Promise.all([fetch(`${r.FvS}/friends/requests`).then((e=>e.json())),fetch(`${r.FvS}/friends/sent`).then((e=>e.json()))]);return{received:e.requests,sent:t.requests}})().then(i).catch(console.error)}),[]),(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Friends"})}),[e]),Ba.createElement("div",null,Ba.createElement(La,{allChats:n,requests:l}))},Oa=({description:e,isSent:t,requests:n})=>{const l=(0,be.HJ)(),i=Fa(),r=(0,d.Pg)(),[a,s]=(0,o.useState)([]),[c,m]=(0,o.useState)([]);return(0,o.useEffect)((()=>{m(n.received),s(n.sent)}),[n]),(0,o.useEffect)((()=>{l.setOptions({headerTitle:"Requests "+(t?"Sent":"Received")})}),[l]),Ba.createElement("div",{className:i.container},Ba.createElement(ge.Z,{sx:{mt:"24px",mb:"16px",textAlign:"center"},fontSize:14,color:r.custom.colors.fontColor3},e),Ba.createElement("div",{style:{display:"flex",flexDirection:"column"}},!t&&n.sent.length>0?Ba.createElement(ge.Z,{sx:{cursor:"pointer",alignSelf:"flex-end",mb:"8px"},fontSize:14,fontWeight:600,color:r.custom.colors.fontColor3,onClick:()=>l.push("contact-requests-sent",{description:Ba.createElement(Ba.Fragment,null,"People you added as friends.",Ba.createElement("br",null)," Click someone to view their profile."),isSent:!0,requests:n})},"Sent (",n.sent.length,")"):null,Ba.createElement(se.Z7,{setMembers:t?s:m,users:t?a:c})))};var $a=n(2784);const Da=(0,d.W2)((e=>({recentActivityLabel:{color:e.custom.colors.fontColor,fontWeight:500,fontSize:"14px",lineHeight:"24px"},customBadge:{backgroundColor:"#E33E3F"},allWalletsLabel:{fontWeight:500,fontSize:"12px",color:e.custom.colors.secondary},noRecentActivityLabel:{fontWeight:500,fontSize:"16px",padding:"16px",textAlign:"center",color:e.custom.colors.secondary},recentActivityListItemIcon:{width:"44px",height:"44px",borderRadius:"22px",marginRight:"12px",color:e.custom.colors.positive},recentActivityListItemIconNegative:{color:e.custom.colors.negative,marginLeft:"auto",marginRight:"auto"},txSig:{color:e.custom.colors.fontColor,fontSize:"16px",fontWeight:500,lineHeight:"24px"},txBody:{color:e.custom.colors.smallTextColor,fontSize:"14px",fontWeight:500,lineHeight:"24px"},time:{color:e.custom.colors.smallTextColor,fontSize:"14px",fontWeight:500,lineHeight:"24px"},networkSettingsButtonContainer:{display:"flex",flexDirection:"row-reverse",width:"38px"},networkSettingsButton:{padding:0,width:"24px","&:hover":{background:"transparent"}}}))),za=e=>{const t=[],n=e.slice().sort(((e,t)=>new Date(e.timestamp).getTime()<new Date(t.timestamp).getTime()?1:-1)).filter(((t,n)=>"friend_requests"!==t.xnft_id||e.map((e=>e.body)).indexOf(t.body)===n)),o=n.sort(((e,t)=>new Date(e.timestamp).getTime()<new Date(t.timestamp).getTime()?1:-1));for(let e=0;e<o.length;e++){const n=(0,r.p6d)(new Date(o[e].timestamp));0===t.length||t[t.length-1].date!==n?t.push({date:n,notifications:[o[e]]}):t[t.length-1].notifications.push(o[e])}return t};function Ma(){const{isXs:e}=(0,a.kC)(),t=e?(0,be.HJ)():null,n=(0,s.zk1)(),[l,i]=e?[!1,()=>{}]:(0,o.useState)(!1),[,c]=(0,E.FV)(s.hm$),d=(0,s.xVT)({limit:50,offset:0,uuid:n?.uuid??""});(0,o.useEffect)((()=>{e&&t.setOptions({headerTitle:"Notifications"})}),[]),(0,o.useEffect)((()=>{const e=d.slice(),t=e.sort(((e,t)=>new Date(e.timestamp).getTime()<new Date(t.timestamp).getTime()?1:-1)).filter(((t,n)=>"friend_requests"!==t.xnft_id||e.map((e=>e.body)).indexOf(t.body)===n)),n=t.sort(((e,t)=>new Date(e.timestamp).getTime()<new Date(t.timestamp).getTime()?1:-1))[0];n&&n.id&&fetch(`${r.FvS}/notifications/cursor`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lastNotificationId:n.id})}),fetch(`${r.FvS}/notifications/seen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds:d.filter((e=>!e.viewed)).map((({id:e})=>e))})}),c(0)}),[d,c]);const m=za(d);return $a.createElement($a.Fragment,null,$a.createElement(o.Suspense,{fallback:$a.createElement(_a,null)},$a.createElement(Ua,{onOpenDrawer:()=>i(!0),groupedNotifications:m})),e?null:$a.createElement(ve.zw,{openDrawer:l,setOpenDrawer:i},$a.createElement("div",{style:{height:"100%"}},$a.createElement(be.I6,{initialRoute:{name:"root"},options:()=>({title:"Notifications"}),navButtonLeft:$a.createElement(ve.PZ,{onClick:()=>i(!1)})},$a.createElement(be.y4,{name:"root",component:e=>$a.createElement(Za,e)}),$a.createElement(be.y4,{name:"contact-requests",component:e=>$a.createElement(Oa,e)}),$a.createElement(be.y4,{name:"contact-requests-sent",component:e=>$a.createElement(Oa,e)})))))}function _a(){return $a.createElement("div",{style:{height:"68px",display:"flex",justifyContent:"center",flexDirection:"column"}},$a.createElement("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"}},$a.createElement(a.gb,{iconStyle:{width:"35px",height:"35px"}})))}function Ua({groupedNotifications:e,onOpenDrawer:t}){const n=(0,d.Pg)();return e.length>0?$a.createElement("div",{style:{paddingBottom:"16px"}},e.map((({date:e,notifications:o})=>$a.createElement("div",{key:e,style:{marginLeft:"16px",marginRight:"16px",marginTop:"16px"}},$a.createElement(a.mx,{text:e}),$a.createElement(mt.Z,{style:{paddingTop:0,paddingBottom:0,borderRadius:"12px",border:`${n.custom.colors.borderFull}`}},$a.createElement("div",null,o.map(((e,n)=>$a.createElement(Ka,{key:n,notification:e,isFirst:0===n,isLast:n===o.length-1,onOpenDrawer:t}))))))))):$a.createElement(Ga,{minimize:!1})}function Ka({notification:e,isFirst:t,isLast:n,onOpenDrawer:o}){const l=Da(),i=(0,d.Pg)();return"friend_requests"===e.xnft_id?$a.createElement(Ha,{title:"Friend request",notification:e,isFirst:t,isLast:n,onOpenDrawer:o}):"friend_requests_accept"===e.xnft_id?$a.createElement(Ha,{title:"Friend request accepted",notification:e,isFirst:t,isLast:n,onOpenDrawer:o}):$a.createElement(ut.ZP,{button:!0,disableRipple:!0,onClick:()=>{},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",height:"68px",backgroundColor:e.viewed?i.custom.colors.nav:i.custom.colors.unreadBackground,borderBottom:n?void 0:`solid 1pt ${i.custom.colors.border}`,...(0,a.Z9)(t,n,12)}},$a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},$a.createElement("div",{style:{flex:1,display:"flex"}},$a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},$a.createElement(Va,{image:e.xnftImage})),$a.createElement("div",null,$a.createElement(ge.Z,{className:l.txSig},e.xnftTitle),$a.createElement(ge.Z,{className:l.txBody},e.body))),$a.createElement("div",null,$a.createElement("div",{className:l.time},(0,r.IAd)(e.timestamp)))))}function Wa({userId:e}){const t=(0,s.fAp)({userId:e}),{uuid:n}=(0,s.aFb)(),l=(0,s.awr)(),i=(0,d.Pg)(),[c,m]=(0,o.useState)(!1);return t?.remoteRequested&&!t?.areFriends?$a.createElement("div",{style:{display:"flex",marginTop:5}},$a.createElement(a.Vw,{style:{color:i.custom.colors.blue,marginRight:10},text:"Accept",onClick:async t=>{t.stopPropagation(),m(!0),await(0,r.QTz)({to:e,sendRequest:!0}),await(0,H.EV)(n,e,{requested:0,areFriends:1}),await l({userId:e,friendshipValue:{requested:!1,areFriends:!0,remoteRequested:!1}}),m(!1)}}),$a.createElement(a.Vw,{text:"Decline",onClick:async t=>{t.stopPropagation(),m(!0),await(0,r.QTz)({to:e,sendRequest:!1}),await(0,H.EV)(n,e,{requested:0,areFriends:0,remoteRequested:0}),await l({userId:e,friendshipValue:{requested:!1,areFriends:!1,remoteRequested:!1}}),m(!1)}})):$a.createElement("div",null)}function qa(e){try{return JSON.parse(e)}catch(e){return{}}}function Ha({notification:e,isFirst:t,isLast:n,onOpenDrawer:o,title:l}){const{isXs:s}=(0,a.kC)(),c=s?(0,be.HJ)():void 0,m=(0,i.tR)({remoteUserId:qa(e.body).from}),u=Da(),p=(0,d.Pg)();return $a.createElement(ut.ZP,{button:!0,disableRipple:!0,onClick:()=>s?c.push("contacts"):o(),style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",backgroundColor:e.viewed?p.custom.colors.nav:p.custom.colors.unreadBackground,borderBottom:n?void 0:`solid 1pt ${p.custom.colors.border1}`,...(0,a.Z9)(t,n,12)}},$a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},$a.createElement("div",{style:{flex:1,display:"flex",alignItems:"flex-start"}},$a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},$a.createElement(Va,{image:m?.image})),$a.createElement("div",{style:{width:"100%"}},$a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},$a.createElement("div",null,$a.createElement(ge.Z,{className:u.txSig},l)),$a.createElement("div",{className:u.time},(0,r.IAd)(e.timestamp))),$a.createElement(ge.Z,{className:u.txBody},"@",m.username),$a.createElement(Wa,{userId:qa(e.body).from})))))}function Va({image:e}){const t=Da();return $a.createElement(a.e4,{size:44,loadingStyles:{marginRight:"12px",height:"44px",width:"44px"},src:e,className:t.recentActivityListItemIcon})}function Ga({minimize:e}){const t=(0,d.Pg)();return $a.createElement("div",{style:{height:"100%",display:e?"none":void 0}},$a.createElement(a.ub,{icon:e=>$a.createElement(Sa.Z,e),title:"No Notifications",subtitle:"You don't have any notifications yet.",buttonText:"Browse the xNFT Library",onClick:()=>window.open(r.pPQ),innerStyle:{marginBottom:!0!==e?"64px":0},contentStyle:{color:e?t.custom.colors.secondary:"inherit"},minimize:e}))}var Ja=n(2784);const Ya=(0,d.W2)((()=>({networkSettingsButtonContainer:{display:"flex",flexDirection:"row-reverse",width:"38px"},networkSettingsButton:{padding:0,width:"24px","&:hover":{background:"transparent"}}})));function Xa(){const e=Ya(),[t,n]=(0,o.useState)(!1),l=(0,d.Pg)(),i=(0,s.fwt)().GQL_NOTIFICATIONS?Qa:Ma;return Ja.createElement("div",{className:e.networkSettingsButtonContainer},Ja.createElement(Yo.Z,{disableRipple:!0,className:e.networkSettingsButton,onClick:()=>n(!0),size:"large"},Ja.createElement(Na,{style:{color:l.custom.colors.icon,backgroundColor:"transparent",borderRadius:"12px"}})),Ja.createElement(ve.zw,{openDrawer:t,setOpenDrawer:n},Ja.createElement("div",{style:{height:"100%"}},Ja.createElement(be.I6,{initialRoute:{name:"root"},options:()=>({title:"Notifications"}),navButtonLeft:Ja.createElement(ve.PZ,{onClick:()=>n(!1)})},Ja.createElement(be.y4,{name:"root",component:e=>Ja.createElement(i,e)}),Ja.createElement(be.y4,{name:"contacts",component:e=>Ja.createElement(Za,e)}),Ja.createElement(be.y4,{name:"contact-requests",component:e=>Ja.createElement(Oa,e)}),Ja.createElement(be.y4,{name:"contact-requests-sent",component:e=>Ja.createElement(Oa,e)})))))}function Qa(){const{isXs:e}=(0,a.kC)(),t=e?(0,be.HJ)():null,n=(0,s.KPt)(),[l,i]=e?[!1,()=>{}]:(0,o.useState)(!1);(0,o.useEffect)((()=>{e&&t&&t.setOptions({headerTitle:"Notifications"})}),[]);const r=(0,o.useCallback)((o=>{if("friend_requests"===o.source||"friend_requests_accept"===o.source)e&&t?t.push("contacts"):i(!0);else{let e;try{e=new Ql.PublicKey(o.source)}catch{}void 0!==e&&n(e.toBase58())}}),[e,t,n,i]);return Ja.createElement(Ja.Fragment,null,Ja.createElement(Vn,{loaderComponent:Ja.createElement(es,null),onItemClick:r,onAcceptFriendRequest:(e,t)=>(0,H.EV)(e,t,{requested:0,areFriends:1}),onDeclineFriendRequest:(e,t)=>(0,H.EV)(e,t,{areFriends:0,remoteRequested:0,requested:0})}),e?null:Ja.createElement(ve.zw,{openDrawer:l,setOpenDrawer:i},Ja.createElement("div",{style:{height:"100%"}},Ja.createElement(be.I6,{initialRoute:{name:"root"},options:()=>({title:"Notifications"}),navButtonLeft:Ja.createElement(ve.PZ,{onClick:()=>i(!1)})},Ja.createElement(be.y4,{name:"root",component:e=>Ja.createElement(Za,e)}),Ja.createElement(be.y4,{name:"contact-requests",component:e=>Ja.createElement(Oa,e)}),Ja.createElement(be.y4,{name:"contact-requests-sent",component:e=>Ja.createElement(Oa,e)})))))}function es(){return Ja.createElement("div",{style:{height:"68px",display:"flex",justifyContent:"center",flexDirection:"column"}},Ja.createElement("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"}},Ja.createElement(a.gb,{iconStyle:{width:"35px",height:"35px"}})))}var ts=n(96664),ns=n(96510),os=n(49810),ls=n(54278),is=n(61119),rs=n(11889),as=n(6163),ss=n(3104),cs=n(27379);function ds({setOpenDrawer:e}){const[t,n]=(0,o.useState)(null),[l,i]=(0,o.useState)(!1),c=(0,E.sJ)(s.cL2),m=(0,s.OuZ)(),{username:u}=(0,s.aFb)(),p=(0,s.rTu)(),g=(0,E.Zl)((0,s.B0o)(u)),h=(0,d.Pg)(),{contents:f,state:x}=(0,E.$P)(s.Ojk),[y,v]=(0,o.useState)(!0);(0,o.useEffect)((()=>{m&&""!==m&&u&&""!==u&&Promise.all([fetch(m).then((e=>e.text())),fetch(`https://avatars.xnfts.dev/v1/${u}?size=500`).then((e=>e.text()))]).then((e=>{e[0]!==e[1]&&v(!1)})).catch(console.error)}),[m,u]);const b="hasValue"===x&&f||[],w=b.reduce(((e,t)=>e+(t.collections??[]).length),0);return o.createElement(ps,null,o.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"5px"}},o.createElement("div",{style:{position:"relative",width:"max-content"}},o.createElement(ys,null,o.createElement(xs,{src:t?.url||m})),y?null:o.createElement(Yo.Z,{disableRipple:!0,sx:{position:"absolute",top:"-8px",right:"-8px",color:h.custom.colors.icon},onClick:()=>n({id:"",url:`https://avatars.xnfts.dev/v1/${u}`})},o.createElement(as.Z,null)))),o.createElement(ge.Z,{style:{textAlign:"center",color:h.custom.colors.fontColor}},`@${u}`),o.createElement(hs,null,o.createElement(k.L,{style:{height:"100%",background:h.custom.colors.nav}},o.createElement("div",{style:{position:"relative",height:"100%"}},"loading"===x?o.createElement(a.gb,{size:50}):0===w?o.createElement(o.Fragment,null,c?null:o.createElement("div",{style:{position:"absolute",top:0,left:0,right:0}},o.createElement(Qt,{blockchain:p.blockchain,showContent:!0,setShowContent:()=>{}})),o.createElement(a.ub,{icon:e=>o.createElement(a.XB,e),title:"No NFTs to use",subtitle:"Get started with your first NFT",onClick:()=>window.open("https://magiceden.io/"),contentStyle:{marginBottom:0,color:"inherit",border:"none"},innerStyle:{border:"none"},buttonText:"Browse Magic Eden"})):o.createElement("div",{style:{paddingBottom:t?"80px":"0px",transition:"padding ease-out 200ms"}},b.map((e=>o.createElement(ms,{key:e.publicKey,publicKey:e.publicKey,collections:e.collections,isLoading:!1,tempAvatar:t,setTempAvatar:n}))))))),o.createElement(fs,{style:{maxHeight:t?"100px":"0px"}},o.createElement(a.tf,{label:"Cancel",onClick:()=>{n(null)},style:{margin:"16px"}}),o.createElement(a.KM,{label:l?o.createElement(ss.Z,{size:24,sx:{color:"white",display:"flex",alignSelf:"center"}}):"Update",onClick:async()=>{if(t){if(!t.nft)throw new Error("invariant violation");i(!0),await fetch(r.FvS+"/users/avatar",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({avatar:""===t.id?null:t.id})}),await fetch(r.bqz+"/"+u+"?bust_cache=1"),i(!1),g(t),n(null),e(!1)}},style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"16px",marginLeft:"0px"}})))}const ms=o.memo((function({publicKey:e,collections:t,isLoading:n,tempAvatar:l,setTempAvatar:i}){const[a,c]=(0,o.useState)(!0),d=(0,s.TBC)().find((t=>t.publicKey===e)).blockchain,m=(0,s.VzB)()??"",u=(0,s.fmj)()??"",p=d===r.$OA.SOLANA?m:u,g=t.reduce(((e,t)=>(e.push(...t.itemIds),e)),[]);return n||0!==t.length?o.createElement(o.Fragment,null,o.createElement(Qt,{blockchain:d,showContent:a,setShowContent:c}),o.createElement(cs.Z,{in:a},o.createElement(he.ZP,{container:!0,style:{padding:"12px 16px 16px 16px"},spacing:{xs:2,ms:2,md:2,lg:2}},g.map((t=>o.createElement(us,{key:t,publicKey:e,connectionUrl:p,nftId:t,tempAvatar:l,setTempAvatar:i})))))):null}));function us({publicKey:e,connectionUrl:t,nftId:n,tempAvatar:l,setTempAvatar:i}){const{contents:r,state:a}=(0,E.$P)((0,s.E1m)({publicKey:e,connectionUrl:t,nftId:n})),c="hasValue"===a&&r||null;return(0,o.useMemo)((()=>c?o.createElement(gs,{key:n,onClick:()=>{const e="solana"===c.blockchain?c.mint:c.id;i({nft:c,url:c.imageUrl,id:`${c.blockchain}/${e}`})},style:{width:"72px",height:"72px",borderRadius:"40px",margin:"16px 0px 0px 16px",border:l?.url===c.imageUrl?"3px solid black":""},src:c.imageUrl,removeOnError:!0}):null),[c,n,l])}const ps=(0,d.zo)("div")((()=>({position:"relative",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}))),gs=(0,d.zo)(a.e4)((({theme:e})=>({"&:hover":{border:`3px solid ${e.custom.colors.avatarIconBackground}`,cursor:"pointer"}}))),hs=(0,d.zo)("div")((({theme:e})=>({position:"relative",display:"flex",flexDirection:"column",flexGrow:1,backgroundColor:e.custom.colors.nav,flex:1,borderTop:`${e.custom.colors.borderFull}`,paddingBottom:"0px",paddingTop:"0px",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",marginTop:"16px",zIndex:"0",overflow:"hidden"}))),fs=(0,d.zo)("div")((({theme:e})=>({position:"absolute",bottom:"0px",display:"flex",zIndex:"1",background:e.custom.colors.nav,alignItems:"stretch",width:"100%",transition:"max-height ease-out 200ms"}))),xs=(0,d.zo)(a.e4)((()=>({borderRadius:"40px",width:"64px",height:"64px",marginLeft:"auto",marginRight:"auto",display:"block",zIndex:0}))),ys=(0,d.zo)("div")((({theme:e})=>({boxSizing:"border-box",position:"relative",borderRadius:"50px",backgroundImage:`url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='100' ry='100' stroke='${encodeURIComponent(e.custom.colors.avatarIconBackground)}' stroke-width='5' stroke-dasharray='8%25%2c 13%25' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e")`,padding:"6px",width:"82px",height:"82px",marginLeft:"auto",marginRight:"auto",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center","&:hover .editOverlay":{visibility:"visible"}})));var vs=n(2784);const bs="Change Profile Picture";function Es(){const e=(0,s.aFb)(),t=(0,d.Pg)(),[n,l]=(0,o.useState)(!1),i=(0,s.OuZ)(64);return vs.createElement("div",{style:{marginBottom:"24px"}},vs.createElement(ks,{onClick:()=>{l(!0)}},vs.createElement(a.e4,{key:i,src:i,style:{width:"74px",height:"74px",marginLeft:"auto",marginRight:"auto",display:"block",zIndex:0,borderRadius:"50%"}}),vs.createElement(ws,{className:"editOverlay"},vs.createElement(rs.Z,null))),vs.createElement(ge.Z,{style:{color:t.custom.colors.fontColor,textAlign:"center",marginTop:"4px"}},"@",e.username),vs.createElement(ve.zw,{openDrawer:n,setOpenDrawer:l},vs.createElement("div",{style:{height:"100%"}},vs.createElement(be.I6,{options:()=>({title:bs}),initialRoute:{name:"UpdateProfilePicture",title:bs},navButtonLeft:vs.createElement(ve.PZ,{onClick:()=>l(!1)})},vs.createElement(be.y4,{key:"update",name:"UpdateProfilePicture",component:()=>vs.createElement(ds,{setOpenDrawer:l})})))))}const ks=(0,d.zo)("div")((({theme:e})=>({position:"relative",background:e.custom.colors.avatarIconBackground,borderRadius:"40px",padding:"3px",width:"80px",height:"80px",marginLeft:"auto",marginRight:"auto",overflow:"hidden",display:"block","&:hover .editOverlay":{visibility:"visible"}}))),ws=(0,d.zo)("div")((()=>({position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"1",visibility:"hidden",cursor:"pointer",backgroundColor:"rgba(255,255,255, 0.5)"})));var Cs=n(2784);function Ss(){return Cs.createElement("div",{style:{display:"flex"}},Cs.createElement(Ts,null),Cs.createElement(Xa,null))}function Ts(){const e=(0,d.Pg)();return Cs.createElement(Yo.Z,{disableRipple:!0,sx:{padding:0,width:"24px","&:hover":{background:"transparent"}},size:"large",onClick:()=>{document.dispatchEvent(new KeyboardEvent("keydown",{key:"k",metaKey:!0}))}},Cs.createElement(ts.Z,{style:{color:e.custom.colors.icon,backgroundColor:"transparent",borderRadius:"12px"}}))}function Rs(){const e=(0,be.HJ)();return(0,o.useEffect)((()=>{e.setOptions({headerTitle:""})}),[e]),Cs.createElement(o.Suspense,{fallback:Cs.createElement("div",null)},Cs.createElement(js,null))}function js(){return Cs.createElement("div",null,Cs.createElement(Es,null),Cs.createElement(Is,null))}function Is(){const e=(0,d.Pg)(),t=(0,be.HJ)(),n=(0,s.G5b)(),o=[{label:"Wallets",onClick:()=>t.push("edit-wallets"),icon:e=>Cs.createElement(is.Z,e),detailIcon:Cs.createElement(a.lp,null)}],l=[{label:"Your Account",onClick:()=>t.push("your-account"),icon:e=>Cs.createElement(ns.Z,e),detailIcon:Cs.createElement(a.lp,null)},{label:"Preferences",onClick:()=>t.push("preferences"),icon:e=>Cs.createElement(os.Z,e),detailIcon:Cs.createElement(a.lp,null)}];l.push({label:"Friends",onClick:()=>t.push("contacts"),icon:e=>Cs.createElement(a.xC,e),detailIcon:Cs.createElement(a.lp,null)}),r.t$&&l.push({label:"xNFTs",onClick:()=>t.push("xnfts"),icon:e=>Cs.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},Cs.createElement(a.ps,{...e,style:{...e.style,width:"24px",height:"20px"}})),detailIcon:Cs.createElement(a.lp,null)}),l.push({label:"Lock",onClick:()=>{n.request({method:r.YHe,params:[]}).catch(console.error)},icon:e=>Cs.createElement(ls.Z,e),detailIcon:null});const i=[{label:"About Backpack",onClick:()=>t.push("about-backpack"),icon:null,detailIcon:Cs.createElement(a.lp,null)}];return Cs.createElement(Cs.Fragment,null,Cs.createElement(a.aV,{style:{marginTop:"24px",marginBottom:"16px",border:`${e.custom.colors.borderFull}`,borderRadius:"10px"}},o.map(((t,n)=>Cs.createElement(a.HC,{key:t.label,isFirst:0===n,isLast:n===o.length-1,onClick:t.onClick,id:t.label,style:{height:"44px",padding:"12px"},detail:t.detailIcon},Cs.createElement("div",{style:{display:"flex",flex:1}},t.icon({style:{color:e.custom.colors.icon,height:"24px",width:"24px"},fill:e.custom.colors.icon}),Cs.createElement(ge.Z,{style:{marginLeft:"8px",fontWeight:500,fontSize:"16px",lineHeight:"24px"}},t.label)))))),Cs.createElement(a.aV,{style:{marginTop:"12px",marginBottom:"16px",border:`${e.custom.colors.borderFull}`,borderRadius:"10px"}},l.map(((t,n)=>Cs.createElement(a.HC,{key:t.label,isFirst:0===n,isLast:n===l.length-1,onClick:t.onClick,id:t.label,style:{height:"44px",padding:"12px"},detail:t.detailIcon},Cs.createElement("div",{style:{display:"flex",flex:1}},t.icon({style:{color:e.custom.colors.icon,marginRight:"8px",height:"24px",width:"24px"},fill:e.custom.colors.icon}),Cs.createElement(ge.Z,{style:{fontWeight:500,fontSize:"16px",lineHeight:"24px"}},t.label)))))),Cs.createElement(a.aV,{style:{marginTop:"12px",marginBottom:"16px",border:`${e.custom.colors.borderFull}`,borderRadius:"10px"}},i.map(((e,t)=>Cs.createElement(a.HC,{key:e.label,isFirst:0===t,isLast:t===i.length-1,onClick:e.onClick,id:e.label,style:{height:"44px",padding:"12px"},detail:e.detailIcon},Cs.createElement("div",{style:{display:"flex",flex:1}},Cs.createElement(ge.Z,{style:{marginLeft:"8px",fontWeight:500,fontSize:"16px",lineHeight:"24px"}},e.label)))))))}var Ns=n(74352),Fs=n(87848),Ps=n(11896),Ls=n(2784);const As=({searchFilter:e})=>{const[t,n]=(0,o.useState)([]),[l,i]=(0,o.useState)(!0),a=(0,d.Pg)(),s=t.filter((t=>t.username.includes(e))).map((e=>({image:e.image,id:e.id||e.uuid,username:e.username,areFriends:e.areFriends,requested:e.requested,remoteRequested:e.remoteRequested})));return(0,o.useEffect)((()=>{(async()=>{const e=await fetch(`${r.FvS}/friends/requests`,{method:"GET"});try{const t=await e.json();n(t.requests)}catch(e){console.error(e)}i(!1)})()}),[]),l?Ls.createElement("div",{style:{marginTop:5}}," ",Ls.createElement(Bs,null)):Ls.createElement("div",{style:{marginTop:5}},0!==s.length?Ls.createElement(se.Z7,{setMembers:n,users:s}):null,0===s.length?Ls.createElement("div",{style:{display:"flex",justifyContent:"center"}},Ls.createElement("div",{style:{color:a.custom.colors.fontColor}},"You have no pending requests")):null)};function Bs(){return Ls.createElement(Ls.Fragment,null,Ls.createElement(Zs,{isFirst:!0,isLast:!1}),Ls.createElement(Zs,{isFirst:!1,isLast:!1}),Ls.createElement(Zs,{isFirst:!1,isLast:!1}),Ls.createElement(Zs,{isFirst:!1,isLast:!0}))}function Zs({isFirst:e,isLast:t}){const n=(0,d.Pg)();return Ls.createElement("div",{onClick:()=>{},style:{paddingLeft:"8px",paddingRight:"8px",paddingTop:"12px",height:48,paddingBottom:"12px",display:"flex",backgroundColor:n.custom.colors.nav,borderBottom:t?void 0:`solid 1pt ${n.custom.colors.border}`,...(0,a.Z9)(e,t,12)}},Ls.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center"}},Ls.createElement("div",null,Ls.createElement(Dt.Z,{variant:"circular",width:32,height:32})),Ls.createElement("div",{style:{marginLeft:"5px",width:"100%",display:"flex",justifyContent:"space-between",marginTop:5}},Ls.createElement(Dt.Z,{width:"80px",height:35,style:{marginTop:"-6px"}}),Ls.createElement(Dt.Z,{width:"70px",height:35,style:{marginTop:"-6px"}}))))}var Os=n(61255),$s=n(2784);function Ds(){const e=(0,s.G5b)(),t=(0,s.VzB)(),n=(0,be.HJ)();(0,o.useEffect)((()=>{n.setOptions({headerTitle:"RPC Connection"})}),[n]);const l={"Mainnet (Beta)":{onClick:()=>i(r.gKr.MAINNET),detail:t===r.gKr.MAINNET?$s.createElement(zs,null):null},Devnet:{onClick:()=>i(r.gKr.DEVNET),detail:t===r.gKr.DEVNET?$s.createElement(zs,null):null},Localnet:{onClick:()=>i(r.gKr.LOCALNET),detail:t===r.gKr.LOCALNET?$s.createElement(zs,null):null},Custom:{onClick:()=>{n.push("preferences-solana-edit-rpc-connection")},detail:t!==r.gKr.MAINNET&&t!==r.gKr.DEVNET&&t!==r.gKr.LOCALNET?$s.createElement($s.Fragment,null,$s.createElement(zs,null),$s.createElement(a.lp,null)):$s.createElement(a.lp,null)}},i=t=>{try{e.request({method:r.stC,params:[t,r.$OA.SOLANA]}).catch(console.error)}catch(e){console.error(e)}};return $s.createElement(ke.U,{menuItems:l})}function zs(){const e=(0,d.Pg)();return $s.createElement(yi.Z,{style:{color:e.custom.colors.brandColor}})}var Ms=n(2784);function _s(){const e=(0,be.HJ)(),t=(0,d.Pg)(),n=(0,s.oo1)(),l=(0,s.G5b)(),[i,c]=(0,o.useState)(n.seconds?n.seconds/60:void 0),[m,u]=(0,o.useState)(n.option);return(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Auto-lock timer"})}),[]),Ms.createElement("form",{onSubmit:async t=>{t?.preventDefault();const n=!m&&i?[Math.round(60*i),void 0]:[void 0,m];await l.request({method:r.bVk,params:n}),e.pop()},style:{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",textAlign:"center",alignContent:"center",color:t.custom.colors.secondary}},Ms.createElement(Os.Z,{sx:{color:t.custom.colors.icon,fontSize:40,margin:"32px auto 0"}}),Ms.createElement(ge.Z,{style:{fontSize:14,fontWeight:500,margin:"16px auto"}},"Lock Backpack when I'm inactive for:"),Ms.createElement("div",{style:{flex:1,display:"grid",gridAutoRows:"max-content",rowGap:12}},Ms.createElement("div",{style:{marginBottom:-2}},Ms.createElement(a.oi,{placeholder:"",type:"string",required:!1,error:!1,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:!m&&i?i.toString():"",setValue:e=>{isNaN(e.target.value)||(m&&u(void 0),c(+e.target.value.replace(/[.,]/g,"").substring(0,3)))},endAdornment:Ms.createElement(ge.Z,{style:{fontSize:"16px",fontWeight:500,lineHeight:"24px",color:t.custom.colors.secondary}},"Minutes")})),[{id:"never",text:"Never"},{id:"onClose",text:"Every time I close Backpack"}].map((({id:e,text:t})=>Ms.createElement(a.HC,{key:e,isFirst:!0,isLast:!0,onClick:()=>{u(e)},detail:m===e?Ms.createElement(zs,null):null},Ms.createElement(ge.Z,{style:{padding:"0 8px"}},t))))),Ms.createElement("div",{style:{display:"flex"}},Ms.createElement(a.tf,{label:"Cancel",onClick:()=>{e.pop()},style:{marginRight:"8px",border:`${t.custom.colors.borderFull}`}}),Ms.createElement(a.KM,{label:"Set",type:"submit",disabled:!m&&!i})))}var Us=n(2784);const Ks=()=>{const e=(0,be.HJ)(),t={"RPC Connection":{onClick:()=>e.push("preferences-ethereum-rpc-connection")}};return(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Ethereum"})}),[e]),Us.createElement(ke.U,{menuItems:t})};var Ws=n(95958),qs=n(1890);const{hexlify:Hs}=Ws,Vs=async(e,t,n)=>{if(await e.request({method:r.stC,params:[t,r.$OA.ETHEREUM]}),!n){const e=qs.yl(t),o=await e.getNetwork();n=Hs(o.chainId)}await e.request({method:r.bI7,params:[n]})};var Gs=n(2784);function Js(){const{close:e}=(0,ve.M$)(),t=(0,s.G5b)(),n=(0,s.fmj)(),l=(0,be.HJ)();(0,o.useEffect)((()=>{l.setOptions({headerTitle:"RPC Connection"})}),[l]);const i={Mainnet:{onClick:async()=>{await Vs(t,r.Ln3.MAINNET,"0x1"),e()},detail:n===r.Ln3.MAINNET?Gs.createElement(Ys,null):null},"Görli Testnet":{onClick:async()=>{await Vs(t,r.Ln3.GOERLI,"0x5"),e()},detail:n===r.Ln3.GOERLI?Gs.createElement(Ys,null):null},Localnet:{onClick:async()=>{await Vs(t,r.Ln3.LOCALNET),e()},detail:n===r.Ln3.LOCALNET?Gs.createElement(Ys,null):null},Custom:{onClick:()=>l.push("preferences-ethereum-edit-rpc-connection"),detail:n!==r.Ln3.MAINNET&&n!==r.Ln3.GOERLI&&n!==r.Ln3.LOCALNET?Gs.createElement(Gs.Fragment,null,Gs.createElement(Ys,null)," ",Gs.createElement(a.lp,null)):Gs.createElement(a.lp,null)}};return Gs.createElement(ke.U,{menuItems:i})}function Ys(){const e=(0,d.Pg)();return Gs.createElement(yi.Z,{style:{color:e.custom.colors.brandColor}})}var Xs=n(2784);function Qs(){const{close:e}=(0,ve.M$)(),t=(0,be.HJ)(),n=(0,s.G5b)(),[l,i]=(0,o.useState)(""),[r,c]=(0,o.useState)(""),[d,m]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=t.title;return t.setOptions({headerTitle:"Change RPC Connection"}),()=>{t.setOptions({headerTitle:e})}}),[]),(0,o.useEffect)((()=>{if(l)try{new URL(l.trim()),m(!1)}catch(e){m(!0)}else m(!1)}),[l]),Xs.createElement("div",{style:{paddingTop:"16px",height:"100%"}},Xs.createElement("form",{onSubmit:async()=>{await Vs(n,l,r),e()},style:{display:"flex",height:"100%",flexDirection:"column"}},Xs.createElement("div",{style:{flex:1,flexGrow:1}},Xs.createElement(a.kq,{error:d},Xs.createElement(a.VE,{isLast:!1,isFirst:!0,button:!1,title:"RPC",placeholder:"RPC URL",value:l,onChange:e=>{i(e.target.value)}}),Xs.createElement(a.VE,{isLast:!0,isFirst:!1,button:!1,title:"Chain",placeholder:"Chain ID",value:r,onChange:e=>c(e.target.value)}))),Xs.createElement("div",{style:{padding:16}},Xs.createElement(a.KM,{disabled:!l||d,label:"Switch",type:"submit"}))))}var ec=n(2784);const tc=()=>{const e=(0,be.HJ)(),t={"RPC Connection":{onClick:()=>e.push("preferences-solana-rpc-connection")},"Confirmation Commitment":{onClick:()=>e.push("preferences-solana-commitment")},Explorer:{onClick:()=>e.push("preferences-solana-explorer")}};return(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Solana"})}),[e]),ec.createElement(ke.U,{menuItems:t})};var nc=n(2784);function oc(){const e=(0,be.HJ)(),t=(0,s.RUd)(),n=(0,s.G5b)();(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Confirmation Commitment"})}),[e]);const l={Processed:{onClick:()=>i("processed"),detail:"processed"===t?nc.createElement(zs,null):nc.createElement(nc.Fragment,null)},Confirmed:{onClick:()=>i("confirmed"),detail:"confirmed"===t?nc.createElement(zs,null):nc.createElement(nc.Fragment,null)},Finalized:{onClick:()=>i("finalized"),detail:"finalized"===t?nc.createElement(zs,null):nc.createElement(nc.Fragment,null)}},i=e=>{n.request({method:r.sdB,params:[e]}).catch(console.error)};return nc.createElement(ke.U,{menuItems:l})}var lc=n(2784);function ic(){const{close:e}=(0,ve.M$)(),t=(0,be.HJ)(),n=(0,s.G5b)(),[l,i]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=t.title;return t.setOptions({headerTitle:"Change RPC Connection"}),()=>{t.setOptions({headerTitle:e})}}),[]),(0,o.useEffect)((()=>{if(l)try{new URL(l.trim()),d(!1)}catch(e){d(!0)}else d(!1)}),[l]),lc.createElement("div",{style:{paddingTop:"16px",height:"100%"}},lc.createElement("form",{onSubmit:()=>{try{n.request({method:r.stC,params:[l,r.$OA.SOLANA]}).then(e).catch(console.error)}catch(e){console.error(e)}},style:{display:"flex",height:"100%",flexDirection:"column"}},lc.createElement("div",{style:{flex:1,flexGrow:1}},lc.createElement(a.kq,{error:c},lc.createElement(a.VE,{isFirst:!0,isLast:!0,button:!1,title:"RPC",placeholder:"RPC URL",value:l,onChange:e=>{i(e.target.value)}}))),lc.createElement("div",{style:{padding:16}},lc.createElement(a.KM,{disabled:!l||c,label:"Switch",type:"submit"}))))}var rc=n(2784);function ac(){const e=(0,s.G5b)(),t=(0,s.epv)(),n=(0,be.HJ)();(0,o.useEffect)((()=>{n.setOptions({headerTitle:"Explorer"})}),[n]);const l={"Solana Beach":{onClick:()=>i(r.PNo.SOLANA_BEACH),detail:t===r.PNo.SOLANA_BEACH?rc.createElement(zs,null):rc.createElement("div",null)},"Solana Explorer":{onClick:()=>i(r.PNo.SOLANA_EXPLORER),detail:t===r.PNo.SOLANA_EXPLORER?rc.createElement(zs,null):rc.createElement("div",null)},"Solana FM":{onClick:()=>i(r.PNo.SOLANA_FM),detail:t===r.PNo.SOLANA_FM?rc.createElement(zs,null):rc.createElement("div",null)},Solscan:{onClick:()=>i(r.PNo.SOLSCAN),detail:t===r.PNo.SOLSCAN?rc.createElement(zs,null):rc.createElement("div",null)},XRAY:{onClick:()=>i(r.PNo.XRAY),detail:t===r.PNo.XRAY?rc.createElement(zs,null):rc.createElement("div",null)}},i=t=>{try{e.request({method:r.SW$,params:[t,r.$OA.SOLANA]}).catch(console.error)}catch(e){console.error(e)}};return rc.createElement(ke.U,{menuItems:l})}var sc=n(25131),cc=n(82056),dc=n(2784);function mc(){const e=(0,d.Pg)(),t=(0,be.HJ)(),n=(0,s.ukw)();return(0,o.useEffect)((()=>{t.setOptions({headerTitle:"Trusted Sites"})}),[t]),0===n.length?dc.createElement(a.ub,{icon:e=>dc.createElement(sc.Z,e),title:"No trusted sites",subtitle:"Trusted sites will be listed here",contentStyle:{marginBottom:"64px"}}):dc.createElement(a.aV,{style:{marginTop:"16px",border:`${e.custom.colors.borderFull}`}},Object.entries(n).map((([e,t],n,{length:o})=>dc.createElement(a.HC,{button:!1,key:e,id:e,isFirst:0===n,isLast:n===o-1,style:{height:"66px",padding:"8px"},detail:dc.createElement(uc,{origin:t})},dc.createElement(cc.Z,{style:{fontWeight:500}},t)))))}function uc({origin:e}){const t=(0,d.Pg)(),n=(0,s.G5b)();return dc.createElement(a.KM,{onClick:()=>(async()=>{await n.request({method:r.RPH,params:[e]})})(),label:"Revoke",style:{backgroundColor:t.custom.colors.negative,width:"71px",height:"34px",borderRadius:"4px"}})}var pc=n(2784);const gc=(0,r.jl5)("xnft-detail"),hc=({xnft:e})=>{const t=(0,d.Pg)(),[n,l]=(0,o.useState)(!1),i=(0,E.sJ)((0,s.nBr)(e.install.account.xnft.toString())),c=(0,be.HJ)(),m=(0,s.G5b)(),{username:u}=(0,s.aFb)(),p=(0,o.useMemo)((()=>"Simulator"===e.title||void 0!==Object.values(r.XRt).find((t=>t.publicKey===e.install.account.xnft.toBase58()))),[e]),g=e.install.publicKey===r.bW4;(0,o.useEffect)((()=>{c.setOptions({headerTitle:e.title})}),[]);const h={Display:{detail:pc.createElement(lt,{enabled:!i?.disabled,onChange:()=>{}}),onClick:()=>{},style:{opacity:.5},allowOnclickPropagation:!0},MediaAccess:{label:"Cam/Mic/Display access",detail:pc.createElement(lt,{enabled:!!i?.mediaPermissions,onChange:async()=>{const t=!i?.mediaPermissions;await m.request({method:r.SG6,params:[e.install.account.xnft.toString(),{mediaPermissions:t}]}),t&&"granted"!==(await window.navigator.permissions.query({name:"camera"})).state&&window.open("/permissions.html","_blank")}}),onClick:()=>{},style:{opacity:.5},allowOnclickPropagation:!0},PushNotificationAccess:{label:"Push notifications",detail:pc.createElement(lt,{enabled:!!i?.pushNotifications,onChange:async()=>{const t=!i?.pushNotifications;await m.request({method:r.SG6,params:[e.install.account.xnft.toString(),{pushNotifications:t}]}),await((e,t,n)=>fetch(`${r.FvS}/preferences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,xnftId:e,preferences:n})}))(e.install.account.xnft.toString(),u||"",{notifications:t}).catch((e=>console.error(`Error while updating remote notification state ${e}`))),t&&"granted"!==(await window.navigator.permissions.query({name:"notifications"})).state&&window.open("/permissions.html?notifications=true","_blank")}}),onClick:()=>{},style:{opacity:.5},allowOnclickPropagation:!0}};return pc.createElement("div",{style:{padding:"16px",height:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column"}},pc.createElement("div",null,pc.createElement(a.e4,{src:e.iconUrl,style:{width:"120px",height:"120px",borderRadius:"8px",display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"15px"}}),e.metadata?.xnft?pc.createElement(ge.Z,{sx:{color:t.custom.colors.fontColor,fontSize:"12px",marginBottom:"15px",textAlign:"center"}},"v",e.metadata.xnft.version):null,pc.createElement(pe.Z,{disabled:g,disableRipple:!0,variant:"contained",style:{textTransform:"none",background:t.custom.colors.bg2,color:t.custom.colors.fontColor,borderRadius:"12px",marginLeft:"auto",marginRight:"auto",height:"48px",display:"flex",position:"relative",opacity:g?.5:void 0,boxShadow:"none"},onClick:()=>window.open(`${r.pPQ}/app/${e.install.account.xnft.toString()}`)},"View in Library"," ",pc.createElement(a.BE,{style:{marginLeft:"4px",marginRight:"-4px"}}))),pc.createElement("div",null,pc.createElement(ke.U,{menuItems:h,style:{marginLeft:0,marginRight:0}}),pc.createElement(ge.Z,{style:{fontSize:"14px",marginTop:"36px",marginBottom:"36px",textAlign:"center",color:t.custom.colors.secondary}},p?"This xNFT was developed by the Backpack team and cannot be uninstalled.":"Uninstalling will remove this xNFT from your account."),p?null:pc.createElement(a.zJ,{disabled:g,label:"Uninstall xNFT",onClick:()=>l(!0)})),pc.createElement(ol.x,{openDrawer:n,setOpenDrawer:l},pc.createElement(fc,{xnft:e})))},fc=({xnft:e})=>{const t=(0,s.VvY)(),[n,l]=(0,o.useState)(""),[i,a]=(0,o.useState)("confirm"),[c,d]=(0,o.useState)(null),m=async()=>{a("sending");let n="";try{n=await r.YPm.uninstallXnft(t,{install:e.install.publicKey})}catch(e){return gc.error("unable to send transaction",e),void a("error")}d(n);try{await(0,r.gGt)(t.connection,n,"finalized"===t.commitment?"finalized":"confirmed"),a("complete")}catch(e){gc.error("unable to confirm",e),l(e.toString()),a("error")}};return"confirm"===i?pc.createElement(xc,{xnft:e,onConfirm:m}):"sending"===i?pc.createElement(yc,{signature:c,isComplete:!1}):"complete"===i?pc.createElement(yc,{signature:c,isComplete:!0}):pc.createElement(Jl.jj,{blockchain:r.$OA.SOLANA,signature:c,error:n,onRetry:()=>{m()}})},xc=({xnft:e,onConfirm:t})=>{const n=(0,d.Pg)();return pc.createElement("div",{style:{height:"402px",display:"flex",flexDirection:"column",padding:"16px"}},pc.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"}},pc.createElement(ge.Z,{style:{textAlign:"center",fontSize:"24px",color:n.custom.colors.fontColor}},"Are you sure you want to uninstall ",e.title,"?")),pc.createElement(a.zJ,{label:"Confirm",onClick:()=>t()}))};function yc({signature:e,isComplete:t}){const n=(0,d.Pg)(),o=(0,s.epv)(),l=(0,s.VzB)();return pc.createElement("div",{style:{height:"264px",display:"flex",flexDirection:"column"}},pc.createElement(ge.Z,{style:{textAlign:"center",color:n.custom.colors.secondary,fontSize:"14px",fontWeight:500,marginTop:"30px"}},t?"Sent":"Sending..."),pc.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column"}},t?pc.createElement("div",{style:{textAlign:"center"}},pc.createElement(a.nQ,null)):pc.createElement(a.gb,{size:48,iconStyle:{color:n.custom.colors.primaryButton,display:"flex",marginLeft:"auto",marginRight:"auto"},thickness:6})),pc.createElement("div",{style:{marginBottom:"16px",marginLeft:"16px",marginRight:"16px"}},pc.createElement(a.tf,{onClick:()=>{window.open((0,r.yUu)(o,e,l))},label:"View Explorer"})))}var vc,bc=n(2784);!function(e){e[e.TOO_SHORT=0]="TOO_SHORT",e[e.NO_MATCH=1]="NO_MATCH"}(vc||(vc={}));const Ec=8;function kc(){const e=(0,d.Pg)(),{close:t}=(0,ve.M$)(),n=(0,be.HJ)(),l=(0,s.G5b)(),[i,c]=(0,o.useState)(""),[m,u]=(0,o.useState)(""),[p,g]=(0,o.useState)(""),[h,f]=(0,o.useState)(!1),[x,y]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!1),E=""===m.trim()||""===p.trim(),[k,w]=(0,o.useState)(null);return(0,o.useEffect)((()=>{const e=n.title;return n.setOptions({headerTitle:"Change password"}),()=>{n.setOptions({headerTitle:e})}}),[]),bc.createElement("div",{style:{paddingTop:"16px",height:"100%"}},bc.createElement("form",{onSubmit:e=>{e.preventDefault(),(async()=>{const e=await l.request({method:r.$QQ,params:[i]}),n=""===m.trim()||m!==p,o=m.length<Ec;f(!e),y(n),b(o),!e||n||o?n?w(vc.NO_MATCH):o&&w(vc.TOO_SHORT):(await l.request({method:r.Kpd,params:[i,m]}),t())})()},style:{display:"flex",height:"100%",flexDirection:"column"}},bc.createElement("div",{style:{flex:1,flexGrow:1}},bc.createElement(a.kq,{error:h},bc.createElement(a.VE,{isFirst:!0,isLast:!0,value:i,onChange:e=>c(e.target.value),placeholder:"Enter password",type:"password",button:!1,title:"Current"})),bc.createElement(pe.Z,{onClick:()=>n.push("reset",{closeDrawer:()=>n.pop()}),disableRipple:!0,style:{padding:0,backgroundColor:"transparent",marginTop:"10px",marginLeft:"26px",marginBottom:"26px",textTransform:"none",color:e.custom.colors.brandColor}},bc.createElement(ge.Z,{style:{fontSize:"14px",fontWeight:500,lineHeight:"24px"}},"Forgot Password?")),bc.createElement(a.kq,{error:x||v},bc.createElement(a.VE,{isFirst:!0,value:m,onChange:e=>u(e.target.value),placeholder:"Enter password",type:"password",button:!1,title:"New"}),bc.createElement(a.VE,{isLast:!0,value:p,onChange:e=>g(e.target.value),placeholder:"Re-enter password",type:"password",button:!1,title:"Verify"})),null!==k?bc.createElement(ge.Z,{sx:{color:e.custom.colors.negative,textAlign:"center",fontSize:"14px"}},{[vc.TOO_SHORT]:`Must be at least ${Ec} characters.`,[vc.NO_MATCH]:"Password and confirmation do not match."}[k]):null,bc.createElement(Ee.MR,{style:{fontWeight:500,fontSize:"14px",lineHeight:"20px",marginLeft:"26px",marginRight:"26px",marginTop:"10px"}},"Your password must be at least ",Ec," characters long.")),bc.createElement("div",{style:{padding:16}},bc.createElement(a.KM,{label:"Change password",type:"submit",disabled:E}))))}var wc=n(2784);const Cc=(0,d.W2)((e=>({listRoot:{color:e.custom.colors.fontColor,padding:"0",margin:"0 8px",borderRadius:"4px",fontSize:"14px"},listItemRoot:{border:`${e.custom.colors.borderFull}`,alignItems:"start",borderRadius:"4px",background:e.custom.colors.nav,padding:"8px",minHeight:"56px",marginBottom:"1px"},listItemIconRoot:{minWidth:"inherit",height:"20px",width:"20px",marginRight:"8px"}})));function Sc(){const e=Cc(),t=(0,s.G5b)(),n=(0,be.HJ)(),[l,i]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=n.navButtonRight;return n.setOptions({headerTitle:"Secret recovery phrase"}),()=>{n.setOptions({headerRight:e})}}),[]),wc.createElement("form",{noValidate:!0,onSubmit:async e=>{let o;e.preventDefault();try{o=await t.request({method:r.FLT,params:[l]})}catch(e){return console.error(e),void d(!0)}n.push("show-secret-phrase",{mnemonic:o})},style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},wc.createElement(v.Z,{sx:{margin:"32px 24px 0 24px"}},wc.createElement(Ee.N9,{style:{width:"40px",height:"40px",marginBottom:"24px"},icon:wc.createElement(a.aN,{fill:"#E95050",width:"40px",height:"40px"})}),wc.createElement(Ee.h4,{text:"Warning",style:{textAlign:"center"}}),wc.createElement(v.Z,{sx:{marginTop:"24px"}},wc.createElement(mt.Z,{className:e.listRoot},wc.createElement(ut.ZP,{className:e.listItemRoot},wc.createElement(pt.Z,{className:e.listItemIconRoot},wc.createElement(at.Z,{htmlColor:"#EF4444",style:{height:"20px",width:"20px"}})),"Backpack support will never ask for your secret phrase."),wc.createElement(ut.ZP,{className:e.listItemRoot},wc.createElement(pt.Z,{className:e.listItemIconRoot},wc.createElement(dt.Z,{htmlColor:"#EF4444",style:{height:"20px",width:"20px"}})),"Never share your secret phrase or enter it into an app or website."),wc.createElement(ut.ZP,{className:e.listItemRoot},wc.createElement(pt.Z,{className:e.listItemIconRoot},wc.createElement(ct.Z,{htmlColor:"#EF4444",style:{height:"20px",width:"20px"}})),"Anyone with your secret phrase will have complete control of your account.")))),wc.createElement(v.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},wc.createElement(v.Z,{sx:{marginBottom:"8px"}},wc.createElement(a.oi,{autoFocus:!0,value:l,setValue:e=>i(e.target.value),error:c,type:"password",placeholder:"Password"})),wc.createElement(a.O3,{label:"Show phrase",type:"submit",disabled:0===l.length})))}function Tc({mnemonic:e}){const t=(0,d.Pg)(),n=Cc(),{close:o}=(0,ve.M$)(),l=e.split(" ");return wc.createElement(v.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},wc.createElement(v.Z,{sx:{margin:"32px 16px 0 16px"}},wc.createElement(Ee.N9,{icon:wc.createElement(a.tE,null),style:{width:"40px",height:"40px",marginBottom:"24px"}}),wc.createElement(Ee.h4,{text:"Recovery phrase",style:{textAlign:"center"}}),wc.createElement(Ee.MR,{style:{textAlign:"center",fontSize:"14px"}},"Use these ",l.length," words to recover your wallet"),wc.createElement(Fe.mB,{mnemonicWords:l,rootClass:n.mnemonicInputRoot}),wc.createElement(v.Z,{sx:{marginTop:"4px"}},wc.createElement(Fe.qi,{text:e,icon:wc.createElement(st.Z,{style:{color:t.custom.colors.fontColor}})}))),wc.createElement(v.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},wc.createElement(a.tf,{label:"Close",onClick:()=>o()})))}var Rc=n(37678),jc=n(43243),Ic=n(3463),Nc=n(2784);function Fc(){const e=(0,be.HJ)(),t=(0,d.Pg)();(0,o.useEffect)((()=>{e.setOptions({headerTitle:"About"})}),[e.setOptions]);const n=[{label:"Discord",onClick:()=>window.open(r.ulq,"_blank"),icon:e=>Nc.createElement(a.D7,e)},{label:"Twitter",onClick:()=>window.open(r.vac,"_blank"),icon:e=>Nc.createElement(Ic.Z,e)},{label:"GitHub",onClick:()=>window.open(r.ULu,"_blank"),icon:e=>Nc.createElement(Rc.Z,e)},{label:"Website",onClick:()=>window.open(r.UB9,"_blank"),icon:e=>Nc.createElement(jc.Z,e)}],l=[{label:"Terms of Service",onClick:()=>window.open(r.EQy,"_blank"),icon:null}];return Nc.createElement(Nc.Fragment,null,Nc.createElement("div",{style:{marginBottom:"35px"}},Nc.createElement(a.Lr,{style:{display:"flex",justifyContent:"center",margin:"32px auto",marginBottom:4}}),Nc.createElement(ge.Z,{style:{fontWeight:"600",fontSize:42,textAlign:"center",color:t.custom.colors.fontColor}},"Backpack"),Nc.createElement(ge.Z,{style:{color:t.custom.colors.secondary,textAlign:"center"}},r.BwW)),Nc.createElement(a.aV,null,n.map(((e,o)=>Nc.createElement(a.HC,{key:e.label,isFirst:0===o,isLast:o===n.length-1,onClick:e.onClick,id:e.label,style:{height:"44px",padding:"12px"}},Nc.createElement("div",{style:{display:"flex",flex:1}},e.icon({style:{color:t.custom.colors.icon,marginRight:"8px",height:"24px",width:"24px"},fill:t.custom.colors.icon}),Nc.createElement(ge.Z,{style:{fontWeight:500,fontSize:"16px",lineHeight:"24px"}},e.label)))))),Nc.createElement(a.aV,{style:{marginTop:"12px",marginBottom:"16px",border:`${t.custom.colors.borderFull}`,borderRadius:"10px"}},l.map(((e,t)=>Nc.createElement(a.HC,{key:e.label,isFirst:0===t,isLast:t===l.length-1,onClick:e.onClick,id:e.label,style:{height:"44px",padding:"12px"}},Nc.createElement("div",{style:{display:"flex",flex:1}},Nc.createElement(ge.Z,{style:{marginLeft:"8px",fontWeight:500,fontSize:"16px",lineHeight:"24px"}},e.label)))))))}var Pc=n(72190),Lc=n(2784);function Ac(){const e=(0,be.HJ)(),t=(0,s.cPJ)(),n=(0,s.VzB)(),l=t?.publicKey,{contents:i,state:c}=(0,E.$P)((0,s.G4p)({publicKey:l,connectionUrl:n}));if((0,o.useEffect)((()=>{e.setOptions({headerTitle:"xNFTs"})}),[e.setOptions]),"hasValue"!==c&&"loading"===c)return Lc.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},Lc.createElement(a.gb,null));const d=i||[],m={};return d.forEach((t=>{const n=t.install.publicKey.toString();m[n]={label:t.title,onClick:()=>e.push("xnfts-detail",{xnft:t}),icon:()=>Lc.createElement(a.e4,{style:{marginRight:"12px",borderRadius:"8px",width:"44px",height:"44px"},src:t.iconUrl}),detailIcon:Lc.createElement(a.lp,null),style:{height:"68px"}}})),0===d.length?Lc.createElement(a.ub,{icon:e=>Lc.createElement(Pc.Z,e),title:"No xNFTs",subtitle:"Get started by adding your first xNFT",contentStyle:{marginBottom:"64px"},buttonText:"Browse the xNFT Library",onClick:()=>window.open(r.pPQ,"_blank")}):Lc.createElement("div",{style:{marginTop:"16px",marginBottom:"16px"}},Lc.createElement(ke.U,{menuItems:m,style:{marginTop:"12px"}}))}var Bc=n(2784);function Zc(){const e=(0,be.HJ)(),t={"Change Password":{onClick:()=>e.push("change-password")},...(0,s.dI)()?{"Show Secret Recovery Phrase":{onClick:()=>e.push("show-secret-phrase-warning")}}:{},Remove:{onClick:()=>e.push("logout")}};return(0,o.useEffect)((()=>{e.setOptions({headerTitle:"Your Account"})}),[]),Bc.createElement(ke.U,{menuItems:t})}var Oc=n(2784);function $c({settingsOpen:e,setSettingsOpen:t}){return Oc.createElement(ve.zw,{openDrawer:e,setOpenDrawer:t},Oc.createElement("div",{style:{height:"100%"}},Oc.createElement(be.I6,{initialRoute:{name:"root",title:"Profile"},options:()=>({title:""}),navButtonLeft:Oc.createElement(ve.PZ,{onClick:()=>t(!1)})},Oc.createElement(be.y4,{name:"root",component:e=>Oc.createElement(Rs,e)}),Oc.createElement(be.y4,{name:"add-connect-wallet",component:e=>Oc.createElement(Re,e)}),Oc.createElement(be.y4,{name:"create-or-import-mnemonic",component:e=>Oc.createElement(Le,e)}),Oc.createElement(be.y4,{name:"create-mnemonic",component:e=>Oc.createElement(Ae,e)}),Oc.createElement(be.y4,{name:"import-wallet",component:e=>Oc.createElement(Ze,e)}),Oc.createElement(be.y4,{name:"import-from-mnemonic",component:e=>Oc.createElement(Ke,e)}),Oc.createElement(be.y4,{name:"set-and-sync-mnemonic",component:e=>Oc.createElement(_e,e)}),Oc.createElement(be.y4,{name:"import-from-secret-key",component:e=>Oc.createElement(Ve,e)}),Oc.createElement(be.y4,{name:"your-account",component:e=>Oc.createElement(Zc,e)}),Oc.createElement(be.y4,{name:"preferences",component:e=>Oc.createElement(nt,e)}),Oc.createElement(be.y4,{name:"preferences-auto-lock",component:e=>Oc.createElement(_s,e)}),Oc.createElement(be.y4,{name:"preferences-trusted-sites",component:e=>Oc.createElement(mc,e)}),Oc.createElement(be.y4,{name:"preferences-solana",component:e=>Oc.createElement(tc,e)}),Oc.createElement(be.y4,{name:"preferences-ethereum",component:e=>Oc.createElement(Ks,e)}),Oc.createElement(be.y4,{name:"preferences-solana-rpc-connection",component:e=>Oc.createElement(Ds,e)}),Oc.createElement(be.y4,{name:"preferences-solana-edit-rpc-connection",component:e=>Oc.createElement(ic,e)}),Oc.createElement(be.y4,{name:"preferences-solana-commitment",component:e=>Oc.createElement(oc,e)}),Oc.createElement(be.y4,{name:"preferences-solana-explorer",component:e=>Oc.createElement(ac,e)}),Oc.createElement(be.y4,{name:"preferences-ethereum-rpc-connection",component:e=>Oc.createElement(Js,e)}),Oc.createElement(be.y4,{name:"preferences-ethereum-edit-rpc-connection",component:e=>Oc.createElement(Qs,e)}),Oc.createElement(be.y4,{name:"change-password",component:e=>Oc.createElement(kc,e)}),Oc.createElement(be.y4,{name:"reset",component:e=>Oc.createElement(Ps.r,e)}),Oc.createElement(be.y4,{name:"edit-wallets",component:e=>Oc.createElement(wt,e)}),Oc.createElement(be.y4,{name:"edit-wallets-add-connect-preview",component:e=>Oc.createElement(Te,e)}),Oc.createElement(be.y4,{name:"edit-wallets-wallet-detail",component:e=>Oc.createElement(rt,e)}),Oc.createElement(be.y4,{name:"edit-wallets-remove",component:e=>Oc.createElement(Ge,e)}),Oc.createElement(be.y4,{name:"edit-wallets-rename",component:e=>Oc.createElement(Je,e)}),Oc.createElement(be.y4,{name:"edit-wallets-blockchain-selector",component:e=>Oc.createElement(St,e)}),Oc.createElement(be.y4,{name:"show-private-key-warning",component:e=>Oc.createElement(ft,e)}),Oc.createElement(be.y4,{name:"show-private-key",component:e=>Oc.createElement(xt,e)}),Oc.createElement(be.y4,{name:"show-secret-phrase-warning",component:e=>Oc.createElement(Sc,e)}),Oc.createElement(be.y4,{name:"show-secret-phrase",component:e=>Oc.createElement(Tc,e)}),Oc.createElement(be.y4,{name:"reset-warning",component:e=>Oc.createElement(Fs._,e)}),Oc.createElement(be.y4,{name:"logout",component:e=>Oc.createElement(Fs.R,e)}),Oc.createElement(be.y4,{name:"xnfts",component:e=>Oc.createElement(Ac,e)}),Oc.createElement(be.y4,{name:"xnfts-detail",component:e=>Oc.createElement(hc,e)}),Oc.createElement(be.y4,{name:"contacts",component:e=>Oc.createElement(Za,e)}),Oc.createElement(be.y4,{name:"contact-requests",component:e=>Oc.createElement(Oa,e)}),Oc.createElement(be.y4,{name:"contact-requests-sent",component:e=>Oc.createElement(Oa,e)}),Oc.createElement(be.y4,{name:"requests",component:e=>Oc.createElement(As,e)}),Oc.createElement(be.y4,{name:"about-backpack",component:e=>Oc.createElement(Fc,e)}))))}var Dc=n(2784);const zc=(0,d.W2)((e=>({menuButton:{padding:"2px",background:`${e.custom.colors.avatarIconBackground} !important`,"&:hover":{background:`${e.custom.colors.avatarIconBackground} !important`,backgroundColor:`${e.custom.colors.avatarIconBackground} !important`,opacity:d.IP}},popoverRoot:{zIndex:2}})));function Mc({buttonStyle:e,imgStyle:t}){const n=zc(),l=(0,d.Pg)(),[i,r]=(0,o.useState)(void 0),c=(0,s.OuZ)(32),[m,u]=(0,o.useState)(!1),{isXs:p}=(0,a.kC)();return Dc.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},Dc.createElement(Yo.Z,{disableRipple:!0,className:n.menuButton,style:{...e},onClick:e=>{r(e.currentTarget)}},Dc.createElement(a.e4,{src:c,style:{width:"32px",height:"32px",borderRadius:"16px",...t}})),Dc.createElement(Ns.ZP,{open:Boolean(i),anchorEl:i,onClose:()=>r(void 0),anchorOrigin:{vertical:p?"bottom":"top",horizontal:"left"},PaperProps:{style:{minWidth:"218px",borderRadius:"6px",background:l.custom.colors.avatarPopoverMenuBackground}},transformOrigin:{vertical:p?"top":"bottom",horizontal:"left"},classes:{root:n.popoverRoot},transitionDuration:0},Dc.createElement(Jc,{close:()=>r(void 0),openSettings:()=>u(!0)},Dc.createElement(_c,null))),Dc.createElement($c,{settingsOpen:m,setSettingsOpen:u}))}function _c(){const e=(0,d.Pg)();return Dc.createElement("div",{style:{width:"218px",border:e.custom.colors.borderFull,borderRadius:"6px"}},Dc.createElement(Wc,null),Dc.createElement("div",{style:{borderTop:e.custom.colors.borderFull}}),Dc.createElement(qc,null),Dc.createElement("div",{style:{borderTop:e.custom.colors.borderFull}}),Dc.createElement(Hc,null))}function Uc({children:e}){return Dc.createElement("div",{style:{paddingTop:"4px",paddingBottom:"4px"}},e)}function Kc({onClick:e,children:t}){return Dc.createElement(pe.Z,{onClick:e,disableRipple:!0,style:{textTransform:"none",padding:0,paddingTop:"8px",paddingBottom:"8px",paddingLeft:"16px",paddingRight:"16px",width:"100%",display:"inline"}},Dc.createElement("div",{style:{display:"flex"}},t))}function Wc(){const e=(0,s.gll)(),t=(0,d.Pg)(),n=(0,s.G5b)(),{close:o}=Yc();return Dc.createElement(Uc,null,e.map((e=>Dc.createElement(Vc,{key:e.uuid,user:e,onClick:async()=>{o(),await n.request({method:r.KKm,params:[e.uuid]})}}))),Dc.createElement(Kc,{onClick:()=>{o(),(0,r.GnJ)()}},Dc.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:"4px"}},Dc.createElement(de.Z,{style:{fontSize:"14px",color:t.custom.colors.secondary}})),Dc.createElement(ge.Z,{style:{fontSize:14,color:t.custom.colors.secondary}},"Add Account")))}function qc(){const e=(0,d.Pg)(),{openSettings:t}=Yc();return Dc.createElement(Uc,null,Dc.createElement(Kc,{onClick:()=>{t()}},Dc.createElement(ge.Z,{style:{display:"flex",flexDirection:"column",justifyContent:"center",color:e.custom.colors.fontColor,fontSize:"14px"}},"Settings")),Dc.createElement(Kc,{onClick:async()=>{await(0,r.lUY)("popup.html"),window.close()}},Dc.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},Dc.createElement(ge.Z,{style:{display:"flex",flexDirection:"column",justifyContent:"center",color:e.custom.colors.fontColor,fontSize:"14px"}},"Pop Window"),Dc.createElement(ge.Z,{style:{display:"flex",flexDirection:"column",justifyContent:"center",color:e.custom.colors.secondary,fontSize:"14px"}},"Ctrl + G"))))}function Hc(){const e=(0,d.Pg)(),t=(0,s.G5b)();return Dc.createElement(Uc,null,Dc.createElement(Kc,{onClick:()=>{t.request({method:r.YHe,params:[]}).catch(console.error)}},Dc.createElement(ge.Z,{style:{display:"flex",flexDirection:"column",justifyContent:"center",color:e.custom.colors.fontColor,fontSize:"14px"}},"Lock")))}function Vc({user:e,onClick:t}){const n=(0,d.Pg)(),o=(0,s.aFb)(),l=(0,s.OuZ)(void 0,e.username),i=e.uuid===o.uuid;return Dc.createElement(Kc,{onClick:t},Dc.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},Dc.createElement("div",{style:{display:"flex"}},Dc.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},Dc.createElement(a.e4,{src:l,style:{width:"20px",height:"20px",borderRadius:"50%"}})),Dc.createElement(ge.Z,{style:{marginLeft:"8px",display:"flex",flexDirection:"column",justifyContent:"center",color:n.custom.colors.fontColor,fontSize:"14px"}},"@",e.username)),i?Dc.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},Dc.createElement(yi.Z,{style:{width:"20px",height:"20px",opacity:.8,color:n.custom.colors.fontColor}})):null))}const Gc=(0,o.createContext)(null);function Jc({children:e,close:t,openSettings:n}){return Dc.createElement(Gc.Provider,{value:{close:t,openSettings:n}},e)}function Yc(){const e=(0,o.useContext)(Gc);if(null===e)throw new Error("Context not available");return e}var Xc=n(2784);function Qc(){const[e,t]=(0,o.useState)(!0),[n,l]=(0,o.useState)(null);return n?Xc.createElement(ve.zw,{openDrawer:e,setOpenDrawer:t},Xc.createElement(be.I6,{initialRoute:{name:"transactionDetails"},options:()=>({title:n.details?.details.title??"App Interaction"}),navButtonLeft:Xc.createElement(Pi.I4,{onClick:()=>l(null)})},Xc.createElement(be.y4,{name:"transactionDetails",component:e=>Xc.createElement(Ro,{containerStyle:{paddingBottom:16,paddingHorizontal:16,paddingTop:24},details:n.details,transaction:n.transaction,...e})}))):Xc.createElement(No,{loaderComponent:Xc.createElement(ed,null),onItemClick:(e,t,n)=>{n||window.open(t),l({details:n,transaction:e})}})}function ed(){return Xc.createElement("div",{style:{height:"68px",display:"flex",justifyContent:"center",flexDirection:"column"}},Xc.createElement("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"}},Xc.createElement(a.gb,{iconStyle:{width:"35px",height:"35px"}})))}(0,d.W2)((e=>({networkSettingsButtonContainer:{display:"flex",flexDirection:"row-reverse",width:"38px"},networkSettingsButton:{padding:0,width:"24px","&:hover":{background:"transparent"}},networkSettingsIcon:{color:e.custom.colors.icon,backgroundColor:"transparent",borderRadius:"12px"}})));var td=n(90070),nd=n(78676),od=n(70943),ld=n(2784);const id=(0,d.W2)((e=>({tabXs:{textTransform:"none",padding:0,opacity:"1 !important",height:"30px",minHeight:"30px","&:hover":{background:"transparent !important","& svg":{"& path":{fill:`${e.custom.colors.brandColor} !important`}}}},tabBottom:{textTransform:"none",padding:0,opacity:"1 !important",height:"64px","&:hover":{background:"transparent !important","& svg":{"& path":{fill:`${e.custom.colors.brandColor} !important`}}}},tab:{opacity:"1 !important",minWidth:"74px",width:"74px",marginTop:"16px","&:hover":{background:"transparent !important","& svg":{"& path":{fill:`${e.custom.colors.brandColor} !important`}}},"& .MuiTabs-flexContainer":{height:"100%",width:"100%"}},tabRoot:{height:"100%",minWidth:"74px",width:"74px",backgroundColor:e.custom.colors.nav,borderRight:`${e.custom.colors.borderFull}`,"& .MuiTabs-flexContainer":{height:"100%",width:"100%"}},tabRootXs:{height:"30px",minHeight:"30px"},tabRootBottom:{zIndex:1,height:"64px",minHeight:"64px",backgroundColor:e.custom.colors.nav,borderTop:`${e.custom.colors.borderFull}`,boxShadow:e.custom.colors.tabBarBoxShadow},tabIndicator:{},activeTab:{}})));function rd(e){const t=(0,re.TH)(),{isXs:n}=(0,a.kC)(),{isRoot:l}=(0,s.HJj)();return ld.createElement("div",{style:{display:"flex",flexDirection:n?"column":"row",height:"100%"}},t.pathname.startsWith("/xnft/")||"/nfts/experience"===t.pathname||"/nfts/chat"===t.pathname||!(n&&l||!n)||n&&"/messages/chat"===t.pathname||n&&"/messages/groupchat"===t.pathname||n&&"/messages/profile"===t.pathname?null:ld.createElement(sd,null),ld.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},ld.createElement(o.Suspense,{fallback:ld.createElement(a.gb,null)},ld.createElement(k.L,null,e.children))))}function ad(){const e=(0,s.G5b)(),t=(0,s.xD1)(),n=(0,d.Pg)(),o=async n=>{n===t?await e.request({method:r.VB_,params:[]}):await e.request({method:r.c_U,params:[n]})};return t===r.bFn||t===r.TCn||t===r.NzU?null:ld.createElement("div",{style:{display:"flex",marginLeft:"auto",marginRight:"auto",marginTop:"8px",marginBottom:"8px"}},ld.createElement(pe.Z,{disableRipple:!0,style:{textTransform:"none",backgroundColor:t===r.wF5?"rgba(0, 87, 235, 0.15)":void 0,borderRadius:"10px"},onClick:()=>o(r.wF5),sx:{color:t===r.wF5?n.custom.colors.linkColor:n.custom.colors.secondary,"&:hover":{backgroundColor:t===r.wF5?"rgba(0, 87, 235, 0.15) !important":void 0,color:`${n.custom.colors.linkColor}!important`}}},ld.createElement(ge.Z,{style:{fontSize:"14px",color:"inherit"}},"Tokens")),ld.createElement(pe.Z,{disableRipple:!0,style:{textTransform:"none",backgroundColor:t===r.ze8?"rgba(0, 87, 235, 0.15)":void 0,borderRadius:"10px",marginLeft:"10px",marginRight:"10px"},onClick:()=>o(r.ze8),sx:{color:t===r.ze8?n.custom.colors.linkColor:n.custom.colors.secondary,"&:hover":{backgroundColor:t===r.ze8?"rgba(0, 87, 235, 0.15) !important":void 0,color:"#0057EB!important"}}},ld.createElement(ge.Z,{style:{fontSize:"14px"}},"Collectibles")),ld.createElement(pe.Z,{disableRipple:!0,style:{textTransform:"none",backgroundColor:t===r.yov?"rgba(0, 87, 235, 0.15)":void 0,borderRadius:"10px"},onClick:()=>o(r.yov),sx:{color:t===r.yov?n.custom.colors.linkColor:n.custom.colors.secondary,"&:hover":{backgroundColor:t===r.yov?"rgba(0, 87, 235, 0.15) !important":void 0,color:"#0057EB!important"}}},ld.createElement(ge.Z,{style:{fontSize:"14px"}},"Activity")))}function sd(){const e=(0,s.xD1)(),{isXs:t}=(0,a.kC)();return t?ld.createElement(ad,null):""===e?null:ld.createElement(cd,null)}function cd(){const e=id(),t=(0,d.Pg)(),n=(0,s.xD1)(),o=(0,s.G5b)(),{isXs:l}=(0,a.kC)(),i=(0,s.fwt)(),c=async e=>{e===n?await o.request({method:r.VB_,params:[]}):await o.request({method:r.c_U,params:[e]})};return ld.createElement(nd.Z,{orientation:l?"horizontal":"vertical",value:n,variant:"fullWidth",classes:{root:l?e.tabRootXs:e.tabRoot,indicator:e.tabIndicator}},ld.createElement("div",{style:{display:"flex",flexDirection:l?"row":"column",justifyContent:"space-between",height:"100%",width:"100%"}},ld.createElement("div",{style:{display:"flex",flexDirection:l?"row":"column",width:l?"100%":void 0,justifyContent:l?"space-between":void 0,marginTop:l?void 0:"12px"}},ld.createElement(od.Z,{onClick:()=>c(r.wF5),value:r.wF5,disableRipple:!0,className:`${e.tab} ${n===r.wF5?e.activeTab:""}`,icon:ld.createElement(a.Em,{fill:n===r.H4y?t.custom.colors.brandColor:t.custom.colors.icon,style:{width:"20px",height:"20px"}})}),ld.createElement(od.Z,{onClick:()=>c(r.ze8),value:r.ze8,disableRipple:!0,className:`${e.tab} ${n===r.ze8?e.activeTab:""}`,icon:ld.createElement(a.XB,{fill:n===r.ze8?t.custom.colors.brandColor:t.custom.colors.icon,style:{width:"20px",height:"20px"}})}),ld.createElement(od.Z,{onClick:()=>c(r.bFn),value:r.bFn,disableRipple:!0,className:`${e.tab} ${n===r.bFn?e.activeTab:""}`,icon:ld.createElement(a.Td,{fill:n===r.bFn?t.custom.colors.brandColor:t.custom.colors.icon})}),i.MESSAGING_ENABLED?ld.createElement(od.Z,{onClick:()=>c(r.NzU),value:r.NzU,disableRipple:!0,className:`${l?e.tabXs:e.tab} ${n===r.NzU?e.activeTab:""}`,icon:ld.createElement(ud,null)}):null,l?null:ld.createElement(ld.Fragment,null,ld.createElement(od.Z,{onClick:()=>c(r.vbE),value:r.vbE,disableRipple:!0,className:`${l?e.tabXs:e.tab} ${n===r.NzU?e.activeTab:""}`,icon:ld.createElement(Na,{style:{width:"28px",height:"28px",color:n===r.vbE?t.custom.colors.brandColor:t.custom.colors.icon}})}),ld.createElement(od.Z,{onClick:()=>c(r.yov),value:r.yov,disableRipple:!0,className:`${l?e.tabXs:e.tab} ${n===r.yov?e.activeTab:""}`,icon:ld.createElement(td.Z,{style:{width:"28px",height:"28px",color:n===r.yov?t.custom.colors.brandColor:t.custom.colors.icon}})})),ld.createElement(od.Z,{onClick:()=>c(r.TCn),value:r.TCn,disableRipple:!0,className:l?e.tabXs:e.tab,icon:ld.createElement(a.ps,{fill:n===r.TCn?t.custom.colors.brandColor:t.custom.colors.icon,style:{width:"20px",height:"20px"}})})),l?null:ld.createElement("div",{style:{marginBottom:"16px"}},ld.createElement(Mc,{imgStyle:{width:"38px",height:"38px",borderRadius:"20px"},buttonStyle:{marginLeft:"auto",marginRight:"auto"}}))))}function dd(e){const t=(0,re.TH)(),{isXs:n}=(0,a.kC)();return n?ld.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},ld.createElement("div",{style:{flex:1,position:"relative"}},e.children),n&&"/messages/chat"===t.pathname||n&&"/messages/groupchat"===t.pathname||n&&"/messages/profile"===t.pathname?null:ld.createElement(md,null)):e.children}function md(){const e=id(),t=(0,d.Pg)(),n=(0,s.xD1)(),o=(0,s.G5b)(),l=(0,s.fwt)(),i=async e=>{e===(n===r.wF5||n===r.ze8||n===r.yov?r.H4y:n)?await o.request({method:r.VB_,params:[]}):await o.request({method:r.c_U,params:[e]})};return ld.createElement(nd.Z,{orientation:"horizontal",value:n,variant:"fullWidth",classes:{root:e.tabRootBottom,indicator:e.tabIndicator},TabIndicatorProps:{style:{display:"none"}}},ld.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"100%",width:"100%"}},ld.createElement("div",{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",marginTop:void 0}},ld.createElement(od.Z,{onClick:()=>i(r.H4y),value:r.H4y,disableRipple:!0,className:`${e.tabBottom} ${n===r.wF5?e.activeTab:""}`,icon:ld.createElement(a.Em,{fill:n===r.wF5||n===r.ze8||n===r.yov?t.custom.colors.brandColor:t.custom.colors.icon,style:{width:"20px",height:"20px"}})}),ld.createElement(od.Z,{onClick:()=>i(r.bFn),value:r.bFn,disableRipple:!0,className:`${e.tabBottom} ${n===r.bFn?e.activeTab:""}`,icon:ld.createElement(a.Td,{fill:n===r.bFn?t.custom.colors.brandColor:t.custom.colors.icon})}),l.MESSAGING_ENABLED?ld.createElement(od.Z,{onClick:()=>i(r.NzU),value:r.NzU,disableRipple:!0,className:`${e.tabBottom} ${n===r.NzU?e.activeTab:""}`,icon:ld.createElement(ud,null)}):null,ld.createElement(od.Z,{onClick:()=>i(r.TCn),value:r.TCn,disableRipple:!0,className:`${e.tabBottom} ${n===r.TCn?e.activeTab:""}`,icon:ld.createElement(a.ps,{fill:n===r.TCn?t.custom.colors.brandColor:t.custom.colors.icon,style:{width:"20px",height:"20px"}})}))))}function ud(){const e=(0,d.Pg)(),t=(0,s.xD1)(),n=(0,s.zk1)(),o=(0,H.no)(n?n.uuid:null);return ld.createElement(ld.Fragment,null,o?ld.createElement(Ta.Z,{sx:{"& .MuiBadge-badge":{padding:0,fontSize:12,height:12,width:12,minWidth:12,border:"2px solid white",borderRadius:"50%",backgroundColor:"#E33E3F",paddingBottom:"2px"}},badgeContent:" ",color:"secondary"},ld.createElement(a.wP,{sx:{width:"20px",height:"20px",color:t===r.NzU?e.custom.colors.brandColor:e.custom.colors.icon}})):ld.createElement(a.wP,{sx:{width:"20px",height:"20px",color:t===r.NzU?e.custom.colors.brandColor:e.custom.colors.icon}}))}var pd=n(2784);const gd=r.g9N?parseInt(r.HSP):-1;function hd({plugin:e,deepXnftPath:t}){const n=(0,o.useRef)(null),{username:l,uuid:i}=(0,s.aFb)(),[r,a]=(0,o.useState)(null),c=(0,s.vsx)(),d=(0,s.OuZ)(100),m=(0,E.sJ)((0,s.nBr)(e?.xnftInstallAddress?.toString())),u=(0,s.LME)(e.xnftAddress.toString());return(0,o.useEffect)((()=>e&&n&&n.current?(e.mount(m,t),e.didFinishSetup.then((()=>{e.pushAppUiMetadata({isDarkMode:c,username:l,userId:i,avatarUrl:d,jwt:u,version:gd}),setTimeout((()=>{e.iframeRoot.style.display=""}),200)})),e.iframeRoot.style.display="none",n.current.appendChild(e.iframeRoot),()=>{e.unmount()}):()=>{}),[e,n]),(0,o.useLayoutEffect)((()=>{const t=()=>{if(n.current){const t=n.current.clientWidth,o=n.current.clientHeight;a(function(e,t,n){Array.isArray(e)||(e=[{src:"assets/defaultSplash600.svg",height:600,width:600},{src:"assets/defaultSplash1000.svg",height:1e3,width:1e3},{src:"assets/defaultSplash2000.svg",height:2e3,width:2e3}]);let o=0,l=0;e.forEach(((i,r)=>{const a=e[o].height;n<=i.height&&(i.height<a||n>a)&&(o=r);const s=e[l].width;t<=i.width&&(i.width<s||t>s)&&(l=r)}));const i=e[o],r=e[l];return i.width>t&&r.height>n?i.height*i.width>r.height*r.width?r.src:i.src:i.width>t?i.src:r.height>n?r.src:i.src}(e?.splashUrls,t,o))}};return n.current&&(window.addEventListener("resize",t),t()),()=>{window.removeEventListener("resize",t)}}),[n.current]),(0,o.useEffect)((()=>{e.pushAppUiMetadata({isDarkMode:c,username:l,userId:i,avatarUrl:d,version:gd})}),[l,c,d]),pd.createElement("div",{ref:n,style:{position:"absolute",overflow:"hidden",top:"0px",left:"0px",bottom:"0px",right:"0px",backgroundImage:r?`url(${r})`:"none",backgroundSize:"cover",backgroundPosition:"center center"}})}var fd=n(2784);const xd=/[0-9]{13}/g;function yd({plugin:e,deepXnftPath:t}){const n=function(e){const[t,n]=(0,o.useState)(0);return(0,o.useEffect)((()=>{let t=null;const o=setInterval((()=>{(async()=>{const o=await(await fetch(e)).text(),l=o?.replaceAll(xd,"");null!==t&&t!==l&&n((e=>e+1)),t=l})()}),1e3);return()=>clearInterval(o)}),[]),t}(s.Ocf);return fd.createElement(wd,{key:n,plugin:e,deepXnftPath:t})}var vd=n(2784);function bd({xnftAddress:e,deepXnftPath:t}){const n=(0,d.Pg)();return vd.createElement("div",{style:{height:"100%",backgroundColor:n.custom.colors.background}},vd.createElement(Ed,{xnftAddress:e,deepXnftPath:t}))}function Ed({xnftAddress:e,deepXnftPath:t}){const{publicKey:n}=(0,s.cPJ)(),o=(0,s._m2)(n),l=(0,E.Zl)(s.B4Z),i=(0,s.KPt)();if(!e)return vd.createElement(a.gb,null);const c=o?.find((t=>t.xnftAddress.toString()===e));return c?(c.setHostApi({request:l,openPlugin:i}),e===r.bW4?vd.createElement(yd,{plugin:c,deepXnftPath:t}):vd.createElement(wd,{plugin:c,deepXnftPath:t})):vd.createElement(kd,{xnftAddress:e,deepXnftPath:t})}function kd({xnftAddress:e,deepXnftPath:t}){const n=(0,s.QfS)(e);return n.result?vd.createElement(wd,{plugin:n.result,deepXnftPath:t}):null}function wd({plugin:e,deepXnftPath:t}){return vd.createElement(vd.Fragment,null,vd.createElement(Cd,{plugin:e}),vd.createElement(o.Suspense,{fallback:vd.createElement(a.gb,null)},e?vd.createElement(hd,{key:e?.iframeRootUrl,plugin:e,deepXnftPath:t}):null))}function Cd({plugin:e}){const t=(0,s.G4v)(),[n,l]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{e?.didFinishSetup.then((()=>{l(!1)}))})),vd.createElement("div",{style:{position:"fixed",height:"36px",right:16,top:10,zIndex:2e3,display:"flex",flexDirection:"column",justifyContent:"center"}},vd.createElement("div",{style:{width:"60px",height:"32px",borderRadius:"18.5px",display:"flex",background:"#fff"}},vd.createElement(pe.Z,{disableRipple:!0,onClick:()=>t(),sx:{position:"relative",borderRadius:"18.5px",flex:1,height:"32px",padding:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minWidth:"41.67px"}},n?vd.createElement("div",{style:{position:"relative",height:"20px",width:"20px"}},vd.createElement(a.gb,{size:"small",color:"secondary",style:{display:"block"}})):vd.createElement(a.ID,{fill:"#000000"}))))}var Sd=n(2784);function Td(){let{xnftAddress:e}=(0,re.UO)();const t=(0,re.TH)(),[n]=(0,ae.lr)(),o=n.get("nav"),l=(0,d.Pg)(),i=t.pathname.split(e??"")[1]??"";return Sd.createElement(p.E.div,{key:e,style:{background:l.custom.colors.background,filter:"drop-shadow(5px 5px 10px #666)",position:"relative",height:"100%",minHeight:"600px",display:"flex",flexDirection:"column",flex:1},variants:Rd,initial:"pop"===o?{}:"initial",animate:"animate",exit:"push"===o?{}:"exit"},Sd.createElement(bd,{xnftAddress:e,deepXnftPath:i}))}const Rd={initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transition:{delay:.09},transform:"translateY(0px)"},exit:{transition:{delay:.09,duration:.1},opacity:0,transform:"translateY(100px)"}};function jd(){const e=(0,re.TH)(),{isXs:t}=(0,a.kC)();return o.createElement(u.M,{initial:!1},o.createElement(re.Z5,{location:e,key:e.pathname},o.createElement(re.AW,{path:"/tokens",element:o.createElement(Ld,null)}),o.createElement(re.AW,{path:"/tokens/token",element:o.createElement(Kd,null)}),o.createElement(re.AW,{path:"/messages/*",element:o.createElement(Dd,null)}),o.createElement(re.AW,{path:"/apps",element:o.createElement(_d,null)}),o.createElement(re.AW,{path:"/swap",element:o.createElement(Ud,null)}),o.createElement(re.AW,{path:"/nfts",element:o.createElement(Ad,null)}),o.createElement(re.AW,{path:"/nfts/collection",element:o.createElement(Od,null)}),o.createElement(re.AW,{path:"/nfts/experience",element:o.createElement(Zd,null)}),o.createElement(re.AW,{path:"/nfts/chat",element:o.createElement(Bd,null)}),o.createElement(re.AW,{path:"/nfts/detail",element:o.createElement($d,null)}),o.createElement(re.AW,{path:"/recent-activity",element:o.createElement(Nd,null)}),t?null:o.createElement(re.AW,{path:"/notifications",element:o.createElement(Id,null)}),o.createElement(re.AW,{path:"/xnft/:xnftAddress/*",element:o.createElement(Td,null)}),o.createElement(re.AW,{path:"/xnft/:xnftAddress",element:o.createElement(Td,null)}),t?o.createElement(re.AW,{path:"*",element:o.createElement(Pd,null)}):o.createElement(re.AW,{path:"*",element:o.createElement(Fd,null)})))}function Id(){const e=()=>(0,s.fwt)().GQL_NOTIFICATIONS?o.createElement(Qa,null):o.createElement(Ma,null);return o.createElement(Wd,{component:o.createElement(e,null)})}function Nd(){const e=()=>(0,s.fwt)().GQL_TRANSACTION_HISTORY?o.createElement(Qc,null):o.createElement(Ui,null);return o.createElement(Wd,{component:o.createElement(e,null)})}function Fd(){let e=(0,s.IMf)();return o.createElement(re.Fg,{to:e,replace:!0})}function Pd(){let e=(0,s.IMf)();return e.startsWith("/notifications")?o.createElement(re.Fg,{to:"/tokens",replace:!0}):o.createElement(re.Fg,{to:e,replace:!0})}function Ld(){return o.createElement(Wd,{component:o.createElement(mr,null)})}function Ad(){return o.createElement(Wd,{noScrollbars:!0,component:o.createElement(ra,null)})}function Bd(){const{props:e}=(0,s.Dtc)();return o.createElement(Wd,{component:o.createElement(wa,e)})}function Zd(){const{props:e}=(0,s.Dtc)();return o.createElement(Wd,{component:o.createElement(ka,e)})}function Od(){const{props:e}=(0,s.Dtc)();return o.createElement(Wd,{component:o.createElement(sa,e)})}function $d(){const{props:e}=(0,s.Dtc)();return o.createElement(Wd,{component:o.createElement($r.GH,e)})}function Dd(){const{push:e,pop:t}=(0,s.HJj)(),{isXs:n}=(0,a.kC)();return(0,o.useEffect)((()=>{se.sI.getInstance().setNativePush(e),se.sI.getInstance().setNativePop(t)}),[]),n?o.createElement(Wd,{noMotion:!0,component:o.createElement(zd,null)}):o.createElement(Wd,{noMotion:!0,component:o.createElement(Md,null)})}function zd(){const e=(0,s.vsx)(),t=location.hash.slice(1),{uuid:n}=(0,s.aFb)(),{props:l}=(0,s.Dtc)(),{isXs:i}=(0,a.kC)();return t.startsWith("/messages/requests")?o.createElement(se.i$,null):t.startsWith("/messages/chat")?o.createElement(se.NJ,{isDarkMode:e,userId:l.userId,uuid:n,username:l.username}):t.startsWith("/messages/groupchat")?o.createElement(wa,{collectionId:l.id,...l}):t.startsWith("/messages/profile")?o.createElement(se.BQ,{userId:l.userId}):i?o.createElement(se.mn,null):null}function Md(){const{props:e}=(0,s.Dtc)(),[t,n]=(0,o.useState)(e.userId),[l,i]=(0,o.useState)(e.id);return(0,o.useEffect)((()=>{e.userId!==t&&(console.error("Setting refresh"),n(e.userId))}),[e.userId]),(0,o.useEffect)((()=>{e.id!==l&&i(e.id)}),[e.id]),o.createElement("div",{style:{height:"100%",display:"flex"}},o.createElement("div",{style:{width:"365px"}},o.createElement(k.L,null,o.createElement(se.mn,null))),o.createElement("div",{style:{position:"relative",width:"100%",height:"100%",flex:1}},o.createElement(zd,null)))}function _d(){return o.createElement(Wd,{component:o.createElement(cn,null)})}function Ud(){return o.createElement(Wd,{component:o.createElement(s.sd_,null,o.createElement(ul,{isInDrawer:!1}))})}function Kd(){const{props:e}=(0,s.Dtc)();return o.createElement(Wd,{component:o.createElement(Yi,e)})}function Wd({component:e,noScrollbars:t,noMotion:n}){const{title:l,isRoot:c,pop:m}=(0,s.HJj)(),{style:u,navButtonLeft:p,navButtonRight:g,navButtonCenter:h,notchViewComponent:f,image:x,onClick:y,isVerified:v}=function(){let{isRoot:e,push:t}=(0,s.HJj)();const n=(0,re.TH)().pathname,l=(0,d.Pg)(),{props:c}=(0,s.Dtc)(),{isXs:m}=(0,a.kC)(),u=(0,s.rTu)(),p=(0,s.vsx)(),g=(0,i.RS)({remoteUserIds:[c?.userId]}),h=c&&c.image?c.image:g[c?.userId]?.image;let f,x=null,y=null,v=null,b={fontSize:"18px"};"/messages/chat"!==n&&"/messages/groupchat"!==n||(b.background=l.custom.colors.chatFadeGradientStart),"/swap"===n&&p&&(b.background="#1D1D20"),e?(y=m?o.createElement(Ss,null):void 0,x=m?o.createElement(Mc,null):void 0,v=o.createElement(vt,{wallet:u})):"/balances/token"===n?y=null:"/nfts/detail"===n?y=o.createElement($r.hZ,null):"/messages/chat"===n&&(y=o.createElement(Rr,null)),"/messages/chat"===n&&(f=()=>{t({title:`@${c.username}`,componentId:r.Rzf,componentProps:{userId:c.userId}})});return{navButtonRight:y,navButtonLeft:x,navButtonCenter:v,style:b,notchViewComponent:"/nfts/chat"===n||"/messages/groupchat"===n?o.createElement(Er,{image:h,setOpenDrawer:()=>{}}):null,image:"/messages/chat"===n?h:"/messages/groupchat"===n&&"backpack-chat"===c.id?"https://user-images.githubusercontent.com/321395/206757416-a80e662a-0ccc-41cc-a20f-ff397755d47f.png":"/messages/groupchat"===n?h:void 0,isVerified:"/messages/groupchat"===n&&"backpack-chat"===c.id||"/messages/chat"===n&&r.iqE.includes(c.userId),onClick:f}}(),b=p||(c?null:o.createElement(Pi.I4,{onClick:()=>m()}));return n?o.createElement(qd,{title:l,image:x,onClick:y,notchViewComponent:f,navButtonLeft:b,navButtonRight:g,navButtonCenter:h,navbarStyle:u,noScrollbars:t,isVerified:v,component:e}):o.createElement(Hd,null,o.createElement(qd,{title:l,image:x,onClick:y,notchViewComponent:f,navButtonLeft:b,navButtonRight:g,navButtonCenter:h,navbarStyle:u,noScrollbars:t,isVerified:v,component:e}))}function qd({title:e,image:t,onClick:n,notchViewComponent:l,navButtonLeft:i,navButtonRight:r,navButtonCenter:s,navbarStyle:c,noScrollbars:d,isVerified:m,component:u}){const{isXs:p}=(0,a.kC)();return o.createElement("div",{style:{display:"flex",flexDirection:"column",position:"absolute",left:0,right:0,top:0,bottom:0}},p?o.createElement(Pi.V3,{title:e,image:t,onClick:n,notchViewComponent:l,navButtonLeft:i,navButtonRight:r,navButtonCenter:s,navbarStyle:c,noScrollbars:d,isVerified:m},o.createElement(rd,null,u)):o.createElement(rd,null,o.createElement(Pi.V3,{title:e,image:t,onClick:n,notchViewComponent:l,navButtonLeft:i,navButtonRight:r,navButtonCenter:s,navbarStyle:c,noScrollbars:d,isVerified:m},u)))}function Hd({children:e}){const t=(0,re.TH)(),[n]=(0,ae.lr)(),l=n.get("nav");return o.createElement(be.FE,{id:t.pathname,navAction:l},e)}var Vd=n(94758);const{base58:Gd}=Ws,Jd=(e,t,n)=>{if(t===r.$OA.SOLANA&&n&&n?.config.priorityFee&&!n.disabled){if("legacy"===(0,r.yaP)(e).version)return e;const t=(0,r.r7M)(e),o=Ql.ComputeBudgetProgram.setComputeUnitLimit({units:n.config.computeUnits}),l=Ql.ComputeBudgetProgram.setComputeUnitPrice({microLamports:n.config.priorityFee});return t.add(o),t.add(l),Gd.encode(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}return e};var Yd=n(73044),Xd=n(10528),Qd=n(2784);const em=(0,d.W2)((e=>({connectablesContainer:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginBottom:"32px"},connectable:{display:"flex",flexDirection:"column",alignItems:"center",width:"50%"},connectableTitle:{color:e.custom.colors.fontColor},connectableDescription:{color:e.custom.colors.secondary,fontSize:"14px",textAlign:"center"}})));function tm({origin:e,originTitle:t,title:n,wallet:o,onConfirm:l,onConfirmLabel:i="Connect",onDeny:r,children:a}){return Qd.createElement(nm,{onConfirm:l,onConfirmLabel:i,onDeny:r},Qd.createElement("div",{style:{margin:"0 16px"}},n,Qd.createElement(om,{wallet:o,origin:e,originTitle:t}),a))}function nm({onConfirm:e,onConfirmLabel:t="Connect",onDeny:n,children:o}){return Qd.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},o,Qd.createElement("div",{style:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},Qd.createElement("div",{style:{width:"167.5px"}},Qd.createElement(a.tf,{label:"Deny",onClick:n})),Qd.createElement("div",{style:{width:"167.5px"}},Qd.createElement(a.KM,{label:t,onClick:()=>e()}))))}function om({origin:e,originTitle:t,wallet:n}){const o=em(),l=(0,s.ZaQ)(n),i=(0,s.OuZ)(56),{username:r}=(0,s.aFb)();return Qd.createElement("div",{className:o.connectablesContainer},Qd.createElement(lm,{kind:"medium",origin:e,originTitle:t}),Qd.createElement(im,{kind:"medium",title:r,description:`${l} (${(0,Ee.R1)(n)})`,icon:i}))}function lm({originTitle:e,origin:t,style:n,kind:o="small"}){const l=`https://www.google.com/s2/favicons?domain=${t}&sz=180`;return Qd.createElement(im,{kind:o,style:n,title:rm(e),description:new URL(t).host,icon:t.startsWith("http://localhost")?r.rId:l})}function im({title:e,description:t,icon:n,style:o,kind:l="small"}){const i=em();return Qd.createElement("div",{className:i.connectable,style:o},Qd.createElement("div",{className:i.connectableIcon,style:{width:"small"===l?"56px":"80px",height:"small"===l?"56px":"80px",borderRadius:"50%",marginBottom:"small"===l?"4px":"8px"}},Qd.createElement(a.e4,{style:{width:"small"===l?"56px":"80px",height:"small"===l?"56px":"80px",borderRadius:"50%",maxWidth:"100%",maxHeight:"100%"},src:n})),Qd.createElement("div",{className:i.connectableTitle},e),Qd.createElement("div",{className:i.connectableDescription},t))}function rm(e){let t;return t=e&&e.length>15?e.substring(0,15).trim()+"...":e||"Website",t}var am=n(2784);const{Zero:sm}=Qo,cm=(0,d.W2)((e=>({title:{fontWeight:500,fontSize:"18px",lineHeight:"24px",color:e.custom.colors.fontColor,marginBottom:"48px",marginTop:"16px",textAlign:"center"},advancedDetailsLabel:{textAlign:"center",color:e.custom.colors.secondary,fontSize:"12px",marginTop:"6px",marginBottom:"8px",cursor:"pointer"},listDescription:{color:e.custom.colors.secondary,fontSize:"14px",marginBottom:"8px"},negative:{color:e.custom.colors.negative},positive:{color:e.custom.colors.positive},txMenuItemRoot:{height:"36px !important"}})));function dm({origin:e,title:t,tx:n,wallet:o,onCompletion:l}){const i=cm(),r=(0,s.Ug$)(o),c=(0,s.als)(r,n),{loading:d,transaction:m,solanaFeeConfig:u}=c,p=(0,E.sJ)((0,s.wFe)(o));return d?am.createElement(a.gb,null):p?am.createElement(mm,{origin:e}):am.createElement(tm,{origin:e,originTitle:t,wallet:o,title:am.createElement("div",{className:i.title},"Approve Transaction"),onConfirm:async()=>{await l(m,u)},onConfirmLabel:"Approve",onDeny:async()=>{await l(!1)}},d?am.createElement(a.gb,null):am.createElement("div",{style:{marginTop:"24px",marginLeft:"8px",marginRight:"8px"}},am.createElement(ge.Z,{className:i.listDescription},"Transaction details"),am.createElement(Yd.C,{transactionData:c,menuItems:pm(c,i),menuItemClasses:{root:i.txMenuItemRoot}})))}function mm({origin:e,style:t}){return am.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},am.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column"}},am.createElement(a.ub,{icon:e=>am.createElement(m.Z,e),title:"Request Rejected",subtitle:`WARNING: ${e} is trying to sign with your cold wallet. This may be dangerous. To enable, see your wallet settings and enable "App Signing". Do so with caution!`,buttonText:"",onClick:()=>{},style:t})))}function um({origin:e,title:t,wallet:n,txs:l,onCompletion:i}){const r=cm(),c=(0,s.Ug$)(n),d=(0,s.diM)(c,l),m=(0,E.sJ)((0,s.wFe)(n)),[u,p]=(0,o.useState)(!0),[g,h]=(0,o.useState)(!1),[f,x]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(d.some((e=>e.loading)))return;const e={};let t="0";for(const n of d)n.balanceChanges&&Object.entries(n.balanceChanges).forEach((([t,n])=>{e[t]={nativeChange:(e[t]?.nativeChange??Xd.O$.from("0")).add(n.nativeChange),decimals:n.decimals}})),t=(parseFloat(t)+parseFloat(n.networkFee)).toPrecision(2);x({...d[0],balanceChanges:e,networkFee:t}),p(!1)}),[d]),m?am.createElement(mm,{origin:e}):am.createElement(tm,{origin:e,originTitle:t,title:am.createElement("div",{className:r.title},"Approve Transactions"),wallet:n,onConfirm:async()=>{i(!0)},onConfirmLabel:"Approve",onDeny:async()=>{i(!1)}},u||!f?am.createElement(a.gb,null):am.createElement("div",{style:{marginTop:"24px",...g?{height:"250px",overflowY:"scroll"}:{}}},am.createElement("div",{key:0,style:{marginLeft:"8px",marginRight:"8px"}},am.createElement(ge.Z,{className:r.listDescription},"Transaction Aggregate Details (",d.length,")"),am.createElement(Yd.C,{transactionData:f,menuItems:pm(f,r),menuItemClasses:{root:r.txMenuItemRoot}})),g?d.map(((e,t)=>am.createElement("div",{key:t+1,style:{marginTop:"10px",marginLeft:"8px",marginRight:"8px"}},am.createElement(ge.Z,{className:r.listDescription},"[",t+1,"] Transaction details"),am.createElement(Yd.C,{transactionData:e,menuItems:pm(e,r),menuItemClasses:{root:r.txMenuItemRoot}})))):null),am.createElement(ge.Z,{className:r.advancedDetailsLabel,onClick:()=>{h((e=>!e))}},g?"Hide Advanced Details":"View Advanced Details"))}function pm(e,t){return e.balanceChanges?Object.fromEntries(Object.entries(e.balanceChanges).map((([e,{nativeChange:n,decimals:o}])=>{const l=n.gte(sm)?t.positive:t.negative;return[e,{onClick:()=>{},detail:am.createElement(ge.Z,{className:l},el.commify(el.formatUnits(n,Xd.O$.from(o)))," ",e),button:!1}]}))):{}}var gm=n(2784);function hm({blockchain:e,signature:t,onRetry:n}){const o=(0,s.sAm)(e),l=(0,s.y20)(e),i=(0,d.Pg)();return gm.createElement("div",{style:{height:"254px",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"14px"}},gm.createElement("div",{style:{textAlign:"center"}},gm.createElement(ge.Z,{style:{fontSize:"16px",fontWeight:500,marginTop:"20px",marginBottom:"16px",color:i.custom.colors.fontColor}},"Error while sending transaction"),gm.createElement("div",{style:{height:"48px",marginBottom:10}},gm.createElement(a.aM,null)),o&&l&&t?gm.createElement(a.tf,{buttonLabelStyle:{fontSize:"14px"},label:"View Explorer",onClick:()=>window.open((0,r.yUu)(o,t,l),"_blank")}):null),gm.createElement(a.KM,{label:"Retry",onClick:()=>n()}))}var fm=n(2784);function xm({blockchain:e,signature:t}){const n=(0,d.Pg)(),o=(0,s.sAm)(e),l=(0,s.y20)(e);return fm.createElement("div",{style:{height:"184px",display:"flex",flexDirection:"column"}},fm.createElement(ge.Z,{style:{textAlign:"center",color:n.custom.colors.secondary,fontSize:"16px",fontWeight:500,marginTop:"20px"}},"Sending"),fm.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column"}},fm.createElement(a.gb,{size:48,iconStyle:{color:n.custom.colors.primaryButton,display:"flex",marginLeft:"auto",marginRight:"auto"},thickness:6})),fm.createElement("div",{style:{marginBottom:"16px",marginLeft:"16px",marginRight:"16px"}},o&&l?fm.createElement(a.tf,{onClick:()=>{window.open((0,r.yUu)(o,t,l))},label:"View Explorer"}):null))}var ym=n(2784);function vm({blockchain:e,signature:t,title:n}){const o=(0,d.Pg)(),l=(0,s.sAm)(e),i=(0,s.y20)(e);return ym.createElement("div",{style:{height:"184px",display:"flex",flexDirection:"column"}},ym.createElement(ge.Z,{style:{textAlign:"center",color:o.custom.colors.secondary,fontSize:"16px",fontWeight:500,marginTop:"20px"}},n||"Sent"),ym.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column"}},ym.createElement("div",{style:{textAlign:"center"}},ym.createElement(a.nQ,null))),ym.createElement("div",{style:{marginBottom:"16px",marginLeft:"16px",marginRight:"16px"}},l&&i?ym.createElement(a.tf,{onClick:()=>{window.open((0,r.yUu)(l,t,i))},label:"View Explorer"}):null))}var bm=n(2784);const Em=(0,d.W2)((e=>({approveTableRoot:{backgroundColor:`${e.custom.colors.approveTransactionTableBackground} !important`,"&:hover":{opacity:1,cursor:"default"}},warning:{color:e.custom.colors.negative,fontSize:"14px",textAlign:"center",marginTop:"8px"}}))),km={[r.BmI]:r.cSC,[r.bjm]:r.PXt,[r.obE]:r.t_8,[r.IpF]:r.r5p,[r.fzk]:r.xdJ,[r.LWA]:r.BaQ,[r.h8s]:r.TbF},wm={[r.BmI]:r.$OA.ETHEREUM,[r.bjm]:r.$OA.ETHEREUM,[r.obE]:r.$OA.ETHEREUM,[r.IpF]:r.$OA.SOLANA,[r.fzk]:r.$OA.SOLANA,[r.LWA]:r.$OA.SOLANA,[r.h8s]:r.$OA.SOLANA};function Cm(){const[e,t]=(0,s.bfG)(),{publicKey:n}=(0,s.rTu)(),[l,i]=(0,o.useState)(!1),[a,c]=(0,o.useState)(null),d=(0,E.sJ)((0,s.wFe)(n));if((0,o.useEffect)((()=>{i(void 0!==e)}),[e,a]),!e)return null;const m=km[e.kind],u=wm[e.kind],p=n=>{e.resolve(n),e.confirmTransaction?c(n):t(void 0)},g=(n=new Error("user rejected signature request"))=>{t(void 0),e.reject(n)},h=[r.BmI,r.IpF].includes(e.kind);return bm.createElement(ol.x,{openDrawer:l,setOpenDrawer:e=>{!1!==e||a||g(),!1===e&&a&&(t(void 0),c(null)),i(e)}},bm.createElement(o.Suspense,{fallback:bm.createElement(Im,null)},d?bm.createElement(mm,{origin:"This xNFT",style:{padding:0,width:"100%"}}):h?bm.createElement(jm,{publicKey:n,message:e.data,uiRpcMethod:m,onResolve:p,onReject:g}):e.kind===r.LWA?bm.createElement(Tm,{publicKey:n,uiRpcMethod:m,blockchain:u,transactions:e.data,onResolve:p,onReject:g}):bm.createElement(Rm,{publicKey:n,uiRpcMethod:m,blockchain:u,transaction:e.data,onResolve:p,onReject:g,confirmTransaction:e.confirmTransaction,options:e.options})))}function Sm({onConfirm:e,onReject:t,buttonsDisabled:n,children:o}){return bm.createElement("div",{style:{height:"402px",display:"flex",flexDirection:"column"}},bm.createElement("div",{style:{padding:"24px",flex:1}},bm.createElement(k.L,null,o)),bm.createElement("div",{style:{marginLeft:"16px",marginBottom:"16px",marginRight:"16px",display:"flex"}},bm.createElement(a.tf,{disabled:n,onClick:t,label:"Cancel",style:{marginRight:"8px"}}),bm.createElement(a.KM,{disabled:n,onClick:()=>e(),label:"Approve",type:"submit","data-testid":"Send"})))}function Tm({publicKey:e,transactions:t,uiRpcMethod:n,onResolve:o,onReject:l}){const i=Em(),r=(0,d.Pg)(),a=(0,s.G5b)();return bm.createElement(Sm,{onConfirm:async()=>{a.request({method:n,params:[t,e]}).then(o).catch(l)},onReject:l,buttonsDisabled:!1},bm.createElement(k.L,null,bm.createElement(ge.Z,{style:{color:r.custom.colors.fontColor,fontWeight:500,fontSize:"18px",lineHeight:"24px",textAlign:"center"}},"Approve Transaction"),bm.createElement("div",{style:{marginTop:"18px"}},bm.createElement("div",{className:i.warning},"Approving multiple transactions"))))}function Rm({publicKey:e,transaction:t,uiRpcMethod:n,blockchain:l,onResolve:i,onReject:r,confirmTransaction:c,options:m}){const u=Em(),p=(0,d.Pg)(),[g]=(0,s.bfG)(),h=(0,s.G5b)(),f=(0,s.PD0)(g?.xnftAddress),x=(0,s.als)(l,t),{loading:y,transaction:v,from:b,solanaFeeConfig:E}=x,w=(0,s.VvY)(),[C,S]=(0,o.useState)(""),[T,R]=(0,o.useState)("approve"),j=()=>{const t=Jd(v,l,E);h.request({method:n,params:[t,e]}).then((async e=>{if(S(e),c){R("confirming");const{blockhash:t,lastValidBlockHeight:n}=await w.connection.getLatestBlockhash(m?.preflightCommitment),o=await w.connection.confirmTransaction({signature:e,blockhash:t,lastValidBlockHeight:n},m?.commitment);o?.value.err?(r(),R("failed")):(i(e),R("succeeded"))}else i(e)})).catch((()=>{r()}))},I={xNFT:{onClick:()=>{},detail:bm.createElement(ge.Z,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px",fontSize:"14px"}},f),classes:{root:u.approveTableRoot}},From:{onClick:()=>{},detail:bm.createElement(ge.Z,{style:{fontSize:"14px"}},(0,Ee.R1)(b)),classes:{root:u.approveTableRoot}}};return"confirming"===T?bm.createElement(xm,{blockchain:l,signature:C}):"succeeded"===T?bm.createElement(vm,{blockchain:l,signature:C}):"failed"===T?bm.createElement(hm,{blockchain:l,signature:C,onRetry:()=>{j()}}):bm.createElement(Sm,{onConfirm:j,onReject:r,buttonsDisabled:y},y?bm.createElement(a.gb,null):bm.createElement(k.L,null,bm.createElement(ge.Z,{style:{color:p.custom.colors.fontColor,fontWeight:500,fontSize:"18px",lineHeight:"24px",textAlign:"center"}},"Approve Transaction"),bm.createElement("div",{style:{marginTop:"18px"}},bm.createElement(Yd.C,{menuItems:I,menuItemClasses:{root:u.approveTableRoot},transactionData:x}))))}function jm({publicKey:e,message:t,uiRpcMethod:n,onResolve:o,onReject:l}){const i=(0,d.Pg)(),r=(0,s.G5b)();let a;try{a=Vd.P6.bytes.utf8.decode(Vd.P6.bytes.bs58.decode(t))}catch(e){a=t}return bm.createElement(Sm,{onConfirm:()=>{r.request({method:n,params:[t,e]}).then(o).catch(l)},onReject:l},bm.createElement(k.L,null,bm.createElement(ge.Z,{style:{color:i.custom.colors.fontColor,fontWeight:500,fontSize:"18px",lineHeight:"24px",textAlign:"center"}},"Sign Message"),bm.createElement("div",{style:{marginTop:"18px",backgroundColor:i.custom.colors.nav,padding:"8px",borderRadius:"8px",color:i.custom.colors.fontColor,border:i.custom.colors.borderFull}},a)))}function Im(){return bm.createElement(Sm,{onConfirm:()=>{},onReject:()=>{},buttonsDisabled:!0},bm.createElement(a.gb,null))}var Nm=n(88125),Fm=n(2784);const Pm=()=>{const e=(0,s.fwt)(),t=(0,E.sJ)(s.otN),n=(0,s.sGt)(),l=Object.keys(xe.q),i=[],[c,d]=(0,o.useState)(Object.fromEntries(new Map(Object.keys(xe.q).map((e=>[e,""]))))),m=(0,E.Zl)(s.otN),[u,p]=(0,o.useState)(!1);return l.forEach((e=>{const o=t.filter((t=>t.blockchain===e));if(o.length){const t=n.find((t=>t.blockchain===e));t||i.push(e)}})),e.PRIMARY_PUBKEY_ENABLED?Fm.createElement(ve.zw,{paperStyles:{borderTopLeftRadius:"12px",borderTopRightRadius:"12px",height:"80%"},openDrawer:i.length>0&&!u,setOpenDrawer:()=>{}},Fm.createElement("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column",height:"100%"}},Fm.createElement(v.Z,{sx:{margin:"24px"}},Fm.createElement(Ee.h4,{text:1==i.length?"Select a primary wallet":"Select primary wallets"}),Fm.createElement(Ee.MR,null,"When others send you crypto, they'll see at least one address publicly associated with your username."),i.map((e=>Fm.createElement(Lm,{selectedAddresses:c[e],setSelectedSolAddresses:d,key:e,blockchain:e})))),Fm.createElement(v.Z,{style:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},Fm.createElement(a.KM,{disabled:(Object.keys(xe.q).forEach((e=>{if(i.find((t=>t===e))&&!c[e])return!0})),!1),label:1===i.length?"Set primary wallet":"Set primary wallets",onClick:()=>{i.forEach((async e=>{fetch(`${r.FvS}/users/activePubkey`,{method:"POST",body:JSON.stringify({publicKey:c[e]}),headers:{"Content-Type":"application/json"}}),m((t=>t.map((t=>t.blockchain!==e?t:t.primary&&t.publicKey!==c[e]?{...t,primary:!1}:t.publicKey===c[e]?{...t,primary:!0}:t))))})),p(!0)}})))):null};function Lm({blockchain:e,selectedAddresses:t,setSelectedSolAddresses:n}){const o=(0,s.wUG)(),l=(0,d.Pg)();return Fm.createElement("div",{style:{color:l.custom.colors.smallTextColor}},Fm.createElement("div",{style:{marginTop:10,marginBottom:10}},"Choose primary ",(0,r.LFn)(e)," wallet:"),o.filter((t=>t.blockchain===e)).map((o=>Fm.createElement(Nm.b,{style:{marginRight:5,marginBottom:5,fontSize:"14px",width:"100px"},overwriteBackground:t===o.publicKey?l.custom.colors.invertedPrimary:l.custom.colors.bg2,overwriteColor:t===o.publicKey?l.custom.colors.background:"",onClick:async()=>{n((t=>({...t,[e]:o.publicKey})))},label:(0,r.R1Z)(o.publicKey)}))))}var Am=n(2784);function Bm({children:e}){const[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{(async()=>{const{version:e}=await(await fetch("https://version.backpack.workers.dev/")).json();if(r.g9N){let t;try{t=parseInt(r.HSP),t<e&&n(!0)}catch(e){n(!0)}}})()}),[]),Am.createElement(Am.Fragment,null,e,Am.createElement(ve.zw,{openDrawer:t,setOpenDrawer:n},Am.createElement(Zm,null)))}function Zm(){return Am.createElement("div",{style:{height:"100%"}},Am.createElement(a.ub,{icon:e=>Am.createElement(m.Z,e),title:"Please upgrade your Backpack",subtitle:"During the duration of the beta program, Backpack\n        requires users to use the most up to date version of the extension."}))}var Om=n(2784);const $m=new f.$;function Dm(){(0,s.uT6)();const e=(0,s.zk1)();if(!e)return Om.createElement(a.gb,null);const t=(0,r.nlJ)(e.jwt);return Om.createElement(x.e,{client:t,suspenseCache:$m},Om.createElement(Bm,null,Om.createElement($t,null,Om.createElement(le,null),Om.createElement(dd,null,Om.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},Om.createElement(jd,null),Om.createElement(Cm,null),Om.createElement(Pm,null))))))}var zm=n(2784);const Mm=(0,d.W2)((e=>({title:{fontWeight:500,fontSize:"18px",lineHeight:"24px",color:e.custom.colors.fontColor,marginBottom:"48px",marginTop:"16px",textAlign:"center"},listDescription:{color:e.custom.colors.secondary,fontSize:"14px",marginBottom:"8px"},textFieldInput:{marginTop:0,"& .MuiOutlinedInput-root":{padding:0,fontSize:"12px","& textarea":{WebkitTextFillColor:e.custom.colors.fontColor}}}})));function _m({origin:e,title:t,message:n,onCompletion:o,wallet:l}){const i=Mm(),r=(0,d.Pg)(),a=(0,E.sJ)((0,s.wFe)(l));let c;try{c=Vd.P6.bytes.utf8.decode(Vd.P6.bytes.bs58.decode(n))}catch(e){c=n}return a?zm.createElement(mm,{origin:e}):zm.createElement(tm,{origin:e,originTitle:t,wallet:l,title:zm.createElement("div",{className:i.title},"Approve Message"),onConfirm:async()=>{await o(!0)},onConfirmLabel:"Approve",onDeny:async()=>{await o(!1)}},zm.createElement(zm.Fragment,null,zm.createElement(ge.Z,{className:i.listDescription},"Message"),zm.createElement(nl.nv,{rootClass:i.textFieldInput,value:c,rows:8,disabled:!0,inputProps:{style:{background:r.custom.colors.nav,padding:"8px",color:r.custom.colors.fontColor}}})))}var Um=n(42713),Km=n(2784);const Wm=(0,d.W2)((e=>({title:{fontWeight:500,fontSize:"24px",lineHeight:"32px",color:e.custom.colors.fontColor,textAlign:"center"},listDescription:{color:e.custom.colors.secondary,fontSize:"14px",marginBottom:"8px"},listRoot:{color:e.custom.colors.fontColor,padding:"0",borderRadius:"4px",fontSize:"14px"},listItemRoot:{alignItems:"start",borderRadius:"4px",padding:"8px",marginBottom:"1px"},listItemIconRoot:{minWidth:"inherit",height:"20px",width:"20px",marginRight:"8px"},warning:{color:e.custom.colors.secondary,fontSize:"14px",marginTop:"24px"},link:{cursor:"pointer",color:e.custom.colors.secondary,textDecoration:"underline"}})));function qm({origin:e,title:t,blockchain:n,onCompletion:o}){const l=Wm(),i=(0,s.ngc)();return Km.createElement("div",{style:{height:"100%",flexDirection:"column",display:"flex"}},Km.createElement(Vm,{blockchain:n}),Km.createElement("div",{style:{flex:1}},Km.createElement(nm,{onConfirm:async()=>{await i(e),await o({didApprove:!0})},onDeny:async()=>{await o({didApprove:!1})}},Km.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",marginLeft:"32px",marginRight:"32px"}},Km.createElement("div",{style:{marginTop:"24px",marginBottom:"16px"}},Km.createElement("div",{className:l.title},rm(t)),Km.createElement("div",{className:l.title},"wants to connect")),Km.createElement(lm,{origin:e,originTitle:t,style:{marginBottom:"32px",marginLeft:"auto",marginRight:"auto"}}),Km.createElement(Hm,null)))))}function Hm(){const e=Wm();return Km.createElement("div",null,Km.createElement(ge.Z,{className:e.listDescription},"This app would like to"),Km.createElement(mt.Z,{className:e.listRoot},Km.createElement(ut.ZP,{className:e.listItemRoot},Km.createElement(pt.Z,{className:e.listItemIconRoot},Km.createElement(Ym,null)),"View wallet balance & activity"),Km.createElement(ut.ZP,{className:e.listItemRoot},Km.createElement(pt.Z,{className:e.listItemIconRoot},Km.createElement(Ym,null)),"Request approval for transactions")))}function Vm({blockchain:e}){const[t,n]=(0,o.useState)(!1);return Km.createElement("div",null,Km.createElement(Gm,{blockchain:e,onClick:()=>n(!t)}),Km.createElement(Et,{openDrawer:t,setOpenDrawer:n,filter:t=>t.blockchain===e}))}function Gm({blockchain:e,onClick:t}){const n=(0,d.Pg)(),o=(0,s.Zcg)(e);return Km.createElement("div",{style:{paddingTop:"10px",paddingBottom:"10px",display:"flex"}},Km.createElement("div",{style:{flex:1}}),Km.createElement(pe.Z,{disableRipple:!0,style:{padding:0,textTransform:"none",color:n.custom.colors.fontColor,fontSize:"18px"},onClick:t},Km.createElement(Jm,{blockchain:o.blockchain}),Km.createElement(Ee.JE,{publicKey:o.publicKey,name:o.name,nameStyle:{color:n.custom.colors.fontColor}}),Km.createElement(ce.Z,{style:{color:n.custom.colors.icon}})),Km.createElement("div",{style:{flex:1}}))}function Jm(e){const t=(0,s.OuZ)(32);return Km.createElement(a.e4,{src:t,style:{width:"32px",height:"32px",borderRadius:"16px",marginRight:"16px"}})}function Ym(){const e=(0,d.Pg)();return Km.createElement(Um.Z,{htmlColor:e.custom.colors.positive,style:{height:"20px",width:"20px"}})}var Xm=n(28585),Qm=n(2784);function eu({children:e}){const{authenticate:t,checkAuthentication:n,getAuthSigner:l,getSigners:i}=(0,s.JLf)(),a=(0,s.G5b)(),c=(0,s.aFb)(),d=(0,s.Jao)(),{signMessageForWallet:m}=(0,s.ioA)(),[u,p]=(0,o.useState)(null),[g,h]=(0,o.useState)(null),[f,x]=(0,o.useState)(!1),[y,v]=(0,o.useState)(null),[b,E]=(0,o.useState)([]),k=(0,s.dI)(),[w,C]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{h(null),v(null),(async()=>{E(await i());const e=c.jwt?await n(c.jwt):null;if(e){const{publicKeys:t}=e;v(t)}else{const e=await fetch(`${r.FvS}/users/${c.username}`),t=(await e.json()).publicKeys;v(t);const n=await l(t.map((e=>e.publicKey)));p({...n,message:(0,r.PNi)(c.uuid),userId:c.uuid})}})()}),[c]),(0,o.useEffect)((()=>{(async()=>{if(u)if(u.hardware)x(!0);else{const e=await m(u.blockchain,u.publicKey,u.message);h(e)}})()}),[u]),(0,o.useEffect)((()=>{(async()=>{if(u&&g){const{id:e,jwt:n,publicKeys:o}=await t({...u,signature:g});v(o),await a.request({method:r.Xs1,params:[e,n]}),x(!1)}})()}),[u,g]),(0,o.useEffect)((()=>{(async()=>{if(!y)return;const e=b.filter((e=>!y.find((t=>t.blockchain===e.blockchain&&t.publicKey===e.publicKey))));for(const t of e)if(t.hardware)try{await a.request({method:r.A4Y,params:[t.blockchain,t.publicKey]})}catch{}else await a.request({method:r.NfF,params:[t.blockchain,t.publicKey]})})()}),[a,b,y]),(0,o.useEffect)((()=>{(async()=>{try{k?d.length>0&&!w&&(C(!0),await a.request({method:r.I3u,params:[d]})):C(!0)}catch(e){console.log("sync error",e)}})()}),[a,k,d,w]),Qm.createElement(Qm.Fragment,null,e,u?Qm.createElement(ve.zw,{openDrawer:f,setOpenDrawer:x,paperStyles:{height:"calc(100% - 56px)",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}},Qm.createElement(Xm.N,{blockchain:u.blockchain,action:"search",searchPublicKey:u.publicKey,signMessage:u.message,signText:"Sign the message to authenticate with Backpack.",onComplete:e=>{h(e.signature)}})):null)}const tu=async e=>{try{const t=await fetch("https://feature-gates.xnfts.dev/gates"),n=await t.json();if(!n.gates)throw new Error(n.message);const o=(0,r.M3c)(n.gates);await e.request({method:r.k7J,params:[o]})}catch(e){console.warn("Error while refreshing feature gates, falling back to defaults")}};n(23593);const nu=(0,r.jl5)("router");function ou(){const e=(0,d.Pg)(),t=(0,s.vsx)();return o.createElement(vu,null,o.createElement(o.Fragment,null,o.createElement(l.Ix,{toastStyle:{backgroundColor:e.custom.colors.switchTokensButton},theme:t?"dark":"light"}),o.createElement(iu,null)))}let lu=0;function iu(){const e=(0,s.x5$)()===c.a.NeedsOnboarding;return(0,o.useEffect)((()=>{const t=Date.now();e&&t-lu>1e3&&(lu=t,(0,r.Cf6)())}),[e]),e?null:o.createElement(ru,null)}function ru(){const e=Eu();return o.createElement("div",{className:e.appContainer},o.createElement(au,null))}function au(){switch(nu.debug("app router search",window.location.search),(window.location.search.length>0?window.location.search.substring(1):"").split("&")[0]){case r.ew6:return o.createElement(su,null);case r.NGJ:return o.createElement(cu,null);case r._L:return o.createElement(du,null);case r.k6C:return o.createElement(mu,null);case r.MGz:return o.createElement(uu,null);case r.NEJ:return o.createElement(pu,null);default:return o.createElement(gu,null)}}function su(){nu.debug("query locked");const e=(0,s.fnC)(),t=new URL(window.location.href).searchParams.get("requestId");return(0,s.x5$)()===c.a.Locked?o.createElement(yu,{onUnlock:async()=>{await e.response({id:t,result:!0})}}):null}function cu(){return nu.debug("query locked approval"),(0,s.x5$)()===c.a.Locked?o.createElement(yu,null):o.createElement(du,null)}function du(){nu.debug("query approval");const e=(0,s.fnC)(),t=new URL(window.location.href),n=t.searchParams.get("origin"),l=t.searchParams.get("title"),i=t.searchParams.get("requestId"),r=t.searchParams.get("blockchain");return(0,s.ukw)().find((e=>e===n))&&window.close(),o.createElement(hu,{blockchain:r},o.createElement(fu,null,o.createElement(qm,{origin:n,title:l,blockchain:r,onCompletion:async t=>{await e.response({id:i,result:t})}})))}function mu(){nu.debug("query approve transaction");const e=(0,s.fnC)(),t=new URL(window.location.href),n=t.searchParams.get("origin"),l=t.searchParams.get("title"),i=t.searchParams.get("requestId"),r=t.searchParams.get("tx"),a=t.searchParams.get("wallet"),c=t.searchParams.get("blockchain");return o.createElement(fu,null,o.createElement(hu,{blockchain:c},o.createElement(dm,{origin:n,title:l,tx:r,wallet:a,onCompletion:async(t,n)=>{if(!t)return void await e.response({id:i,result:{didApprove:!1}});const o=Jd(t,c,n);await e.response({id:i,result:{didApprove:!0,transaction:o,feeConfig:n?{...n,config:{...n.config,priorityFee:n.config.priorityFee.toString()}}:void 0}})}})))}function uu(){nu.debug("query approve all transactions");const e=(0,s.fnC)(),t=new URL(window.location.href),n=t.searchParams.get("origin"),l=t.searchParams.get("title"),i=t.searchParams.get("requestId"),r=JSON.parse(t.searchParams.get("txs")),a=t.searchParams.get("wallet"),c=t.searchParams.get("blockchain");return o.createElement(fu,null,o.createElement(hu,{blockchain:c},o.createElement(um,{origin:n,title:l,txs:r,wallet:a,onCompletion:async t=>{await e.response({id:i,result:t})}})))}function pu(){nu.debug("query approve message");const e=(0,s.fnC)(),t=new URL(window.location.href),n=t.searchParams.get("origin"),l=t.searchParams.get("title"),i=t.searchParams.get("message"),r=t.searchParams.get("requestId"),a=t.searchParams.get("wallet"),c=t.searchParams.get("blockchain");return o.createElement(fu,null,o.createElement(hu,{blockchain:c},o.createElement(_m,{origin:n,title:l,message:i,wallet:a,onCompletion:async t=>{await e.response({id:r,result:t})}})))}function gu(){nu.debug("full app");const e=(0,s.G5b)();return(0,o.useEffect)((()=>{(async()=>{await Promise.all([tu(e),g(e)])})()}),[e]),o.createElement(fu,null,o.createElement(Dm,null))}function hu({blockchain:e,children:t}){const n=(0,s.SjB)().includes(e);return o.createElement(o.Fragment,null,n?t:o.createElement(a.ub,{icon:e=>o.createElement(m.Z,e),title:`${(0,r.LFn)(e)} is disabled`,subtitle:`Add a ${(0,r.LFn)(e)} wallet in Backpack`}))}function fu({children:e}){const t=(0,s.x5$)(),n=!(t===c.a.NeedsOnboarding)&&t===c.a.Locked;return o.createElement(u.M,{initial:!1},o.createElement(xu,{id:n?"locked":"unlocked"},o.createElement(o.Suspense,{fallback:o.createElement("div",{style:{display:"none"}})},n?o.createElement(h.Q,null):o.createElement(o.Fragment,null,o.createElement(i.ny,null),o.createElement(eu,null,e)))))}function xu({children:e,id:t}){return o.createElement(p.E.div,{style:{position:"absolute",left:0,top:0,right:0,bottom:0},key:t,variants:ku,initial:"initial",animate:"animate",exit:"exit"},e)}function yu({onUnlock:e}){return o.createElement(h.Q,{onUnlock:e})}function vu(e){return o.createElement(o.Suspense,{fallback:o.createElement(bu,null)},e.children)}function bu(){const e=Eu();return o.createElement("div",{className:e.appContainer})}const Eu=(0,d.W2)((e=>({appContainer:{minWidth:`${r.lGu}px`,minHeight:`${r.xlK}px`,height:"100%",background:e.custom.colors.backgroundBackdrop,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"}}))),ku={initial:{opacity:0},animate:{opacity:1,transition:{delay:.09}},exit:{transition:{delay:.09,duration:.1},opacity:0}}},87848:(e,t,n)=>{n.d(t,{R:()=>p,_:()=>g});var o=n(2784),l=n(20604),i=n(36375),r=n(3210),a=n(60041),s=n(83422),c=n(19161),d=n(23866),m=n(21373),u=n(2784);function p(){const{close:e}=(0,d.M$)(),t=(0,m.HJ)(),n=(0,r.aFb)(),i=(0,r.G5b)();return(0,o.useEffect)((()=>{t.setOptions({headerTitle:`Remove ${n.username}`})}),[]),u.createElement(h,{buttonTitle:"Remove",title:"Remove User",subtext:"This will remove all the wallets you have created or imported. Make sure you have your existing secret recovery phrase and private keys saved.",onNext:async()=>{await i.request({method:l.S6S,params:[n.uuid]}),setTimeout(e,250)}})}function g(){const e=(0,r.G5b)(),t=(0,m.HJ)();return(0,o.useEffect)((()=>{t.setOptions({headerTitle:"Reset Backpack"})}),[]),u.createElement(h,{buttonTitle:"Reset",title:"Reset Backpack",subtext:"This will remove all the user accounts you have created or imported. Make sure you have your existing secret recovery phrase and private keys saved.",onNext:async()=>{await e.request({method:l.GIP,params:[]}),window.close()}})}function h({title:e,buttonTitle:t,subtext:n,onNext:o}){const l=(0,a.Pg)(),{close:r}=(0,d.M$)();return u.createElement(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},u.createElement(s.Z,{sx:{margin:"0 24px"}},u.createElement(c.N9,{icon:u.createElement(i.aN,null)}),u.createElement(c.h4,{text:e}),u.createElement(c.MR,null,n)),u.createElement(s.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},u.createElement(i.tf,{label:"Cancel",onClick:r,style:{marginRight:"8px",border:`${l.custom.colors.borderFull}`}}),u.createElement(i.O3,{label:t,onClick:o})))}},11896:(e,t,n)=>{n.d(t,{r:()=>m});var o=n(36375),l=n(3210),i=n(88367),r=n(60041),a=n(83422),s=n(19161),c=n(21373),d=n(2784);function m({onClose:e}){const t=(0,l.x5$)()===i.a.Locked,n=(0,r.Pg)(),m=(0,c.HJ)();return d.createElement(a.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},d.createElement(a.Z,{sx:{margin:"0 24px"}},d.createElement(s.N9,{icon:d.createElement(o.UO,null)}),d.createElement(s.h4,{text:"Forgot your password?"}),d.createElement(s.MR,null,"We can’t recover your password as it is only stored on your computer. You can try more passwords or reset your wallet with the secret recovery phrase.")),d.createElement(a.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},d.createElement(a.Z,{sx:{mb:"16px"}},d.createElement(o.tf,{label:"Try More Passwords",onClick:t?e:()=>{m.pop()},style:{border:n.custom.colors.borderButton}})),d.createElement(o.O3,{label:"Reset Backpack",onClick:()=>{m.push("reset-warning")}})))}},76160:(e,t,n)=>{n.d(t,{Q:()=>Z});var o=n(2784),l=n(20604),i=n(36375),r=n(3210),a=n(60041),s=n(76901),c=n(16366),d=n(72448),m=n(83422),u=n(11188),p=n(66198),g=n(79312),h=n(23866),f=n(14466),x=n(81353),y=n(14385),v=n(28319),b=n(75927),E=n(42603),k=n(3463),w=n(97267),C=n(82056),S=n(22529),T=n(21373),R=n(87848),j=n(11896),I=n(2784);function N(){const{close:e}=(0,h.M$)(),t=(0,T.HJ)();return(0,o.useEffect)((()=>{t.setOptions({headerTitle:""})}),[]),I.createElement(j.r,{onClose:e})}var F=n(2784);const P=(0,a.W2)((e=>({listItemRoot:{height:"44px",display:"flex",backgroundColor:`${e.custom.colors.nav} !important`}})));function L({menuOpen:e,setMenuOpen:t}){const n=(0,a.Pg)();return F.createElement(w.Z,{sx:{zIndex:2,display:"flex",flexDirection:"row-reverse",paddingLeft:"16px",paddingRight:"16px",paddingTop:"10px",paddingBottom:"10px",height:S.fp}},F.createElement(p.Z,{disableRipple:!0,color:"inherit",onClick:()=>t(!0),sx:{padding:0,"&:hover":{background:"transparent !important",backgroundColor:"transparent !important"}}},F.createElement(E.Z,{sx:{color:n.custom.colors.icon}})),F.createElement(h.Gx,{openDrawer:e,setOpenDrawer:t,backdropProps:{style:{opacity:.8,background:"#18181b"}},paperProps:{sx:{background:n.custom.colors.backgroundBackdrop,height:"90%"}}},F.createElement("div",{style:{height:"100%",background:n.custom.colors.backgroundBackdrop}},F.createElement(T.I6,{initialRoute:{name:"root"},options:()=>({title:""}),navButtonLeft:F.createElement(h.PZ,{onClick:()=>t(!1)})},F.createElement(T.y4,{name:"root",component:e=>F.createElement(A,e)}),F.createElement(T.y4,{name:"reset",component:e=>F.createElement(N,e)}),F.createElement(T.y4,{name:"reset-warning",component:e=>F.createElement(R._,e)})))))}function A(){const e=(0,a.Pg)(),t=(0,T.HJ)(),n=P(),o=[{icon:F.createElement(x.Z,{style:{color:e.custom.colors.icon}}),text:"Reset Backpack",onClick:()=>t.push("reset"),suffix:F.createElement(v.Z,{style:{flexShrink:1,alignSelf:"center",color:e.custom.colors.icon}})},{icon:F.createElement(b.Z,{style:{color:e.custom.colors.icon}}),text:"Backpack.app",onClick:()=>window.open(l.UB9,"_blank")},{icon:F.createElement(k.Z,{style:{color:e.custom.colors.icon}}),text:"Twitter",onClick:()=>window.open(l.vac,"_blank")},{icon:F.createElement(i.D7,{fill:e.custom.colors.icon}),text:"Need help? Hop into Discord",onClick:()=>window.open(l.ulq,"_blank")}];return F.createElement(m.Z,{sx:{color:e.custom.colors.fontColor}},F.createElement(i.aV,{style:{marginLeft:"16px",marginRight:"16px",border:e.custom.colors.borderFull}},o.map(((t,l)=>F.createElement(i.HC,{onClick:t.onClick,key:t.text,isFirst:0===l,isLast:l===o.length-1,borderColor:e.custom.colors.nav,classes:{root:n.listItemRoot}},F.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},t.icon),F.createElement(C.Z,{sx:{marginLeft:"8px",fontSize:"16px",lineHeight:"24px",fontWeight:500},primary:t.text}),t.suffix??F.createElement(y.Z,{style:{flexShrink:1,alignSelf:"center",color:e.custom.colors.icon}}))))))}var B=n(2784);function Z({onUnlock:e}){const t=(0,a.Pg)(),n=(0,r.G5b)(),d=(0,r.aFb)(),[x,y]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!1),[E,k]=(0,o.useState)(""),[w,C]=(0,o.useState)(!1),[S,T]=(0,o.useState)(!1),{nft:R}=(()=>{try{return JSON.parse(window.localStorage.getItem((0,f.oR)(d.uuid))??JSON.stringify({uuid:void 0,nft:void 0}))}catch{return{uuid:void 0,nft:void 0}}})();return B.createElement(m.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"}},B.createElement(m.Z,{sx:{backgroundColor:t.custom.colors.backgroundBackdrop,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"}},B.createElement(m.Z,null,B.createElement(L,{menuOpen:v,setMenuOpen:b}),B.createElement("div",{style:{marginTop:"24px"}},B.createElement(D,{forceWhite:false,style:{zIndex:2}}),B.createElement("div",{style:{position:"relative"}},B.createElement(O,{isFullScreen:false,nft:R,user:d})))),B.createElement(m.Z,{style:{zIndex:1,marginBottom:74}},B.createElement("form",{onSubmit:async t=>{t.preventDefault();try{await n.request({method:l.FZh,params:[E,d.uuid]}),e&&await e()}catch(e){if(console.error(e),e.toString().includes("migration failed:"))return void y(!0);T(!0)}},noValidate:!0},B.createElement(m.Z,{sx:{margin:"0 12px 12px 12px"}},B.createElement(i.oi,{autoFocus:!0,error:S,placeholder:"Password",type:w?"text":"password",value:E,setValue:e=>{k(e.target.value),T(!1)},endAdornment:B.createElement(u.Z,{position:"end"},B.createElement(p.Z,{disableRipple:!0,sx:{color:t.custom.colors.icon},onClick:()=>C(!w),onMouseDown:()=>C(!w),tabIndex:-1},w?B.createElement(s.Z,null):B.createElement(c.Z,null)))})),B.createElement(m.Z,{sx:{mx:"12px"}},B.createElement(i.KM,{label:"Unlock",type:"submit"}))),B.createElement(m.Z,{sx:{position:"absolute",width:"100%",display:S?"block":"none",marginTop:"24px"}},B.createElement(g.Z,{sx:{color:t.custom.colors.secondary,fontSize:"16px",textAlign:"center",cursor:"pointer",lineHeight:"24px",fontWeight:500},onClick:()=>b(!0)},"Forgot Password?")))),B.createElement(h.zw,{openDrawer:x,setOpenDrawer:()=>{}},B.createElement($,null)))}function O({isFullScreen:e,user:t}){const n=(0,r.OuZ)(120,t.username);return B.createElement("div",{style:{}},e?B.createElement(B.Fragment,null,B.createElement("div",{style:{position:"fixed",left:0,right:0,top:0,bottom:0,background:"black",opacity:.2,zIndex:1}}),B.createElement("div",{style:{position:"fixed",inset:0}},B.createElement(i.e4,{src:n,style:{height:"100vh",position:"absolute",top:0,transform:"translate(-50%, 0%)",transformOrigin:void 0},loadingStyles:{position:"fixed",left:0,right:0,top:0,bottom:0,transform:"inherit"}}))):B.createElement(i.e4,{size:120,src:n,style:{height:"120px",width:"120px",borderRadius:"60px",position:"absolute",bottom:-152,transform:"translate(-50%, 0%)",transformOrigin:void 0,display:"inline"}}))}function $(){return B.createElement("div",{style:{height:"100%"}},B.createElement(i.ub,{icon:e=>B.createElement(d.Z,e),title:"Unable to migrate",subtitle:"Thank you for participating in the Backpack Beta! We weren't able to migrate your account. Please reinstall Backpack to continue. Don't worry, this is normal."}))}function D({disableUsername:e,forceWhite:t,style:n}){const o=(0,a.Pg)(),l=(0,r.aFb)();return B.createElement(m.Z,{sx:{marginTop:"16px",marginLeft:"auto",marginRight:"auto",display:"block",position:"relative",...n}},B.createElement("div",{style:{display:"flex"}},B.createElement(i.Lr,{style:{marginBottom:"32px",marginLeft:"auto",marginRight:"auto"}})),B.createElement(i.jw,{fill:t?"white":o.custom.colors.fontColor}),B.createElement(g.Z,{sx:{textAlign:"center",lineHeight:"24px",fontSize:"16px",fontWeight:"500",color:t?"white":o.custom.colors.secondary,marginTop:"8px"}},"gm ",e?"":`@${l.username}`))}},28585:(e,t,n)=>{n.d(t,{N:()=>f});var o=n(2784),l=n(60041),i=n(73181),r=n(43298),a=n(23866),s=n(22529),c=n(49748),d=n(66686),m=n(38113),u=n(47052),p=n(37217),g=n(99382),h=n(2784);function f({blockchain:e,action:t,searchPublicKey:n,signMessage:f,signText:x,successComponent:y,onComplete:v,onClose:b}){const E=(0,l.Pg)(),{step:k,nextStep:w,prevStep:C}=(0,i.h)(),S=function({blockchain:e,action:t,searchPublicKey:n,signMessage:l,signText:i,successComponent:a,onComplete:s,nextStep:f,prevStep:x}){const[y,v]=(0,o.useState)(null),[b,E]=(0,o.useState)(!1),[k,w]=(0,o.useState)(null),C=[h.createElement(d.r,{key:"ConnectHardwareWelcome",onNext:f}),h.createElement(c.L,{key:"ConnectHardwareSearching",blockchain:e,onNext:e=>{v(e),f()},isConnectFailure:!!b}),{create:h.createElement(m.J,{blockchain:e,transport:y,onNext:e=>{w(e),f()},onError:()=>{E(!0),x()}}),derive:h.createElement(u.s,{blockchain:e,transport:y,onNext:e=>{w(e),f()},onError:()=>{E(!0),x()}}),search:h.createElement(p.M,{blockchain:e,transport:y,publicKey:n,onNext:e=>{w(e),f()},onError:()=>{E(!0),x()},onRetry:x}),import:h.createElement(r.v,{blockchain:e,transport:y,allowMultiple:!1,onNext:e=>{w(e[0]),f()},onError:()=>{E(!0),x()}})}[t],...k?[h.createElement(g.v,{key:"HardwareSign",blockchain:e,walletDescriptor:k,message:"string"==typeof l?l:l(k.publicKey),text:i,onNext:e=>{s({...k,signature:e}),a&&f()}})]:[]];return a&&C.push(a),C}({blockchain:e,action:t,searchPublicKey:n,signMessage:f,signText:x,successComponent:y,onComplete:v,nextStep:w,prevStep:C});return h.createElement(s.V3,{navButtonLeft:k>0&&k<S.length-1?h.createElement(s.I4,{onClick:C}):b?h.createElement(a.PZ,{onClick:b}):null,navbarStyle:{backgroundColor:E.custom.colors.nav},navContentStyle:{backgroundColor:E.custom.colors.nav,height:"400px"}},S[k])}},72036:(e,t,n)=>{n.d(t,{UJ:()=>C,_A:()=>S,uT:()=>w});var o=n(2784),l=n(20604),i=n(26852),r=n(87486),a=n(36375),s=n(3210),c=n(60041),d=n(38114),m=n(31563),u=n(14117),p=n(11259),g=n(11188),h=n(51880),f=n(77256),x=n(21373);let y=0;const v=(0,h.Z)((e=>(0,f.Z)({container:{display:"flex",flexDirection:"column",height:"100%"},topHalf:{flex:1},userText:{fontSize:16,marginTop:4,color:e.custom.colors.fontColor2},buttonContainer:{display:"flex",paddingLeft:"12px",paddingRight:"12px",paddingBottom:"24px",paddingTop:"25px",justifyContent:"space-between"}}))),b=o.createContext(null);function E(e){return o.createElement(b.Provider,{value:{blockchain:e.blockchain,name:e.name,onSelect:e.onSelect}},e.children)}function k(){const e=(0,o.useContext)(b);if(!e)throw new Error("context not found");return e}const w=({publicKey:e,blockchain:t,address:n})=>{const l=(0,s.rTu)().publicKey,i=e??l,{push:r}=(0,x.HJ)(),[a]=(0,s.U2V)((0,s.b00)({publicKey:i,blockchain:t,tokenAddress:n}),null);return a?o.createElement(S,{blockchain:t,name:a.ticker,onSelect:e=>{r("send",{blockchain:t,token:a,to:e})}}):null},C=e=>{const{push:t}=(0,x.HJ)();return o.createElement(S,{...e,onSelect:n=>{t("send",{blockchain:e.blockchain,token:e.token,to:n})}})},S=({blockchain:e,name:t,onSelect:n})=>{const l=v(),i=(0,x.HJ)(),[r,c]=(0,o.useState)(""),{provider:d}=(0,s.EFU)(),m=(0,s.UL)(),[u,p]=(0,o.useState)([]),{isValidAddress:g,isErrorAddress:h,normalizedAddress:f}=(0,s.VCh)(e,r,d.connection,m.provider);return(0,o.useEffect)((()=>{const e=i.title;return i.setOptions({headerTitle:`Send ${t}`}),()=>{i.setOptions({headerTitle:e})}}),[]),o.createElement(E,{blockchain:e,name:t,onSelect:n},o.createElement("div",{className:l.container},o.createElement("div",{className:l.topHalf},o.createElement(P,{searchResults:u,inputContent:r,setInputContent:c,setSearchResults:p}),r?null:o.createElement(I,{searchFilter:r,blockchain:e}),o.createElement(j,{searchFilter:r,blockchain:e}),o.createElement(L,{searchResults:u,blockchain:e}),o.createElement(T,{searchResults:u,searchFilter:r})),o.createElement("div",{className:l.buttonContainer},h||!g&&r.length>15?o.createElement(a.O3,{label:"Invalid address",disabled:!0}):o.createElement(a.KM,{onClick:()=>{const e=u.find((e=>e.public_keys.find((e=>e.publicKey===r))));n({address:f||r,username:e?.username,image:e?.image,uuid:e?.id})},disabled:!g,label:"Next",type:"submit","data-testid":"Send"}))))};function T({searchFilter:e,searchResults:t}){const{uuid:n}=(0,s.aFb)(),l=(0,i.gW)(n),r=(0,c.Pg)(),d=[...l.filter((t=>!!t.remoteUsername.includes(e)||!!t.public_keys.find((t=>t.publicKey.includes(e))))).filter((e=>!e.public_keys?.[0])),...t.filter((e=>!e.public_keys?.[0])).map((e=>({remoteUsername:e.username,remoteUserImage:e.image})))];return d.length?o.createElement("div",{style:{padding:10}},o.createElement(a.mx,{text:"Users without a primary wallet"}),o.createElement(u.Z,{disableRipple:!0,onClick:()=>{},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"8px",paddingBottom:"8px",display:"flex",height:"48px",backgroundColor:r.custom.colors.nav,...(0,a.Z9)(!0,!0,12)}},o.createElement("div",{style:{paddingTop:15}},o.createElement(R,{members:d.map((e=>({image:e.remoteUserImage,username:e.remoteUsername})))})))):null}function R({members:e}){const t=(0,c.Pg)(),n=v();return o.createElement("div",{style:{justifyContent:"center",display:"flex",alignItems:"center",paddingBottom:20}},e.slice(0,3).map(((e,n)=>o.createElement("img",{key:n,src:e.image,style:{border:`solid 2px ${t.custom.colors.nav}`,borderRadius:"50%",height:30,width:30,...n>0?{marginLeft:"-12px"}:{}}}))),o.createElement("div",{style:{color:t.custom.colors.smallTextColor,paddingLeft:10,textOverflow:"ellipsis"},className:n.userText},e.length<=3?e.map(((t,n)=>t.username+""+(n===e.length-1?"":", "))):`${e.slice(0,3).map(((t,n)=>t.username+""+(n===e.length-1?"":", ")))} + ${e.length-3}`))}const j=({blockchain:e,searchFilter:t})=>{const{uuid:n}=(0,s.aFb)(),l=(0,i.gW)(n).filter((e=>!!e.remoteUsername.includes(t)||!!e.public_keys.find((e=>e.publicKey.includes(t))))).filter((e=>!!e.public_keys?.[0]));return o.createElement("div",null,0!==l.length?o.createElement("div",{style:{margin:"12px 12px"}},o.createElement(a.mx,{text:"Friends"}),o.createElement(N,{wallets:l.map((n=>({username:n.remoteUsername,addresses:n.public_keys.filter((o=>o.blockchain===e&&(o.publicKey.includes(t)||n.remoteUsername.includes(t)))).map((e=>e.publicKey)),image:n.remoteUserImage,uuid:n.remoteUserId}))).sort(((e,t)=>e.username[0]<t.username[0]?-1:1))})):null)},I=({blockchain:e,searchFilter:t})=>{const n=(0,s.wUG)().filter((t=>t.blockchain===e)),{uuid:i,username:r}=(0,s.aFb)(),c=(0,s.OuZ)(),d=(0,s.cPJ)(),m=(0,s.zUN)();return 1===n.length?null:o.createElement("div",{style:{margin:"12px 12px"}},o.createElement(a.mx,{text:"Your addresses"}),o.createElement(N,{wallets:n.filter((t=>t.blockchain===e)).filter((n=>n.publicKey!==(e===l.$OA.SOLANA?d.publicKey:m.publicKey)&&n.publicKey.includes(t))).map((e=>({username:r,walletName:e.name,image:c,uuid:i,addresses:[e.publicKey]})))}))};function N({wallets:e}){const t=(0,c.Pg)(),n=e.filter((e=>e.addresses?.[0]));return o.createElement(p.Z,{style:{paddingTop:0,paddingBottom:0,borderRadius:"14px",border:`${t.custom.colors.borderFull}`}},n.map(((e,t)=>o.createElement(F,{key:[e.username,e.walletName].join(":"),isFirst:0===t,isLast:t===n.length-1,user:{walletName:e.walletName,username:e.username,image:e.image,uuid:e.uuid},address:e.addresses?.[0]}))))}const F=({user:e,address:t,isFirst:n,isLast:l})=>{const i=(0,c.Pg)(),r=v(),{onSelect:s}=k();return o.createElement(u.Z,{disableRipple:!0,onClick:()=>{t&&s({address:t,username:e.username,walletName:e.walletName,image:e.image,uuid:e.uuid})},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"8px",paddingBottom:"8px",display:"flex",height:"48px",backgroundColor:i.custom.colors.nav,borderBottom:l?void 0:`solid 1pt ${i.custom.colors.border}`,...(0,a.Z9)(n,l,12)}},o.createElement("div",{style:{width:"100%",display:"flex"}},o.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},o.createElement(a.tB,{size:32,image:e.image})),o.createElement("div",{style:{display:"flex"}},o.createElement("div",{className:r.userText},e.walletName||e.username),t?null:o.createElement(d.Z,{style:{color:"#E33E3F",marginLeft:10}}))))},P=({inputContent:e,setInputContent:t,setSearchResults:n,searchResults:i})=>{const s=(0,c.Pg)(),{blockchain:d}=k();return(0,o.useEffect)((()=>{e.length>=2?((e,t)=>{clearTimeout(y),y=setTimeout((async()=>{await(async(e,t)=>{try{const o=await r.sI.getInstance().fetch(`${l.FvS}/users?usernamePrefix=${e}&blockchain=${t}&limit=6`),i=await o.json();n(i.users.sort(((e,t)=>e.username.length<t.username.length?-1:1))||[])}catch(e){console.error(e)}})(e,t)}),250)})(e,d):clearTimeout(y)}),[e,d]),(0,o.useEffect)((()=>{!e&&i.length&&n([])}),[i,e]),o.createElement("div",{style:{margin:"0 12px"}},o.createElement(a.oi,{placeholder:"Enter a username or address",startAdornment:o.createElement(g.Z,{position:"start"},o.createElement(m.Z,{style:{color:s.custom.colors.icon}})),value:e,setValue:e=>t(e.target.value.trim()),inputProps:{name:"to",spellCheck:"false",style:{height:"48px",paddingTop:0,paddingBottom:0}},margin:"none"}))},L=({searchResults:e,blockchain:t})=>{const n=e.filter((e=>!e.areFriends));return o.createElement("div",{style:{margin:"0 12px"}},0!==n.length?o.createElement("div",{style:{marginTop:10}},o.createElement(a.mx,{text:"Other people"}),o.createElement(N,{wallets:n.map((e=>({username:e.username,image:e.image,uuid:e.id,addresses:e.public_keys.filter((e=>e.blockchain===t))?.map((e=>e.publicKey))}))).filter((e=>0!==e.addresses.length))})):null)}},84708:(e,t,n)=>{n.d(t,{jj:()=>R,vw:()=>E,wK:()=>T,yK:()=>b});var o=n(2784),l=n(25686),i=n(40342),r=n(20604),a=n(36375),s=n(3210),c=n(60041),d=n(79312),m=n(10528),u=n(49494),p=n(19619),g=n(68269),h=n(8199),f=n(23866),x=n(21373),y=n(64008),v=n(76668);const b=(0,c.W2)((e=>({topImage:{width:80},topImageOuter:{width:80,height:80,border:`solid 3px ${e.custom.colors.avatarIconBackground}`,borderRadius:"50%",display:"inline-block",overflow:"hidden"},horizontalCenter:{display:"flex",justifyContent:"center"},container:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%"},topHalf:{paddingTop:"24px",flex:1},textRoot:{marginTop:"0 !important",marginBottom:"0 !important","& .MuiOutlinedInput-root":{backgroundColor:`${e.custom.colors.nav} !important`}}})));function E({blockchain:e,token:t,to:n}){const l=b(),{uuid:i}=(0,s.aFb)(),c=(0,f.M$)(),d=(0,x.HJ)(),{provider:u}=(0,s.EFU)(),h=(0,s.UL)(),[y,v]=(0,o.useState)(!1),[E,w]=(0,o.useState)(n?.address||""),[C,T]=(0,o.useState)(null),[R,j]=(0,o.useState)(""),[I,N]=(0,o.useState)(m.O$.from(0)),[F,P]=(0,o.useState)(""),L=(0,s.fAp)({userId:n?.uuid||""});(0,o.useEffect)((()=>{const e=d.title;return d.setOptions({headerTitle:`Send ${t.ticker}`}),()=>{d.setOptions({headerTitle:e})}}),[]);const{isValidAddress:A,isErrorAddress:B,normalizedAddress:Z}=(0,s.VCh)(e,E,u.connection,h.provider);(0,o.useEffect)((()=>{t&&N(g.q[e].MaxFeeOffset({address:t.address,mint:t.mint},h))}),[e,t]);const O=m.O$.from(t.nativeBalance).sub(I),$=O.gt(0)?O:m.O$.from(0),D=C&&C.gt($),z=!A||null===C||C.eq(0)||!!D,M=C&&D;let _;_=B?o.createElement(a.O3,{disabled:!0,label:"Invalid Address"}):M?o.createElement(a.O3,{disabled:!0,label:"Insufficient Balance"}):o.createElement(a.KM,{disabled:z,label:"Review",type:"submit","data-testid":"Send"});const U=g.q[e].SendTokenConfirmationCard;return o.createElement("form",{className:l.container,onSubmit:e=>{e.preventDefault(),C&&v(!0)},noValidate:!0},n?null:o.createElement(k,{address:E,sendButton:_,amount:C,token:t,blockchain:e,isAmountError:M,isErrorAddress:M,maxAmount:$,setAddress:w,setAmount:T}),n?o.createElement(S,{to:n,message:F,setMessage:P,sendButton:_,amount:C,strAmount:R,token:t,blockchain:e,isAmountError:M,isErrorAddress:M,maxAmount:$,setAddress:w,setAmount:T,setStrAmount:j}):null,o.createElement(p.x,{openDrawer:y,setOpenDrawer:e=>{e||(T(m.O$.from(0)),j("")),v(e)}},o.createElement(U,{onComplete:async()=>{n?.uuid&&n?.uuid!==i&&L?.id&&n?.uuid!==i&&r.$OA.SOLANA},token:t,destinationAddress:Z,destinationUser:n&&n.uuid&&n.username&&n.image?n:void 0,amount:C,onViewBalances:()=>{c.close()}})))}function k({blockchain:e,address:t,isErrorAddress:n,token:l,maxAmount:i,setAmount:s,amount:c,isAmountError:d,sendButton:m,setAddress:u}){const p=b();return o.createElement(o.Fragment,null,o.createElement("div",{className:p.topHalf},o.createElement("div",{style:{marginBottom:"40px"}},o.createElement(a.pU,{leftLabel:"Send to",rightLabel:"",style:{marginLeft:"24px",marginRight:"24px"}}),o.createElement("div",{style:{margin:"0 12px"}},o.createElement(a.oi,{placeholder:`${(0,r.LFn)(e)} address`,value:t,setValue:e=>{u(e.target.value.trim())},error:n,inputProps:{name:"to",spellCheck:"false"},margin:"none"}))),o.createElement("div",null,o.createElement(a.pU,{leftLabel:"Amount",rightLabel:`${l.displayBalance} ${l.ticker}`,rightLabelComponent:o.createElement(a.IQ,{amount:i,onSetAmount:s,decimals:l.decimals}),style:{marginLeft:"24px",marginRight:"24px"}}),o.createElement("div",{style:{margin:"0 12px"}},o.createElement(v.J,{type:"number",placeholder:"0",rootClass:p.textRoot,decimals:l.decimals,value:c,setValue:s,isError:d,inputProps:{name:"amount"}})))),o.createElement(w,null,m))}function w({children:e}){return o.createElement(l.Z,{style:C.container},e)}const C=i.Z.create({container:{width:"100%",paddingHorizontal:12,paddingBottom:16,paddingTop:25}});function S({token:e,maxAmount:t,setAmount:n,strAmount:l,setStrAmount:i,sendButton:d,to:m}){const p=b(),g=(0,c.Pg)(),f=(0,s.vsx)();return o.createElement(o.Fragment,null,o.createElement("div",{style:{paddingTop:"40px",flex:1}},o.createElement("div",null,o.createElement("div",{className:p.horizontalCenter,style:{marginBottom:6}},o.createElement("div",{className:p.topImageOuter},o.createElement(a.ug,{size:80,className:p.topImage,src:m?.image||`https://avatars.backpack.workers.dev/${m?.address}`,style:{width:80,height:80}}))),o.createElement("div",{className:p.horizontalCenter},m.walletName||m.username?o.createElement("div",{style:{color:g.custom.colors.fontColor,fontSize:16,fontWeight:500}},m.walletName?m.walletName:`@${m.username}`):null),o.createElement("div",{className:p.horizontalCenter,style:{marginTop:4}},o.createElement(h.E,{publicKey:m?.address}))),o.createElement("div",null,o.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100"}},o.createElement("input",{placeholder:"0",autoFocus:!0,type:"text",style:{marginTop:"40px",outline:"none",background:"transparent",border:"none",fontWeight:600,fontSize:48,height:48,color:g.custom.colors.fontColor,textAlign:"center",width:"100%",fontFamily:g.typography.fontFamily},value:l,onChange:({target:{value:t}})=>{try{const o=e.decimals??9,l=t.replace(/[^\d.]/g,"").replace(/^\.(\d+)?$/,"0.$1").replace(/^(\d+\.\d*?)\./,"$1").replace(new RegExp(`^(\\d+\\.\\d{${o}}).+`),"$1");if(!Number.isFinite(Number(l)))return;if(i(l),l.endsWith("."))throw"trailing .";const r=u.parseUnits(l,o);n(r.isZero()?null:r)}catch(e){n(null)}}})),o.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:20}},o.createElement("img",{src:e.logo,style:{height:35,borderRadius:"50%",marginRight:5}}),o.createElement("div",{style:{color:g.custom.colors.smallTextColor,fontSize:24}},e.ticker)),o.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:20}},o.createElement("div",{style:{display:"inline-flex",color:g.custom.colors.fontColor,cursor:"pointer",fontSize:14,border:`2px solid ${f?g.custom.colors.bg2:g.custom.colors.border1}`,padding:"4px 12px",borderRadius:8,marginTop:5,background:g.custom.colors.bg3},onClick:()=>{const o=(0,r.Our)(t,e.decimals);i(o),n(t)}},"Max: ",(0,r.Our)(t,e.decimals)," ",e.ticker)))),o.createElement(w,null,d))}function T({blockchain:e,amount:t,token:n,signature:l,isComplete:i,titleOverride:m,onViewBalances:u}){const p=(0,c.Pg)(),g=(0,f.M$)(),h=(0,s.sAm)(e),x=(0,s.y20)(e);return o.createElement("div",{style:{height:"264px",display:"flex",flexDirection:"column"}},o.createElement(d.Z,{style:{textAlign:"center",color:p.custom.colors.secondary,fontSize:"14px",fontWeight:500,marginTop:"30px"}},m||(i?"Sent":"Sending...")),o.createElement(y.j,{style:{marginTop:"16px",marginBottom:"0px"},amount:t,token:n}),o.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column"}},i?o.createElement("div",{style:{textAlign:"center"}},o.createElement(a.nQ,null)):o.createElement(a.gb,{size:48,iconStyle:{color:p.custom.colors.primaryButton,display:"flex",marginLeft:"auto",marginRight:"auto"}})),o.createElement("div",{style:{marginBottom:"16px",marginLeft:"16px",marginRight:"16px"}},h&&x?o.createElement(a.tf,{onClick:async()=>{i?(g.close(),u&&u()):window.open((0,r.yUu)(h,l,x))},label:i?"View Balances":"View Explorer"}):null))}function R({blockchain:e,signature:t,onRetry:n,error:l}){const i=(0,s.sAm)(e),m=(0,s.y20)(e),u=(0,c.Pg)();return o.createElement("div",{style:{height:"340px",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"16px"}},o.createElement("div",{style:{marginTop:"8px",textAlign:"center"}},o.createElement(d.Z,{style:{marginBottom:"16px",color:u.custom.colors.fontColor}},"Error"),o.createElement("div",{style:{height:"48px"}},o.createElement(a.aM,null)),o.createElement(d.Z,{style:{marginTop:"16px",marginBottom:"16px",overflow:"hidden",textOverflow:"ellipsis",color:u.custom.colors.fontColor}},l),i&&m&&t?o.createElement(a.tf,{style:{height:"40px",width:"147px"},buttonLabelStyle:{fontSize:"14px"},label:"View Explorer",onClick:()=>window.open((0,r.yUu)(i,t,m),"_blank")}):null),o.createElement(a.KM,{label:"Retry",onClick:()=>n()}))}},14466:(e,t,n)=>{n.d(t,{GH:()=>w,Mz:()=>k,hZ:()=>j,oR:()=>F});var o=n(2784),l=n(20604),i=n(26852),r=n(36375),a=n(3210),s=n(60041),c=n(98460),d=n(73906),m=n(79312),u=n(52529),p=n(66198),g=n(82073),h=n(10528),f=n(53476),x=n(19619),y=n(52679),v=n(84708),b=n(48502);const E=(0,l.jl5)("app-extension/nft-detail");function k(){const{uuid:e}=(0,a.aFb)(),t=(0,a.rTu)(),n=(0,a.G5b)(),{push:o}=(0,a.HJj)();return async(r,a)=>{await fetch(`${l.FvS}/nft/bulk`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:t.publicKey,nfts:[{collectionId:r?.collectionId,nftId:a,centralizedGroup:r?.id}]})}),await(0,i.FT)(e),await n.request({method:l.c_U,params:[l.NzU]}),o({title:r?.name,componentId:l.Zzd,componentProps:{fromInbox:!0,id:r?.id,title:r?.name}})}}function w({publicKey:e,connectionUrl:t,nftId:n}){const l=(0,f.sJ)((0,a.HCD)({publicKey:e,connectionUrl:t,nftId:n})),i=k(),{contents:s,state:c}=(0,f.$P)((0,a.E1m)({publicKey:e,connectionUrl:t,nftId:n})),d="hasValue"===c&&s||null,{contents:m,state:u}=(0,f.$P)((0,a.pyx)(d?{collection:d.metadataCollectionId,mint:d.mint}:null)),p="hasValue"===u&&m||null,[g,h]=(0,o.useState)(!1),[x,y]=(0,o.useState)(!1),v=l?.collectionId;return n&&d?o.createElement("div",{style:{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"8px"}},o.createElement(C,{nft:d}),o.createElement("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginTop:"16px"}},v?o.createElement(r.KM,{disabled:g||x,label:x?"Joining":g?"Joined":"Join chat",onClick:async()=>{y(!0),await i(l,d.mint),h(!0)}}):null,o.createElement(b.N,{nft:d},(e=>o.createElement(r.KM,{invert:void 0!==v,onClick:()=>e(),label:"Send"})))),p?o.createElement(S,{xnft:p,mintAddress:d.mint}):null,o.createElement(T,{nft:d}),d.attributes&&d.attributes.length>0?o.createElement(R,{nft:d}):null):null}function C({nft:e,style:t}){const n=(0,l.NAi)(e.creators)?e.lockScreenImageUrl??e.imageUrl:e.imageUrl;return o.createElement("div",{style:{width:"100%",minHeight:"343px",display:"flex",position:"relative",alignItems:"center",justifyContent:"center",...t||{}}},o.createElement(r.e4,{style:{maxWidth:"100%",borderRadius:"8px"},loadingStyles:{minHeight:"343px"},src:n,original:!0,removeOnError:!0}))}function S({xnft:e,mintAddress:t}){const n=(0,s.Pg)(),l=(0,a.KPt)(),{contents:i,state:r}=(0,f.$P)((0,a.fmS)(e)),c="hasValue"===r&&i||null;return c&&o.createElement("div",{style:{marginTop:"20px",position:"relative"}},o.createElement(m.Z,{style:{color:n.custom.colors.secondary,fontWeight:500,fontSize:"16px",lineHeight:"24px",marginBottom:"4px"}},"Application"),o.createElement("div",{style:{position:"relative",width:"100%",borderRadius:"12px",background:n.custom.colors.nav,display:"flex",alignItems:"center",gap:"12px",padding:"12px"}},o.createElement("img",{src:c.image,height:64,width:64}),o.createElement("div",{style:{flexGrow:1,whiteSpace:"nowrap",overflowX:"hidden"}},o.createElement(m.Z,{sx:{color:n.custom.colors.fontColor}},c.name),o.createElement(m.Z,{sx:{color:n.custom.colors.fontColor3,fontSize:"14px",lineHeight:"20px",overflowX:"hidden",textOverflow:"ellipsis"}},c.description)),o.createElement(u.Z,{disableRipple:!0,sx:{color:n.custom.colors.fontColor,background:n.custom.colors.bg2,borderRadius:"12px"},onClick:()=>{l(e+"/"+t)}},"Open")))}function T({nft:e}){const t=(0,s.Pg)();return o.createElement("div",{style:{marginTop:"20px"}},o.createElement(m.Z,{style:{color:t.custom.colors.secondary,fontWeight:500,fontSize:"16px",lineHeight:"24px",marginBottom:"4px"}},"Description"),o.createElement(m.Z,{style:{color:t.custom.colors.fontColor,fontWeight:500,fontSize:"16px"}},e.description))}function R({nft:e}){const t=(0,s.Pg)();return o.createElement("div",{style:{marginTop:24}},o.createElement(m.Z,{style:{color:t.custom.colors.secondary}},"Attributes"),o.createElement("div",{style:{marginBottom:"24px"}},o.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginTop:"4px",marginLeft:"-4px",marginRight:"-4px"}},e.attributes.map((e=>o.createElement("div",{key:e.traitType,style:{padding:"4px"}},o.createElement("div",{style:{borderRadius:"8px",backgroundColor:t.custom.colors.nav,paddingTop:"4px",paddingBottom:"4px",paddingLeft:"8px",paddingRight:"8px"}},o.createElement(m.Z,{style:{color:t.custom.colors.secondary,fontSize:"14px"}},(0,l.LFn)(e.traitType)),o.createElement(m.Z,{style:{color:t.custom.colors.fontColor,fontSize:"16px"}},e.value))))))))}function j(){const e=(0,s.Pg)(),t=(0,a.G5b)(),{username:n}=(0,a.aFb)(),i=(0,f.Zl)((0,a.B0o)(n)),[r,c]=(0,o.useState)(null),[m,u]=(0,o.useState)(!1),g=(0,a.Dtc)(),[h,v]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{!m&&h&&await t.request({method:l.VB_,params:[]})})()}),[m,h,t]);const b=g.props.nftId,E=g.props.publicKey,k=g.props.connectionUrl,{contents:w,state:C}=(0,f.$P)((0,a.E1m)({publicKey:E,connectionUrl:k,nftId:b})),S="hasValue"===C&&w||null,T=S&&S.contractAddress,R=(0,a.ph9)(),j=(0,a.epv)(),N=T?R:j,F=()=>{c(null)};return o.createElement(o.Fragment,null,o.createElement(p.Z,{disableRipple:!0,style:{padding:0},onClick:e=>{c(e.currentTarget)}},o.createElement(d.Z,{style:{color:e.custom.colors.secondary}})),o.createElement(y.Z.Root,{open:Boolean(r),anchorEl:r,onClose:F,anchorOrigin:{vertical:"bottom",horizontal:"right"}},o.createElement(y.Z.Group,null,o.createElement(y.Z.Item,{onClick:()=>{const e=(0,l.J1z)(N,S,k);window.open(e,"_blank")}},"View on Explorer"),o.createElement(y.Z.Item,{onClick:async()=>{if(S){c(null);const e=`${S.blockchain}/${"solana"===S.blockchain?S.mint:S.id}`;await fetch(l.FvS+"/users/avatar",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({avatar:e})}),await fetch(`${l.bqz}/${n}?bust_cache=1`),i({id:e,url:S.imageUrl})}}},"Set as PFP")),o.createElement(y.Z.Group,null,o.createElement(y.Z.Item,{sx:{color:`${e.custom.colors.negative} !important`},onClick:()=>{F(),u(!0)}},"Burn Token"))),o.createElement(x.x,{openDrawer:m,setOpenDrawer:u},o.createElement(I,{nft:S,onComplete:()=>v(!0)})))}function I({nft:e,onComplete:t}){const[n,i]=(0,o.useState)("confirm"),[r,s]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),m=(0,a.VvY)(),u=l.$OA.SOLANA,p={logo:e?e.imageUrl:"",mint:e?e.mint:"",decimals:0},f=async()=>{try{const n=new g.PublicKey(e.publicKey),o=await m.connection.getParsedAccountInfo(n);if(null===o.value)throw new Error("NFT account not found");const r=o.value.owner,a=o.value.data;if(null===a.parsed)throw new Error("NFT account not a token account");const c=parseInt(a.parsed.info.tokenAmount.amount);i("sending");const u=await l.YPm.burnAndCloseNft(m,{solDestination:m.walletPublicKey,mint:new g.PublicKey(e.mint.toString()),programId:new g.PublicKey(r.toString()),source:n,amount:c});s(u);try{await(0,l.gGt)(m.connection,u,"finalized"===m.commitment?"finalized":"confirmed"),i("confirmed"),t&&t()}catch(e){E.error("unable to confirm NFT burn",e),d(e.toString()),i("error")}}catch(e){console.log("error burning NFT",e),d(e),i("error")}};return"confirm"===n?o.createElement(N,{onConfirm:f}):"sending"===n?o.createElement(v.wK,{blockchain:l.$OA.SOLANA,isComplete:!1,amount:h.O$.from(1),token:p,signature:r,titleOverride:"Burning"}):"confirmed"===n?o.createElement(v.wK,{blockchain:l.$OA.SOLANA,isComplete:!0,amount:h.O$.from(1),token:p,signature:r,titleOverride:"Burnt"}):o.createElement(v.jj,{blockchain:u,signature:r,error:c.toString(),onRetry:()=>f()})}function N({onConfirm:e}){const t=(0,s.Pg)();return o.createElement("div",{style:{height:"400px",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"16px"}},o.createElement("div",{style:{flex:1}},o.createElement(c.Z,{style:{color:t.custom.colors.negative,display:"block",marginLeft:"auto",marginRight:"auto",fontSize:"60px",marginTop:"24px",marginBottom:"24px"}}),o.createElement(m.Z,{style:{backgroundColor:t.custom.colors.approveTransactionTableBackground,border:t.custom.colors.borderFull,padding:"16px",color:t.custom.colors.fontColor,fontSize:"20px",textAlign:"center",borderRadius:"8px"}},"Are you sure you want to burn this token? This action can't be undone.")),o.createElement("div",null,o.createElement(r.zJ,{label:"Confirm",onClick:()=>e()})))}function F(e){return`${e}:lock-screen-nft:1`}},48502:(e,t,n)=>{n.d(t,{N:()=>f});var o=n(2784),l=n(20604),i=n(36375),r=n(3210),a=n(60041),s=n(10528),c=n(19619),d=n(68269),m=n(8199),u=n(23866),p=n(21373),g=n(72036),h=n(84708);function f({children:e,nft:t}){const[n,l]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,e((()=>{l(!0)})),o.createElement(u.zw,{openDrawer:n,setOpenDrawer:l},o.createElement("div",{style:{height:"100%"}},o.createElement(p.I6,{initialRoute:{name:"select-address"},options:()=>({title:t.name?`${t.name} / Send`:"Send"}),navButtonLeft:o.createElement(u.PZ,{onClick:()=>l(!1)})},o.createElement(p.y4,{name:"send",component:e=>o.createElement(y,{...e,nft:t})}),o.createElement(p.y4,{name:"select-address",component:()=>o.createElement(x,{nft:t})})))))}function x({nft:e}){const{push:t}=(0,p.HJ)();return o.createElement("div",null,o.createElement(g._A,{onSelect:e=>{t("send",{to:e})},blockchain:e.blockchain,name:e.name}))}function y({nft:e,to:t}){const n=(0,r.G5b)(),{close:p}=(0,u.M$)(),{provider:g}=(0,r.EFU)(),f=(0,h.yK)(),x=(0,r.UL)(),y=t.address,[b,E]=(0,o.useState)(!1),[k,w]=(0,o.useState)(!1),{isValidAddress:C}=(0,r.VCh)(e.blockchain,y,g.connection,x.provider),S=(0,a.Pg)(),T=d.q[e.blockchain].SendNftConfirmationCard;return(0,o.useEffect)((()=>{(async()=>{!b&&k&&await n.request({method:l.VB_,params:[]})})()}),[b,k,n]),o.createElement(o.Fragment,null,o.createElement("div",{style:{paddingLeft:"16px",paddingRight:"16px",height:"100%"}},o.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"}},o.createElement("div",null,o.createElement("div",null,o.createElement("div",{className:f.horizontalCenter,style:{marginBottom:6,paddingTop:20}},o.createElement("div",{className:f.topImageOuter},o.createElement(i.ug,{size:80,className:f.topImage,src:t?.image||`https://avatars.backpack.workers.dev/${t?.address}`,style:{width:80,height:80}}))),o.createElement("div",{className:f.horizontalCenter},t.walletName||t.username?o.createElement("div",{style:{color:S.custom.colors.fontColor,fontSize:16,fontWeight:500}},t.walletName?t.walletName:`@${t.username}`):null),o.createElement("div",{className:f.horizontalCenter,style:{marginTop:4}},o.createElement(m.E,{publicKey:t?.address}))),o.createElement("div",{className:f.horizontalCenter,style:{marginTop:35}},o.createElement(v,{nft:e,style:{maxHeight:"30vh",maxWidth:200,minHeight:""}}))),o.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"18px",paddingBottom:"16px"}},o.createElement(i.tf,{style:{marginRight:"8px"},onClick:p,label:"Cancel"}),o.createElement(i.KM,{disabled:!C,onClick:()=>E(!0),label:"Next"})))),o.createElement(c.x,{openDrawer:b,setOpenDrawer:E},o.createElement(T,{nft:e,destinationUser:t&&t.uuid&&t.username&&t.image?t:void 0,destinationAddress:y,amount:s.O$.from(1),onComplete:()=>w(!0)})))}function v({nft:e,style:t}){const n=(0,l.NAi)(e.creators)?e.lockScreenImageUrl:e.imageUrl;return o.createElement("div",{style:{width:"100%",minHeight:"343px",display:"flex",position:"relative",alignItems:"center",...t||{}}},o.createElement(i.e4,{style:{width:"100%",borderRadius:"8px"},loadingStyles:{minHeight:"343px"},src:n,removeOnError:!0}))}},43298:(e,t,n)=>{n.d(t,{v:()=>y});var o=n(2784),l=n(20604),i=n(36375),r=n(3210),a=n(60041),s=n(83422),c=n(80078),d=n(11259),m=n(14117),u=n(82056),p=n(49494),g=n(19161),h=n(68269),f=n(41755),x=n(2784);function y({blockchain:e,mnemonic:t,transport:n,onNext:y,onError:v,recovery:b,allowMultiple:E=!0}){const k=(0,r.G5b)(),w=(0,a.Pg)(),C=(0,r.Jao)().filter((t=>t.blockchain===e)).map((e=>e.publicKey)),[S,T]=(0,o.useState)({}),[R,j]=(0,o.useState)([]),[I,N]=(0,o.useState)([]),[F,P]=(0,o.useState)(!1),[L,A]=(0,o.useState)([]),[B,Z]=(0,o.useState)([]),O=h.q[e].DerivationPathOptions,[$,D]=(0,o.useState)(O[0].label),[z,M]=(0,o.useState)([]),_=[...L,...B];(0,o.useEffect)((()=>{(async()=>{try{const t=(await k.request({method:l.G00,params:[]}))[e];A(Object.values(t).flat().map((e=>e.publicKey)))}catch(e){}})()}),[k,e]),(0,o.useEffect)((()=>{(async()=>{if(0!==R.length)try{const t=await k.request({method:l.xX3,params:[R.map((t=>({publicKey:t.publicKey,blockchain:e})))]});Z(t.map((e=>e.public_key)))}catch{}})()}),[k,e,R]),(0,o.useEffect)((()=>{if(!z)return;let o;if(N([]),t)o=e=>K(t,e);else{if(!n)throw new Error("no public key loader found");o=e=>W(n,e)}o(z).then((async t=>{j(z.map(((n,o)=>({blockchain:e,publicKey:t[o],derivationPath:n}))));const n=await U(t);T(Object.fromEntries(n.sort(((e,t)=>t.balance.lt(e.balance)?-1:t.balance.eq(e.balance)?0:1)).map((e=>[e.publicKey,e.balance]))))})).catch((e=>{if(console.error(e),!v)throw e;v(e)}))}),[t,n,z]),(0,o.useEffect)((()=>{if(T({}),j([]),null!==$){const e=O.find((e=>e.label===$));if(!e)throw new Error("Invalid derivation path label");M([...Array(l.THO).keys()].map((t=>e.path(t))))}}),[$]);const U=h.q[e].LoadBalances,K=async(t,n)=>await k.request({method:l.o_r,params:[e,t,n]}),W=async(t,n)=>{const o=[];P(!0);const l=h.q[e].LedgerApp(t);for(const t of n)o.push(await h.q[e].PublicKeyFromPath(l,t));return P(!1),o},q=e=>void 0===b?_.includes(e):e!==b||!C.includes(e),H=(t,n)=>()=>{const o=I.findIndex((e=>e.publicKey===t));let l=[...I];if(-1===o){const o={blockchain:e,derivationPath:n,publicKey:t};E?l.push(o):l=[o]}else l.splice(o,1);N(l)},V=h.q[e].GasTokenName,G=h.q[e].GasTokenDecimals;return x.createElement(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},x.createElement(s.Z,null,x.createElement(s.Z,{sx:{marginLeft:"24px",marginRight:"24px",marginTop:"24px"}},x.createElement(g.h4,{text:"Import wallet"+(E?"s":"")}),x.createElement(g.MR,null,"Select which wallet",E?"s":""," you'd like to import.")),x.createElement("div",{style:{margin:"16px"}},x.createElement(i.oi,{placeholder:"Derivation Path",value:$,setValue:e=>D(e.target.value),select:!0,disabled:F},O.map((e=>x.createElement(c.Z,{value:e.label,key:e.label},e.label))))),Object.keys(S).length>0?x.createElement(d.Z,{sx:{color:w.custom.colors.fontColor,background:w.custom.colors.background,borderRadius:"12px",marginLeft:"16px",marginRight:"16px",paddingTop:"8px",paddingBottom:"8px",height:"225px"}},x.createElement(f.L,null,[...R].sort(((e,t)=>S[e.publicKey]<S[t.publicKey]?1:S[e.publicKey]>S[t.publicKey]?-1:0)).map((({publicKey:e,derivationPath:t})=>x.createElement(m.Z,{disableRipple:!0,key:e.toString(),onClick:H(e,t),sx:{display:"flex",paddinLeft:"16px",paddingRight:"16px",paddingTop:"5px",paddingBottom:"5px"},disabled:q(e.toString())},x.createElement(s.Z,{style:{display:"flex",width:"100%"}},x.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},x.createElement(g.XZ,{edge:"start",checked:I.some((e=>e.derivationPath===t))||L.includes(e.toString()),tabIndex:-1,disabled:q(e.toString()),disableRipple:!0,style:{marginLeft:0}})),x.createElement(u.Z,{id:e.toString(),primary:(0,g.R1)(e),sx:{marginLeft:"8px",fontSize:"14px",lineHeight:"32px",fontWeight:500}}),x.createElement(u.Z,{sx:{color:w.custom.colors.secondary,textAlign:"right"},primary:`${S[e]?(+p.formatUnits(S[e],G)).toFixed(4):"-"} ${V}`}))))))):x.createElement(i.gb,null)),x.createElement(s.Z,{sx:{mt:"12px",ml:"16px",mr:"16px",mb:"16px"}},x.createElement(i.KM,{label:"Import Wallet"+(E?"s":""),onClick:()=>y(I),disabled:0===I.length})))}},12908:(e,t,n)=>{n.d(t,{eL:()=>b,mB:()=>E,qi:()=>k});var o=n(2784),l=n(20604),i=n(36375),r=n(3210),a=n(60041),s=n(80162),c=n(83422),d=n(63249),m=n(79312),u=n(33853),p=n(57531),g=n(11188),h=n(51880),f=n(19161),x=n(79194),y=n(2784);const v=(0,h.Z)((e=>({mnemonicInputRoot:{border:`${e.custom.colors.borderFull}`,background:e.custom.colors.textBackground,color:e.custom.colors.secondary,borderRadius:"8px",marginTop:"4px","& .MuiOutlinedInput-root":{borderRadius:"8px",height:"40px",paddingLeft:"8px","& fieldset":{border:"none"}},"& .MuiInputBase-input":{color:e.custom.colors.fontColor,borderRadius:"8px",fontSize:"14px",fontWeight:700,paddingRight:"8px"},"& .MuiInputAdornment-root":{color:e.custom.colors.secondary,fontWeight:500,minWidth:"11px",fontSize:"14px"},"&:hover":{backgroundColor:e.custom.colors.primary}},link:{cursor:"pointer",color:e.custom.colors.secondary,textDecoration:"none"},errorMsg:{color:"red",marginBottom:"12px",textAlign:"center"}})));function b({onNext:e,readOnly:t=!1,buttonLabel:n,customError:u,subtitle:p}){const g=(0,a.Pg)(),h=v(),x=(0,r.G5b)(),[b,w]=(0,o.useState)([...Array(12).fill("")]),[C,S]=(0,o.useState)(),[T,R]=(0,o.useState)(!1),[j,I]=(0,o.useState)(!1),N=b.map((e=>e.trim())).join(" "),F=void 0===b.find((e=>e.length<3)),P=(!t||T)&&F;(0,o.useEffect)((()=>{u&&S(u)}),[u]),(0,o.useEffect)((()=>{const e=e=>{const t=e.clipboardData.getData("text").split(" ");12!==t.length&&24!==t.length||(e.preventDefault(),w(t))};return t?L():window.addEventListener("paste",e),()=>{t||window.removeEventListener("paste",e)}}),[]);const L=async()=>{const e=await x.request({method:l.Vio,params:[12===b.length?128:256]});w(e.split(" "))};return y.createElement(c.Z,{sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",padding:"0 16px 0 16px"}},y.createElement(c.Z,null,y.createElement(c.Z,{style:{margin:8}},y.createElement(f.h4,{text:"Secret recovery phrase",style:{fontWeight:500}}),y.createElement(f.MR,null,p||(t?"This is the only way to recover your account if you lose your device. Write it down and store it in a safe place.":"Enter your 12 or 24-word secret recovery mnemonic to add an existing wallet."))),y.createElement(E,{mnemonicWords:b,onChange:t?void 0:w}),t?null:y.createElement(c.Z,{sx:{textAlign:"center",margin:"32px 0"}},y.createElement(c.Z,{sx:{flex:1}},y.createElement(d.Z,{className:h.link,onClick:()=>w([...Array(12===b.length?24:12).fill("")])},"Use a ",12===b.length?"24":"12","-word recovery mnemonic")))),t?y.createElement(y.Fragment,null,y.createElement(k,{text:N,icon:y.createElement(s.Z,{style:{color:g.custom.colors.fontColor}}),disabled:!F}),y.createElement(c.Z,{sx:{margin:"6px"}},y.createElement(f.bx,{checked:T,setChecked:R,label:"I saved my secret recovery phrase"}))):null,y.createElement(c.Z,null,C?y.createElement(m.Z,{className:h.errorMsg},C):null,y.createElement(i.KM,{label:n,onClick:async()=>{I(!0),await(async()=>{await x.request({method:l.FBp,params:[N]})?await e(N):S("Invalid secret recovery phrase")})(),I(!1)},disabled:!P||j,buttonLabelStyle:{fontWeight:600},style:{marginBottom:16}})))}function E({mnemonicWords:e,onChange:t,rootClass:n}){const o=(0,a.Pg)(),l=v();return n||(n=l.mnemonicInputRoot),y.createElement(u.ZP,{container:!0,rowSpacing:0,columnSpacing:1.00005,sx:{marginTop:"24px"}},Array.from(Array(e.length).keys()).map((l=>y.createElement(u.ZP,{item:!0,xs:4,key:l},y.createElement(p.Z,{className:n,variant:"outlined",margin:"dense",size:"small",required:!0,fullWidth:!0,InputLabelProps:{shrink:!1,style:{backgroundColor:o.custom.colors.nav}},InputProps:{startAdornment:y.createElement(g.Z,{position:"start"},l+1),readOnly:void 0===t},value:e[l],onChange:n=>{if(t){const o=[...e];o[l]=n.target.value,t(o)}}})))))}function k({text:e,icon:t,disabled:n=!1,style:l}){const[r,a]=(0,o.useState)(!1);return y.createElement(x.D,{tooltipOpen:r,setToolTipOpen:a},y.createElement(c.Z,null,y.createElement(i.tf,{onClick:async()=>{a(!0),setTimeout((()=>a(!1)),1e3),await navigator.clipboard.writeText(e)},label:"Copy",disabled:n,endIcon:t||null,buttonLabelStyle:{fontWeight:600},style:l})))}},21916:(e,t,n)=>{n.d(t,{p:()=>d});var o=n(2784),l=n(20604),i=n(36375),r=n(3210),a=n(83422),s=n(19161),c=n(2784);const d=({blockchain:e,onNext:t,serverPublicKeys:n,displayNameInput:d=!1,onboarding:m})=>{const[u,p]=(0,o.useState)(""),[g,h]=(0,o.useState)(""),[f,x]=(0,o.useState)(!1),[y,v]=(0,o.useState)(null),{handleSavePrivateKey:b}=(0,r.m7y)({onboarding:m});(0,o.useEffect)((()=>{v(null)}),[u,g,v]);const E=async o=>{o.preventDefault();const l=await b({name:u,privateKey:g,blockchain:e,serverPublicKeys:n,setLoading:x,setError:v});l&&t(l)};return c.createElement("form",{noValidate:!0,onSubmit:E,style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},c.createElement(a.Z,{sx:{margin:"24px 0"}},c.createElement(a.Z,{sx:{margin:"0 24px"}},c.createElement(s.h4,{text:"Enter private key"}),c.createElement(s.MR,{style:{marginBottom:"32px"}},n&&1===n.length?c.createElement(c.Fragment,null,"Enter the private key for"," ",(0,l.R1Z)(n[0].publicKey)," to recover the wallet."):c.createElement(c.Fragment,null,"Enter your private key. It will be encrypted and stored on your device."))),c.createElement(a.Z,{sx:{margin:"0 16px"}},d?c.createElement(a.Z,{sx:{marginBottom:"4px"}},c.createElement(i.oi,{autoFocus:!0,placeholder:"Name",value:u,setValue:e=>p(e.target.value)})):null,c.createElement(i.oi,{placeholder:"Enter private key",value:g,setValue:e=>{h(e.target.value.trim())},onKeyDown:async e=>{"Enter"===e.key&&await E(e)},rows:4,error:!!y,errorMessage:y||""}))),c.createElement(a.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},c.createElement(i.KM,{type:"submit",label:"Import",disabled:0===g.length||f})))}},19619:(e,t,n)=>{n.d(t,{P:()=>d,x:()=>c});var o=n(60041),l=n(36269),i=n(66198),r=n(23866),a=n(2784);const s=(0,o.W2)((e=>({paperAnchorBottom:{boxShadow:"none"},closeConfirmButton:{width:"38px",height:"38px",marginLeft:"auto",marginRight:"auto",border:"none !important",background:e.custom.colors.nav},approveTransactionCloseContainer:{backgroundColor:e.custom.colors.approveTransactionCloseBackground,width:"44px",height:"44px",zIndex:2,display:"flex",justifyContent:"center",flexDirection:"column",borderRadius:"22px"},closeIcon:{color:e.custom.colors.icon}}))),c=({openDrawer:e,setOpenDrawer:t,children:n})=>{const l=s(),i=(0,o.Pg)();return a.createElement(r.Gx,{openDrawer:e,setOpenDrawer:t,backdropProps:{style:{opacity:.8,background:"#18181b"}},paperAnchorBottom:l.paperAnchorBottom},a.createElement("div",{onClick:()=>t(!1),style:{height:"50px",zIndex:1,backgroundColor:"transparent"}},a.createElement(d,{onClick:()=>t(!1),style:{marginTop:"28px",marginLeft:"24px",zIndex:1}})),a.createElement("div",{style:{borderTopLeftRadius:"12px",borderTopRightRadius:"12px",height:"100%",background:i.custom.colors.background}},a.createElement("div",{style:{height:"100%",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",background:i.custom.colors.drawerGradient}},n)))};function d({onClick:e,style:t}){const n=s();return a.createElement("div",{className:n.approveTransactionCloseContainer,style:t},a.createElement(i.Z,{disableRipple:!0,className:`${n.closeConfirmButton}`,onClick:e},a.createElement(l.Z,{className:n.closeIcon})))}},76370:(e,t,n)=>{n.d(t,{$x:()=>r,af:()=>i,ez:()=>l});var o=n(2784);function l(){return o.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:"url(#clip0_12985_2265)"},o.createElement("path",{d:"M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z",fill:"#627EEA"}),o.createElement("path",{d:"M20.6226 5V16.0875L29.9938 20.275L20.6226 5Z",fill:"white",fillOpacity:"0.602"}),o.createElement("path",{d:"M20.6225 5L11.25 20.275L20.6225 16.0875V5Z",fill:"white"}),o.createElement("path",{d:"M20.6226 27.46V34.9938L30.0001 22.02L20.6226 27.46Z",fill:"white",fillOpacity:"0.602"}),o.createElement("path",{d:"M20.6225 34.9938V27.4588L11.25 22.02L20.6225 34.9938Z",fill:"white"}),o.createElement("path",{d:"M20.6226 25.7163L29.9938 20.2751L20.6226 16.0901V25.7163Z",fill:"white",fillOpacity:"0.2"}),o.createElement("path",{d:"M11.25 20.2751L20.6225 25.7163V16.0901L11.25 20.2751Z",fill:"white",fillOpacity:"0.602"})),o.createElement("defs",null,o.createElement("clipPath",{id:"clip0_12985_2265"},o.createElement("rect",{width:"40",height:"40",fill:"white"}))))}function i(){return o.createElement("div",null,"ECLIPSE")}function r(){return o.createElement("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:"url(#clip0_12985_2881)"},o.createElement("path",{d:"M20.5 40C31.5457 40 40.5 31.0457 40.5 20C40.5 8.95431 31.5457 0 20.5 0C9.45431 0 0.5 8.95431 0.5 20C0.5 31.0457 9.45431 40 20.5 40Z",fill:"black"}),o.createElement("path",{d:"M40 20C40 30.7696 31.2696 39.5 20.5 39.5C9.73045 39.5 1 30.7696 1 20C1 9.23045 9.73045 0.5 20.5 0.5C31.2696 0.5 40 9.23045 40 20Z",stroke:"white",strokeOpacity:"0.15"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8419 25.513C12.9172 25.4302 13.0089 25.3641 13.1112 25.3188C13.2134 25.2735 13.3241 25.2501 13.4359 25.25L31.7639 25.265C31.842 25.2652 31.9183 25.288 31.9836 25.3307C32.049 25.3734 32.1005 25.4342 32.1319 25.5056C32.1634 25.577 32.1734 25.6561 32.1608 25.7331C32.1482 25.8101 32.1135 25.8818 32.0609 25.9395L28.1579 30.237C28.0826 30.3198 27.9908 30.386 27.8885 30.4313C27.7861 30.4766 27.6754 30.5 27.5634 30.5L9.23592 30.485C9.15787 30.4848 9.08154 30.462 9.01621 30.4193C8.95088 30.3766 8.89936 30.3158 8.86791 30.2444C8.83646 30.173 8.82642 30.0939 8.83903 30.0169C8.85163 29.9399 8.88634 29.8682 8.93892 29.8105L12.8419 25.513ZM32.0609 21.9355C32.1135 21.9932 32.1482 22.0649 32.1608 22.1419C32.1734 22.2189 32.1634 22.298 32.1319 22.3694C32.1005 22.4408 32.049 22.5016 31.9836 22.5443C31.9183 22.587 31.842 22.6098 31.7639 22.61L13.4364 22.625C13.3245 22.625 13.2138 22.6016 13.1114 22.5563C13.009 22.511 12.9172 22.4448 12.8419 22.362L8.93892 18.062C8.88634 18.0043 8.85163 17.9326 8.83903 17.8556C8.82642 17.7786 8.83646 17.6995 8.86791 17.6281C8.89936 17.5567 8.95088 17.4959 9.01621 17.4532C9.08154 17.4105 9.15787 17.3877 9.23592 17.3875L27.5639 17.3725C27.6758 17.3726 27.7864 17.396 27.8887 17.4413C27.991 17.4866 28.0827 17.5527 28.1579 17.6355L32.0609 21.9355ZM12.8419 9.763C12.9172 9.68023 13.0089 9.61408 13.1112 9.56879C13.2134 9.52351 13.3241 9.50007 13.4359 9.5L31.7639 9.515C31.842 9.51516 31.9183 9.53798 31.9836 9.58069C32.049 9.6234 32.1005 9.68416 32.1319 9.75559C32.1634 9.82703 32.1734 9.90606 32.1608 9.98308C32.1482 10.0601 32.1135 10.1318 32.0609 10.1895L28.1579 14.487C28.0826 14.5698 27.9908 14.636 27.8885 14.6813C27.7861 14.7266 27.6754 14.75 27.5634 14.75L9.23592 14.735C9.15787 14.7348 9.08154 14.712 9.01621 14.6693C8.95088 14.6266 8.89936 14.5658 8.86791 14.4944C8.83646 14.423 8.82642 14.3439 8.83903 14.2669C8.85163 14.1899 8.88634 14.1182 8.93892 14.0605L12.8419 9.763Z",fill:"url(#paint0_linear_12985_2881)"})),o.createElement("defs",null,o.createElement("linearGradient",{id:"paint0_linear_12985_2881",x1:"9.54192",y1:"30.958",x2:"31.4579",y2:"9.04199",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#9945FF"}),o.createElement("stop",{offset:"0.2",stopColor:"#7962E7"}),o.createElement("stop",{offset:"1",stopColor:"#00D18C"})),o.createElement("clipPath",{id:"clip0_12985_2881"},o.createElement("rect",{width:"40",height:"40",fill:"white",transform:"translate(0.5)"}))))}},83311:(e,t,n)=>{n.d(t,{f:()=>m});var o=n(60041),l=n(52529),i=n(96027),r=n(49565),a=n(83422),s=n(79312),c=n(19161),d=n(2784);function m({icon:e,checked:t,text:n,textAdornment:m,subtext:u,onClick:p,disabled:g=!1}){const h=(0,o.Pg)();return d.createElement(l.Z,{disableRipple:!0,onClick:p,style:{padding:0,textTransform:"none",border:`${h.custom.colors.borderFull}`,borderRadius:"12px",background:h.custom.colors.nav,width:"100%",opacity:g?.5:1},disabled:g},d.createElement(i.Z,{sx:{p:1,color:h.custom.colors.fontColor,cursor:"pointer",padding:"16px",boxShadow:"none",backgroundColor:"transparent",width:"100%"}},d.createElement(r.Z,{style:{padding:0}},e||void 0!==t?d.createElement(a.Z,{sx:{mb:1,display:"flex"}},e,void 0!==t?d.createElement(c.XZ,{checked:t,setChecked:p,style:{position:"absolute",right:"18px",top:e?"18px":"auto"}}):null):null,d.createElement(a.Z,{style:{fontWeight:500,fontSize:"16px",lineHeight:"24px",textAlign:"left"}},n,m,u?d.createElement(s.Z,{style:{fontSize:"14px",color:h.custom.colors.fontColor3}},u):null))))}},23866:(e,t,n)=>{n.d(t,{Gx:()=>m,M$:()=>h,PZ:()=>u,zw:()=>d});var o=n(2784),l=n(60041),i=n(36269),r=n(87409),a=n(66198),s=n(22529);const c=(0,l.W2)((e=>({drawerRoot:{top:`${s.fp}px !important`,zIndex:"2 !important",flex:1},drawerPaper:{height:"100%",background:e.custom.colors.backgroundBackdrop},miniDrawerRoot:{background:"transparent",zIndex:"1301 !important",flex:1,"& .MuiBackdrop-root":{opacity:.8,background:`${e.custom.colors.miniDrawerBackdrop} !important`}},miniDrawerPaper:{backgroundColor:"transparent",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},rightButtonIcon:{color:e.custom.colors.icon},rightButtonLabel:{display:"flex",justifyContent:"start"}})));function d(e){const t=c(),{backdropStyles:n,children:l,openDrawer:i,paperStyles:a,setOpenDrawer:s}=e;return o.createElement(g,{setOpenDrawer:s},o.createElement(r.ZP,{anchor:"bottom",open:i,onClose:()=>s(!1),classes:{root:t.drawerRoot,paper:t.drawerPaper},PaperProps:{style:{...a}},BackdropProps:{style:{...n}},id:"drawer"},l))}function m(e){const t=c(),{children:n,openDrawer:l,setOpenDrawer:i,paperAnchorBottom:a,backdropProps:s,modalProps:d,paperProps:m,onClose:u}=e;return o.createElement(g,{setOpenDrawer:i},o.createElement(r.ZP,{anchor:"bottom",open:l,onClose:()=>u?u():i(!1),classes:{root:t.miniDrawerRoot,paper:t.miniDrawerPaper,paperAnchorBottom:a},BackdropProps:{style:{background:"transparent"},...s},ModalProps:{...d},PaperProps:{...m}},n))}function u({onClick:e,buttonStyle:t}){const n=c();return o.createElement("div",{style:{position:"relative",width:`${s.Jd}px`,display:"flex",justifyContent:"center",flexDirection:"column"}},o.createElement(a.Z,{classes:{root:n.rightButtonLabel},disableRipple:!0,style:{padding:0,position:"absolute",...t},onClick:e,size:"large"},o.createElement(i.Z,{className:n.rightButtonIcon})))}const p=o.createContext(null);function g({children:e,setOpenDrawer:t}){return o.createElement(p.Provider,{value:{close:()=>t(!1)}},e)}function h(){const e=(0,o.useContext)(p);if(null===e)throw new Error("Context not available");return e}},22529:(e,t,n)=>{n.d(t,{I4:()=>y,Jd:()=>p,V3:()=>h,fp:()=>u});var o=n(2784),l=n(36375),i=n(60041),r=n(20355),a=n(70245),s=n(38821),c=n(66198),d=n(79312),m=n(41755);const u=56,p=38,g=(0,i.W2)((e=>({menuButtonContainer:{width:`${p}px`,display:"flex",justifyContent:"center",flexDirection:"column"},overviewLabel:{fontSize:"18px",fontWeight:500,color:e.custom.colors.fontColor,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"center",lineHeight:"24px"},overviewLabelPrefix:{color:e.custom.colors.secondary},backButton:{padding:0,position:"absolute",left:0,"&:hover":{background:"transparent !important"}}})));function h({title:e,navButtonLeft:t,navButtonRight:n,navButtonCenter:l,children:i,navbarStyle:r={},navContentStyle:a={},notchViewComponent:s,noScrollbars:c,image:d,onClick:m,isVerified:u}){return o.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},o.createElement(f,{notchViewComponent:s,title:l||e||"",image:d,isVerified:u,onClick:m,navButtonLeft:t,navButtonRight:n,style:r}),o.createElement(v,{style:a,noScrollbars:c,renderComponent:i}))}function f({title:e,navButtonLeft:t,navButtonRight:n,style:l={},notchViewComponent:i,image:r,onClick:a,isVerified:s}){return o.createElement("div",{style:{display:"flex",height:`${u}px`,position:"relative",justifyContent:"space-between",padding:"10px 16px",...l}},o.createElement("div",{style:{position:"relative",width:"100%",display:"flex"}},o.createElement(x,{button:t}),o.createElement(b,{image:r,onClick:a,isVerified:s,title:e,notchViewComponent:i}),o.createElement(x,{button:n,align:"right"})))}function x({button:e,align:t="left"}){const n={[t]:0};return o.createElement("div",{style:{position:"absolute",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column",...n}},e||o.createElement(k,null))}function y({onClick:e}){const t=g(),n=(0,i.Pg)();return o.createElement("div",{style:{width:`${p}px`,display:"flex",justifyContent:"center",flexDirection:"column",position:"relative"}},o.createElement(c.Z,{disableRipple:!0,onClick:e,className:t.backButton,size:"large","data-testid":"back-button"},o.createElement(r.Z,{style:{color:n.custom.colors.icon}})))}function v({renderComponent:e,style:t,noScrollbars:n}){const i={flex:1,...t};return o.createElement("div",{className:"nav-content-style",style:i},n?o.createElement(o.Suspense,{fallback:o.createElement(l.gb,null)},e):o.createElement(m.L,null,o.createElement(o.Suspense,{fallback:o.createElement(l.gb,null)},e)))}function b({title:e,notchViewComponent:t,image:n,onClick:r,isVerified:c}){const[d,m]=(0,o.useState)(!1),u=t?o.cloneElement(t,{setOpenDrawer:m}):null,g=(0,i.Pg)(),h=()=>{m((e=>!e))};return o.createElement(o.Suspense,{fallback:o.createElement("div",null)},o.createElement("div",{style:{userSelect:"none",visibility:e?void 0:"hidden",overflow:"hidden",maxWidth:`calc(100% - ${2*p}px)`,margin:"0 auto",display:"flex",alignItems:"center",cursor:r?"pointer":"default"},onClick:r||(()=>{})},n?o.createElement("button",{style:{background:"transparent",border:"none",padding:0,margin:0,cursor:"pointer",width:25,height:25,marginRight:5},onClick:h},o.createElement(l.ug,{style:{width:25,height:25,borderRadius:"50%"},src:n})):null,o.createElement("button",{style:{background:"transparent",border:"none",padding:0,margin:0,cursor:t?"pointer":"default"},onClick:h},o.createElement(E,{title:e})),t?o.createElement(a.Z,{onClick:h,style:{cursor:"pointer",color:g.custom.colors.fontColor}}):null,d&&u?o.createElement(o.Fragment,null,u):null,c?o.createElement(s.Z,{style:{fontSize:19,marginLeft:3,color:g.custom.colors.verified}}):null))}function E({title:e}){const t=g();if("string"!=typeof e)return e;const n=e.split("/"),l=e.split("(");return 2===n.length?o.createElement(d.Z,{className:t.overviewLabel,title:e},o.createElement("span",{className:t.overviewLabelPrefix},n[0]," /"),n[1]):2===l.length?o.createElement(d.Z,{className:t.overviewLabel,title:e},l[0],o.createElement("span",{className:t.overviewLabelPrefix},"(",l[1])):o.createElement(d.Z,{className:t.overviewLabel,title:e},e)}function k(){const e=g();return o.createElement("div",{className:e.menuButtonContainer})}},21373:(e,t,n)=>{n.d(t,{FE:()=>i.FE,HJ:()=>m,I6:()=>a,y4:()=>u});var o=n(2784),l=n(85380),i=n(33757),r=n(22529);function a({initialRoute:e,children:t,options:n,navButtonRight:l,navButtonLeft:i}){const r=t&&void 0!==t.length,a=void 0===t?[]:r?t:[t];return o.createElement(c,{initialRoute:e,navButtonRight:l,navButtonLeft:i},o.createElement(s,{navScreens:a,options:n}))}function s({navScreens:e,options:t}){let{isRoot:n,activeRoute:a,pop:s,navButtonRight:c,navButtonLeft:d,navStyle:u,title:p}=m();const g=d&&n?d:n?null:o.createElement(r.I4,{onClick:()=>s()}),h=e.find((e=>e.props.name===a.name));let{title:f}=t({route:a});return p||(p=f),o.createElement(l.M,{initial:!1},o.createElement(i.FE,{id:a.name,navAction:a.navAction},o.createElement(r.V3,{title:p,navButtonLeft:g,navButtonRight:c,navbarStyle:u},h.props.component({...a.props??{}}))))}function c({initialRoute:e,navButtonRight:t,navButtonLeft:n,children:l}){const[i,r]=(0,o.useState)([{navAction:"push",...e}]),[a,s]=(0,o.useState)(e.title),[c,m]=(0,o.useState)(t),[u,p]=(0,o.useState)(n),[g,h]=(0,o.useState)({});return o.createElement(d.Provider,{value:{activeRoute:i[i.length-1],push:(e,t)=>{r([...i,{name:e,props:t,navAction:"push"}])},pop:e=>{let t=[...i];t=t.slice(0,t.length-(e??1)),t[t.length-1].navAction="pop",r(t)},isRoot:1===i.length,title:a,navButtonRight:c,navButtonLeft:u,navStyle:g,setOptions:({headerLeft:e,headerTitle:t,headerRight:n,style:o})=>{void 0!==e&&p(e),void 0!==t&&s(t),void 0!==n&&m(n),void 0!==o&&h(o)}}},l)}const d=o.createContext(null);function m(){const e=(0,o.useContext)(d);if(null===e)throw new Error("Context not available");return e}function u(e){return null}},52679:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(60041),l=n(52529),i=n(74352),r=n(2784);const a=(0,o.W2)((e=>({popOverRoot:{"& .css-1y04bq4":{backgroundColor:e.custom.colors.background}}}))),s={Group:({children:e})=>{const t=(0,o.Pg)();return r.createElement("div",{style:{background:t.custom.colors.nav,borderRadius:2,padding:"2px 0",display:"flex",flexDirection:"column"}},e)},Item:({children:e,style:t,...n})=>{const i=(0,o.Pg)();return r.createElement(l.Z,{disableRipple:!0,style:{textTransform:"none",color:i.custom.colors.fontColor,fontSize:"14px",padding:"8px 16px",display:"inline",...t},...n},r.createElement("div",{style:{display:"flex",alignItems:"center"}},e))},Root:({children:e,...t})=>{const n=(0,o.Pg)(),l=a(n);return r.createElement(i.ZP,{className:l.popOverRoot,...t},r.createElement("div",{style:{width:"100%",background:n.custom.colors.background,padding:1,display:"flex",flexDirection:"column",gap:2}},e))}}},86845:(e,t,n)=>{n.d(t,{U:()=>a});var o=n(36375),l=n(60041),i=n(79312),r=n(2784);function a({style:e,menuItems:t,textStyle:n,borderColor:a,className:s}){const c=(0,l.Pg)();return r.createElement(o.aV,{className:s,style:{border:`${c.custom.colors.borderFull}`,borderRadius:"12px",marginTop:"16px",...e}},Object.entries(t).map((([e,t],l,{length:s})=>r.createElement(o.HC,{key:e,id:e,isFirst:0===l,isLast:l===s-1,onClick:()=>t.onClick(),style:{height:"44px",padding:"10px",...t.style},button:void 0===t.button||t.button,classes:t.classes,detail:t.detail??r.createElement(o.lp,null),borderColor:a,allowOnclickPropagation:t.allowOnclickPropagation},r.createElement("div",{style:{display:"flex",flex:1,alignItems:"center"}},t.icon?t.icon({style:{color:c.custom.colors.icon,height:"24px",width:"24px",marginRight:"8px"},fill:c.custom.colors.icon}):null,r.createElement(i.Z,{style:{fontWeight:500,...n}},t.label??e))))))}},76668:(e,t,n)=>{n.d(t,{J:()=>a});var o=n(2784),l=n(36375),i=n(49494),r=n(2784);function a({decimals:e,...t}){const[n,a]=(0,o.useState)(!1),[s,c]=(0,o.useState)(null);let d;return(0,o.useEffect)((()=>{c(null)}),[n]),d=n&&s?s:t.value?i.formatUnits(t.value,e):"",r.createElement(l.oi,{...t,margin:"none",value:d,setValue:n=>{((e,t,n)=>{if(""!==e){const o=e.indexOf("."),l=o>=0?e.substring(0,o)+e.substring(o,o+t+1):e;c(l),n(i.parseUnits(l,t))}else c(null),n(null)})(n.target.value.replace("-",""),e,t.setValue)},inputProps:{...t.inputProps,onFocus:()=>a(!0),onBlur:()=>a(!1)}})}},73044:(e,t,n)=>{n.d(t,{C:()=>v});var o=n(2784),l=n(36375),i=n(3210),r=n(60041),a=n(65643),s=n(79312),c=n(90454),d=n(52529),m=n(57531),u=n(82073),p=n(49494),g=n(23866),h=n(86845),f=n(19619),x=n(2784);const y=(0,r.W2)((e=>({chip:{padding:"4px 16px",textTransform:"capitalize",borderRadius:"16px"},primaryChip:{borderColor:e.custom.colors.primaryButton,backgroundColor:e.custom.colors.primaryButton,color:e.custom.colors.primaryButtonTextColor,"&:hover":{opacity:r.IP,background:`${e.custom.colors.primaryButton} !important`,backgroundColor:`${e.custom.colors.primaryButton} !important,`}},secondaryChip:{borderColor:e.custom.colors.secondaryButton,backgroundColor:e.custom.colors.secondaryButton,color:e.custom.colors.secondaryButtonTextColor,"&:hover":{opacity:r.IP,background:`${e.custom.colors.secondaryButton} !important`,backgroundColor:`${e.custom.colors.secondaryButton} !important,`}},backgroundChip:{borderColor:e.custom.colors.background,backgroundColor:e.custom.colors.background,color:e.custom.colors.secondaryButtonTextColor,"&:hover":{opacity:r.IP,background:`${e.custom.colors.background} !important`,backgroundColor:`${e.custom.colors.background} !important,`}},listRoot:{"& .MuiTypography-root":{fontSize:"14px"}},inputRoot:{border:`${e.custom.colors.borderFull}`,background:e.custom.colors.background,color:e.custom.colors.secondary,borderRadius:"8px","& .MuiOutlinedInput-root":{borderRadius:"8px","& fieldset":{border:"none"}},"& .MuiInputBase-input":{color:e.custom.colors.fontColor,borderRadius:"8px",fontSize:"14px",fontWeight:700,paddingRight:"8px"},"& .MuiInputAdornment-root":{color:e.custom.colors.secondary,fontWeight:500,minWidth:"12px",fontSize:"14px"},"&:hover":{backgroundColor:e.custom.colors.primary}}})));function v({transactionData:e,menuItems:t,menuItemClasses:n}){const m=(0,r.Pg)(),p=y(),{loading:g,network:f,networkFee:v,networkFeeUsd:E,transactionOverrides:k,setTransactionOverrides:w,simulationError:C}=e,[S,T]=(0,o.useState)(!1),[R,j]=(0,o.useState)("normal"),I=(0,i.N64)(),N={Network:{onClick:()=>{},detail:x.createElement(s.Z,null,f),button:!1,classes:n},"Network Fee":{onClick:()=>{},detail:g?x.createElement(c.Z,{width:150}):x.createElement(s.Z,null,v," ","Ethereum"===f?"ETH":"SOL"),button:!1,classes:n},..."Ethereum"===f?{Speed:{onClick:()=>T(!0),detail:x.createElement(d.Z,{disableRipple:!0,disableElevation:!0,className:`${p.chip} ${p.backgroundChip}`,disabled:g},R," ",x.createElement(a.Z,null)),button:!1,classes:n}}:{},..."Solana"===f&&I?{"Max Compute units":{onClick:()=>{},detail:x.createElement(l._9,{disabled:e.solanaFeeConfig?.disabled,placeholder:"Compute units",value:e.solanaFeeConfig?.config?.computeUnits.toString()||0,onChange:t=>{const n=parseInt(t.target.value||"0");if(n<0||n>12e5||isNaN(parseInt(t.target.value)))return;const o={...e.solanaFeeConfig?.config||{},computeUnits:n};e.setSolanaFeeConfig((e=>({config:o,disabled:e.disabled})))}}),button:!1,classes:n},"Priority fee (micro lamports)":{onClick:()=>{},detail:x.createElement(l._9,{disabled:e.solanaFeeConfig?.disabled,placeholder:"Priority fee",value:e.solanaFeeConfig.config?.priorityFee?.toString()||0,onChange:t=>{const n=parseInt(t.target.value||"0");if(n<0||isNaN(parseInt(t.target.value)))return;const o={...e.solanaFeeConfig?.config||{},priorityFee:BigInt(n)};e.setSolanaFeeConfig((e=>({disabled:e.disabled,config:o})))}}),button:!1,classes:n},"Max Priority fee":{onClick:()=>{},detail:x.createElement(s.Z,null,e.solanaFeeConfig?.config?.computeUnits?e.solanaFeeConfig?.config?.computeUnits*(Number(e.solanaFeeConfig?.config?.priorityFee)/u.LAMPORTS_PER_SOL/1e6||0):0," ","SOL"),button:!1,classes:n}}:{}};return x.createElement(x.Fragment,null,x.createElement(h.U,{className:p.listRoot,menuItems:{...t,...N},style:{margin:0,overflowY:"auto",maxHeight:"40vh"},textStyle:{color:m.custom.colors.secondary}}),C?x.createElement(s.Z,{style:{color:m.custom.colors.negative,marginTop:"8px",textAlign:"center",fontSize:"14px"}},"This transaction is unlikely to succeed."):null,"Ethereum"!==f||g?null:x.createElement(b,{mode:R,setMode:j,transactionOverrides:k,setTransactionOverrides:w,networkFeeUsd:E,openDrawer:S,setOpenDrawer:T}))}function b({mode:e,setMode:t,transactionOverrides:n,setTransactionOverrides:a,networkFeeUsd:c,openDrawer:d,setOpenDrawer:u}){const v=(0,r.Pg)(),b=y(),w=(0,i.yTM)(),[C,S]=(0,o.useState)(p.formatUnits(n.maxFeePerGas,9)),[T,R]=(0,o.useState)(p.formatUnits(n.maxPriorityFeePerGas,9)),[j,I]=(0,o.useState)(n.gasLimit),[N,F]=(0,o.useState)(n.nonce),[P,L]=(0,o.useState)(!1),[A,B]=(0,o.useState)(!1),Z=(0,o.useRef)(!0);(0,o.useEffect)((()=>{Z.current?Z.current=!1:"normal"===e?a({...n,maxFeePerGas:w.maxFeePerGas,maxPriorityFeePerGas:w.maxPriorityFeePerGas,nonce:N}):"fast"===e?a({...n,maxFeePerGas:w.maxFeePerGas.add(w.maxFeePerGas.mul(10).div(100)),maxPriorityFeePerGas:w.maxPriorityFeePerGas.add(w.maxPriorityFeePerGas.mul(10).div(100)),nonce:N}):"degen"===e&&a({...n,maxFeePerGas:w.maxFeePerGas.add(w.maxFeePerGas.mul(50).div(100)),maxPriorityFeePerGas:w.maxPriorityFeePerGas.add(w.maxPriorityFeePerGas.mul(50).div(100)),nonce:N})}),[e]),(0,o.useEffect)((()=>{L("custom"===e)}),[e]),(0,o.useEffect)((()=>(document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)})),[P,A]);const O=e=>{"Escape"===e.key&&(e.preventDefault(),P?L(!1):A?B(!1):u(!1))},$={onClick:()=>{},button:!1},D=!P,z="custom"===e&&!A&&!P,M={"Max base fee":{detail:P?x.createElement(m.Z,{className:b.inputRoot,variant:"outlined",margin:"dense",size:"small",InputLabelProps:{shrink:!1,style:{backgroundColor:v.custom.colors.nav}},value:C,onChange:e=>S(e.target.value)}):x.createElement(k,{value:p.formatUnits(n.maxFeePerGas,9),unit:"Gwei",containerProps:{style:{cursor:z?"pointer":"inherit"},onClick:()=>{z&&L(!0)}}}),...$},"Priority fee":{detail:P?x.createElement(m.Z,{className:b.inputRoot,variant:"outlined",margin:"dense",size:"small",InputLabelProps:{shrink:!1,style:{backgroundColor:v.custom.colors.nav}},value:T,onChange:e=>R(e.target.value)}):x.createElement(k,{value:p.formatUnits(n.maxPriorityFeePerGas,9),unit:"Gwei",containerProps:{style:{cursor:z?"pointer":"inherit"},onClick:()=>{z&&L(!0)}}}),...$},"Gas limit":{detail:P?x.createElement(m.Z,{className:b.inputRoot,variant:"outlined",margin:"dense",size:"small",InputLabelProps:{shrink:!1,style:{backgroundColor:v.custom.colors.nav}},value:j,onChange:e=>I(e.target.value)}):x.createElement(s.Z,{style:{cursor:z?"pointer":"inherit"},onClick:()=>{z&&L(!0)}},n.gasLimit.toString()),...$},Nonce:{detail:A?x.createElement(m.Z,{className:b.inputRoot,variant:"outlined",margin:"dense",size:"small",InputLabelProps:{shrink:!1,style:{backgroundColor:v.custom.colors.nav}},value:N,type:"number",onChange:e=>F(e.target.value)}):x.createElement(s.Z,{style:{cursor:D?"pointer":"inherit"},onClick:()=>{D&&B(!0)}},n.nonce),...$},"Max transaction fee":{detail:x.createElement(s.Z,null,"$",c),...$}};return x.createElement(g.Gx,{openDrawer:d,setOpenDrawer:u,paperProps:{style:{height:"100%"}},modalProps:{style:{background:"#18181b80"},disableEscapeKeyDown:!0}},x.createElement("div",{onClick:()=>u(!1),style:{height:"50px",zIndex:1,backgroundColor:"transparent"}},x.createElement(f.P,{onClick:()=>u(!1),style:{marginTop:"28px",marginLeft:"24px",zIndex:1}})),x.createElement("div",{style:{borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderTop:"1pt solid "+v.custom.colors.borderColor,height:"100%",background:v.custom.colors.background}},x.createElement("div",{style:{height:"100%",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}},x.createElement("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column",paddingBottom:"24px",height:"100%"}},x.createElement("div",null,x.createElement(s.Z,{style:{color:v.custom.colors.fontColor,fontWeight:500,fontSize:"18px",lineHeight:"24px",textAlign:"center",paddingTop:"24px"}},"Advanced Settings"),x.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"24px 16px 0 16px"}},["normal","fast","degen","custom"].map((n=>x.createElement(E,{key:n,mode:n,currentMode:e,setMode:t,disabled:A})))),x.createElement("div",{style:{margin:"24px 16px"}},x.createElement(h.U,{className:b.listRoot,menuItems:M,style:{margin:0},textStyle:{color:v.custom.colors.secondary}}))),x.createElement("div",{style:{margin:"0 16px"}},"custom"===e&&P||A?x.createElement(l.KM,{style:{marginBottom:"12px"},label:"Save",onClick:()=>{a({...n,maxFeePerGas:p.parseUnits(C,9),maxPriorityFeePerGas:p.parseUnits(T,9),gasLimit:j,nonce:N}),B(!1),L(!1)}}):null,x.createElement(l.tf,{label:"Close",onClick:()=>u(!1)}))))))}function E({mode:e,currentMode:t,setMode:n,disabled:o}){const l=y();return x.createElement(d.Z,{disableRipple:!0,disableElevation:!0,onClick:()=>n(e),className:`${l.chip} ${e!==t||o?l.secondaryChip:l.primaryChip}`,size:"small",disabled:o},e)}function k({value:e,unit:t,containerProps:n}){const o=(0,r.Pg)();return x.createElement("div",{...n,style:{display:"flex",justifyContent:"space-between",width:"50%",...n.style?n.style:{}}},x.createElement(s.Z,null,e),x.createElement(s.Z,{style:{color:o.custom.colors.secondary}},t))}},19161:(e,t,n)=>{n.d(t,{JE:()=>p,MR:()=>g,N9:()=>f,R1:()=>o.R1Z,XZ:()=>x,bx:()=>y,h4:()=>h,nv:()=>d.nv});var o=n(20604),l=n(3210),i=n(60041),r=n(79312),a=n(83422),s=n(41518),c=n(52529),d=n(33757),m=n(2784);const u=(0,i.W2)((e=>({header:{color:e.custom.colors.fontColor,fontSize:"24px",fontWeight:500,lineHeight:"32px"},checkBox:{color:e.custom.colors.primaryButton,width:"18px",height:"18px","&.Mui-disabled":{opacity:.5}},checkBoxRoot:{padding:0},checkBoxChecked:{color:`${e.custom.colors.primaryButton} !important`,background:"white"},darkCheckboxChecked:{color:"white !important",background:`${e.custom.colors.smallTextColor} !important`},subtext:{color:e.custom.colors.subtext},checkFormButton:{display:"flex",marginTop:"8px","&:hover":{backgroundColor:"transparent !important",background:"transparent !important",opacity:.8}}})));function p({publicKey:e,name:t,style:n,nameStyle:l}){const a=(0,i.Pg)();return m.createElement("div",{style:{display:"flex",...n}},m.createElement(r.Z,{style:{...l,marginRight:"8px"}},t),e?m.createElement(r.Z,{style:{color:a.custom.colors.secondary}},"(",(0,o.R1Z)(e),")"):null)}function g({children:e,style:t,onClick:n}){const o=u();return m.createElement("p",{className:o.subtext,style:{fontWeight:500,marginTop:"8px",...t},onClick:n},e)}function h({text:e,style:t={}}){const n=u();return m.createElement(r.Z,{className:n.header,style:t},e)}function f({icon:e,style:t}){return m.createElement(a.Z,{style:{display:"block",height:"56px",width:"56px",margin:"8px auto 16px auto",...t}},e)}function x({checked:e,setChecked:t=(()=>{}),...n}){const o=u(),i=(0,l.vsx)();return m.createElement(s.Z,{disableRipple:!0,className:o.checkBox,checked:e,onChange:()=>t(!e),classes:{checked:i?o.darkCheckboxChecked:o.checkBoxChecked,root:o.checkBoxRoot},...n})}function y({checked:e,setChecked:t,label:n}){const o=u();return m.createElement(c.Z,{className:o.checkFormButton,style:{padding:0,textTransform:"none"},onClick:()=>t(!e),disableRipple:!0},m.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},m.createElement(x,{checked:e,setChecked:t,sx:{padding:0}})),m.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginLeft:"10px"}},m.createElement(r.Z,{className:o.subtext},n)))}},73181:(e,t,n)=>{n.d(t,{h:()=>l});var o=n(2784);const l=()=>{const[e,t]=(0,o.useState)(0);return{step:e,setStep:t,nextStep:()=>t(e+1),prevStep:()=>{e>0&&t(e-1)}}}},5497:(e,t,n)=>{n.d(t,{BZ:()=>i,X$:()=>r,mq:()=>l});var o=n(20604);const l=()=>navigator.serviceWorker.ready.then((async e=>{const t=(e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),o=new Uint8Array(n.length);for(let e=0;e<n.length;++e)o[e]=n.charCodeAt(e);return o})("BJ6je9D4-ZJUH1yxTCRT01ILw07-YZcpAEk5hxpnPnEXJJ8WjE9BYf_fTPXNGRM1yw5C1CZQaCFmUX0gujpf67E"),n=await e.pushManager.getSubscription();n&&n.options.applicationServerKey===t&&await n.unsubscribe()})),i=async()=>{const e=await fetch(`${o.FvS}/notifications/subscriptions`),t=await e.json();return!!t.auth_notification_subscriptions&&t.auth_notification_subscriptions.length>0},r=async()=>(await fetch(`${o.FvS}/notifications`,{method:"DELETE"})).json()},33757:(e,t,n)=>{n.d(t,{FE:()=>h,Vs:()=>g,nv:()=>m,zx:()=>u});var o=n(86750),l=n(60041),i=n(57531),r=n(52529),a=n(85612),s=n(71130),c=n(2784);const d=(0,l.W2)((e=>({textAreaInput:{fontWeight:500,borderRadius:"12px",fontSize:"16px",lineHeight:"24px",padding:"16.5px 14px",font:"inherit",background:e.custom.colors.textBackground,border:`2pt solid ${e.custom.colors.textBackground}`,"&:hover":{border:`2pt solid ${e.custom.colors.primaryButton}`},"&:focus":{border:`2pt solid ${e.custom.colors.primaryButton}`,outline:"none"}},textFieldInputColorEmpty:{color:e.custom.colors.textPlaceholder},textFieldInputColor:{color:e.custom.colors.fontColor2},textFieldRoot:{"& .MuiOutlinedInput-root":{background:e.custom.colors.textBackground,borderRadius:"12px","& fieldset":{border:`${e.custom.colors.borderFull}`},"&:hover fieldset":{border:`solid 2pt ${e.custom.colors.primaryButton}`},"&.Mui-focused fieldset":{border:`solid 2pt ${e.custom.colors.primaryButton} !important`,borderColor:`${e.custom.colors.primaryButton} !important`}}},textRootError:{"& .MuiOutlinedInput-root":{"& fieldset":{border:`solid 2pt ${e.custom.colors.negative} !important`},"&.Mui-focused fieldset":{border:`solid 2pt ${e.custom.colors.negative} !important`,borderColor:`${e.custom.colors.negative} !important`}}}})));function m({placeholder:e,type:t,value:n,setValue:o,rootClass:r,startAdornment:a,endAdornment:s,isError:m,inputProps:u,disabled:p,autoFocus:g,rows:h,select:f,children:x,style:y}){const v=d(),b=(0,l.Pg)(),E=n?b.custom.colors.textPlaceholder:b.custom.colors.fontColor2;return c.createElement(i.Z,{sx:{fontWeight:500,borderRadius:"12px",fontSize:"16px",lineHeight:"24px"},autoFocus:g,multiline:!!h,rows:h,disabled:p,placeholder:e,variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:t,inputProps:{...u,style:{...u?.style||{},color:E}},classes:{root:`${m?v.textRootError:""} ${v.textFieldRoot} ${r??""}`},InputLabelProps:{shrink:!1,style:{borderRadius:"12px"}},InputProps:{startAdornment:a,endAdornment:s},value:n,onChange:e=>o(e.target.value),select:f,children:x,style:y})}function u({id:e,props:t,style:n,onClick:o,children:l}){return c.createElement(p,{id:e,props:t,style:n,children:l,onClick:o})}function p({onClick:e,style:t,children:n}){const o=(0,l.Pg)();return c.createElement(r.Z,{disableElevation:!0,variant:"contained",disableRipple:!0,style:{borderRadius:"12px",width:"100px",textTransform:"none",backgroundColor:o.custom.colors.nav,...t},onClick:e},n)}function g(e){const t=(0,l.Pg)();return c.createElement(c.Fragment,null,c.createElement(o.$B,{style:{width:"100%",height:"100%"},renderTrackHorizontal:e=>c.createElement("div",{...e,className:"track-horizontal"}),renderTrackVertical:e=>c.createElement("div",{style:{backgroundColor:t.custom.colors.scrollbarTrack},...e,className:"track-vertical"}),renderThumbHorizontal:e=>c.createElement("div",{...e,className:"thumb-horizontal"}),renderThumbVertical:e=>c.createElement("div",{style:{backgroundColor:t.custom.colors.scrollbarThumb},...e,className:"thumb-vertical"}),renderView:e=>c.createElement("div",{...e,className:"view"}),autoHide:!0,thumbMinSize:30,...e}),c.createElement("style",null,`\n          .track-vertical {\n            background: ${t.custom.colors.scrollbarTrack};\n          }\n          .track-vertical .thumb-vertical {\n            background-color: ${t.custom.colors.scrollbarThumb};\n          }\n\t\t\t\t`))}function h({children:e,id:t,navAction:n}){return c.createElement(a.E.div,{key:t,style:{height:"100%",display:"flex",flexDirection:"column",flex:1},variants:s.MOTION_VARIANTS,initial:n&&"tab"!==n?"initial":{},animate:n&&"tab"!==n?"animate":{},exit:n&&"tab"!==n?"exit":{}},e)}},58516:(e,t,n)=>{n.d(t,{q:()=>o});const o="rgba(76, 148, 255, 0.65)"},93014:(e,t,n)=>{n.d(t,{C:()=>o});const o=(e,t)=>e>=0?e%t:(e+-1*Math.ceil(e/t)*t)%t},88823:(e,t,n)=>{n.d(t,{W:()=>Mt});var o=n(52322),l=n(2784),i=n(20604),r=n(26852),a=n(3210),s=n(2942),c=n(88767),d=n(60041),m=n(36375),u=n(94483);const p=l.createContext(null);function g(e){return(0,o.jsx)(p.Provider,{value:{setActiveReply:e.setActiveReply,activeReply:e.activeReply,roomId:e.roomId,chats:e.chats,userId:e.userId,loading:e.loading,username:e.username,areFriends:e.areFriends,requested:e.requested,remoteUserId:e.remoteUserId,type:e.type,spam:e.spam,blocked:e.blocked,setRequested:e.setRequested,setSpam:e.setSpam,setBlocked:e.setBlocked,isDarkMode:e.isDarkMode,remoteRequested:e.remoteRequested,remoteUsername:e.remoteUsername,reconnecting:e.reconnecting,nftMint:e.nftMint,publicKey:e.publicKey,usersMetadata:e.usersMetadata,openPlugin:e.openPlugin,setOpenPlugin:e.setOpenPlugin,aboveMessagePlugin:e.aboveMessagePlugin,setAboveMessagePlugin:e.setAboveMessagePlugin,selectedFile:e.selectedFile,setSelectedFile:e.setSelectedFile,uploadingFile:e.uploadingFile,setUploadingFile:e.setUploadingFile,inputRef:e.inputRef,selectedMediaKind:e.selectedMediaKind,setSelectedMediaKind:e.setSelectedMediaKind,uploadedImageUri:e.uploadedImageUri,setUploadedImageUri:e.setUploadedImageUri,sendMessage:e.sendMessage},children:e.children})}function h(){const e=(0,l.useContext)(p);if(!e)throw new Error("context not found");return e}var f=n(86750);function x(e){const t=(0,d.Pg)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.$B,{onScrollStop:e.onScrollStop,ref:t=>{var n;return null===(n=e.setRef)||void 0===n?void 0:n.call(e,t)},style:{width:"100%",height:e.height||"100%",position:"absolute"},renderTrackHorizontal:e=>(0,o.jsx)("div",{...e,className:"track-horizontal"}),renderTrackVertical:e=>(0,o.jsx)("div",{style:{backgroundColor:t.custom.colors.scrollbarTrack},...e,className:"track-vertical"}),renderThumbHorizontal:e=>(0,o.jsx)("div",{...e,className:"thumb-horizontal"}),renderThumbVertical:e=>(0,o.jsx)("div",{style:{backgroundColor:t.custom.colors.scrollbarThumb},...e,className:"thumb-vertical"}),renderView:e=>(0,o.jsx)("div",{...e,className:"view"}),autoHide:!0,thumbMinSize:30,children:e.children}),(0,o.jsx)("style",{children:`\n          .track-vertical {\n            background: ${t.custom.colors.scrollbarTrack};\n          }\n          .track-vertical .thumb-vertical {\n            background-color: ${t.custom.colors.scrollbarThumb};\n          }\n\t\t\t\t`})]})}const y=l.createContext(null);function v(e){return(0,o.jsx)(y.Provider,{value:{setSelectNft:e.setSelectNft,room:e.room,barterId:e.barterId},children:e.children})}function b(){const e=(0,l.useContext)(y);if(!e)throw new Error("context not found");return e}var E=n(92679),k=n(51880),w=n(77256);const C=(0,k.Z)((e=>(0,w.Z)({topDiv:{display:"flex"},midDiv:{flex:1,color:e.custom.colors.background,display:"flex",justifyContent:"center",marginTop:16},avatar:{height:32,borderRadius:"50%",display:"flex",justifyContent:"center",width:"100%"},title:{flex:1,fontSize:18,padding:10,textAlign:"center"},icon:{color:e.custom.colors.icon},iconOuter:{cursor:"pointer",paddingLeft:5}}))),S=()=>{var e,t;const n=C(),{setOpenPlugin:l,remoteUserId:i}=h(),{uuid:r}=(0,a.aFb)(),c=(0,s.RS)({remoteUserIds:[i,r]}),d=null===(e=null==c?void 0:c[i])||void 0===e?void 0:e.image,u=null===(t=null==c?void 0:c[r])||void 0===t?void 0:t.image;return(0,o.jsxs)("div",{className:n.topDiv,children:[(0,o.jsxs)("div",{className:n.midDiv,children:[(0,o.jsx)("div",{className:n.iconOuter,onClick:()=>l(""),children:(0,o.jsx)(E.Z,{className:n.icon})}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("div",{className:n.avatar,children:(0,o.jsx)(m.ug,{size:32,style:{width:32,height:32,borderRadius:"50%"},src:u})}),(0,o.jsx)("div",{className:n.title,children:"Your offer"})]})]}),(0,o.jsx)("div",{className:n.midDiv,children:(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("div",{className:n.avatar,children:(0,o.jsx)(m.ug,{size:32,style:{width:32,height:32,borderRadius:"50%"},src:d})}),(0,o.jsx)("div",{className:n.title,children:"Their offer"})]})})]})};var T=n(28504),R=n(90454),j=n(57531),I=n(53476),N=n(42713);const F=()=>(0,o.jsx)("div",{style:{width:25,height:25,background:"#4C94FF",borderRadius:16,border:"2px solid #F0F0F2"},children:(0,o.jsx)(N.Z,{style:{color:"white",marginTop:2,fontSize:15,marginLeft:3}})});function P({currentSelection:e,setBarterState:t}){const{setSelectNft:n,room:r,barterId:s}=b(),[c,u]=(0,l.useState)(e),[p,g]=(0,l.useState)("nfts"),h=(0,a.cPJ)(),f=(0,d.Pg)();return(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsxs)("div",{style:{color:f.custom.colors.background,borderBottom:`1px solid ${f.custom.colors.icon}`,display:"flex",marginTop:10,paddingTop:16},children:[(0,o.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",marginRight:4},children:[(0,o.jsx)("div",{style:{cursor:"pointer",marginLeft:15},onClick:()=>{n(!1)},children:(0,o.jsx)(T.Z,{})}),(0,o.jsx)("div",{style:{fontSize:18,cursor:"pointer",borderBottom:"nfts"===p?`2px solid ${f.custom.colors.background}`:"",fontWeight:500,paddingBottom:16},onClick:()=>g("nfts"),children:"Collectibles"})]}),(0,o.jsx)("div",{style:{fontSize:18,cursor:"pointer",flex:1,marginLeft:4,display:"flex"},children:(0,o.jsx)("div",{style:{borderBottom:"nfts"!==p?`2px solid ${f.custom.colors.background}`:"",fontWeight:500,fontSize:16,paddingBottom:16},onClick:()=>g("tokens"),children:"Tokens"})})]}),(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{children:["nfts"!==p?(0,o.jsx)(B,{localSelection:c,setLocalSelection:u}):null,"nfts"===p?(0,o.jsx)(A,{onSelect:e=>{u((t=>t.map((e=>e.mint)).includes(e.mint||"")?t.filter((t=>t.mint!==e.mint)):[...t,{mint:e.mint,publicKey:h.publicKey,amount:1,type:"NFT"}]))},localSelection:c,setLocalSelection:u}):null]}),(0,o.jsx)("div",{style:{justifyContent:"center",padding:10},children:(0,o.jsx)(m.tf,{fullWidth:!0,label:"Update Trade",onClick:async()=>{await fetch(`${i.FvS}/barter/active?room=${r}&type=individual`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updatedOffer:c,barterId:s})}),t((e=>({...e,localOffers:c}))),n(!1)}})})]})]})}function L({dimension:e,rounded:t}){const{isXs:n}=(0,m.kC)(),l=()=>n?80:120;return(0,o.jsx)(R.Z,{variant:"rectangular",height:null!=e?e:l(),width:null!=e?e:l(),style:{margin:n?4:12,borderRadius:t?"50%":0}})}function A({localSelection:e,onSelect:t,rounded:n}){const r=(0,a.cPJ)(),{contents:s,state:c}=(0,I.$P)((0,a.W5L)({publicKey:r.publicKey,blockchain:i.$OA.SOLANA})),[u,p]=(0,l.useState)(!0);(0,l.useEffect)((()=>{setTimeout((()=>{p(!1)}),1500)}),[]);const g=(0,d.Pg)();return"loading"===c||"hasError"===c||!s.length&&u?(0,o.jsxs)("div",{style:{height:"100%",marginTop:60},children:[" ",(0,o.jsx)(m.gb,{})," "]}):s.length?(0,o.jsx)("div",{children:(0,o.jsx)("div",{style:{display:"flex"},children:(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)("div",{style:{color:g.custom.colors.background,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:null==s?void 0:s.map((l=>(0,o.jsx)("div",{children:(0,o.jsx)(O,{rounded:n,nft:l,selected:e.map((e=>e.mint)).includes(null==l?void 0:l.mint),onSelect:t})})))})})})}):(0,o.jsx)("div",{style:{height:"100%",display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",fontSize:18,color:g.custom.colors.fontColor,marginTop:80},children:"You don't own any NFTs yet"})})}function B({localSelection:e,setLocalSelection:t}){const n=(0,a.cPJ)(),[l,,r]=(0,a.U2V)((0,a.gvR)({publicKey:n.publicKey,blockchain:i.$OA.SOLANA}),[],[n]),s=(0,d.Pg)();return r?(0,o.jsx)("div",{}):(0,o.jsxs)("div",{style:{marginTop:15,paddingLeft:10,paddingRight:10},children:[(0,o.jsxs)("div",{style:{display:"flex",fontSize:14,color:s.custom.colors.icon},children:[(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:"Name"}),(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:"Available"}),(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:"Trade amount"})]}),l.map((n=>{var l;return(0,o.jsx)(Z,{amount:(null===(l=e.find((e=>e.mint===n.mint)))||void 0===l?void 0:l.amount)||0,setLocalSelection:t,tokenAccount:n})}))]})}function Z({tokenAccount:e,setLocalSelection:t,amount:n}){const l=(0,d.Pg)(),i=(0,a.cPJ)();return(0,o.jsxs)("div",{style:{color:l.custom.colors.background,display:"flex",fontSize:16,fontWeight:500,padding:4},children:[(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("img",{src:e.logo,style:{width:25,height:25,marginRight:4}}),(0,o.jsx)("div",{style:{textOverflow:"ellipses"},children:e.ticker})]})})}),(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)("div",{children:e.displayBalance})})}),(0,o.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:[(0,o.jsx)(j.Z,{sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:l.custom.colors.bg4,borderRadius:6},"&:hover fieldset":{borderColor:l.custom.colors.bg4},"&.Mui-focused fieldset":{borderColor:"#4C94FF"}},input:{padding:"12px 12px",color:l.custom.colors.background}},value:n,onChange:n=>{const o=parseFloat(n.target.value);isNaN(o)||0===o?t((t=>t.filter((t=>t.mint!==e.mint)))):t((t=>[...t.filter((t=>t.mint!==e.mint)),{mint:e.mint,publicKey:i.publicKey,amount:o,type:"TOKEN"}]))}})," "]})]})}function O({nft:e,selected:t,onSelect:n,rounded:l=!1}){const{isXs:i}=(0,m.kC)(),r=(0,d.Pg)(),a=()=>i?72:120;return(0,o.jsxs)("div",{style:{position:"relative",margin:i?4:12},children:[(0,o.jsx)($,{onClick:()=>{n(e)},style:{width:a(),height:a(),borderRadius:l?"50%":8,boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -1px rgba(0, 0, 0, 0.06);",border:`3px solid ${r.custom.colors.background}`},src:null==e?void 0:e.imageUrl,removeOnError:!0}),t?(0,o.jsxs)("div",{style:{position:"absolute",right:10,top:8},children:[" ",(0,o.jsx)(F,{})," "]}):null]})}const $=(0,d.zo)(m.e4)((({theme:e})=>({"&:hover":{border:`3px solid ${e.custom.colors.avatarIconBackground}`,cursor:"pointer"}})));var D=n(14385),z=n(93860);const M=()=>{const e=(0,d.Pg)(),{isXs:t}=(0,m.kC)(),n=()=>t?140:170;return(0,o.jsx)("div",{style:{color:e.custom.colors.icon,width:n(),height:n(),justifyContent:"center",textAlign:"center",fontSize:16},children:(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",border:`2px solid ${e.custom.colors.icon}`,borderRadius:8},children:(0,o.jsx)("div",{style:{display:"inline-flex",justifyContent:"center"},children:"Absolutely nothing!"})})})};var _=n(92760);const U=()=>{const{setSelectNft:e}=b(),t=(0,d.Pg)(),{isXs:n}=(0,m.kC)(),l=()=>n?140:170;return(0,o.jsx)("div",{onClick:()=>{e(!0)},style:{cursor:"pointer",background:t.custom.colors.invertedBg4,color:t.custom.colors.icon,width:l(),height:l(),justifyContent:"center",textAlign:"center",fontSize:16,borderRadius:8,margin:n?4:12},children:(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},children:(0,o.jsxs)("div",{style:{display:"inline-flex",justifyContent:"center"},children:[(0,o.jsx)(_.Z,{}),(0,o.jsx)("div",{children:"Add assets"})]})})})};function K({remoteSelection:e,localSelection:t,finalized:n}){const l=(0,d.Pg)(),{roomId:r,setOpenPlugin:a,remoteUsername:s,sendMessage:u}=h(),{barterId:p}=b();return(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{style:{flex:1,color:l.custom.colors.background,fontSize:16,fontWeight:500,borderRight:`2px solid ${l.custom.colors.icon}`},children:[(0,o.jsx)(W,{selection:t}),n?null:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,o.jsx)(U,{})})]}),(0,o.jsxs)("div",{style:{flex:1,color:l.custom.colors.background,fontSize:16,fontWeight:500},children:[0===e.length?(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:(0,o.jsx)(M,{})}):null,0!==e.length?(0,o.jsx)(W,{selection:e}):null]})]})}),(0,o.jsxs)("div",{style:{padding:10},children:[0===e.length?(0,o.jsx)(m.tf,{label:`Request @${s} to add assets`,onClick:async()=>{u("Barter request","barter-request",{barter_id:p.toString()})}}):null,0!==e.length?(0,o.jsx)(m.tf,{label:"Approve trade",onClick:async()=>{await fetch(`${i.FvS}/barter/execute?room=${r}&type=individual`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({barterId:p,clientGeneratedUuid:(0,c.Z)()})}),a("")}}):null]})]})}function W({selection:e}){return(0,o.jsxs)("div",{children:[(0,o.jsx)(q,{selection:e.filter((e=>"NFT"===e.type))}),(0,o.jsx)(J,{selection:e.filter((e=>"TOKEN"===e.type))})]})}function q({selection:e}){const t=(0,d.Pg)(),{isXs:n}=(0,m.kC)();return(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:e.map((e=>(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{position:"relative",margin:n?4:12,padding:10,background:t.custom.colors.invertedBg4,borderRadius:8,width:n?140:170},children:[(0,o.jsx)(V,{mint:e.mint}),(0,o.jsx)(H,{mint:e.mint})]})})))})}function H({mint:e}){const t=(0,d.Pg)();return(0,o.jsx)("div",{style:{cursor:"pointer",color:t.custom.colors.icon,display:"flex",justifyContent:"center"},onClick:()=>{(0,z.x)(`https://explorer.solana.com/address/${e}`,"_blank")},children:(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("div",{children:"View"})," ",(0,o.jsx)(D.Z,{})]})})}function V({mint:e,dimension:t,rounded:n=!1,onClick:i}){return(0,d.Pg)(),(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(L,{rounded:!0,dimension:t}),children:(0,o.jsx)(G,{dimension:t,onClick:i,mint:e,rounded:n})})}function G({mint:e,rounded:t,onClick:n,dimension:l}){const r=(0,d.Pg)(),s=(0,a.c92)({mintAddress:e,blockchain:i.$OA.SOLANA});return(0,o.jsx)(m.e4,{onClick:n,style:{width:"100%",height:l||"",borderRadius:t?"50%":8,border:t?`3px solid ${r.custom.colors.bg3}`:"",boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},src:null==s?void 0:s.image,removeOnError:!0})}function J({selection:e}){return(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:e.map((e=>(0,o.jsx)(l.Suspense,{children:(0,o.jsx)(Y,{mint:e.mint,amount:e.amount})})))})}function Y({mint:e,amount:t}){const n=(0,a.c92)({mintAddress:e,blockchain:i.$OA.SOLANA}),l=(0,d.Pg)(),{isXs:r}=(0,m.kC)();return(0,o.jsxs)("div",{style:{display:"flex",background:l.custom.colors.invertedBg4,padding:8,margin:r?4:12,borderRadius:8,width:r?140:170},children:[(0,o.jsx)("div",{style:{display:"flex"},children:(0,o.jsx)("img",{style:{width:25,height:25,borderRadius:"50%"},src:null==n?void 0:n.image})}),(0,o.jsx)("div",{style:{color:l.custom.colors.background,fontSize:12,display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:5},children:(0,o.jsxs)("div",{children:[t," ",null==n?void 0:n.name]})})]})}const X=({roomId:e})=>{const t=(0,d.Pg)(),[n,r]=(0,l.useState)(!1),[a,c]=(0,l.useState)(null),{openPlugin:p,setOpenPlugin:g}=h();return(0,l.useEffect)((()=>{var t,n;(async t=>{try{const n=await fetch(t?`${i.FvS}/barter/?barterId=${t}`:`${i.FvS}/barter/active?room=${e}&type=individual`,{method:"GET"}),o=await n.json();c(o.barter),s.VK.getInstance().onBarterUpdate=e=>{e.barterId===o.barter.id&&c((t=>({localOffers:e.localOffers||(null==t?void 0:t.localOffers)||[],remoteOffers:e.remoteOffers||(null==t?void 0:t.remoteOffers)||[],id:e.barterId,state:(null==t?void 0:t.state)||"in_progress"})))},s.VK.getInstance().onBarterExecute=e=>{e.barterId===o.barter.id&&g({type:"",metadata:{}})}}catch(e){console.error("could not get active barter")}})("barter"===p.type&&null!==(n=null===(t=p.metadata)||void 0===t?void 0:t.barterId)&&void 0!==n?n:"")}),[null==p?void 0:p.metadata]),(0,o.jsx)(v,{barterId:(null==a?void 0:a.id)||0,setSelectNft:r,room:e,children:(0,o.jsx)("div",{children:(0,o.jsx)(x,{height:`${u.v}vh`,children:(0,o.jsx)("div",{style:{height:"calc(100% - 56px)",background:t.custom.colors.invertedTertiary,overflow:"scroll",display:"flex",flexDirection:"column"},children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[a?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S,{}),(0,o.jsx)(m.gb,{})]}),a?(0,o.jsxs)(o.Fragment,{children:[n?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S,{}),(0,o.jsx)(K,{localSelection:(null==a?void 0:a.localOffers)||[],remoteSelection:(null==a?void 0:a.remoteOffers)||[]})]}),n?(0,o.jsx)(P,{setBarterState:c,currentSelection:(null==a?void 0:a.localOffers)||[]}):null]}):null]})})})})})},Q=()=>{const{openPlugin:e}=h(),{roomId:t}=h();return(0,d.Pg)(),e?(0,o.jsx)(o.Fragment,{children:"barter"===e.type?(0,o.jsx)(X,{roomId:t}):null}):(0,o.jsx)("div",{})};var ee=n(23083),te=n(812),ne=n(22378),oe=n(3104),le=n(79312),ie=n(53463),re=n(69208);const ae=(0,d.W2)((e=>({horizontalCenter:{display:"flex",justifyContent:"center"},smallTitle:{color:e.custom.colors.smallTextColor,fontWeight:600},text:{color:e.custom.colors.fontColor2},contactIconOuter:{background:e.custom.colors.textBorder},noContactBanner:{paddingTop:12,paddingBottom:12,background:t=>"danger"===t.type?e.custom.colors.negativeBackground:e.custom.colors.background},strongText:{color:e.custom.colors.fontColor2,fontWeight:600,fontSize:14}}))),se=()=>{const{areFriends:e,requested:t,remoteUserId:n,spam:l,blocked:r,setRequested:a,setSpam:s,remoteRequested:c,remoteUsername:d,reconnecting:u}=h(),p=ae();return u?(0,o.jsx)(ce,{fixed:!0,type:"danger",title:"Network connection error"}):l?(0,o.jsx)(ce,{type:"danger",title:"You marked this account as spam",buttonText:"Undo",onClick:async()=>{await fetch(`${i.FvS}/friends/spam`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:n,spam:!1})}),s(!1)}}):r?(0,o.jsx)(ce,{type:"normal",title:"You have blocked this account"}):e?(0,o.jsx)("div",{}):t?(0,o.jsx)(ce,{type:"disabled",title:"Friend requested"}):(0,o.jsx)("div",{children:e?null:(0,o.jsxs)("div",{className:`${p.noContactBanner} ${p.horizontalCenter} ${p.text}`,children:[t?null:(0,o.jsx)("div",{className:p.strongText,style:{cursor:"pointer",marginRight:25},onClick:async()=>{await(0,i.QTz)({to:n,sendRequest:!0}),a(!0),m.Am.success("",c?`You and ${d} are now connected`:`We'll let ${d} know you want to connect`)},children:c?"Accept Friend Request":"Add to Friends"}),(0,o.jsx)("div",{className:p.strongText,style:{cursor:"pointer"},onClick:async()=>{await fetch(`${i.FvS}/friends/spam`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:n,spam:!0})}),s(!0),m.Am.success("Spam","Marked user as spam")},children:"Mark as Spam"}),(0,o.jsx)("br",{})]})})};function ce({title:e,buttonText:t,onClick:n,type:l,fixed:i=!1}){const r=(0,d.Pg)(),a=ae({type:l});return(0,o.jsx)("div",{style:{marginBottom:"12px",...i?{position:"absolute",top:0,width:"100%"}:{}},children:(0,o.jsxs)("div",{className:`${a.noContactBanner} ${a.horizontalCenter} ${a.text}`,style:{color:"disabled"===l?r.custom.colors.fontColor3:"inherit",fontSize:14},children:[" ","disabled"!==l?(0,o.jsx)(re.Z,{style:{color:"danger"===l?r.custom.colors.negative:r.custom.colors.fontColor,marginRight:5}}):null," ",(0,o.jsxs)("div",{style:{marginTop:"disabled"!==l?1:0},children:[e,t?(0,o.jsx)("div",{style:{marginLeft:10,cursor:"pointer"},onClick:n,children:t}):null]})]})})}var de=n(58777),me=n(66198);const ue=()=>{const e=ae(),t=(0,d.Pg)();return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:e.horizontalCenter,style:{marginBottom:16,marginTop:20},children:(0,o.jsx)(me.Z,{className:e.contactIconOuter,size:"large",children:(0,o.jsx)(de.Z,{style:{color:t.custom.colors.fontColor}})})}),(0,o.jsx)("div",{className:e.horizontalCenter,style:{marginBottom:16},children:(0,o.jsx)("div",{className:e.smallTitle,children:"This is the beginning of your chat history."})})]})};var pe=n(48307),ge=n(16326),he=n(74654),fe=n(6163),xe=n(711),ye=n(31150),ve=n(50169),be=n(82073),Ee=n(29822),ke=n(27805),we=n(17022),Ce=n.n(we);const Se={version:"0.1.0",name:"secure_transfer",instructions:[{name:"setupSecureTransfer",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"secureTransfer",isMut:!0,isSigner:!1}],args:[]},{name:"send",accounts:[{name:"sender",isMut:!0,isSigner:!0},{name:"secureTransfer",isMut:!0,isSigner:!1},{name:"escrow",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"receiver",type:"publicKey"},{name:"amount",type:"u64"},{name:"handshake",type:{defined:"Handshake"}}]},{name:"redeem",accounts:[{name:"sender",isMut:!0,isSigner:!1},{name:"receiver",isMut:!0,isSigner:!0},{name:"escrow",isMut:!0,isSigner:!1}],args:[{name:"counter",type:"u64"}]},{name:"accept",accounts:[{name:"receiver",isMut:!0,isSigner:!0},{name:"escrow",isMut:!0,isSigner:!1}],args:[{name:"sender",type:"publicKey"},{name:"counter",type:"u64"}]},{name:"confirm",accounts:[{name:"sender",isMut:!0,isSigner:!0},{name:"receiver",isMut:!0,isSigner:!1},{name:"escrow",isMut:!0,isSigner:!1}],args:[{name:"counter",type:"u64"}]},{name:"cancel",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"secureTransfer",isMut:!0,isSigner:!1},{name:"escrow",isMut:!0,isSigner:!1}],args:[{name:"receiver",type:"publicKey"},{name:"counter",type:"u64"}]}],accounts:[{name:"SecureTransfer",type:{kind:"struct",fields:[{name:"counter",type:"u64"},{name:"bump",type:"u8"}]}},{name:"Escrow",type:{kind:"struct",fields:[{name:"amount",type:"u64"},{name:"bump",type:"u8"},{name:"sender",type:"publicKey"},{name:"receiver",type:"publicKey"},{name:"threeWayState",type:{option:{defined:"ThreeWayState"}}}]}}],types:[{name:"Handshake",type:{kind:"enum",variants:[{name:"TwoWay"},{name:"ThreeWay"}]}},{name:"ErrorCode",type:{kind:"enum",variants:[{name:"Overflow"},{name:"CantAcceptTwoWayHandshake"},{name:"CantAcceptAlreadyAcceptedHandshake"},{name:"CantRedeemThreeWayHandshake"},{name:"CantConfirmPendingThreeWayHandshake"},{name:"CantConfirmTwoWayHandshake"}]}},{name:"ThreeWayState",type:{kind:"enum",variants:[{name:"Pending"},{name:"Accepted"}]}}]};var Te=n(48834).Buffer;const Re="A1jvYLpetPZrMJksEM4RTmg8zZVQFT3WKv3K26S9yzqZ",je=async(e,t,n,o,l,i)=>{const r=Fe(e),a=await(async(e,t,n,o)=>{let l;const i=(0,ke.findProgramAddressSync)([new be.PublicKey(t).toBuffer()],e.programId);try{l=await e.account.secureTransfer.fetch(i[0])}catch(l){console.error(l);const r=await e.methods.setupSecureTransfer().accounts({secureTransfer:i[0],authority:new be.PublicKey(t),systemProgram:be.SystemProgram.programId}).transaction();await Ie(o,n,r,t.toString())}return(null==l?void 0:l.counter)||new Ee.BN(0)})(r,l,n,t),s=(0,ke.findProgramAddressSync)([new be.PublicKey(l).toBuffer()],r.programId),c=((e,t,n,o)=>(0,ke.findProgramAddressSync)([e.toBuffer(),t.toBuffer(),n.toArrayLike(Te,"le",8)],o.programId))(l,i,a||new Ee.BN(0),r)[0],d=await r.methods.send(i,new Ee.BN(o*be.LAMPORTS_PER_SOL),{twoWay:{}}).accounts({secureTransfer:s[0],escrow:c,sender:l,systemProgram:be.SystemProgram.programId}).transaction();return{signature:await Ie(t,n,d,l.toString()),counter:a.toString(),escrow:c.toString()}},Ie=async(e,t,n,o)=>{const{blockhash:l}=await t.getLatestBlockhash("confirmed");n.recentBlockhash=l,n.feePayer=new be.PublicKey(o);const r=await e.request({method:i.TbF,params:[Ce().encode(n.serialize({requireAllSignatures:!1})),o]});return await(0,i.gGt)(t,r,"confirmed"),r},Ne=async(e,t)=>{const n=Fe(e);try{const e=await n.account.escrow.fetch(new be.PublicKey(t));return null===e?null:{amount:e.amount.toString(),sender:e.sender.toString(),receiver:e.receiver.toString()}}catch(e){return null}};function Fe(e){return new Ee.Program(Se,Re,e)}var Pe=n(83422),Le=n(538);const Ae={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Be=({barterId:e})=>{const[t,n]=(0,l.useState)(!1),i=(0,d.Pg)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",background:"#0057EB",borderRadius:16,color:"white",fontWeight:500,fontSize:14,padding:15},children:[(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginRight:5},children:(0,o.jsx)("div",{children:"You negotiated a barter. "})}),(0,o.jsxs)("div",{style:{color:i.custom.colors.icon,cursor:"pointer"},onClick:()=>n(!0),children:[" ",(0,o.jsx)("b",{children:" VIEW "})," "]})]}),t&&(0,o.jsx)(Ze,{modal:t,setModal:n,barterId:e})]})};function Ze({barterId:e,modal:t,setModal:n}){const[r,a]=(0,l.useState)(null),s=(0,d.Pg)();return(0,l.useEffect)((()=>{(async({barterId:e})=>{const t=await fetch(`${i.FvS}/barter/?barterId=${e}`,{method:"GET"}),n=await t.json();a(n.barter)})({barterId:e})}),[e]),(0,o.jsx)(Le.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:()=>n(!1),closeAfterTransition:!0,BackdropProps:{timeout:500},children:(0,o.jsxs)(Pe.Z,{sx:{...Ae,background:s.custom.colors.invertedTertiary},children:[!r&&"loading",r&&(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",borderRight:`1px solid ${s.custom.colors.icon}`},children:[(0,o.jsx)("div",{style:{fontSize:20,padding:10,color:s.custom.colors.background},children:"Your offer"}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{height:"100%",flex:1},children:(0,o.jsx)(W,{selection:(null==r?void 0:r.localOffers)||[]})}),(0,o.jsx)("div",{style:{padding:10},children:(0,o.jsx)(m.tf,{label:"Execute",onClick:()=>{}})})]}),(0,o.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",borderLeft:`1px solid ${s.custom.colors.icon}`},children:[(0,o.jsx)("div",{style:{fontSize:20,padding:10,color:s.custom.colors.background},children:"Their offer"}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{height:"100%",flex:1},children:(0,o.jsx)(W,{selection:(null==r?void 0:r.remoteOffers)||[]})}),(0,o.jsx)("div",{style:{padding:10},children:(0,o.jsx)(m.tf,{label:"Execute",onClick:()=>{}})})]})]})]})})}function Oe({barterId:e,sender:t}){const{remoteUsername:n,setOpenPlugin:l}=h(),{username:i,uuid:r}=(0,a.aFb)(),s=(0,d.Pg)();return(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,o.jsxs)("div",{style:{display:"inline-flex",background:s.custom.colors.linkColor,padding:"12px 16px",color:"#fff",marginTop:5,borderRadius:16},children:[(0,o.jsxs)("div",{style:{flex:1},children:[t===r?`You poked ${n}`:`${n} wants to trade`," "]}),(0,o.jsxs)("div",{style:{marginLeft:10,cursor:"pointer",color:s.custom.colors.icon},onClick:()=>{l({type:"barter",metadata:{barterId:e}})},children:["View"," "]})]})})}var $e=n(75365);const De=(0,d.W2)((()=>({input:{"&:hover":{cursor:"text"}}}))),ze="backpack-message-input";function Me({setPluginMenuOpen:e,autoFocus:t=!0,onMediaSelect:n}){const i=De(),r=(0,d.Pg)(),{type:a,remoteUsername:s,activeReply:c}=h(),{activeSearch:m}=(0,l.useContext)($e.sl);return(0,l.useEffect)((()=>{if(t){const e=document.getElementById(ze);e&&e.focus()}}),[t]),(0,o.jsx)("div",{style:{width:"100%",padding:10},children:(0,o.jsx)($e.Cb,{id:ze,onKeyDown:e=>{"Enter"===e.key&&m&&e.stopPropagation()},className:i.input,onClick:()=>e(!1),onPaste:e=>(e=>{if(e.clipboardData.files.length>0){let t=e.clipboardData.files[0];n(t)}})(e),placeholder:"individual"===a?`Message @${s}`:(null==c?void 0:c.parent_username)?"Reply":"Write a message...",style:{outline:"0px solid transparent",color:r.custom.colors.fontColor,fontSize:"14px",wordBreak:"break-word"},defaultValue:""})})}const _e=()=>{const e=(0,d.Pg)(),{loading:t,results:n,activeSearch:r,selectItem:a,index:c}=(0,l.useContext)($e.sl),u=c,p=(0,l.useMemo)((()=>n),[n]),g=(0,s.RS)({remoteUserIds:n.map((e=>e.id))});return r&&!t&&0===(null==p?void 0:p.length)?null:(0,o.jsxs)("div",{style:{width:180,position:"absolute",bottom:44,boxShadow:e.custom.colors.boxShadow,background:e.custom.colors.bg3,paddingTop:r&&8,paddingBottom:r&&8,borderRadius:8,backdropFilter:"blur(20px)",overflow:"hidden"},children:[p.map(((t,n)=>{var l;return(0,o.jsxs)("button",{style:{paddingLeft:10,paddingRight:10,paddingTop:8,paddingBottom:8,display:"flex",cursor:"pointer",width:"100%",background:n===u?e.custom.colors.listItemHover:"transparent",color:e.custom.colors.fontColor,border:"none",textAlign:"left",alignItems:"center"},onClick:()=>{a(t)},children:[(0,o.jsx)("img",{style:{height:24,borderRadius:12,marginRight:8},src:null===(l=g[t.id])||void 0===l?void 0:l.image}),(0,o.jsxs)("div",{style:{fontSize:14},children:["@",t.name]}),i.iqE.includes(t.id)?(0,o.jsx)(m.fI,{}):null]},t.ref)})),""!==r&&r&&0!==r.length&&t?(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:3,marginTop:3},children:[" ",(0,o.jsx)(oe.Z,{size:20})," "]}):null]})},Ue=({fill:e="#8F929E"})=>(0,o.jsx)("svg",{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M17.025 14.1501C16.7083 14.1501 16.4416 14.0375 16.225 13.8121C16.0083 13.5875 15.9 13.3168 15.9 13.0001V10.0001C15.9 9.20015 15.6206 8.52515 15.062 7.97515C14.504 7.42515 13.825 7.15015 13.025 7.15015H4.14995L6.84995 9.82515C7.06662 10.0418 7.17095 10.3001 7.16295 10.6001C7.15428 10.9001 7.04162 11.1668 6.82495 11.4001C6.60828 11.6168 6.34162 11.7251 6.02495 11.7251C5.70828 11.7251 5.44162 11.6168 5.22495 11.4001L0.624951 6.80015C0.508284 6.68348 0.429284 6.55848 0.387951 6.42515C0.345951 6.29181 0.324951 6.15015 0.324951 6.00015C0.324951 5.85015 0.345951 5.70848 0.387951 5.57515C0.429284 5.44181 0.508284 5.31681 0.624951 5.20015L5.24995 0.575146C5.46662 0.358479 5.72928 0.254146 6.03795 0.262146C6.34595 0.270813 6.60828 0.383479 6.82495 0.600146C7.04162 0.816813 7.14995 1.08348 7.14995 1.40015C7.14995 1.71681 7.04162 1.98348 6.82495 2.20015L4.14995 4.85015H13.025C14.4583 4.85015 15.6749 5.35448 16.6749 6.36315C17.6749 7.37115 18.1749 8.58348 18.1749 10.0001V13.0001C18.1749 13.3168 18.0623 13.5875 17.837 13.8121C17.6123 14.0375 17.3416 14.1501 17.025 14.1501Z",fill:e})});var Ke=n(76475),We=n(4063);const qe=({mediaLink:e,mediaKind:t})=>{const[n,i]=(0,l.useState)(!1),r=(0,d.Pg)(),{isXs:a}=(0,m.kC)();return(0,o.jsxs)(o.Fragment,{children:[n&&(0,o.jsx)(Le.Z,{open:n,onClose:()=>i(!1),componentsProps:{root:{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",padding:"0 10px",height:"100vh",gap:4}},backdrop:{style:{background:"rgba(24, 24, 27, 0.9)",backdropFilter:"blur(5px)"}}},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(E.Z,{style:{color:r.custom.colors.icon,cursor:"pointer",position:"absolute",top:10,right:10},onClick:()=>i(!1)}),"video"===t?(0,o.jsx)("video",{style:{borderRadius:5,objectFit:"contain",maxHeight:"85vh"},controls:!0,src:e}):(0,o.jsx)("img",{style:{borderRadius:5,objectFit:"contain",maxHeight:"85vh",maxWidth:"85vw"},src:e}),(0,o.jsx)("a",{style:{position:"absolute",right:10,bottom:10},href:e,download:"AwesomeImage.png",children:(0,o.jsx)(Ke.Z,{style:{color:r.custom.colors.icon,cursor:"pointer"},onClick:()=>i(!1)})})]})}),(0,o.jsx)("div",{style:{marginTop:3,width:1},children:"video"===t?(0,o.jsx)("div",{style:{display:"flex"},children:(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)("video",{style:{height:a?180:270,maxWidth:a?250:375,borderRadius:5},controls:!0,src:e}),(0,o.jsx)("div",{style:{cursor:"pointer",position:"absolute",right:"0%",top:"0%",bottom:"0%",margin:"auto"},onClick:e=>{i(!0),e.preventDefault()},children:(0,o.jsx)(We.Z,{style:{color:r.custom.colors.icon,margin:3}})})]})}):(0,o.jsx)("img",{onClick:()=>i(!0),style:{height:"full",maxWidth:a?"60vw":375,borderRadius:5,marginTop:5,objectFit:"contain",cursor:"pointer"},src:e})})]})},He=(0,d.W2)((e=>({hoverParent:{"&:hover $hoverChild, & .Mui-focused $hoverChild":{visibility:"visible"}},hoverChild:{visibility:"hidden"}}))),Ve=({mint:e,uuid:t,displayName:n})=>{const r=He(),{isXs:a}=(0,m.kC)(),s=(0,d.Pg)(),{remoteUsername:c}=h(),[u,p]=(0,l.useState)(!1),g=()=>a?180:250;return(0,l.useEffect)((()=>{(async(e,t)=>{try{const n=await fetch(`${i.FvS}/nft/validateOwner?ownerUuid=${e}&mint=${t}`,{method:"GET"});(await n.json()).isOwner&&p(!0)}catch(e){console.error(e)}})(t,e)}),[t,e]),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{position:"relative",width:g(),marginBottom:10,cursor:"pointer"},className:r.hoverParent,children:[(0,o.jsx)(V,{dimension:g(),onClick:()=>{(0,z.x)(`https://magiceden.io/item-details/${e}`,"_blank")},mint:e,rounded:!0}),u?(0,o.jsx)("div",{style:{position:"absolute",top:-44,width:"100%",display:"flex",justifyContent:"center"},className:r.hoverChild,children:(0,o.jsxs)("div",{style:{padding:"8px 11px",background:s.custom.colors.invertedPrimary,color:s.custom.colors.bg3,display:"inline-flex",borderRadius:5,position:"relative"},children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)(N.Z,{style:{color:"#11A800",marginRight:10}})}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsxs)("div",{style:{fontWeight:500,fontSize:13},children:[" ","@",n," owns this NFT"," "]})})]})}):null]})})};function Ge({message:e}){const{push:t}=(0,a.HJj)(),n=(0,i.kW1)(e),{usersMetadata:l,type:r}=((0,d.Pg)(),h()),{uuid:s}=(0,a.aFb)(),c=(0,a.vsx)();return(0,o.jsx)(o.Fragment,{children:n.map((e=>{if("text"===e.type)return(0,o.jsx)("span",{style:{wordBreak:"break-word"},children:e.value});{const n=l[e.value];if(n){const e=`@${n.username}`;return(0,o.jsx)("span",{onClick:()=>{n.uuid!==s&&t({title:`@${n.username}`,componentId:"individual"===r?i.Rzf:i.CdA,componentProps:{userId:n.uuid,title:`@${n.username}`}})},style:{cursor:"pointer",color:n.colorIndex||0===n.colorIndex?i.KAW[n.colorIndex||0][c?"dark":"light"]:n.color},children:e})}return(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)(R.Z,{style:{marginTop:3,marginLeft:3,marginRight:1},variant:"circular",width:15,height:15}),(0,o.jsx)(R.Z,{width:30,height:20,style:{marginTop:"0px"}})]})}}))})}const Je=(0,k.Z)((e=>(0,w.Z)({outerDiv:{padding:10,background:e.custom.colors.textBackground,backdropFilter:"blur(6px)"},text:{color:e.custom.colors.fontColor2},icon:{color:e.custom.colors.icon,width:"0.8em"},replyTo:{color:e.custom.colors.fontColor3,fontWeight:500,fontSize:14,marginBottom:8}}))),Ye=({parent_username:e,text:t,showCloseBtn:n,marginBottom:l,padding:i,align:r="left"})=>{const{setActiveReply:a}=h(),s=Je();return(0,o.jsxs)("div",{style:{marginBottom:l||6,display:"flex",justifyContent:"space-between",flexDirection:"left"===r?"row":"row-reverse",padding:i,paddingBottom:0},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:s.replyTo,children:["Replying to"," ",(0,o.jsx)("span",{className:s.text,children:e||""})]}),(0,o.jsx)("div",{className:s.text,style:{borderLeft:"2px solid #DFE0E6",fontWeight:400,paddingLeft:12,lineHeight:1.4,fontSize:14},children:(0,o.jsx)(Ge,{message:t})})]}),n&&(0,o.jsx)("div",{style:{cursor:"pointer"},onClick:()=>a({parent_client_generated_uuid:null}),children:(0,o.jsx)(E.Z,{className:s.icon})})]})};var Xe=n(56476);const Qe=(0,k.Z)((e=>(0,w.Z)({smallBtn:{padding:"2px 12px",borderRadius:12,cursor:"pointer"},sendOuter:{background:e.custom.colors.invertedPrimary,borderRadius:16,marginTop:4,padding:"12px 16px",color:e.custom.colors.background,maxWidth:250,minWidth:220},sendInner:{background:e.custom.colors.invertedSecondary,borderRadius:8,padding:"8px 16px",color:e.custom.colors.background}}))),et=({txnSignature:e,message:t,remoteUserId:n})=>{const{remoteUsername:i}=h(),[r,s]=(0,l.useState)(!0),c=Qe(),d=(0,a.VvY)(),[m,u]=(0,l.useState)(0),[p,g]=(0,l.useState)(""),{uuid:f}=(0,a.aFb)();return(0,l.useEffect)((()=>{(async()=>{var t,n,o;s(!0);try{const l=null===(t=(await d.connection.getParsedTransactions([e]))[0])||void 0===t?void 0:t.transaction.message.instructions.find((e=>{var t,n;return"transferChecked"===(null===(t=null==e?void 0:e.parsed)||void 0===t?void 0:t.type)||"transfer"===(null===(n=null==e?void 0:e.parsed)||void 0===n?void 0:n.type)}));if(!l)return;l.parsed.info.mint?(g(l.parsed.info.mint),u(l.parsed.info.tokenAmount.uiAmount)):u((null===(o=null===(n=null==l?void 0:l.parsed)||void 0===n?void 0:n.info)||void 0===o?void 0:o.lamports)/be.LAMPORTS_PER_SOL),s(!1)}catch(e){console.error(e)}})()}),[e]),(0,o.jsx)("div",{className:c.sendOuter,children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{marginBottom:5,marginTop:5},children:[" ",n!==f?"You Received":`You sent @${i}`]}),r?null:(0,o.jsxs)(o.Fragment,{children:[p?(0,o.jsx)(tt,{message:t,tokenAddress:p,amount:m}):null,p?null:(0,o.jsx)(lt,{message:t,amount:m})]}),r?(0,o.jsx)(nt,{}):null,(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[(0,o.jsxs)("div",{className:c.smallBtn,style:{display:"flex",padding:"3px 7px",fontSize:12,background:"rgba(17, 168, 0, 0.2)",color:"#52D24C"},children:[(0,o.jsx)(N.Z,{style:{fontSize:16}}),(0,o.jsx)("div",{style:{marginLeft:4,marginRight:4,fontSize:12},children:"Paid"})]}),(0,o.jsxs)("div",{onClick:()=>{window.open(`https://explorer.solana.com/tx/${e}`,"mywindow")},style:{display:"flex",cursor:"pointer",marginTop:3},children:[(0,o.jsx)("div",{children:"View"})," ",(0,o.jsx)(Xe.Z,{style:{fontSize:15,marginLeft:2,marginTop:2}})]})]})]})})};function tt({tokenAddress:e,amount:t,message:n}){return(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(nt,{}),children:(0,o.jsx)(ot,{tokenAddress:e,amount:t,message:n})})}function nt(){const e=(0,d.Pg)();return(0,o.jsx)("div",{onClick:()=>{},style:{paddingLeft:"19px",paddingRight:"19px",paddingTop:"10px",paddingBottom:"10px",display:"flex",backgroundColor:e.custom.colors.invertedSecondary,marginBottom:10},children:(0,o.jsxs)("div",{style:{height:"100%",width:"100%",alignItems:"center"},children:[(0,o.jsx)("div",{children:(0,o.jsx)(R.Z,{width:"40%",height:40,style:{marginTop:"-6px"}})}),(0,o.jsx)("div",{style:{width:90},children:(0,o.jsx)(R.Z,{width:"80%",height:20,style:{marginTop:"-6px"}})}),(0,o.jsxs)("div",{style:{width:"100%",display:"flex"},children:[(0,o.jsx)(R.Z,{variant:"circular",width:15,height:15,style:{marginRight:5}}),(0,o.jsx)(R.Z,{width:"70%",height:20,style:{marginTop:"-3px"}})]})]})})}function ot({tokenAddress:e,amount:t,message:n}){const l=(0,a.c92)({mintAddress:e,blockchain:i.$OA.SOLANA}),r=(0,d.Pg)(),s=Qe();return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:s.sendInner,children:[(0,o.jsx)("div",{style:{fontSize:30,display:"flex"},children:(0,o.jsx)("div",{children:t.toFixed(2)})}),n?(0,o.jsx)("div",{style:{marginBottom:10,color:r.custom.colors.icon},children:n}):null,(0,o.jsxs)("div",{style:{display:"flex",marginTop:3,color:r.custom.colors.icon},children:[(0,o.jsx)("img",{src:`https://swr.xnfts.dev/nft-data/metaplex-nft/${e}/image`,style:{width:20,height:20,borderRadius:8,marginRight:5}})," ",(0,o.jsxs)("div",{children:[null==l?void 0:l.ticker," on SOLANA"]})]})]})})}function lt({amount:e,message:t}){const n=Qe(),l=(0,d.Pg)();return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:n.sendInner,children:[(0,o.jsx)("div",{style:{fontSize:30,display:"flex"},children:(0,o.jsx)("div",{children:e.toFixed(2)})}),t?(0,o.jsx)("div",{style:{marginBottom:10,color:l.custom.colors.icon},children:t}):null,(0,o.jsxs)("div",{style:{display:"flex",marginTop:3,color:l.custom.colors.icon},children:[(0,o.jsx)("img",{src:a.Wsp,style:{width:20,height:20,borderRadius:8,marginRight:5}})," ",(0,o.jsx)("div",{children:"SOL on SOLANA"})]})]})})}const it=new pe.GiphyFetch("SjZwwCn1e394TKKjrMJWb2qQRNcqW8ro"),rt=(0,k.Z)((e=>(0,w.Z)({messageRow:{display:"flex"},messageContainer:{position:"relative",marginLeft:"10px",width:"100%",textAlign:"left",fontSize:"14px",color:e.custom.colors.fontColor},messageContent:{padding:0,margin:0},messageTimeStampRight:{color:e.custom.colors.secondary,fontSize:12,lineHeight:"15px",fontWeight:500,minWidth:63,display:"flex",flexDirection:"row-reverse",opacity:.5},avatar:{width:32,height:32,cursor:"pointer",borderRadius:"50%"},messageLine:{display:"flex",justifyContent:"space-between",width:"100%",color:e.custom.colors.fontColor2},displayName:{fontWeight:600,marginLeft:"10px",lineHeight:"16px",fontSize:"14px",fontColor:"#4E5768"},smallBtn:{padding:"2px 12px",borderRadius:12,cursor:"pointer"},messageLeftContainer:{display:"flex",flexDirection:"row",alignItems:"flex-start",padding:"8px 19px"},messageLeft:{borderRadius:"16px 16px 16px 0px",color:e.custom.colors.fontColor4,overflowWrap:"break-word",fontSize:14},messageRightContainer:{display:"flex",flexDirection:"column",alignItems:"flex-end",padding:"8px 16px"},messageRight:{borderRadius:"16px 16px 0px 16px",color:e.custom.colors.background,overflowWrap:"break-word",fontSize:14},hoverParent:{"&:hover $hoverChild, & .Mui-focused $hoverChild":{visibility:"visible"}},hoverChild:{visibility:"hidden"},secureSendOuter:{background:e.custom.colors.invertedPrimary,borderRadius:16,padding:"8px 10px",color:e.custom.colors.background,minWidth:230,maxWidth:400},secureSendInner:{background:e.custom.colors.invertedSecondary,borderRadius:8,padding:"8px 16px",color:e.custom.colors.background}}))),at=({id:e,width:t,height:n,noLink:i,borderRadius:r,overlay:a,...s})=>{const[c,d]=(0,l.useState)(),m=(0,l.useCallback)((async()=>{const{data:t}=await it.gif(e);d(t)}),[e]);return(0,l.useEffect)((()=>{m()}),[m,e]),c?(0,o.jsx)(ge.Gif,{onGifClick:(e,t)=>t.preventDefault(),tabIndex:1,borderRadius:r,gif:c,width:t,height:n,noLink:i,overlay:a,...s},`gif-${i}`):null},st=e=>{var t,n,l,r,s,c,u,p,g,f;const{push:x}=(0,a.HJj)(),{isDarkMode:y,roomId:v,type:b}=h(),E=e.message?e.message:"",k=e.timestamp?new Date(parseInt(e.timestamp)):new Date,{uuid:w}=(0,a.aFb)(),C=e.image,S=e.username,T=e.received,j=(0,d.Pg)(),I=e.sameUserMessage,N=rt(),{setActiveReply:F}=h(),P=e=>{w!==e.uuid&&x({title:`@${S}`,componentId:i.Rzf,componentProps:{userId:e.uuid}})};return"barter-request"===e.messageKind?(0,o.jsx)(Oe,{sender:e.uuid,barterId:null===(t=e.metadata)||void 0===t?void 0:t.barter_id}):"barter"===e.messageKind?(0,o.jsx)(Be,{barterId:null===(n=e.metadata)||void 0===n?void 0:n.barter_id}):(0,o.jsx)("div",{className:N.messageRow,style:{marginTop:I?0:8,paddingLeft:I?32:0},children:I?(0,o.jsx)("div",{className:`${N.messageContainer} ${N.hoverParent}`,style:{display:"flex",paddingTop:"4px"},children:(0,o.jsx)("div",{style:{width:"calc(100% - 80px)"},children:(0,o.jsxs)("div",{children:[e.parent_message_author_uuid?(0,o.jsx)("div",{children:(0,o.jsx)(Ye,{marginBottom:2,padding:0,parent_username:e.parent_message_author_username||"",showCloseBtn:!1,text:e.parent_message_text})}):null,(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:N.messageContent,children:e.deleted?(0,o.jsx)(ut,{}):"gif"===e.messageKind?(0,o.jsx)("div",{style:{height:150,maxWidth:220,overflow:"hidden"},children:(0,o.jsx)(at,{id:E,height:150})}):"secure-transfer"===e.messageKind?(0,o.jsx)(ct,{messageId:e.messageId,senderUuid:e.uuid,escrow:e.metadata.escrow,counter:e.metadata.counter,currentState:e.metadata.current_state,remoteUsername:e.username,finalTxId:e.metadata.final_txn_signature}):"transaction"===e.messageKind?(0,o.jsx)(et,{remoteUserId:e.uuid,message:E,txnSignature:null===(l=e.metadata)||void 0===l?void 0:l.final_tx_signature}):"media"===e.messageKind?(0,o.jsxs)("div",{children:[(0,o.jsx)(qe,{mediaLink:null===(r=e.metadata)||void 0===r?void 0:r.media_link,mediaKind:null===(s=e.metadata)||void 0===s?void 0:s.media_kind}),(0,o.jsx)(Ge,{message:E})]}):"nft-sticker"===e.messageKind?(0,o.jsx)("div",{children:(0,o.jsx)(Ve,{uuid:e.uuid,mint:null===(c=e.metadata)||void 0===c?void 0:c.mint,displayName:S})}):(0,o.jsx)(Ge,{message:E})})}),e.deleted?null:(0,o.jsx)("div",{children:"text"===e.messageKind?(0,o.jsxs)("div",{style:{display:"flex"},className:N.hoverChild,children:[(0,o.jsx)("div",{style:{marginLeft:10,marginTop:3,cursor:"pointer",marginRight:5},onClick:()=>{var t;F({parent_client_generated_uuid:e.client_generated_uuid,text:E,parent_username:`@${e.username}`,parent_message_author_uuid:e.userId}),null===(t=document.getElementById(ze))||void 0===t||t.focus()},children:(0,o.jsx)(Ue,{fill:j.custom.colors.icon})}),(0,o.jsx)("div",{style:{marginLeft:3},children:(0,o.jsx)(mt,{client_generated_uuid:e.client_generated_uuid,messageSender:e.uuid})})]}):(0,o.jsxs)("div",{style:{marginLeft:5},className:N.hoverChild,children:[" ",(0,o.jsx)(mt,{client_generated_uuid:e.client_generated_uuid,messageSender:e.uuid})," "]})})]})]})})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{paddingTop:8,width:32},children:C?(0,o.jsx)(m.ug,{size:32,onClick:()=>P({uuid:e.uuid}),alt:S,className:N.avatar,style:{width:32,height:32},src:C}):(0,o.jsx)(R.Z,{variant:"circular",width:32,height:32,style:{minWidth:32}})}),(0,o.jsxs)("div",{className:`${N.messageLine} ${N.hoverParent}`,children:[(0,o.jsxs)("div",{style:{width:"calc(100% - 80px)"},children:[(0,o.jsx)("div",{onClick:()=>P({uuid:e.uuid}),className:N.displayName,style:{display:"inline-flex",paddingBottom:"4px",color:e.colorIndex||0===e.colorIndex?i.KAW[e.colorIndex||0][y?"dark":"light"]:e.color,cursor:"pointer"},children:S?(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsxs)("div",{children:["@",S," "]})," ",i.iqE.includes(e.uuid)?(0,o.jsx)(m.fI,{}):null]}):(0,o.jsx)(R.Z,{width:50,height:16,style:{marginTop:"0px"}})}),(0,o.jsxs)("div",{className:`${N.messageContainer} ${N.hoverParent}`,style:{display:"flex"},children:[(0,o.jsxs)("div",{children:[e.parent_message_author_uuid?(0,o.jsx)("div",{style:{},children:(0,o.jsx)(Ye,{marginBottom:0,padding:0,parent_username:e.parent_message_author_username||"",showCloseBtn:!1,text:e.parent_message_text})}):null,(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:N.messageContent,children:e.deleted?(0,o.jsx)(ut,{}):"gif"===e.messageKind?(0,o.jsx)("div",{style:{height:150,maxWidth:220,overflow:"hidden"},children:(0,o.jsx)(at,{id:E,height:150})}):"secure-transfer"===e.messageKind?(0,o.jsx)(ct,{messageId:e.messageId,senderUuid:e.uuid,escrow:e.metadata.escrow,counter:e.metadata.counter,currentState:e.metadata.current_state,remoteUsername:e.username,finalTxId:e.metadata.final_txn_signature}):"transaction"===e.messageKind?(0,o.jsx)(et,{remoteUserId:e.uuid,message:E,txnSignature:null===(u=e.metadata)||void 0===u?void 0:u.final_tx_signature}):"nft-sticker"===e.messageKind?(0,o.jsx)("div",{children:(0,o.jsx)(Ve,{mint:null===(p=e.metadata)||void 0===p?void 0:p.mint,uuid:e.uuid,displayName:S})}):"media"===e.messageKind?(0,o.jsxs)("div",{children:[(0,o.jsx)(qe,{mediaLink:null===(g=e.metadata)||void 0===g?void 0:g.media_link,mediaKind:null===(f=e.metadata)||void 0===f?void 0:f.media_kind}),(0,o.jsx)(Ge,{message:E})]}):(0,o.jsx)(Ge,{message:E})})})]}),e.deleted?null:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:"text"===e.messageKind?(0,o.jsxs)("div",{style:{display:"flex"},className:N.hoverChild,children:[(0,o.jsx)("div",{style:{marginLeft:10,marginTop:3,cursor:"pointer"},className:N.hoverChild,onClick:()=>{var t;F({parent_client_generated_uuid:e.client_generated_uuid,text:E,parent_username:`@${e.username}`,parent_message_author_uuid:e.userId}),null===(t=document.getElementById(ze))||void 0===t||t.focus()},children:(0,o.jsx)(Ue,{fill:j.custom.colors.icon})}),(0,o.jsx)("div",{style:{marginLeft:3},children:(0,o.jsx)(mt,{client_generated_uuid:e.client_generated_uuid,messageSender:e.uuid})})]}):(0,o.jsxs)("div",{style:{marginLeft:5},className:N.hoverChild,children:[" ",(0,o.jsx)(mt,{client_generated_uuid:e.client_generated_uuid,messageSender:e.uuid})," "]})})]})]}),(0,o.jsxs)("div",{style:{minWidth:63},children:[(0,o.jsx)("div",{className:N.messageTimeStampRight,children:(0,i.WrV)(k)}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",marginTop:5},children:T?(0,o.jsx)(ye.Z,{style:{fontSize:13,color:"green"}}):(0,o.jsx)(xe.Z,{style:{color:j.custom.colors.icon,fontSize:13}})})]})]})]})})};function ct({escrow:e,senderUuid:t,counter:n,messageId:r,currentState:c,remoteUsername:u,finalTxId:p}){var g;const[f,x]=(0,l.useState)(c),[y,v]=(0,l.useState)(p),{username:b,uuid:E}=(0,a.aFb)(),[k,w]=(0,l.useState)(!0),{roomId:C}=h(),{provider:S,connection:T}=(0,a.EFU)(),R=(0,a.cPJ)(),j=(0,d.Pg)(),I=rt(),N=(0,a.G5b)(),[F,P]=(0,l.useState)(!1),[L,A]=(0,l.useState)(null);(0,l.useEffect)((()=>{k||L||"pending"!==f||(0,s.Es)(E,C,"individual",r)}),[c,r,L,k]),(0,l.useEffect)((()=>{x(c)}),[c]),(0,l.useEffect)((()=>{p&&v(p)}),[p]);const[B]=(0,a.U2V)((0,a.b00)({publicKey:null==R?void 0:R.publicKey,blockchain:i.$OA.SOLANA,tokenAddress:null==R?void 0:R.publicKey}),null);return(0,l.useEffect)((()=>{(async()=>{const t=await Ne(S,e);A(t),w(!1)})()}),[e]),(0,o.jsxs)("div",{className:I.secureSendOuter,id:"asdasd",children:[k?(0,o.jsx)("div",{children:"Loading"}):null,!k&&L?(0,o.jsxs)("div",{style:{paddingLeft:5,paddingRight:5},children:[E===t?(0,o.jsxs)("div",{style:{display:"flex",color:j.custom.colors.icon,marginBottom:5},children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:3},children:(0,o.jsx)(he.Z,{style:{color:j.custom.colors.icon,fontSize:15}})}),(0,o.jsxs)("div",{children:[" Sending to @",u]})]}):(0,o.jsxs)("div",{style:{display:"flex",color:j.custom.colors.icon,marginBottom:5},children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:3},children:(0,o.jsx)(te.Z,{style:{color:j.custom.colors.icon,fontSize:15}})}),(0,o.jsxs)("div",{children:["Payment from @",u]})]}),(0,o.jsxs)("div",{className:I.secureSendInner,children:[(0,o.jsxs)("div",{style:{fontSize:30,display:"flex"},children:["$",(0,o.jsx)("div",{children:(((null===(g=null==B?void 0:B.priceData)||void 0===g?void 0:g.usd)||0)*parseInt(L.amount)/be.LAMPORTS_PER_SOL).toFixed(2)})]}),(0,o.jsxs)("div",{style:{display:"flex",marginTop:3},children:[(0,o.jsx)("img",{src:a.Wsp,style:{width:20,height:20,borderRadius:8,marginRight:5}})," ",(0,o.jsxs)("div",{children:[" ",parseInt(L.amount)/be.LAMPORTS_PER_SOL]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:8},children:[E===t?(0,o.jsx)("div",{children:F?null:(0,o.jsx)("div",{style:{color:"#F8C840",background:"rgba(206, 121, 7, 0.2)",borderRadius:16,padding:"4px 10px",display:"flex"},children:(0,o.jsxs)("div",{style:{marginLeft:5,justifyContent:"center",flexDirection:"column",display:"flex"},children:["Waiting for ",u]})})}):null,E===t?(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)("div",{style:{color:j.custom.colors.background,cursor:F?"auto":"pointer",fontSize:15,marginTop:2},onClick:async()=>{P(!0);const t=await async function(e,t,n,o,l,i,r){const a=Fe(e),s=(0,ke.findProgramAddressSync)([l.toBuffer()],a.programId),c=await a.methods.cancel(o,new Ee.BN(r)).accounts({authority:l,escrow:i,secureTransfer:s[0]}).transaction();return await Ie(t,n,c,l.toString())}(S,N,T,new be.PublicKey((null==L?void 0:L.receiver)||""),new be.PublicKey((null==L?void 0:L.sender)||""),new be.PublicKey(e),n);fetch(`${i.FvS}/chat/message?type=individual&room=${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:r,state:"cancelled",txn:t})}),v(t),x("cancelled"),A(null),P(!1)},children:F?"Cancelling...":"Cancel"})]}):(0,o.jsx)(m.UW,{style:{height:38},onClick:async()=>{P(!0);try{const t=await async function(e,t,n,o,l,i,r){const a=Fe(e),s=await a.methods.redeem(new Ee.BN(r)).accounts({escrow:i,sender:l,receiver:o}).transaction();return await Ie(t,n,s,o.toString())}(S,N,T,new be.PublicKey(L.receiver),new be.PublicKey(L.sender),new be.PublicKey(e),n);fetch(`${i.FvS}/chat/message?type=individual&room=${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:r,state:"redeemed",txn:t})}),v(t),x("redeemed"),A(null),P(!1)}catch(e){console.error(e),P(!1)}},label:F?"Accepting...":"Accept"})]})]}):null,k||L?null:(0,o.jsxs)("div",{style:{fontSize:14},children:[(0,o.jsx)("div",{children:"redeemed"===f?`Escrow redeemed by ${u!==b?"you":u} `:`Escrow cancelled by ${u===b?"you":u}`}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,o.jsxs)("div",{className:I.smallBtn,style:{display:"flex",marginTop:4,padding:"3px 7px",fontSize:12,background:"redeemed"===f?"rgba(17, 168, 0, 0.2)":"rgba(241, 50, 54, 0.2)",color:"redeemed"===f?"#52D24C":"#FF6269",marginLeft:10},onClick:()=>(0,z.x)(`https://explorer.solana.com/tx/${y}`,"mywindow"),children:[(0,o.jsx)("div",{children:"Txn "}),(0,o.jsx)(D.Z,{style:{fontSize:15}})]})})]})]})}function dt(){const{chats:e,userId:t}=h(),n=(0,d.Pg)();return(0,o.jsx)("div",{style:{paddingLeft:18,paddingRight:18},children:e.map(((t,l)=>{var i,r,a;return(0,o.jsx)(st,{received:t.received,sameUserMessage:(null===(i=e[l])||void 0===i?void 0:i.uuid)&&l>0&&l<e.length?(null===(r=e[l])||void 0===r?void 0:r.uuid)===(null===(a=e[l-1])||void 0===a?void 0:a.uuid):null,parent_message_author_username:t.parent_message_author_username,parent_message_text:t.parent_message_text,parent_message_author_uuid:t.parent_message_author_uuid,client_generated_uuid:t.client_generated_uuid,color:t.color||n.custom.colors.fontColor2,colorIndex:t.colorIndex,timestamp:t.created_at,message:t.message,deleted:t.deleted,messageKind:t.message_kind,image:t.image,username:t.username,uuid:t.uuid,userId:t.uuid,metadata:t.message_metadata,messageId:t.client_generated_uuid},t.client_generated_uuid)}))})}function mt({client_generated_uuid:e,messageSender:t}){const{roomId:n,type:l}=h(),r=(0,d.Pg)(),{uuid:c}=(0,a.aFb)();return(0,o.jsx)("div",{children:i.iqE.includes(c)?(0,o.jsx)(fe.Z,{style:{color:r.custom.colors.icon,cursor:"pointer"},onClick:()=>{s.VK.getInstance().send({type:i.wJn,payload:{client_generated_uuid:e,room:n,type:l}})}}):null})}function ut(){const e=(0,d.Pg)();return(0,o.jsxs)("div",{style:{background:e.custom.colors.background,color:e.custom.colors.icon,borderRadius:5,display:"inline-flex",padding:"2px 6px",marginLeft:-6,alignItems:"center"},children:[(0,o.jsx)("span",{children:"Message removed"}),(0,o.jsx)(ve.Z,{title:"This was probably spam",children:(0,o.jsx)(re.Z,{style:{fontSize:"1rem",marginLeft:4,color:e.custom.colors.icon}})})]})}function pt(){return(0,d.Pg)(),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(gt,{}),(0,o.jsx)(gt,{}),(0,o.jsx)(gt,{}),(0,o.jsx)(gt,{})]})}function gt(){const e=(0,d.Pg)();return(0,o.jsx)("div",{onClick:()=>{},style:{paddingLeft:"19px",paddingRight:"19px",paddingTop:"10px",paddingBottom:"10px",display:"flex",height:"68px",backgroundColor:e.custom.colors.nav,marginBottom:10},children:(0,o.jsxs)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center"},children:[(0,o.jsx)("div",{style:{width:40},children:(0,o.jsx)(R.Z,{variant:"circular",width:40,height:40})}),(0,o.jsxs)("div",{style:{marginLeft:"5px",width:"100%"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(R.Z,{width:"40%",height:20,style:{marginTop:"-6px"}}),(0,o.jsx)(R.Z,{width:30,height:20,style:{marginTop:"-6px"}})]}),(0,o.jsx)(R.Z,{width:"70%",height:20,style:{marginTop:"-6px"}})]})]})})}var ht=n(67322),ft=n(73557);const xt=({inputRef:e,children:t,offlineMembers:n})=>{var r;const s=(0,ft.TH)().pathname,{type:c,remoteUsername:d,remoteUserId:m}=h(),{roomId:u}=h(),{props:p}=(0,a.Dtc)(),[g,f]=(0,l.useState)(!1),x=[{query:/@([a-zA-Z0-9_-]+)?/,match:/<(@\w+)\|([^>]+)>/g,matchDisplay:"$1",customizeFragment:(e,t)=>{e.className=t?"final":"pending"},onMention:async e=>{const t=e.substr(1);if("individual"===c)return n.map((e=>({name:e.username,id:e.uuid,ref:`<@${e.username}|u${e.uuid}>`}))).filter((e=>e.name.includes(t)));if(t.length<=1)return n.map((e=>({name:e.username,id:e.uuid,ref:`<@${e.username}|u${e.uuid}>`}))).filter((e=>e.name.includes(t)));const o=await fetch(`${i.FvS}/nft/members?room=${"/messages/groupchat"===s?p.id:p.collectionId}&mint=${p.nftMint}&type=collection&limit=3&prefix=${t}`,{method:"GET"});try{const e=await o.json(),l=(null==e?void 0:e.members)||[];return[...n.map((e=>({name:e.username,id:e.uuid,ref:`<@${e.username}|u${e.uuid}>`}))).filter((e=>e.name.includes(t))),...l.map((e=>({name:e.username,id:e.id,ref:`<@${e.username}|u${e.id}>`})))]}catch(e){return console.error(e),[]}}}];return(0,l.useEffect)((()=>{f(!0),setTimeout((()=>{f(!1)}),10)}),[u]),g||n.length&&!(null===(r=n[0])||void 0===r?void 0:r.username)?(0,o.jsx)(o.Fragment,{children:t}):(0,o.jsx)($e.Em,{configs:x,getContext:e,children:t})},yt=({setPluginMenuOpen:e})=>{const{setOpenPlugin:t,setAboveMessagePlugin:n,sendMessage:l}=h(),i=(0,d.Pg)(),{isXs:r}=(0,a.kCD)();return(0,o.jsxs)("div",{style:{padding:r?10:20},children:[(0,o.jsx)("div",{style:{display:"flex"},children:(0,o.jsxs)("div",{style:{flex:1,display:"flex",marginTop:10,paddingLeft:r?10:0},children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",fontSize:18,color:i.custom.colors.fontColor},children:"NFT Stickers"}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)(ve.Z,{title:"Made from your NFTs",children:(0,o.jsx)(re.Z,{style:{fontSize:"1.2rem",marginLeft:4,color:i.custom.colors.icon}})})})]})}),(0,o.jsx)("div",{style:{position:"relative",height:200},children:(0,o.jsx)(x,{height:"100%",children:(0,o.jsx)("div",{style:{height:"100%"},children:(0,o.jsx)("div",{children:(0,o.jsx)(A,{localSelection:[],rounded:!0,onSelect:o=>{l("NFT Sticker","nft-sticker",{mint:o.mint||""}),n({type:"",metadata:{}}),t(""),e(!1)}})})})})})]})},vt=({sendMessage:e,setAboveMessagePlugin:t,setPluginMenuOpen:n})=>{const{aboveMessagePlugin:l}=h(),i=(0,d.Pg)();return(0,o.jsxs)("div",{style:{background:i.custom.colors.bg3,borderRadius:12,boxShadow:"0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:["secure-transfer"===l.type?(0,o.jsx)(Et,{sendMessage:e,setAboveMessagePlugin:t}):null,"nft-sticker"===l.type?(0,o.jsx)(bt,{setPluginMenuOpen:n}):null]})};function bt({setPluginMenuOpen:e}){return(0,o.jsx)("div",{children:(0,o.jsx)(yt,{setPluginMenuOpen:e})})}function Et({sendMessage:e,setAboveMessagePlugin:t}){const{provider:n,connection:r}=(0,a.EFU)(),{remoteUserId:s}=h(),c=(0,a.G5b)(),{publicKey:u}=(0,a.cPJ)(),[p,g]=(0,l.useState)(!0),[f,x]=(0,l.useState)([]),y=(0,d.Pg)(),[v,b]=(0,l.useState)(""),[E,k]=(0,l.useState)("0"),[w,C]=(0,l.useState)(!1),[S]=(0,a.U2V)((0,a.b00)({publicKey:u,blockchain:i.$OA.SOLANA,tokenAddress:u}),null);return(0,l.useEffect)((()=>{s&&(async e=>{g(!0);try{const t=await fetch(`${i.FvS}/users/userById?remoteUserId=${e}`),n=(await t.json()).user.publicKeys.filter((e=>e.blockchain===i.$OA.SOLANA)).map((e=>e.publicKey));x(n),b(n[0])}catch(e){console.error(e)}g(!1)})(s)}),[s]),(0,o.jsxs)("div",{style:{background:y.custom.colors.invertedPrimary,padding:10,borderRadius:12,marginBottom:3},children:[(0,o.jsxs)("div",{style:{marginBottom:10},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:5,fontSize:13},children:[(0,o.jsx)("div",{style:{color:y.custom.colors.background},children:"Amount"}),(0,o.jsxs)("div",{style:{color:y.custom.colors.background,cursor:"pointer"},onClick:()=>{var e;k((parseInt((null===(e=null==S?void 0:S.nativeBalance)||void 0===e?void 0:e.toString())||"0")/be.LAMPORTS_PER_SOL).toString())},children:["Max:"," ",(null==S?void 0:S.nativeBalance)?(0,i.Our)(null==S?void 0:S.nativeBalance,(null==S?void 0:S.decimals)||0):"-"]})]}),(0,o.jsx)(j.Z,{sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:y.custom.colors.invertedSecondary,borderRadius:6},"&:hover fieldset":{borderColor:y.custom.colors.invertedSecondary},"&.Mui-focused fieldset":{borderColor:"#4C94FF"}},input:{padding:"12px 12px",color:y.custom.colors.background,background:y.custom.colors.invertedSecondary,borderRadius:6}},fullWidth:!0,margin:"none",value:E,onChange:e=>k(e.target.value)})]}),(0,o.jsx)(m.tf,{label:p||v?w?"Sending Secure transfer...":"Secure transfer SOL":"User doesn't have an active pubkey set",disabled:p||!v||w,onClick:async()=>{if(v&&f.includes(v)&&E){C(!0);try{const{signature:t,counter:o,escrow:l}=await je(n,c,r,E,new be.PublicKey(u),new be.PublicKey(v));e("Secure transfer","secure-transfer",{signature:t,counter:o,escrow:l,current_state:"pending"}),m.Am.success("",`Created secure transfer for ${E} SOL`)}catch(e){console.error(e)}C(!1),t("")}}})]})}var kt=n(9128);const wt=({buttonStyle:e,onMediaSelect:t})=>{const n=(0,d.Pg)(),i=(0,l.useRef)();return(0,l.useEffect)((()=>{i&&i.current&&(i.current.onchange=()=>{const e=i.current.files[0];t(e)})}),[]),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsxs)(me.Z,{size:"small",sx:{color:n.custom.colors.icon,"&:hover":{background:`${n.custom.colors.avatarIconBackground} !important`}},style:e,onClick:async e=>{i.current.click()},children:[" ",(0,o.jsx)(ve.Z,{title:"Attach",children:(0,o.jsx)(kt.Z,{style:{color:n.custom.colors.icon,fontSize:20}})}),(0,o.jsx)("input",{onClick:e=>{e.target.value=null},ref:i,type:"file",id:"hiddenAttachment",style:{display:"none"},accept:".mp4,.png,.jpg,.jpeg"})]})})},Ct=((0,d.W2)((e=>({}))),({buttonStyle:e})=>{const t=(0,d.Pg)(),{setOpenPlugin:n}=h();return(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsxs)(me.Z,{size:"small",sx:{color:t.custom.colors.icon,"&:hover":{background:`${t.custom.colors.avatarIconBackground} !important`}},style:e,onClick:e=>{n((e=>"barter"===e.type?{type:"",metadata:{}}:{type:"barter",metadata:{}}))},children:[" ",(0,o.jsx)(m.Br,{fill:t.custom.colors.icon})," "]})})});var St=n(73074),Tt=n(74352),Rt=n(1927);const jt=({setEmojiPicker:e,emojiPicker:t,setGifPicker:n,buttonStyle:i,inputRef:r})=>{const a=(0,d.Pg)(),[s,c]=(0,l.useState)(null),{isDarkMode:m}=h();return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,o.jsx)(ve.Z,{title:"Emoji",children:(0,o.jsxs)(me.Z,{size:"small",sx:{color:a.custom.colors.icon,"&:hover":{background:`${a.custom.colors.avatarIconBackground} !important`}},style:i,onClick:o=>{e((e=>!e)),t||n(!1),c(o.currentTarget)},children:[" ",(0,o.jsx)(St.Z,{style:{color:a.custom.colors.icon,fontSize:20}})," "]})}),(0,o.jsx)(Tt.ZP,{id:"popover",open:t,anchorEl:s,onClose:()=>e(!1),anchorOrigin:{vertical:"top",horizontal:"right"},style:{marginBottom:10},children:(0,o.jsx)(Rt.ZP,{previewConfig:{showPreview:!1},theme:m?Rt.Q2.DARK:Rt.Q2.LIGHT,height:400,width:"100%",onEmojiClick:e=>{r.current.setValue(`${r.current.getTransformedValue()} ${e.emoji}`)}})})]})};var It=n(98345),Nt=n(31563),Ft=n(11188);const Pt=new pe.GiphyFetch("SjZwwCn1e394TKKjrMJWb2qQRNcqW8ro");let Lt;const At=(0,d.W2)((e=>({searchField:{width:"inherit",display:"flex",marginTop:0,"& .MuiOutlinedInput-root":{"& input":{paddingTop:10,paddingBottom:10}}}}))),Bt=({setGifPicker:e,gifPicker:t,setEmojiPicker:n,sendMessage:i,buttonStyle:r})=>{const a=(0,d.Pg)(),[s,c]=(0,l.useState)(null),[u,p]=(0,l.useState)(!1),[g,h]=(0,l.useState)(""),f=At();return(0,l.useEffect)((()=>{clearTimeout(Lt),Lt=setTimeout((()=>{p(!0),setTimeout((()=>{p(!1)}),250)}),400)}),[g]),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[(0,o.jsx)(ve.Z,{title:"GIF",children:(0,o.jsxs)(me.Z,{size:"small",sx:{color:a.custom.colors.icon,"&:hover":{background:`${a.custom.colors.avatarIconBackground} !important`}},style:r,onClick:o=>{e((e=>!e)),t||n(!1),c(o.currentTarget)},children:[" ",(0,o.jsx)(It.Z,{style:{color:a.custom.colors.icon,fontSize:20}})," "]})}),(0,o.jsx)(Tt.ZP,{id:"popover2",open:t,anchorEl:s,onClose:()=>e(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,o.jsxs)("div",{style:{maxWidth:400,background:a.custom.colors.background,padding:5},children:[(0,o.jsx)(m.oi,{startAdornment:(0,o.jsx)(Ft.Z,{position:"start",children:(0,o.jsx)(Nt.Z,{style:{color:a.custom.colors.icon}})}),placeholder:"Search for GIFs",className:f.searchField,value:g,setValue:e=>h(e.target.value)}),u?(0,o.jsx)("div",{style:{height:100}}):null,u?null:(0,o.jsx)(ge.Carousel,{onGifClick:(t,n)=>{i(t.id,"gif"),e(!1),n.preventDefault()},gifHeight:100,gutter:6,fetchGifs:e=>g?Pt.search(g,{limit:10,offset:e}):Pt.trending({limit:10,offset:e})})]})})]})},Zt=({buttonStyle:e,setAboveMessagePlugin:t,setPluginMenuOpen:n})=>{const l=(0,d.Pg)();return(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)(ve.Z,{title:"NFT stickers",children:(0,o.jsx)(me.Z,{onClick:()=>{t((e=>"nft-sticker"===e.type?{type:"",metadata:{}}:{type:"nft-sticker",metadata:{}}))},size:"small",sx:{color:l.custom.colors.icon,cursor:"pointer"},style:e,children:(0,o.jsx)(m.Sl,{fill:l.custom.colors.icon})})})})};n(77975);const Ot=(0,k.Z)((e=>(0,w.Z)({outerDiv:{padding:2,background:e.custom.colors.listItemHover,backdropFilter:"blur(6px)",borderRadius:8,margin:12},text:{color:e.custom.colors.fontColor2},wrapText:{width:"100%"},textFieldRoot:{color:e.custom.colors.secondary,"& .MuiOutlinedInput-root":{padding:0,"border-top-right-radius":10,"border-top-left-radius":10,"& fieldset":{border:"none"}},"& .MuiInputBase-input":{padding:"10px 12px 10px 12px",fontSize:"15px"}},textFieldInputColorEmpty:{color:e.custom.colors.textPlaceholder},textFieldInputColor:{color:e.custom.colors.fontColor2},icon:{color:e.custom.colors.icon},textInputRoot:{"border-top-right-radius":10,"border-top-left-radius":10,color:e.custom.colors.fontColor2,fontWeight:500,borderRadius:"12px",fontSize:"16px",lineHeight:"24px","& .MuiOutlinedInput-root":{"& .Mui-focused .MuiOutlinedInput-notchedOutline":{outline:"none"},"&:active":{outline:"none"},outline:"none"}}}))),$t=({uploadingFile:e,setUploadingFile:t,selectedFile:n,setSelectedFile:i,onMediaSelect:r,selectedMediaKind:c,uploadedImageUri:m,pluginMenuOpen:u,setPluginMenuOpen:p})=>{var g;const f=Ot(),{uuid:x}=(0,a.aFb)(),[y,v]=(0,l.useState)(!1),[b,k]=(0,l.useState)(!1),w=(0,a.fwt)(),C=(0,d.Pg)(),{setOpenPlugin:S,aboveMessagePlugin:T,setAboveMessagePlugin:R,inputRef:j,sendMessage:I,remoteUserId:N,remoteUsername:F,activeReply:P,type:L,chats:A}=((0,a.cPJ)(),h()),B=(0,s.RS)({remoteUserIds:[N]}),Z=null===(g=null==B?void 0:B[0])||void 0===g?void 0:g.image;return(0,l.useEffect)((()=>{function e(e){"Enter"===e.key&&(e.preventDefault(),I(j.current.getTransformedValue()),v(!1)),"Escape"===e.key&&(e.preventDefault(),v(!1),k(!1))}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[j,n,m,c,P,A]),(0,o.jsx)(xt,{inputRef:j,offlineMembers:(()=>{if("individual"===L)return[{uuid:N,username:F,image:Z}];const e={};return A.map((t=>{t.uuid!==x&&(e[t.uuid]=t)})),Object.keys(e).map((t=>e[t]))})().slice(0,5),children:(0,o.jsxs)("div",{className:f.outerDiv,children:[n?(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{background:C.custom.colors.bg3},children:[(0,o.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"row-reverse"},children:(0,o.jsx)(ht.Z,{style:{color:C.custom.colors.icon,cursor:"pointer",marginRight:5,marginTop:5},onClick:()=>{i(null),t(!1)}})}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:"image"===c?(0,o.jsx)("img",{style:{maxHeight:300,maxWidth:300},src:n}):(0,o.jsx)("video",{style:{maxHeight:300,maxWidth:300},controls:!0,src:n})}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:3},children:e?(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsxs)("div",{style:{marginRight:5,color:C.custom.colors.fontColor},children:["Uploading"," "]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(oe.Z,{size:20,color:"secondary"})," "]})," "]}):null})]})}):null,P.parent_client_generated_uuid?(0,o.jsx)(Ye,{marginBottom:6,padding:12,parent_username:P.parent_username||"",showCloseBtn:!0,text:P.text}):null,T?(0,o.jsx)(vt,{setPluginMenuOpen:p,sendMessage:I,setAboveMessagePlugin:R}):null,(0,o.jsx)(_e,{}),(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:5},children:(0,o.jsx)(me.Z,{disableRipple:!0,size:"small",sx:{color:"#555C6B","&:hover":{backgroundColor:`${C.custom.colors.hoverIconBackground} !important`}},onClick:()=>{u&&R({type:"",metadata:{}}),p(!u)},children:u?(0,o.jsx)(E.Z,{style:{fontSize:24}}):(0,o.jsx)(_.Z,{style:{fontSize:24}})})}),(0,o.jsx)(Me,{onMediaSelect:r,setPluginMenuOpen:p})]}),u?(0,o.jsxs)("div",{style:{display:"flex",marginLeft:8,paddingBottom:5},children:[(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}}),(0,o.jsx)(jt,{setEmojiPicker:v,emojiPicker:y,setGifPicker:k,inputRef:j,buttonStyle:{height:"28px"}}),(0,o.jsx)(Bt,{sendMessage:I,setGifPicker:k,gifPicker:b,setEmojiPicker:v,buttonStyle:{height:"28px"}}),(0,o.jsx)(wt,{onMediaSelect:r,buttonStyle:{height:"28px"}}),w.STICKER_ENABLED?(0,o.jsx)(Zt,{buttonStyle:{height:"28px"},setPluginMenuOpen:p,setAboveMessagePlugin:R}):null,"individual"===L&&w.BARTER_ENABLED?(0,o.jsx)(Ct,{setOpenPlugin:S,onMediaSelect:r,buttonStyle:{height:"28px"}}):null,null]}):null]})})},Dt=({setLocalUnreadCount:e,messageRef:t,setMessageRef:n,jumpToBottom:r,setShowJumpToBottom:a,localUnreadCount:c})=>{const{loading:m,chats:u,userId:p,roomId:g,type:f,nftMint:y,publicKey:v,selectedFile:b,setSelectedFile:E,uploadingFile:k,setUploadingFile:w,selectedMediaKind:C,setSelectedMediaKind:S,uploadedImageUri:T,setUploadedImageUri:R}=h(),[j,I]=(0,l.useState)(!0),N=(0,d.Pg)(),F=(0,l.useRef)([]),[P,L]=(0,l.useState)(!1),[A,B]=(0,l.useState)(!1),{getRootProps:Z,getInputProps:O,isDragAccept:$}=(0,ee.uI)({onDrop:e=>{const t=e[0];D(t)}});(0,l.useEffect)((()=>{var e;t&&j&&(JSON.stringify(F.current||[])!==JSON.stringify(u)&&(null===(e=null==t?void 0:t.scrollToBottom)||void 0===e||e.call(t),setTimeout((()=>{var e;t&&(null===(e=null==t?void 0:t.scrollToBottom)||void 0===e||e.call(t))}),500)),F.current=u)}),[u,j]);const D=e=>{const t=e.type.split("/")[0];if("image"===t||"video"===t){let t=new FileReader;t.onload=t=>{var n,o;S(e.name.endsWith("mp4")?"video":"image"),E(null===(n=t.target)||void 0===n?void 0:n.result),(async(e,t)=>{try{w(!0);const n=await fetch(`${i.FvS}/s3/signedUrl`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t})}),o=await n.json();await fetch(o.uploadUrl,{method:"PUT",body:(0,ie.R)(e)}),w(!1),R(o.url)}catch(e){w(!1)}})(null===(o=t.target)||void 0===o?void 0:o.result,e.name)},t.readAsDataURL(e)}};return(0,o.jsxs)("div",{...Z({onClick:e=>e.stopPropagation(),style:{display:"flex",flexFlow:"column",height:"100%",position:"relative",background:N.custom.colors.chatFadeGradient}}),children:[$?(0,o.jsx)(zt,{}):null,(0,o.jsx)("div",{id:"messageContainer",style:{height:"calc(100% - 50px)"},children:(0,o.jsx)(x,{onScrollStop:async()=>{var n,o;const l=null===(o=null===(n=null==t?void 0:t.container)||void 0===n?void 0:n.children)||void 0===o?void 0:o[0];if(l&&(l.scrollHeight-l.scrollTop-l.clientHeight<=1?(I(!0),a(!1),window.setTimeout((()=>{e(0)}),150)):(j&&I(!1),l.scrollHeight-l.scrollTop-l.clientHeight>500&&a(!0)),0===l.scrollTop)){L(!0);try{await(0,s.Jz)(p,g,f,y,v)}catch(e){console.error(e)}L(!1)}},setRef:n,height:"calc(100% - 50px)",children:(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{paddingBottom:20,transform:A?"translate(0, -35px)":void 0},children:[(0,o.jsx)("input",{...O()}),(0,o.jsxs)("div",{children:[P?(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:3,marginTop:3},children:[" ",(0,o.jsx)(oe.Z,{size:20})," "]}):null,(0,o.jsx)(se,{}),m?(0,o.jsx)(pt,{}):null,m||0!==(null==u?void 0:u.length)?null:(0,o.jsx)(ue,{}),m||0===(null==u?void 0:u.length)?null:(0,o.jsx)(dt,{})]})]})})})}),(0,o.jsx)("div",{style:{position:"absolute",bottom:70,right:0,transition:"visibility 0.1s",visibility:r?"visible":"hidden"},children:(0,o.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",marginRight:10},children:(0,o.jsxs)("div",{style:{fontSize:12,fontWeight:500,display:"inline-flex",cursor:"pointer",padding:"8px 12px 8px 16px",background:N.custom.colors.invertedPrimary,color:N.custom.colors.background,borderRadius:16},onClick:()=>{var e;return null===(e=null==t?void 0:t.scrollToBottom)||void 0===e?void 0:e.call(t)},children:[c?1===c?"1 unread message":`${c} unread messages`:"Jump to bottom"," ",(0,o.jsx)(te.Z,{style:{color:N.custom.colors.icon,fontSize:14,marginTop:2,marginLeft:2}})]})})}),(0,o.jsx)("div",{style:{position:"absolute",bottom:0,width:"100%"},children:(0,o.jsx)($t,{uploadingFile:k,setUploadingFile:w,selectedFile:b,setSelectedFile:E,onMediaSelect:D,uploadedImageUri:T,selectedMediaKind:C,pluginMenuOpen:A,setPluginMenuOpen:B})})]})};function zt(){const e=(0,d.Pg)();return(0,o.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",background:`${e.custom.colors.nav}85`,backdropFilter:"blur(20px)",zIndex:50,display:"flex",justifyContent:"center"},children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"80%",textAlign:"center",alignItems:"center",justifyContent:"center"},children:[(0,o.jsx)(ne.Z,{sx:{color:e.custom.colors.icon,fontSize:"38px",mb:"8px"}}),(0,o.jsx)(le.Z,{fontSize:"24px",sx:{color:e.custom.colors.fontColor,mb:"8px"},children:"Upload"}),(0,o.jsx)(le.Z,{sx:{color:e.custom.colors.fontColor3},children:"Drop photos, GIFs, and videos anywhere to upload."})]})})}const Mt=({roomId:e,userId:t,username:n,remoteUsername:d,type:m="collection",mode:p="fullscreen",areFriends:h=!0,requested:f=!1,remoteUserId:x,blocked:y,spam:v,setRequested:b,setSpam:E,setBlocked:k,isDarkMode:w,remoteRequested:C=!1,nftMint:S,publicKey:T})=>{const[R,j]=(0,l.useState)(!1),I=(0,l.useRef)(),{uuid:N}=(0,a.aFb)(),[F,P]=(0,l.useState)(null),[L,A]=(0,l.useState)({parent_username:"",parent_client_generated_uuid:null,parent_message_author_uuid:"",text:""}),{chats:B,usersMetadata:Z}=(0,s.dU)({room:e,type:m}),[O,$]=(0,l.useState)(!0),[D,z]=(0,l.useState)(null),[M,_]=(0,l.useState)(!1),[U,K]=(0,l.useState)(0),[W,q]=(0,l.useState)({type:"",metadata:{}}),[H,V]=(0,l.useState)({type:"",metadata:{}}),[G,J]=(0,l.useState)(null),[Y,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)("image"),[ne,oe]=(0,l.useState)(""),le=(0,l.useRef)(null);return(0,l.useEffect)((()=>{e&&($(!0),(0,s.d$)(t,e,m,S,T).then((()=>{$(!1)})).catch((e=>{$(!1)})),(0,s.yA)(t,e,m,S||"",T).catch((e=>{console.error("error while updating "),console.error(e)})))}),[e,t,m]),(0,l.useEffect)((()=>(e&&s.VK.getInstance().send({type:i.kDn,payload:{type:m,room:e,mint:S,publicKey:T}}),()=>{})),[e]),(0,l.useEffect)((()=>{var e,t,n,o,l,i,r,a,c,d,m,u;if(I.current&&JSON.stringify(B)===JSON.stringify(I.current))return;if(B&&B.length&&s.VK.getInstance().debouncedUpdateLastRead(B[B.length-1],T,S),I.current&&(null===(e=I.current[0])||void 0===e?void 0:e.client_generated_uuid)!==(null===(t=B[0])||void 0===t?void 0:t.client_generated_uuid)){const e=null===(o=null===(n=null==D?void 0:D.container)||void 0===n?void 0:n.children)||void 0===o?void 0:o[0];e&&P(e.scrollHeight-(e.scrollTop||100))}const p=null===(i=null===(l=null==D?void 0:D.container)||void 0===l?void 0:l.children)||void 0===i?void 0:i[0];let g=B?(null==B?void 0:B.length)-1:0;if(p&&(null===(a=null===(r=I.current)||void 0===r?void 0:r[I.current.length-1])||void 0===a?void 0:a.client_generated_uuid)!==(null===(c=B[g])||void 0===c?void 0:c.client_generated_uuid)&&p.scrollHeight-p.scrollTop-p.clientHeight>10){for(;g>0&&(null===(m=null===(d=I.current)||void 0===d?void 0:d[I.current.length-1])||void 0===m?void 0:m.client_generated_uuid)!==(null===(u=B[g])||void 0===u?void 0:u.client_generated_uuid)&&!B[g].from_http_server&&B[g].uuid!==N;)g--;K((e=>e+B.length-1-g))}I.current=B}),[B]),(0,l.useLayoutEffect)((()=>{var e,t;if(F||0===F){const n=null===(t=null===(e=null==D?void 0:D.container)||void 0===e?void 0:e.children)||void 0===t?void 0:t[0];n&&(n.scrollTop=n.scrollHeight-F)}P(null)}),[F,B]),(0,o.jsx)(g,{activeReply:L,setActiveReply:A,loading:!B||0===B.length&&O,roomId:e,chats:B||[],userId:t,username:n,areFriends:h,requested:f,remoteRequested:C,remoteUserId:x||"",type:m,spam:v,blocked:y,setRequested:b,setSpam:E,setBlocked:k,isDarkMode:w,remoteUsername:d,reconnecting:R,nftMint:S,publicKey:T,usersMetadata:Z,openPlugin:W,setOpenPlugin:q,aboveMessagePlugin:H,setAboveMessagePlugin:V,selectedFile:G,setSelectedFile:J,uploadingFile:Y,setUploadingFile:X,inputRef:le,selectedMediaKind:ee,setSelectedMediaKind:te,uploadedImageUri:ne,setUploadedImageUri:oe,sendMessage:async(t,n="text",o)=>{var l,a;if((!G||!Y)&&(t||G)){G&&(n="media",o={media_kind:ee,media_link:ne},J(null));const u=(0,c.Z)();0===B.length&&"individual"===m&&(await(0,r.qY)(N,x||"",{last_message_sender:N,last_message_timestamp:(new Date).toISOString(),last_message:"gif"===n?"GIF":"secure-transfer"===n?"Secure Transfer":"media"===n?"Media":t,last_message_client_uuid:u,remoteUsername:d,id:e}),s.VK.getInstance().onUpdateRecoil({type:"friendship"})),null===(l=s.VK.getInstance())||void 0===l||l.send({type:i.qJm,payload:{messages:[{client_generated_uuid:u,message:t,message_kind:n,message_metadata:o,parent_client_generated_uuid:L.parent_client_generated_uuid?L.parent_client_generated_uuid:void 0,parent_message_author_username:L.parent_client_generated_uuid?null===(a=L.parent_username)||void 0===a?void 0:a.slice(1):void 0,parent_message_text:L.parent_client_generated_uuid?L.text:void 0,parent_message_author_uuid:L.parent_message_author_uuid}],type:m,room:e}});const p=setTimeout((()=>{var e;null===(e=null==D?void 0:D.scrollToBottom)||void 0===e||e.call(D),clearTimeout(p)}),10);A({parent_username:"",parent_client_generated_uuid:null,text:"",parent_message_author_uuid:""}),le.current.setValue("")}},children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,o.jsx)("div",{style:{height:W.type?100-u.v+"vh":"100vh"},children:(0,o.jsx)(Dt,{setLocalUnreadCount:K,localUnreadCount:U,jumpToBottom:M,setShowJumpToBottom:_,messageRef:D,setMessageRef:z})}),(0,o.jsx)("div",{children:(0,o.jsx)(Q,{})})]})})}},94483:(e,t,n)=>{n.d(t,{v:()=>o});const o=40},53463:(e,t,n)=>{function o(e){e=e.replace(/^data:([^;]+);base64,/gim,"");const t=atob(e),n=t.length,o=new ArrayBuffer(n),l=new Uint8Array(o);for(let e=0;e<n;e++)l[e]=t.charCodeAt(e);return o}n.d(t,{R:()=>o})},93860:(e,t,n)=>{n.d(t,{x:()=>o});const o=(e,t)=>{const n=window.open(e,t);n&&(n.opener=null)}},2942:(e,t,n)=>{n.d(t,{Es:()=>q,Jz:()=>_,RS:()=>h,VK:()=>$,d$:()=>D,dU:()=>f,ny:()=>k,tR:()=>y,yA:()=>V});var o=n(20604),l=n(3210),i=n(2784),r=n(26852),a=n(53476),s=n(52322),c=n(2162);function d(e,t){return Object.keys(t).forEach((function(n){"default"===n||"__esModule"===n||e.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}function m(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var u={},p={};m(p,"useChatsWithMetadata",(()=>f));var g={};function h({remoteUserIds:e}){const{uuid:t}=(0,l.aFb)(),[n,o]=(0,i.useState)([]),a=(0,l.hT)({remoteUserIds:e,uuid:t}),s=(0,l.H9$)();return(0,i.useEffect)((()=>{JSON.stringify(e)!==JSON.stringify(n)&&(o(e),(async()=>{const n=e.filter((e=>!Object.keys(a).includes(e)));if(n.length){const e=await(0,r.n)(t,n);if(e){const n={};null==e||e.forEach((e=>n[e.uuid]=e)),await s({uuid:t,users:n})}}})())}),[e,n]),a}m(g,"useUsersMetadata",(()=>h));const f=({room:e,type:t})=>{const{uuid:n}=(0,l.aFb)(),i=(0,l.PDs)({uuid:n,room:e,type:t}),r=(null==i?void 0:i.map((e=>e.uuid)))||[];null==i||i.forEach((e=>{const t=function(e){const t=[];for(let n=0;n<e.length;n++)if("<"===e[n]&&"@"===e[n+1]){for(;n<e.length&&"|"!==e[n];)n++;n++,n++;let o="";for(;n<e.length&&">"!==e[n];)o+=e[n],n++;n!==e.length&&t.push(o)}return t}(e.message);e.parent_message_author_uuid&&r.push(e.parent_message_author_uuid),t.forEach((e=>r.push(e)))}));const a=r.filter(((e,t)=>r.indexOf(e)===t)).filter((e=>e)),s=h({remoteUserIds:a}),c=new Map;if(2===a.length){const[e,t]=a;if(d=s[e],m=s[t],d&&m&&d.colorIndex===m.colorIndex){const n=(s[e].colorIndex+1)%o.KAW.length;c.set(t,n)}}var d,m;return{chats:i.map((e=>{var t,n,o,l,i;return{...e,image:(null===(t=s[e.uuid])||void 0===t?void 0:t.image)||"",username:(null===(n=s[e.uuid])||void 0===n?void 0:n.username)||"",color:null===(o=s[e.uuid])||void 0===o?void 0:o.color,colorIndex:c.get(e.uuid)||(null===(l=s[e.uuid])||void 0===l?void 0:l.colorIndex),parent_message_author_username:null===(i=s[e.parent_message_author_uuid])||void 0===i?void 0:i.username}})),usersMetadata:s}};var x={};function y({remoteUserId:e}){const{uuid:t}=(0,l.aFb)(),[n,s]=(0,a.FV)((0,l.iIj)({remoteUserId:e,uuid:t}));return(0,i.useEffect)((()=>{e&&!n.username&&(async()=>{try{const n=await fetch(`${o.FvS}/users/metadata`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuids:[e]})}),l=await n.json(),i=(0,o.mr9)(),a=(0,o.lvA)();s({username:l.users[0].username,image:l.users[0].image,loading:!1,color:i,colorIndex:a}),(0,r.Po)(t,[{uuid:e,username:l.users[0].username,image:l.users[0].image,color:i,colorIndex:a}])}catch(e){console.error(e)}})()}),[n,e]),n}m(x,"useUserMetadata",(()=>y)),d(u,p),d(u,x),d(u,g);var v={},b={};m(b,"AuthenticatedSync",(()=>k)),m(b,"ChatSync",(()=>w)),m(b,"DbRecoilSync",(()=>C)),m(b,"useUpdateChats",(()=>R)),m(b,"useUpdateNotifications",(()=>T));const E=e=>e?{Authorization:`Bearer ${e}`}:{},k=()=>{const e=(0,l.zk1)();return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w,{uuid:e.uuid,jwt:e.jwt}),(0,s.jsx)(C,{uuid:e.uuid})]}):null},w=({uuid:e,jwt:t})=>((0,i.useEffect)((()=>{(async()=>{await Promise.all([K(e,t).then((async()=>await z.getInstance().updateUuid(e))),$.getInstance().updateUuid(e,t)])})()}),[e,t]),null),C=({uuid:e})=>{const t=R(),n=T(),c=(0,l.H9$)(),d=(0,l.zk1)(),m=(0,a.Zl)((0,l.pY)({uuid:e})),u=(0,a.Zl)((0,l.Kbg)({uuid:e})),p=(0,a.Zl)((0,l.aXC)({uuid:e})),g=(0,a.Zl)(l.hm$);return(0,i.useEffect)((()=>{(async()=>{await(async e=>{const n=await r.J1.getInstance().getActiveChats(e);m(n);const l=await r.J1.getInstance().getActiveGroups(e);p(l);const i=await r.J1.getInstance().getRequestCount(e);u(i),(e=>{const t={};return e.forEach((e=>{var n,o;const l=e.room;t[l]?null===(o=null===(n=t[l])||void 0===n?void 0:n.messages)||void 0===o||o.push(e):t[l]={room:e.room,type:e.type,messages:[e]}})),Object.keys(t).map((e=>({room:t[e].room,type:t[e].type,messages:t[e].messages})))})(await r.J1.getInstance().getAllChats(e)).forEach((n=>{t({uuid:e,room:n.room,type:n.type,chats:n.messages})}));const a=await r.J1.getInstance().getAllUsers(e),s={};a.forEach((e=>s[e.uuid]=e)),c({users:s,uuid:e}),r.J1.getInstance().refreshUsersMetadata(e),(async()=>{const e=await fetch(`${o.FvS}/notifications/unreadCount`,{method:"GET",headers:{...E(null==d?void 0:d.jwt)}});try{const t=await e.json();g(t.unreadCount||0)}catch(e){console.error(e)}})()})(e)})()}),[e]),(0,i.useEffect)((()=>{$.getInstance().onUpdateRecoil=async o=>{switch(o.type){case"friendship":const l=await r.J1.getInstance().getActiveChats(e);m(l);break;case"collection":const i=await r.J1.getInstance().getActiveGroups(e);p(i);break;case"chat":t({uuid:o.payload.uuid,room:o.payload.room,type:o.payload.type,chats:o.payload.chats,clear:o.payload.clear});break;case"add-notifications":g((e=>e+1)),n({uuid:o.payload.uuid,notificationPayload:o.payload})}}}),[e]),(0,s.jsx)(i.Suspense,{fallback:null,children:(0,s.jsx)(S,{uuid:e})})};function S({uuid:e}){return(0,l.xVT)({limit:50,offset:0,uuid:e}),null}const T=()=>(0,a._8)((({set:e,snapshot:t})=>async({uuid:n,notificationPayload:o})=>{var i;const r=t.getLoadable((0,l.O0G)({limit:50,offset:0,uuid:n}));e((0,l.O0G)({limit:50,offset:0,uuid:n}),[{...o,timestamp:new Date(o.timestamp).getTime()},...null!==(i=r.valueMaybe())&&void 0!==i?i:[]])})),R=()=>(0,a._8)((({set:e,snapshot:t})=>async({uuid:n,room:o,type:i,chats:r,clear:a})=>{const s=t.getLoadable((0,l.oxj)({uuid:n,room:o,type:i})),c=j(a?[]:s.valueMaybe(),r);e((0,l.oxj)({uuid:n,room:o,type:i}),c)})),j=(e,t)=>{if(!e)return t.sort(((e,t)=>e.created_at<t.created_at?-1:1));const n={};return e.forEach((e=>n[e.client_generated_uuid]=e)),t.forEach((e=>n[e.client_generated_uuid]=e)),Object.keys(n).map((e=>n[e])).sort(((e,t)=>e.created_at<t.created_at?-1:1))};var I={};m(I,"BackgroundChatsSync",(()=>z));var N={};m(N,"refreshChatsFor",(()=>D));var F={};m(F,"SignalingManager",(()=>$));var P={};m(P,"getSanitizedTitle",(()=>L));const L=e=>"gif"===e.message_kind?"GIF":"secure-transfer"===e.message_kind?"Secure Transfer":"media"===e.message_kind?"Media":e.message;var A={};m(A,"SIGNALING_CONNECTED",(()=>B)),m(A,"RECONNECTING",(()=>Z)),m(A,"Signaling",(()=>O));const B="SIGNALING_CONNECTED",Z="RECONNECTING";class O extends c.Z{constructor(e,t){super(),this.destroyed=!1,this.bufferedMessages=[],this.state="disconnected",this.uuid=e,this.jwt=t,this.initWs()}async initWs(){try{const e=new WebSocket(`${o.ioj}?jwt=${this.jwt}`);e.addEventListener("open",(()=>{this.state="connected",this.bufferedMessages.forEach((e=>this.send(e))),this.bufferedMessages=[]})),e.addEventListener("message",(e=>{this.handleMessage(e.data)})),e.addEventListener("close",(()=>{this.state="disconnected",this.destroyed||(this.emit(Z),setTimeout((()=>{this.destroyed||this.initWs()}),3e3))})),this.ws=e}catch(e){console.error("Error while creating ws connection"),console.error(e)}}handleMessage(e){try{const t=JSON.parse(e);switch(t.type){case o.qJm:this.emit(o.qJm,t.payload);break;case o.Rvq:this.emit(o.Rvq,t.payload);break;case o.knF:this.emit(o.knF,t.payload);break;case o.jm2:this.emit(B);break;case o.Ph2:this.emit(o.Ph2,t.payload);break;case o.wJn:this.emit(o.wJn,t.payload);break;default:console.error(`Invalid type of message found ${e}`)}}catch(t){console.log(`Could not handle data from server ${e}, error: ${t}`)}}destroy(){var e;this.destroyed=!0,null===(e=this.ws)||void 0===e||e.close()}send(e){"disconnected"!==this.state?this.ws.send(JSON.stringify({...e})):this.bufferedMessages.push(e)}}class ${constructor(){this.uuid="",this.onUpdateRecoil=e=>{},this.postSubscribes=new Set}onBarterUpdate(e){}onBarterExecute(e){}updateUuid(e,t){var n;null===(n=this.signaling)||void 0===n||n.destroy(),this.signaling=new O(e,t),this.uuid=e,this.initHandlers(),this.updateLastReadTimeout={}}initHandlers(){var e,t,n,l,i,a,s;null===(e=this.signaling)||void 0===e||e.on(o.qJm,(async e=>{e.messages&&e.messages[0]&&this.onUpdateRecoil({type:"chat",payload:{room:e.messages[0].room,type:e.messages[0].type,uuid:this.uuid,chats:e.messages.map((e=>({...e,direction:this.uuid===e.uuid?"send":"recv",received:!0,from_http_server:0})))}}),await(0,r.fk)(this.uuid,e.messages.map((e=>({...e,direction:this.uuid===e.uuid?"send":"recv",received:!0,from_http_server:0}))));for(const t of e.messages)if("individual"===t.type){const e=await(0,r.Dr)(this.uuid,parseInt(t.room));(null==e?void 0:e.remoteUserId)?(await(0,r.OU)(this.uuid,null==e?void 0:e.remoteUserId,{last_message_sender:t.uuid,last_message:L(t),last_message_timestamp:(new Date).toISOString(),unread:t.uuid===this.uuid?0:1,remoteInteracted:1}),this.onUpdateRecoil({type:"friendship"})):(t.uuid!==this.uuid&&await(0,r.YN)(this.uuid,t.uuid,{last_message_sender:t.uuid,last_message_timestamp:(new Date).toISOString(),last_message:L(t),last_message_client_uuid:t.uuid},{remoteInteracted:1}),this.onUpdateRecoil({type:"friendship"}))}else await(0,r.rd)(this.uuid,{collectionId:t.room,lastMessage:t.message,lastMessageUuid:t.client_generated_uuid,lastMessageTimestamp:(new Date).toISOString()}),this.onUpdateRecoil({type:"collection"})})),null===(t=this.signaling)||void 0===t||t.on(o.Ph2,(e=>{this.onUpdateRecoil({type:"add-notifications",payload:e})})),null===(n=this.signaling)||void 0===n||n.on(o.Rvq,(e=>{this.onBarterUpdate(e)})),null===(l=this.signaling)||void 0===l||l.on(o.knF,(e=>{this.onBarterExecute(e)})),null===(i=this.signaling)||void 0===i||i.on(o.wJn,(async e=>{const t=await(0,r.GO)(this.uuid,e.client_generated_uuid);t&&this.onUpdateRecoil({type:"chat",payload:{room:e.room,type:e.type,uuid:this.uuid,chats:[t]}})})),null===(a=this.signaling)||void 0===a||a.on(o.jm2,(()=>{this.postSubscribes.forEach((({room:e,type:t,mint:n,publicKey:l})=>{this.send({type:o.kDn,payload:{room:e,type:t,mint:n,publicKey:l}})}))})),null===(s=this.signaling)||void 0===s||s.on(Z,(()=>{}))}debouncedUpdateLastRead(e,t,n){e&&(this.updateLastReadTimeout[e.room]&&window.clearTimeout(this.updateLastReadTimeout[e.room]),this.updateLastReadTimeout[e.room]=window.setTimeout((async()=>{await(0,r.K1)(this.uuid,e.client_generated_uuid,e.room,e.type,e.uuid,t,n),"collection"===e.type?this.onUpdateRecoil({type:"collection"}):this.onUpdateRecoil({type:"friendship"})}),500))}static getInstance(){return this.instance||(this.instance=new $),this.instance}async send(e){var t;if(null===(t=this.signaling)||void 0===t||t.send(e),e.type===o.qJm&&(this.onUpdateRecoil({type:"chat",payload:{room:e.payload.room,type:e.payload.type,uuid:this.uuid,chats:e.payload.messages.map((t=>({...t,direction:"send",from_http_server:0,created_at:(new Date).getTime().toString(),uuid:this.uuid,room:e.payload.room,type:e.payload.type})))}}),(0,r.fk)(this.uuid,e.payload.messages.map((t=>({...t,direction:"send",from_http_server:0,created_at:(new Date).getTime().toString(),uuid:this.uuid,room:e.payload.room,type:e.payload.type})))),e.payload.messages.forEach((async t=>{if("individual"===e.payload.type){const n=await(0,r.Dr)(this.uuid,parseInt(e.payload.room));(null==n?void 0:n.remoteUserId)&&(await(0,r.OU)(this.uuid,null==n?void 0:n.remoteUserId,{last_message_sender:this.uuid,last_message:L(t),last_message_timestamp:(new Date).toISOString(),unread:0}),this.onUpdateRecoil({type:"friendship"}))}else(0,r.rd)(this.uuid,{collectionId:e.payload.room,lastReadMessage:t.client_generated_uuid,lastMessageUuid:t.client_generated_uuid,lastMessage:L(t),lastMessageTimestamp:(new Date).toISOString()})}))),e.type===o.kDn&&this.postSubscribes.add({room:e.payload.room,type:e.payload.type,mint:e.payload.mint||"",publicKey:e.payload.publicKey||""}),e.type===o.wJn){const t=await(0,r.GO)(this.uuid,e.payload.client_generated_uuid);t&&this.onUpdateRecoil({type:"chat",payload:{room:e.payload.room,type:e.payload.type,uuid:this.uuid,chats:[t]}})}}}const D=async(e,t,n,l,i,a)=>{const s=await(0,r.V7)(e,t,n),c=await fetch(`${o.FvS}/chat?room=${t}&type=${n}&limit=40&timestampAfter=${(null==s?void 0:s.created_at)&&!isNaN(new Date(parseInt(null==s?void 0:s.created_at)).getTime())?new Date(parseInt(null==s?void 0:s.created_at)).getTime():0}&mint=${l}&publicKey=${i}`,{method:"GET",headers:{...E(a)}}),d=await c.json(),m=(null==d?void 0:d.chats)||[];m.length>=40&&await(0,r.S8)(e,t),m.length>=40?$.getInstance().onUpdateRecoil({type:"chat",payload:{uuid:e,type:n,room:t,clear:!0,chats:m.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1})))}}):$.getInstance().onUpdateRecoil({type:"chat",payload:{uuid:e,type:n,room:t,chats:m.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1})))}}),m.length>=40&&await(0,r.VB)(e,t,n),await(0,r.fk)(e,m.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1}))))};class z{constructor(){}static getInstance(){return this.instance||(this.instance=new z),this.instance}async updateUuid(e){const t=await r.J1.getInstance().getActiveChats(e),n=await r.J1.getInstance().getActiveGroups(e);t.forEach((async t=>{const n=await(0,r.V7)(e,t.friendshipId.toString(),"individual");t.last_message_client_uuid!==(null==n?void 0:n.client_generated_uuid)&&D(e,t.friendshipId.toString(),"individual")})),n.forEach((async t=>{const n=await(0,r.V7)(e,t.collectionId,"collection");t.lastMessageUuid!==(null==n?void 0:n.client_generated_uuid)&&D(e,t.collectionId,"collection","","")}))}}var M={};m(M,"fetchMoreChatsFor",(()=>_));const _=async(e,t,n,l,i,a)=>{const s=await(0,r.j2)(e,t,n),c=[`room=${t}`,`type=${n}`,"limit=40",`timestampBefore=${(null==s?void 0:s.created_at)&&!isNaN(parseInt(null==s?void 0:s.created_at))?null==s?void 0:s.created_at:(new Date).getTime()}`,`mint=${l}`,`publicKey=${i}`].join("&");try{const l=(await async function(e,t){return fetch(`${o.FvS}/${e}`,{...t,method:t.method||"GET",headers:{...E(t.jwt)}}).then((e=>e.json()))}(`chat?${c}`,{method:"GET",jwt:a})).chats;$.getInstance().onUpdateRecoil({type:"chat",payload:{uuid:e,room:t,type:n,chats:l.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1})))}}),await(0,r.fk)(e,l.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1}))))}catch(e){console.log("Error found :("),console.log(JSON.stringify(e))}};var U={};m(U,"refreshGroupsAndFriendships",(()=>K));const K=async(e,t)=>{try{await Promise.all([(0,r.S6)(e,t),(0,r.FT)(e,t)])}catch(e){console.error("Error while refreshing friendships and groups"),console.error(e)}$.getInstance().onUpdateRecoil({type:"friendship"}),$.getInstance().onUpdateRecoil({type:"collection"})};var W={};m(W,"refreshIndividualChatsFor",(()=>q));const q=async(e,t,n,l,i,a,s)=>{const c=await(0,r.V7)(e,t,n),d=await fetch(`${o.FvS}/chat?room=${t}&type=${n}&limit=40&timestampAfter=${(null==c?void 0:c.created_at)&&!isNaN(new Date(parseInt(null==c?void 0:c.created_at)).getTime())?new Date(parseInt(null==c?void 0:c.created_at)).getTime():0}&mint=${i}&publicKey=${a}&clientGeneratedUuid=${l}`,{method:"GET",headers:{...E(s)}}),m=await d.json(),u=(null==m?void 0:m.chats)||[];$.getInstance().onUpdateRecoil({type:"chat",payload:{uuid:e,room:t,type:n,chats:u.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1})))}}),await(0,r.fk)(e,u.map((t=>({...t,direction:e===t.uuid?"send":"recv",received:!0,from_http_server:1}))))};var H={};m(H,"refreshUpdatesFor",(()=>V));const V=async(e,t,n,l,i,a)=>{const s=await(0,r.jh)(e,t.toString(),n),c=await fetch(`${o.FvS}/chat/updates?room=${t}&type=${n}&lastSeenUpdate=${(null==s?void 0:s.last_received_update_id)||0}&mint=${l}&publicKey=${i}&updatesSinceTimestamp=${(null==s?void 0:s.last_local_reset_time)||0}`,{method:"GET",headers:{...E(a)}}),d=await c.json(),m=(null==d?void 0:d.updates)||[],u=await(0,r.JZ)(e,m);$.getInstance().onUpdateRecoil({type:"chat",payload:{uuid:e,room:t,type:n,chats:u.map((t=>({...t,direction:e===t.uuid?"send":"recv"})))}}),await(0,r.fk)(e,u.map((t=>({...t,direction:e===t.uuid?"send":"recv"}))))};d(v,b),d(v,I),d(v,M),d(v,P),d(v,N),d(v,U),d(v,W),d(v,H),d(v,A),d(v,F)},83596:(e,t,n)=>{var o,l,i,r;n.d(t,{$3:()=>u,AN:()=>g,F7:()=>i,Sr:()=>r,at:()=>p,ej:()=>a,f4:()=>m,ks:()=>d,v6:()=>s,xI:()=>c}),function(e){e.Private="PRIVATE",e.Public="PUBLIC"}(o||(o={})),function(e){e.Received="RECEIVED",e.Sent="SENT"}(l||(l={})),function(e){e.Bitcoin="BITCOIN",e.Eclipse="ECLIPSE",e.Ethereum="ETHEREUM",e.Polygon="POLYGON",e.Solana="SOLANA"}(i||(i={})),function(e){e.Asc="ASC",e.Desc="DESC"}(r||(r={}));const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetBalanceSummary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"address"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"providerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProviderID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"wallet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"address"},value:{kind:"Variable",name:{kind:"Name",value:"address"}}},{kind:"Argument",name:{kind:"Name",value:"providerId"},value:{kind:"Variable",name:{kind:"Name",value:"providerId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"balances"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"aggregate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"percentChange"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"valueChange"}}]}}]}}]}}]}}]}}]},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetTokenBalances"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"address"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"providerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProviderID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"wallet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"address"},value:{kind:"Variable",name:{kind:"Name",value:"address"}}},{kind:"Argument",name:{kind:"Name",value:"providerId"},value:{kind:"Variable",name:{kind:"Name",value:"providerId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"balances"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"tokens"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"address"}},{kind:"Field",name:{kind:"Name",value:"displayAmount"}},{kind:"Field",name:{kind:"Name",value:"marketData"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"percentChange"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"token"}},{kind:"Field",name:{kind:"Name",value:"tokenListEntry"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"logo"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"symbol"}}]}}]}}]}}]}}]}}]}}]}}]}}]},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCollectibles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"address"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"providerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProviderID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"wallet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"address"},value:{kind:"Variable",name:{kind:"Name",value:"address"}}},{kind:"Argument",name:{kind:"Name",value:"providerId"},value:{kind:"Variable",name:{kind:"Name",value:"providerId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"nfts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"address"}},{kind:"Field",name:{kind:"Name",value:"attributes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trait"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"address"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"compressed"}},{kind:"Field",name:{kind:"Name",value:"image"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendFriendRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"otherUserId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"accept"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendFriendRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"otherUserId"},value:{kind:"Variable",name:{kind:"Name",value:"otherUserId"}}},{kind:"Argument",name:{kind:"Name",value:"accept"},value:{kind:"Variable",name:{kind:"Name",value:"accept"}}}]}]}}]},m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetNotifications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"NotificationFiltersInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"notifications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"app"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"address"}},{kind:"Field",name:{kind:"Name",value:"image"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"dbId"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"viewed"}}]}}]}}]}}]}}]}}]},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkNotificationsAsRead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markNotificationsAsRead"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}}]}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetTokenListEntryLogo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"providerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProviderID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"TokenListEntryFiltersInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tokenList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"providerId"},value:{kind:"Variable",name:{kind:"Name",value:"providerId"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"logo"}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetTransactions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"address"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"providerId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProviderID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"TransactionFiltersInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"wallet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"address"},value:{kind:"Variable",name:{kind:"Name",value:"address"}}},{kind:"Argument",name:{kind:"Name",value:"providerId"},value:{kind:"Variable",name:{kind:"Name",value:"providerId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"provider"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"providerId"}}]}},{kind:"Field",name:{kind:"Name",value:"transactions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"fee"}},{kind:"Field",name:{kind:"Name",value:"feePayer"}},{kind:"Field",name:{kind:"Name",value:"error"}},{kind:"Field",name:{kind:"Name",value:"hash"}},{kind:"Field",name:{kind:"Name",value:"nfts"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]}}]}}]}}]}}]}}]}},55799:(e,t,n)=>{n.d(t,{C:()=>i});var o=n(2784),l=n(87665);function i(e,...t){const n=(0,l.kJ)(...t);return(0,o.useEffect)((()=>{const t=setInterval((()=>{(0,o.startTransition)((()=>{n.refetch()}))}),e);return()=>{clearInterval(t)}}),[e,n.refetch]),n}},87486:(e,t,n)=>{n.d(t,{NJ:()=>a,mn:()=>L,sI:()=>p,BQ:()=>M,i$:()=>W,Z7:()=>I});var o=n(52322),l=n(88823),i=n(26852),r=n(3210);const a=({userId:e,uuid:t,username:n,isDarkMode:a})=>{var s;const c=(0,r.fAp)({userId:e}),d=(0,r.awr)();return c&&c.id?(0,o.jsx)("div",{style:{height:"100%"},children:(0,o.jsx)(l.W,{type:"individual",remoteUsername:n,username:"",roomId:null===(s=c.id)||void 0===s?void 0:s.toString(),userId:t,areFriends:c.areFriends,requested:c.requested,remoteUserId:e,blocked:c.blocked,remoteRequested:c.remoteRequested,spam:c.spam,setRequested:n=>{c.remoteRequested||c.areFriends?c.areFriends||((0,i.EV)(t,e,{requested:0,areFriends:1}),d({userId:e,friendshipValue:{areFriends:n,remoteRequested:!1,requested:!1}})):d({userId:e,friendshipValue:{requested:n}})},setSpam:t=>d({userId:e,friendshipValue:{spam:t}}),setBlocked:t=>d({userId:e,friendshipValue:{blocked:t}}),isDarkMode:a})}):(console.error(`Friendship not found with user ${e} or jwt not found`),(0,o.jsx)("div",{}))};var s=n(2784),c=n(20604),d=n(36375),m=n(1500);const u={__DEV__:!1,IS_STATIC:"",NODE_ENV:"production",TAMAGUI_TARGET:"web",DEBUG:"0"}.REACT_APP_IFRAME_HOSTED||!1;class p{constructor(){this.counter=0,u&&window.addEventListener("message",(e=>{var t,n;e.origin===this.parentUrl&&e.data.type===c.ho6&&(console.log("response got"),console.log(e.data),e.data.payload.success?null===(t=this.pendingResponses[e.data.payload.counter])||void 0===t||t.resolve({json:()=>e.data.payload.data}):null===(n=this.pendingResponses[e.data.payload.counter])||void 0===n||n.reject())}),!1),this.pendingResponses={}}setParentUrl(e){this.parentUrl=e}setNativePush(e){this.nativePush=e}setNativePop(e){this.nativePop=e}static getInstance(){return this.instance||(this.instance=new p),this.instance}fetch(e,t){return u?new Promise(((n,o)=>{const l=this.counter++;window.parent.postMessage({type:c.DW8,payload:{url:e,args:t,counter:l}},"*"),this.pendingResponses[l]={resolve:n,reject:o}})):fetch(e,t)}pop(){var e;null===(e=this.nativePop)||void 0===e||e.call(this)}push(e){var t;u?window.parent.postMessage({type:c.aIj,payload:e},"*"):null===(t=this.nativePush)||void 0===t||t.call(this,e)}}var g=n(73557),h=n(2942),f=n(60041),x=n(14236),y=n(38821),v=n(11259),b=n(12354);const E=(0,f.W2)((e=>({searchField:{marginTop:"0px",marginBottom:"16px",width:"inherit",display:"flex","& .MuiOutlinedInput-root":{"& input":{paddingTop:0,paddingBottom:0},"& fieldset":{border:`${e.custom.colors.borderFull} !important`}}},icon:{background:e.custom.colors.textBackground},iconInner:{background:e.custom.colors.fontColor},topImageOuter:{width:150,height:150,border:`solid 3px ${e.custom.colors.avatarIconBackground}`,borderRadius:"50%",display:"inline-block",overflow:"hidden"},topImage:{width:150},horizontalCenter:{display:"flex",justifyContent:"center"},container:{marginLeft:"16px",marginRight:"16px",height:"100%"},roundBtn:{marginLeft:8,borderRadius:20,width:20,height:20,cursor:"pointer",background:"#FFFFFF",border:"2px solid #F0F0F2",fontSize:10},add:{width:17,paddingBottom:6,paddingRight:1},iconCircular:{width:"32px",height:"32px",borderRadius:"50%",marginRight:"8px",color:e.custom.colors.positive},iconCircularBig:{width:"40px",height:"40px",borderRadius:"20px",marginRight:"8px",color:e.custom.colors.positive},hoverParent:{"&:hover $hoverChild, & .Mui-focused $hoverChild":{visibility:"visible"}},hoverChild:{visibility:"hidden"},text:{color:e.custom.colors.fontColor2},smallText:{fontSize:12,color:e.custom.colors.fontColor2},userText:{fontSize:16,marginTop:4,color:e.custom.colors.fontColor2},userTextSmall:{fontSize:14,color:e.custom.colors.fontColor2},userRequestText:{color:e.custom.colors.textPlaceholder},timestamp:{fontSize:14,color:e.custom.colors.fontColor2},smallTitle:{color:e.custom.colors.smallTextColor,fontWeight:600},smallTitle2:{color:e.custom.colors.smallTextColor,fontWeight:500,fontSize:16},smallSubTitle:{color:e.custom.colors.smallTextColor,fontWeight:500},contactIconOuter:{"&:disabled":{background:e.custom.colors.textBorder}}}))),k=({activeChats:e,requestCount:t=0,toRoot:n=!0})=>{const l=(0,f.Pg)(),i=e.sort(((e,t)=>{var n,o;return new Date(null!==(n="collection"===t.chatType?t.chatProps.lastMessageTimestamp:t.chatProps.last_message_timestamp)&&void 0!==n?n:0).getTime()-new Date(null!==(o="collection"===e.chatType?e.chatProps.lastMessageTimestamp:e.chatProps.last_message_timestamp)&&void 0!==o?o:0).getTime()}));return(0,o.jsxs)(v.Z,{style:{paddingTop:0,paddingBottom:0,borderRadius:"14px",border:`${l.custom.colors.borderFull}`},children:[t>0?(0,o.jsx)(C,{requestCount:t,isFirst:!0,isLast:0===(null==e?void 0:e.length)}):null,null==i?void 0:i.map(((l,i)=>(0,o.jsx)(w,{toRoot:n,type:l.chatType,image:"individual"===l.chatType?l.chatProps.remoteUserImage:l.chatProps.image,userId:"individual"===l.chatType?l.chatProps.remoteUserId:"",name:"individual"===l.chatType?l.chatProps.remoteUsername:l.chatProps.name,id:"individual"===l.chatType?l.chatProps.remoteUserId:l.chatProps.collectionId,message:"individual"===l.chatType?l.chatProps.last_message:l.chatProps.lastMessage,timestamp:"individual"===l.chatType?l.chatProps.last_message_timestamp||"":l.chatProps.lastMessageTimestamp||"",isFirst:0===t&&0===i,isLast:i===(null==e?void 0:e.length)-1,isUnread:"individual"===l.chatType?!!l.chatProps.unread:l.chatProps.lastMessageUuid!==l.chatProps.lastReadMessage})))]})};function w({type:e,image:t,name:n,message:l,timestamp:i,isFirst:a,isLast:s,id:m,isUnread:u,toRoot:x,userId:v}){const k=E(),w=(0,f.Pg)(),{props:C}=(0,r.Dtc)(),T=(0,c.kW1)(l||""),R=(0,g.TH)().pathname,j=(0,h.RS)({remoteUserIds:T.filter((e=>"tag"===e.type)).map((e=>e.value))}),I=T.map((e=>{var t;return"tag"===e.type?null===(t=j[e.value])||void 0===t?void 0:t.username:e.value})).join("");let N="";return I&&(N=I.length>25?I.substring(0,22)+"...":I),(0,o.jsx)(b.ZP,{button:!0,disableRipple:!0,onClick:()=>{p.getInstance().push({title:"individual"===e?`@${n}`:n,componentId:"individual"===e?c.CdA:c.Zzd,componentProps:{userId:"individual"===e?m:void 0,username:"individual"===e?n:void 0,id:m,fromInbox:!0,image:t},pushAboveRoot:x})},style:{padding:"10px",paddingLeft:"16px",paddingRight:"16px",display:"flex",height:"72px",backgroundColor:"/messages/chat"===R&&C.userId===m||"/messages/groupchat"===R&&C.id===m?w.custom.colors.bg4:u?w.custom.colors.unreadBackground:w.custom.colors.nav,borderBottom:s?void 0:`solid 1pt ${w.custom.colors.border}`,...(0,d.Z9)(a,s,12)},children:(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:(0,o.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,o.jsx)(S,{onClick:()=>{"collection"!==e&&p.getInstance().push({title:`@${n}`,componentId:c.Rzf,componentProps:{userId:m},pushAboveRoot:x})},image:t})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:k.userTextSmall,style:{display:"flex",fontWeight:u?700:600,color:u?w.custom.colors.fontColor:w.custom.colors.smallTextColor},children:[(0,o.jsx)("div",{children:"individual"===e?`@${n}`:n}),"backpack-chat"===m?(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)(y.Z,{style:{fontSize:14,marginLeft:3,color:w.custom.colors.verified}})}):null,c.iqE.includes(v)?(0,o.jsx)(d.fI,{}):null]}),(0,o.jsx)("div",{className:k.userTextSmall,style:{wordBreak:"break-all",fontWeight:500,color:u?w.custom.colors.fontColor:w.custom.colors.smallTextColor},children:N})]})]}),(0,o.jsx)("div",{className:k.timestamp,style:{textAlign:"right",minWidth:"63px",fontWeight:u?700:500,color:u?w.custom.colors.fontColor:w.custom.colors.smallTextColor},children:(0,c.WrV)(new Date(i))})]})})})}function C({requestCount:e,isFirst:t,isLast:n}){const l=E(),i=(0,f.Pg)();return(0,o.jsx)(b.ZP,{button:!0,disableRipple:!0,onClick:()=>{p.getInstance().push({title:"Requests",componentId:c.bB9,componentProps:{},pushAboveRoot:!0})},style:{padding:"10px",paddingLeft:"16px",paddingRight:"16px",display:"flex",height:"80px",backgroundColor:i.custom.colors.nav,borderBottom:n?void 0:`solid 1pt ${i.custom.colors.border}`,...(0,d.Z9)(t,n,12)},children:(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"space-between"},children:(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,o.jsx)("div",{style:{width:40,height:40,padding:10,background:i.custom.colors.background,borderRadius:20,display:"flex",justifyContent:"center",marginRight:8},children:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(0,o.jsx)(x.Z,{style:{color:i.custom.colors.icon,width:18}})})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:l.userTextSmall,style:{fontWeight:600},children:"Message requests"}),(0,o.jsxs)("div",{className:l.userTextSmall,children:[1===e?"1 person":`${e} people`," you may know"]})]})]})})})})}function S({image:e}){const t=E();return(0,o.jsx)(d.ug,{size:40,style:{width:40,height:40},src:e,className:t.iconCircularBig})}var T=n(90454);function R(){const e=(0,f.Pg)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(v.Z,{style:{paddingTop:0,paddingBottom:0,borderRadius:"14px",border:`${e.custom.colors.borderFull}`},children:[(0,o.jsx)(j,{isFirst:!0,isLast:!1}),(0,o.jsx)(j,{isFirst:!1,isLast:!1}),(0,o.jsx)(j,{isFirst:!1,isLast:!1}),(0,o.jsx)(j,{isFirst:!1,isLast:!0})]})})}function j({isFirst:e,isLast:t}){const n=(0,f.Pg)();return(0,o.jsx)(b.ZP,{button:!0,disableRipple:!0,onClick:()=>{},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",display:"flex",height:"68px",backgroundColor:n.custom.colors.nav,borderBottom:t?void 0:`solid 1pt ${n.custom.colors.border}`,...(0,d.Z9)(e,t,12)},children:(0,o.jsxs)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center"},children:[(0,o.jsx)("div",{style:{width:40},children:(0,o.jsx)(T.Z,{variant:"circular",width:40,height:40})}),(0,o.jsxs)("div",{style:{marginLeft:"5px",width:"100%"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(T.Z,{width:"40%",height:20,style:{marginTop:"-6px"}}),(0,o.jsx)(T.Z,{width:30,height:20,style:{marginTop:"-6px"}})]}),(0,o.jsx)(T.Z,{width:"70%",height:20,style:{marginTop:"-6px"}})]})]})})}const I=({users:e,setMembers:t,style:n,itemStyle:l})=>{const i=(0,f.Pg)();return(0,o.jsx)(v.Z,{style:{paddingTop:0,paddingBottom:0,borderRadius:"14px",border:`${i.custom.colors.borderFull}`,...n},children:e.map(((n,i)=>(0,o.jsx)(N,{user:n,isFirst:0===i,isLast:i===e.length-1,setMembers:t,style:l},i)))})};function N({user:e,isFirst:t,isLast:n,setMembers:l,style:a}){const s=(0,f.Pg)(),{push:m}=(0,r.HJj)(),u=E(),{uuid:p}=(0,r.aFb)(),g=(0,r.awr)();return(0,o.jsx)(b.ZP,{button:!0,disableRipple:!0,onClick:()=>{m({title:`@${e.username}`,componentId:c.Rzf,componentProps:{userId:e.id}})},style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"8px",paddingBottom:"8px",display:"flex",height:"48px",backgroundColor:s.custom.colors.nav,borderBottom:n?void 0:`solid 1pt ${s.custom.colors.border}`,...(0,d.Z9)(t,n,12),...a},children:(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:(0,o.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,o.jsx)(F,{image:e.image})}),(0,o.jsxs)("div",{className:u.userText,style:{display:"flex"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[(0,c.Kfw)(e.username,15)," ",e.searched&&e.searched.blockchains&&Object.values(e.searched.blockchains).filter((e=>e)).length>0?(0,c.R1Z)(e.searched.usernamePrefix,2):""]}),c.iqE.includes(e.id)?(0,o.jsx)(d.fI,{}):null]})]}),(0,o.jsx)("div",{children:e.areFriends?(0,o.jsx)(d.Vw,{text:"Unfriend",onClick:async t=>{t.stopPropagation(),await(0,c.DoY)({to:e.id}),await(0,i.EV)(p,e.id,{areFriends:0,requested:0}),g({userId:e.id,friendshipValue:{requested:!1,areFriends:!1}}),null==l||l((t=>t.map((t=>t.id===e.id?{...t,areFriends:!1,requested:!1,remoteRequested:!1}:t)))),h.VK.getInstance().onUpdateRecoil({type:"friendship"})}}):e.requested?(0,o.jsx)(d.Vw,{text:"Cancel Request",onClick:async t=>{t.stopPropagation(),await(0,c.QTz)({to:e.id,sendRequest:!1}),await(0,i.EV)(p,e.id,{requested:0}),g({userId:e.id,friendshipValue:{requested:!1}}),null==l||l((t=>t.map((t=>t.id===e.id?{...t,requested:!1}:t)))),h.VK.getInstance().onUpdateRecoil({type:"friendship"})}}):e.remoteRequested?(0,o.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,o.jsx)(d.Vw,{text:"Decline",onClick:async t=>{t.stopPropagation(),await(0,c.QTz)({to:e.id,sendRequest:!1}),await(0,i.EV)(p,e.id,{requested:0,areFriends:0,remoteRequested:0}),g({userId:e.id,friendshipValue:{requested:!1,areFriends:!1,remoteRequested:!1}}),null==l||l((t=>t.map((t=>t.id===e.id?{...t,requested:!1,remoteRequested:!1,areFriends:!1}:t)))),h.VK.getInstance().onUpdateRecoil({type:"friendship"})}}),(0,o.jsx)(d.Vw,{style:{color:s.custom.colors.blue},text:"Accept",onClick:async t=>{t.stopPropagation(),await(0,c.QTz)({to:e.id,sendRequest:!0}),await(0,i.EV)(p,e.id,{requested:0,areFriends:1}),g({userId:e.id,friendshipValue:{requested:!1,areFriends:!0}}),null==l||l((t=>t.map((t=>t.id===e.id?{...t,requested:!1,remoteRequested:!1,areFriends:!0}:t)))),h.VK.getInstance().onUpdateRecoil({type:"friendship"})}})]}):(0,o.jsx)(d.Vw,{text:"Send Request",onClick:async t=>{t.stopPropagation(),await(0,c.QTz)({to:e.id,sendRequest:!0}),await(0,i.EV)(p,e.id,{requested:1}),g({userId:e.id,friendshipValue:{requested:!0}}),null==l||l((t=>t.map((t=>t.id===e.id?{...t,requested:!0}:t)))),h.VK.getInstance().onUpdateRecoil({type:"friendship"})}})})]})})})}function F({image:e}){const t=E();return(0,o.jsx)(d.ug,{size:32,src:e,className:t.iconCircular,style:{width:32,height:32}})}let P;function L(){return(0,o.jsx)(A,{})}function A(){const e=E(),t=(0,r.aFb)(),{uuid:n}=t,l=(0,r.bly)({uuid:n}),i=(0,r.Psg)({uuid:n}),a=(0,r.Ude)({uuid:n}),[u,g]=(0,s.useState)([]),[h,f]=(0,s.useState)(""),x=[...(a.filter((e=>e.name&&e.image))||[]).map((e=>({chatProps:e,chatType:"collection"}))),...(l||[]).map((e=>({chatProps:e,chatType:"individual"})))],y=u.filter((e=>!(null==x?void 0:x.map((e=>"collection"===e.chatType?e.chatProps.name:e.chatProps.remoteUsername)).includes(e.username))));return(0,s.useEffect)((()=>{f("")}),[n]),(0,o.jsxs)("div",{className:e.container,style:{display:"flex",flexDirection:"column"},children:[(0,o.jsx)(d.Rj,{searchFilter:h,setSearchFilter:f,onChange:async e=>{(e=>{clearTimeout(P),P=setTimeout((async()=>{await(async e=>{if(e.length>1){const t=await p.getInstance().fetch(`${c.FvS}/users?usernamePrefix=${e}`),n=await t.json();g(n.users.sort(((e,t)=>e.username.length<t.username.length?-1:1))||[])}else g([])})(e)}),250)})(e)}}),x&&x.length?null:(0,o.jsx)(R,{}),x&&0!==x.length&&(x.filter((e=>{var t;return null===(t="individual"===e.chatType?e.chatProps.remoteUsername||"":e.chatProps.name)||void 0===t?void 0:t.includes(h)})).length>0||i>0)?(0,o.jsxs)(o.Fragment,{children:[h.length>=3?(0,o.jsx)(d.mx,{text:"Your friends"}):null,(0,o.jsx)("div",{style:{paddingBottom:"16px"},children:(0,o.jsx)(k,{requestCount:h.length<3?i:0,activeChats:x.filter((e=>{var t,n;const o="individual"===e.chatType?e.chatProps.remoteUsername:e.chatProps.name;return!!(null==o?void 0:o.includes(h))||!("individual"!==e.chatType||!(null===(n=null===(t=e.chatProps.public_keys)||void 0===t?void 0:t.map((e=>e.publicKey)))||void 0===n?void 0:n.includes(h)))}))})})]}):null,h.length>=3&&0!==y.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.mx,{text:"Other people"}),(0,o.jsx)(I,{users:y,setMembers:g})]}):null,x&&0!==x.length&&h.length<3&&0===i&&0===x.length?(0,o.jsxs)("div",{style:{flexGrow:1,justifyContent:"center",flexDirection:"column",display:"flex",paddingBottom:50},children:[" ",(0,o.jsx)(d.ub,{icon:e=>(0,o.jsx)(m.Z,{...e}),title:"No messages",subtitle:"Search for someone to send a message!"})]}):null]})}var B=n(74654),Z=n(80162),O=n(75927),$=n(66198),D=n(50169),z=n(52529);const M=({userId:e})=>{var t;const[n,l]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[m,u]=(0,s.useState)({}),[g,x]=(0,s.useState)([]),[v,b]=(0,s.useState)(!0),k=E(),w=(0,f.Pg)(),C=(0,h.RS)({remoteUserIds:[e]}),{push:S}=(0,r.HJj)(),T=async t=>{await(0,c.QTz)({to:e,sendRequest:t}),a(t)};return(0,s.useEffect)((()=>{!async function(){const t=await p.getInstance().fetch(`${c.FvS}/friends?userId=${e}`),n=await t.json();n.user&&(l(n.are_friends),u(n.user),a(n.request_sent))}()}),[]),(0,s.useEffect)((()=>{m.username&&async function(e){const t=await fetch(`${c.FvS}/users/${e}`);return(await t.json()).publicKeys}(m.username).then(x).catch(console.error).finally((()=>b(!1)))}),[m.username]),v?(0,o.jsx)("div",{style:{height:"100vh"},children:(0,o.jsx)(d.gb,{})}):(0,o.jsxs)("div",{style:{height:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:16},children:[g.length>0?(0,o.jsx)("div",{style:{flex:.5,marginTop:-16,display:"flex",justifyContent:"center",gap:8},children:g.map((e=>(0,o.jsx)(_,{blockchain:e.blockchain,publicKey:e.publicKey,title:"Copy address"},e.blockchain)))}):null,(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:k.horizontalCenter,children:(0,o.jsx)("div",{className:k.topImageOuter,children:(0,o.jsx)(d.ug,{size:150,className:k.topImage,src:null===(t=C[e])||void 0===t?void 0:t.image,style:{width:150,height:150}})})}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:k.horizontalCenter,children:[(0,o.jsxs)("div",{style:{marginRight:25},children:[(0,o.jsx)($.Z,{size:"large",className:k.icon,onClick:async()=>{S({title:`@${m.username}`,componentId:c.CdA,componentProps:{userId:m.id,username:m.username}})},children:(0,o.jsx)(d.wP,{style:{padding:2,height:21},fill:w.custom.colors.fontColor})}),(0,o.jsx)("div",{className:k.smallText,style:{display:"flex",justifyContent:"center",marginTop:8},children:"Message"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)($.Z,{style:{cursor:"not-allowed"},size:"large",className:k.icon,children:(0,o.jsx)(B.Z,{style:{height:21,color:w.custom.colors.fontColor}})}),(0,o.jsx)("div",{className:k.smallText,style:{display:"flex",justifyContent:"center",marginTop:8},children:"Send"})]})]}),(0,o.jsx)("br",{}),n?(0,o.jsx)(U,{icon:(0,o.jsx)(y.Z,{style:{color:w.custom.colors.icon}}),title:"Connected",subtitle:`You and @${m.username} are mutual friends`}):null,!n&&i?(0,o.jsx)(U,{icon:(0,o.jsx)(O.Z,{style:{color:w.custom.colors.icon}}),title:"Friend pending request",subtitle:"You can still send messages and interact"}):null,n||i?null:(0,o.jsx)(U,{icon:(0,o.jsx)(O.Z,{style:{color:w.custom.colors.icon}}),title:"This is not a friend",subtitle:"Only add friends you know and trust"})]}),(0,o.jsxs)("div",{children:[n||i?null:(0,o.jsx)(d.KM,{label:"Request to add friend",onClick:()=>T(!0)}),!n&&i?(0,o.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,o.jsx)(d.KM,{label:"Cancel Pending Request",style:{margin:3},onClick:()=>T(!1)})}):null]})]})};function _({blockchain:e,publicKey:t,title:n}){const l=(0,f.Pg)(),[i,r]=(0,s.useState)(void 0),a="solana"===e?(0,o.jsx)("img",{style:{height:10},src:"/solana.png"}):"ethereum"===e?(0,o.jsx)("img",{style:{height:12},src:"/ethereum.png"}):null;return(0,o.jsx)(D.Z,{title:i?"Copied!":n,open:i,children:(0,o.jsx)(z.Z,{disableElevation:!0,disableRipple:!0,style:{background:l.custom.colors.nav,borderRadius:15,color:l.custom.colors.fontColor3,fontWeight:600,fontSize:12,padding:"4px 10px",height:"fit-content",textTransform:"none"},onClick:async()=>{await navigator.clipboard.writeText(t),r(!0),setTimeout((()=>r(void 0)),2e3)},children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:4},children:[a,(0,c.R1Z)(t),(0,o.jsx)(Z.Z,{sx:{color:l.custom.colors.icon,fontSize:14}})]})})})}function U({icon:e,title:t,subtitle:n}){const l=E();return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:l.horizontalCenter,style:{marginBottom:16},children:(0,o.jsxs)($.Z,{disabled:!0,className:l.contactIconOuter,size:"large",children:[" ",e," "]})}),(0,o.jsx)("div",{className:l.horizontalCenter,style:{marginBottom:16},children:(0,o.jsx)("div",{className:l.smallTitle,children:t})}),(0,o.jsx)("div",{className:l.horizontalCenter,children:(0,o.jsx)("div",{className:l.smallSubTitle,style:{padding:10,textAlign:"center"},children:n})})]})}const K=()=>{const e=(0,f.Pg)();return(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",flexGrow:1},children:(0,o.jsx)(d.ub,{icon:e=>(0,o.jsx)(m.Z,{...e}),title:"No Requests",subtitle:"You have no message requests",buttonText:"Go Back",onClick:()=>p.getInstance().pop(),contentStyle:{color:e.custom.colors.secondary}})})},W=()=>{const{uuid:e}=(0,r.aFb)(),t=(0,i.wE)(e)||[],n=E();return(0,o.jsxs)("div",{className:n.container,style:{display:"flex",flexDirection:"column"},children:[(0,o.jsx)("div",{className:n.smallTitle2,style:{display:"flex",justifyContent:"center",textAlign:"center",margin:15},children:"These are not from your friends. Click into a message to reply or view their profile."}),0!==t.length?(0,o.jsx)(k,{toRoot:!1,activeChats:t.map((e=>({chatType:"individual",chatProps:e})))}):null,0===t.length?(0,o.jsx)(K,{}):null]})}},46501:(e,t,n)=>{n.d(t,{iw:()=>s});var o=n(20604),l=n(36832),i=(n(11354),n(74604)),r=(n(86742),n(24394)),a=(n(35409),n(48834).Buffer);function s(e,t,n){const s=(0,l.Z1)(t);if(e===o.$OA.ETHEREUM)return(0,i.o)(s,n);if(e===o.$OA.SOLANA)return a.from((0,r.I)(s,n)).toString("hex");if(e===o.$OA.ECLIPSE)return a.from(function(e,t){return(0,r.I)(e,t)}(s,n)).toString("hex");throw new Error("invalid blockchain")}},74604:(e,t,n)=>{n.d(t,{o:()=>l});var o=n(37466);function l(e,t){return o.HDNode.fromSeed(e).derivePath(t).privateKey}},24394:(e,t,n)=>{n.d(t,{I:()=>a}),n(82073);var o=n(14132),l=n(62994),i=n(10717),r=n.n(i);function a(e,t){let n;return n=t.startsWith("501'")?(0,o.WC)(e).derivePath(t).privateKey:(0,l.derivePath)(t,e.toString("hex")).key,r().sign.keyPair.fromSeed(n).secretKey}},66579:(e,t,n)=>{n.d(t,{G:()=>s,e:()=>c});var o=n(20604),l=n(78389),i=n(52491),r=n(82488),a=n(2784);function s({percentChange:e,value:t,valueChange:n,style:i}){return a.createElement(l.FA,{alignItems:"center",justifyContent:"center",...i},a.createElement(r.q,{color:"$fontColor",fontSize:"$4xl",fontWeight:"700"},(0,o.gCK)(t)),a.createElement(l.sL,{alignItems:"center",gap:8},a.createElement(d,{value:n}),a.createElement(m,{value:e})))}function c(){return a.createElement(l.FA,{alignItems:"center",marginHorizontal:12,marginTop:24,paddingHorizontal:24,gap:12},a.createElement(i.O,{radius:16,height:32}),a.createElement(i.O,{radius:8,height:16,width:165}))}function d({value:e}){return a.createElement(r.q,{color:u(e)},(0,o.gCK)(e))}function m({value:e}){return a.createElement(r.q,{color:"$secondary",borderRadius:28,lineHeight:24,paddingVertical:2},"(",e>0?"+":"",Number.isFinite(e)?`${e.toFixed(2)}%`:"0.00%",")")}const u=e=>0===e?"$secondary":e<0?"$negative":"$positive"},38942:(e,t,n)=>{n.d(t,{g:()=>i});var o=n(82488),l=n(2784);const i=({style:e,title:t})=>l.createElement(o.q,{fontSize:"$base",color:"$secondary",marginBottom:8,marginLeft:16,...e},t)},95820:(e,t,n)=>{n.d(t,{_:()=>i});var o=n(50336),l=n(2784);function i({children:e,icon:t,onClick:n,style:i}){return l.createElement(o.HC,{backgroundColor:"$nav",display:"flex",icon:t,onPress:n,paddingHorizontal:12,paddingVertical:10,pointerEvents:"box-only",...i},e)}},28286:(e,t,n)=>{n.d(t,{V:()=>a});var o=n(6901),l=n(11314),i=n(82488),r=n(2784);function a({content:e,contentStyle:t,onClick:n,style:a}){const s=(0,l.v)();return r.createElement(o.Stack,a,r.createElement(i.q,{color:s.custom.colors.textPlaceholder,fontSize:14,onPress:n,pointerEvents:"box-only",...t},e))}},56249:(e,t,n)=>{n.d(t,{O:()=>a});var o=n(20604),l=n(87383),i=n(52491),r=n(2784);function a({image:e,radius:t,size:n,style:a}){const s=e?(0,o.fi)(e):void 0;return r.createElement(l.qE,{borderRadius:t,size:n,...a},r.createElement(l.qE.Image,{src:s}),r.createElement(l.qE.Fallback,null,r.createElement(i.O,{height:n,width:n})))}},72967:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(25686),l=n(2784);const i=()=>l.createElement(o.Z,{style:{height:8}})},79632:(e,t,n)=>{n.d(t,{a:()=>a});var o=n(25686),l=n(40342),i=n(11314),r=n(2784);function a({children:e,style:t,borderRadius:n,disableTopRadius:l=!1,disableBottomRadius:a=!1}){const c=(0,i.v)(),d=void 0!==n?n:12;return r.createElement(o.Z,{style:[s.container,{backgroundColor:c.custom.colors.nav,borderColor:c.custom.colors.borderFull,borderRadius:d},l?s.disableTopRadius:void 0,a?s.disableBottomRadius:void 0,t]},r.createElement(o.Z,{style:{overflow:"hidden"}},e))}const s=l.Z.create({container:{overflow:"hidden",borderLeftWidth:2,borderRightWidth:2,borderTopWidth:2,borderBottomWidth:2},disableTopRadius:{borderTopLeftRadius:0,borderTopRightRadius:0,borderTopWidth:0},disableBottomRadius:{borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottomWidth:0}})},52491:(e,t,n)=>{n.d(t,{O:()=>r});var o=n(33821),l=n(11314),i=n(2784);function r({height:e,radius:t,width:n}){const r=(0,l.v)(),a=e??"100%",s=n??"100%";return i.createElement(o.ZP,{speed:2,height:a,width:s,backgroundColor:r.custom.colors.balanceSkeleton,foregroundColor:r.custom.colors.balanceSkeletonForeground},i.createElement("rect",{x:"0",y:"0",height:a,width:s,rx:t,ry:t}))}},26454:(e,t,n)=>{n.d(t,{U:()=>c,Z:()=>s});var o=n(113),l=n(82749),i=n(50336),r=n(82488),a=n(2784);function s({children:e,style:t}){return a.createElement(o.gF,{backgroundColor:"$nav",borderWidth:2,borderColor:"$borderFull",borderRadius:"$container",separator:a.createElement(l.Z,null),...t},e)}function c({label:e,onClick:t,value:n}){const l="string"==typeof e?a.createElement(r.q,{color:"$secondary",fontSize:"$sm"},e):e,s="string"==typeof n?a.createElement(r.q,{color:"$fontColor",fontSize:"$sm"},n):n;return a.createElement(o.gF.Item,null,a.createElement(i.HC,{backgroundColor:"$nav",cursor:t?"pointer":void 0,hoverTheme:void 0!==t,justifyContent:"space-between",padding:12,pointerEvents:"box-only",onPress:t},l,s))}}}]);