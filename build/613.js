(globalThis.webpackChunk_coral_xyz_app_extension=globalThis.webpackChunk_coral_xyz_app_extension||[]).push([[613],{38113:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var a=n(2784),r=n(20604),i=n(36375),o=n(3210),s=n(68269),l=n(2784);const c=({blockchain:e,transport:t,onNext:n,onError:c})=>{const d=(0,o.G5b)(),[u,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(0);return(0,a.useEffect)((()=>{(async()=>{const n=s.q[e].LedgerApp(t);m(n)})()}),[e,t]),(0,a.useEffect)((()=>{(async()=>{if(null===u)return;const t=(0,r.oSC)(e,p);let a=[];try{for(const n of t){const t=await s.q[e].PublicKeyFromPath(u,n);a.push(t)}}catch(e){if(c)return console.debug("hardware default wallet transport error",e),void c(e);throw e}if(0===(await d.request({method:r.xX3,params:[a.map((t=>({publicKey:t,blockchain:e})))]})).length){const r=a[0],i=t[0];n({blockchain:e,derivationPath:i,publicKey:r})}else g(p+1)})()}),[p,d,e,u,c,n]),l.createElement(i.gb,null)}},47052:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var a=n(2784),r=n(20604),i=n(36375),o=n(3210),s=n(95958),l=n(68269),c=n(2784);const{base58:d}=s,u=({blockchain:e,transport:t,onNext:n,onError:s})=>{const d=(0,o.G5b)(),[u,m]=(0,a.useState)(null);return(0,a.useEffect)((()=>{(async()=>{const n=l.q[e].LedgerApp(t);m(n)})()}),[e,t]),(0,a.useEffect)((()=>{(async()=>{if(null===u)return;const{derivationPath:t}=await d.request({method:r.hbI,params:[e,"ledger"]});let a;try{a=await l.q[e].PublicKeyFromPath(u,t)}catch(e){if(s)return console.debug("hardware derive wallet transport error",e),void s(e);throw e}n({blockchain:e,derivationPath:t,publicKey:a})})()}),[d,e,u,s,n]),c.createElement(i.gb,null)}},37217:(e,t,n)=>{"use strict";n.d(t,{M:()=>m});var a=n(2784),r=n(20604),i=n(36375),o=n(83422),s=n(95958),l=n(19161),c=n(68269),d=n(2784);const{base58:u}=s,m=({blockchain:e,transport:t,publicKey:n,onNext:s,onError:m,onRetry:p})=>{const[g,f]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{(async()=>{const a=c.q[e].LedgerApp(t);for(const t of(0,r.EwD)(e,!0)){let r;try{r=(await a.getAddress(t.replace("m/",""))).address}catch(e){if(m)return console.debug("hardware search transport error",e),void m(e);throw e}if(u.encode(r)===n)return void s({blockchain:e,derivationPath:t,publicKey:n})}f(!0)})()}),[e,n,m,s,t]),g?d.createElement(o.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},d.createElement(o.Z,{sx:{margin:"24px"}},d.createElement(l.h4,{text:"Unable to recover wallet"}),d.createElement(l.MR,null,"We couldn't find the public key ",(0,r.R1Z)(n)," using your hardware wallet.")),d.createElement(o.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},d.createElement(i.KM,{label:"Retry",onClick:p}))):d.createElement(i.gb,null)}},99382:(e,t,n)=>{"use strict";n.d(t,{v:()=>d});var a=n(2784),r=n(20604),i=n(36375),o=n(3210),s=n(83422),l=n(19161),c=n(2784);function d({blockchain:e,walletDescriptor:t,message:n,text:d,onNext:u}){const[m,p]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),{signMessageForWallet:y}=(0,o.ioA)();return(0,a.useEffect)((()=>{(async()=>{if(!g)try{const a=await y(e,t.publicKey,n,{signedWalletDescriptors:[{...t,signature:""}]});p(a)}catch(e){return void(String(e).includes("enabling blind signature")&&f(!0))}})()}),[g]),c.createElement(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},c.createElement(s.Z,{sx:{margin:"0 24px"}},g?c.createElement(c.Fragment,null,c.createElement(l.N9,{icon:c.createElement(i.JG,null)}),c.createElement(l.h4,{text:"Enable blind signing"}),c.createElement(l.MR,null,"Please enable blind signing in the settings of the"," ",(0,r.LFn)(e)," app on your hardware wallet.")):c.createElement(c.Fragment,null,c.createElement(l.N9,{icon:c.createElement(i.JG,null)}),c.createElement(l.h4,{text:"Sign the message"}),c.createElement(l.MR,null,d))),c.createElement(s.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},g?c.createElement(i.KM,{label:"Retry",onClick:()=>{f(!1)}}):c.createElement(i.KM,{label:"Next",onClick:()=>{u(m)},disabled:!m})))}},88125:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var a=n(60041),r=n(2784);const i=({onClick:e,label:t,overwriteBackground:n,overwriteColor:i,fontSize:o,style:s})=>{const l=(0,a.Pg)();return r.createElement("div",{style:{userSelect:"none",cursor:"pointer",background:n||l.custom.colors.background,color:i||l.custom.colors.fontColor,padding:"4px 8px",borderRadius:4,display:"inline-flex",fontSize:o,...s},onClick:e},t)}},49748:(e,t,n)=>{"use strict";n.d(t,{L:()=>f});var a=n(2784),r=n(36375),i=n(60264),o=n(83422),s=n(19161),l=n(68269),c=n(2784);function d({blockchain:e,onNext:t}){const n=l.q[e];return c.createElement(o.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},c.createElement(o.Z,{sx:{margin:"0 24px"}},c.createElement(s.N9,{icon:n.Icon}),c.createElement(s.h4,{text:n.LedgerText}),c.createElement(s.MR,null,"Make sure your wallet remains connected.")),c.createElement(o.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},c.createElement(r.KM,{label:"Next",onClick:t})))}var u=n(20604),m=n(2784);function p({onRetry:e}){return m.createElement(o.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},m.createElement(o.Z,{sx:{margin:"0 24px"}},m.createElement(s.N9,{icon:m.createElement(r.tY,null)}),m.createElement(s.h4,{text:"Unable to connect"}),m.createElement(s.MR,null,"Check that your wallet is connected and unlocked, and your browser permissions are approved.")),m.createElement(o.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px"}},m.createElement(o.Z,{sx:{marginBottom:"12px"}},m.createElement(r.tf,{label:"Help & Support",onClick:()=>window.open(u.ulq,"_blank")})),m.createElement(r.KM,{label:"Retry",onClick:e})))}var g=n(2784);function f({blockchain:e,onNext:t,isConnectFailure:n=!1}){const[l,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(0),[f,y]=(0,a.useState)(n),[E,h]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=navigator.hid.addEventListener("connect",(()=>{m((e=>e+1))})),t=navigator.hid.addEventListener("disconnect",(async()=>{m((e=>e+1))}));return()=>{navigator.hid.removeEventListener("connect",e),navigator.hid.removeEventListener("disconnect",t)}}),[]),(0,a.useEffect)((()=>{(async()=>{if(null===l&&!f)try{c(await i.Z.create())}catch(e){if("The device is already open."===e.message){const e=await i.Z.list();await Promise.all(e.map((e=>e.close()))),m((()=>u+1))}else"Access denied to use Ledger device"===e.message?(console.debug("access denied to ledger device"),setTimeout((()=>y(!0)),2e3)):(console.debug("ledger error",e),setTimeout((()=>y(!0)),2e3))}})()}),[f,u]),(0,a.useEffect)((()=>{l&&setTimeout((()=>h(!0)),2e3)}),[l]),f?g.createElement(p,{onRetry:()=>y(!1)}):E?g.createElement(d,{blockchain:e,onNext:()=>t(l)}):g.createElement(o.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},g.createElement(o.Z,{sx:{margin:"0 24px"}},g.createElement(s.N9,{icon:g.createElement(r.JG,null)}),g.createElement(s.h4,{text:"Searching for wallet..."}),g.createElement(s.MR,null,"Make sure your wallet is connected, unlocked and browser permissions are approved.")),g.createElement(o.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},g.createElement(r.KM,{label:"Next",disabled:!0})))}},66686:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var a=n(36375),r=n(83422),i=n(19161),o=n(2784);function s({onNext:e}){return o.createElement(r.Z,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}},o.createElement(r.Z,{sx:{margin:"0 24px"}},o.createElement(i.N9,{icon:o.createElement(a.JG,null)}),o.createElement(i.h4,{text:"Connect a hardware wallet"}),o.createElement(i.MR,null,"Use your hardware wallet with Backpack.")),o.createElement(r.Z,{sx:{marginLeft:"16px",marginRight:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between"}},o.createElement(a.KM,{label:"Next",onClick:e})))}},68269:(e,t,n)=>{"use strict";n.d(t,{q:()=>R});var a=n(20604),r=n(3210),i=n(69087),o=n(19009),s=n(94758),l=n(82073),c=n(95958),d=n(1005),u=n(10528),m=n(2784),p=n(36375),g=n(60041),f=n(79312),y=n(51906),E=n(13390),h=n(8199),b=n(64008),w=n(73044),x=n(84708),v=n(2784);const k=(0,a.jl5)("send-ethereum-confirmation-card"),{base58:C}=c;function A({token:e,destinationAddress:t,destinationUser:n,amount:i,onComplete:o,onViewBalances:s,blockchain:l}){const c=(0,r.UL)(),[d,u]=(0,m.useState)(null),[p]=(0,m.useState)("Error 422. Transaction time out. Runtime error. Reticulating splines."),[g,f]=(0,m.useState)(null),[E,h]=(0,m.useState)("confirm");(0,m.useEffect)((()=>{(async()=>{let n;n=e.address===y.d?await a.kJW.transferEthTransaction(c,{to:t,value:i.toString()}):e.tokenId?await a.kJW.transferErc721Transaction(c,{to:t,from:c.walletPublicKey,contractAddress:e.address,tokenId:e.tokenId}):await a.kJW.transferErc20Transaction(c,{to:t,contractAddress:e.address,amount:i.toString()}),f(n)})()}),[]);const b=async e=>{f(e);const t=await a.kJW.signAndSendTransaction(c,e);h("sending"),u(t);try{await c.provider.waitForTransaction(t);const e=await c.provider.getTransaction(t);await e.wait(),h("complete"),o&&o()}catch(e){k.error("ethereum transaction failed",e),h("error")}};return g?v.createElement("div",null,"confirm"===E?v.createElement(S,{token:e,destinationAddress:t,destinationUser:n,transaction:g,amount:i,onConfirm:b}):"sending"===E?v.createElement(x.wK,{blockchain:l,isComplete:!1,amount:i,token:e,signature:d}):"complete"===E?v.createElement(x.wK,{blockchain:l,isComplete:!0,amount:i,token:e,signature:d,onViewBalances:s}):v.createElement(x.jj,{blockchain:l,signature:d,onRetry:()=>b(g),error:p})):null}function S({token:e,destinationAddress:t,amount:n,transaction:i,onConfirm:o,destinationUser:s}){const l=(0,g.Pg)(),c=(0,r.als)(a.$OA.ETHEREUM,C.encode(E.serialize(i))),d=(0,r.OuZ)(),u=(0,r.rTu)(),{from:m,loading:y,transaction:x}=c,k={From:{onClick:()=>{},detail:v.createElement("div",{style:{display:"flex",alignItems:"center"}},v.createElement(p.tB,{marginRight:5,image:d,size:24}),v.createElement(f.Z,{variant:"body2",style:{marginRight:5}},u.name),v.createElement(h.E,{publicKey:m})),button:!1},To:{onClick:()=>{},detail:v.createElement("div",{style:{display:"flex",alignItems:"center"}},s?v.createElement(v.Fragment,null,v.createElement(p.tB,{marginRight:5,image:s.image,size:24}),v.createElement(f.Z,{variant:"body2",style:{marginRight:5}},"@",s.username)):null,v.createElement(h.E,{publicKey:t})),button:!1}};return v.createElement("div",{style:{padding:"16px",display:"flex",justifyContent:"space-between",flexDirection:"column",paddingBottom:"24px"}},v.createElement("div",null,v.createElement(f.Z,{style:{color:l.custom.colors.fontColor,fontWeight:500,fontSize:"18px",lineHeight:"24px",textAlign:"center"}},"Review Send"),v.createElement(b.j,{style:{marginTop:"40px",marginBottom:"40px"},amount:n,token:e}),v.createElement(w.C,{transactionData:c,menuItems:k})),v.createElement(p.KM,{disabled:y,style:{marginTop:"16px"},onClick:()=>o(E.parse(C.decode(x))),label:"Send",type:"submit","data-testid":"Send"}))}var T=n(86845),I=n(2784);const D=(0,g.W2)((e=>({confirmTableListItem:{backgroundColor:`${e.custom.colors.approveTransactionTableBackground} !important`,"&:hover":{opacity:1}}})));function L({token:e,destinationAddress:t,destinationUser:n,amount:a,onComplete:i,onViewBalances:o,blockchain:s}){const{txSignature:l,onConfirm:c,cardType:d,error:u}=(0,r.VI0)({token:e,destinationAddress:t,amount:a,onComplete:e=>{i?.(e)}});return I.createElement(I.Fragment,null,"confirm"===d?I.createElement($,{token:e,destinationAddress:t,destinationUser:n,amount:a,onConfirm:c}):"sending"===d?I.createElement(x.wK,{blockchain:s,isComplete:!1,amount:a,token:e,signature:l}):"complete"===d?I.createElement(x.wK,{blockchain:s,isComplete:!0,amount:a,token:e,signature:l,onViewBalances:o}):I.createElement(x.jj,{blockchain:s,signature:l,onRetry:c,error:u}))}function $({token:e,destinationAddress:t,amount:n,onConfirm:a,destinationUser:r}){const i=(0,g.Pg)();return I.createElement("div",{style:{padding:"16px",height:"402px",display:"flex",justifyContent:"space-between",flexDirection:"column",paddingBottom:"24px"}},I.createElement("div",null,I.createElement(f.Z,{style:{color:i.custom.colors.fontColor,fontWeight:500,fontSize:"18px",lineHeight:"24px",textAlign:"center"}},"Review Send"),I.createElement(b.j,{style:{marginTop:"40px",marginBottom:"40px"},amount:n,token:e}),I.createElement(O,{destinationUser:r,destinationAddress:t})),I.createElement(p.KM,{onClick:()=>a(),label:"Send",type:"submit","data-testid":"Send"}))}const O=({destinationAddress:e,destinationUser:t})=>{const n=(0,g.Pg)(),a=D(),i=(0,r.VvY)(),o=(0,r.OuZ)(),s=(0,r.rTu)(),l={From:{onClick:()=>{},detail:I.createElement("div",{style:{display:"flex",alignItems:"center"}},I.createElement(p.tB,{marginRight:5,image:o,size:24}),I.createElement(f.Z,{variant:"body2",style:{marginRight:5}},s.name),I.createElement(h.E,{publicKey:i.walletPublicKey})),classes:{root:a.confirmTableListItem},button:!1},To:{onClick:()=>{},detail:I.createElement("div",{style:{display:"flex",alignItems:"center"}},t?I.createElement(I.Fragment,null,I.createElement(p.tB,{marginRight:5,image:t.image,size:24}),I.createElement(f.Z,{variant:"body2",style:{marginRight:5}},t.walletName?t.walletName:`@${t.username}`)):null,I.createElement(h.E,{publicKey:e})),classes:{root:a.confirmTableListItem},button:!1},"Network fee":{onClick:()=>{},detail:I.createElement(f.Z,null,"0.000005"," ",I.createElement("span",{style:{color:n.custom.colors.secondary}},"SOL")),classes:{root:a.confirmTableListItem},button:!1}};return I.createElement(T.U,{borderColor:n.custom.colors.approveTransactionTableBackground,menuItems:l,style:{margin:0},textStyle:{color:n.custom.colors.secondary}})};var P=n(76370),N=n(2784);const{base58:U}=c,R={[a.$OA.ETHEREUM]:{Enabled:!0,Name:"Ethereum",GasTokenName:"ETH",AppTokenName:"ERC20",LedgerText:"Open the Ethereum app",LedgerApp:e=>new i.ZP(e),PublicKeyFromPath:async(e,t)=>(await e.getAddress(t.replace("m/",""))).address.toString(),Icon:()=>N.createElement(P.ez,null),RampSupportedTokens:[{title:"ETH",subtitle:"Ethereum",icon:"/ethereum.png"}],DerivationPathOptions:[{path:e=>(0,a.Vkv)(e),label:"m/44/60'/x"},{path:e=>(0,a.JYi)(e),label:"m/44'/60'/0'/x' - Ledger"},{path:e=>(0,a.mtk)(e),label:"m/44'/60'/x'/0/0 - Ledger Live"},{path:e=>(0,a.hhS)(e),label:"m/44'/60'/0'/0/x - Ethereum Standard"}],LoadBalances:async e=>{const t={__DEV__:!1,IS_STATIC:"",NODE_ENV:"production",TAMAGUI_TARGET:"web",DEBUG:"0"}.DEFAULT_ETHEREUM_CONNECTION_URL||a.Ln3.MAINNET,n=new d.r(t),r=await Promise.all(e.map((e=>n.getBalance(e))));return e.map(((e,t)=>({publicKey:e,balance:r[t],index:t})))},GasTokenDecimals:18,SendTokenConfirmationCard:({token:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i,onViewBalances:o})=>N.createElement(A,{token:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i,onViewBalances:o,blockchain:a.$OA.ETHEREUM}),SendNftConfirmationCard:({nft:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i})=>N.createElement(A,{token:{logo:e.imageUrl,decimals:0,address:e.contractAddress,tokenId:e.tokenId},destinationUser:n,destinationAddress:t,amount:r,onComplete:i,blockchain:a.$OA.ETHEREUM}),MaxFeeOffset:(e,t)=>e.address===a.aYU?u.O$.from("21000").mul(t?.feeData.maxFeePerGas).add(u.O$.from("21000").mul(t?.feeData.maxPriorityFeePerGas)):u.O$.from(0)},[a.$OA.SOLANA]:{Enabled:!0,Name:"Solana",GasTokenName:"SOL",AppTokenName:"SPL",LedgerText:"Open the Solana app",LedgerApp:e=>new o.Z(e),PublicKeyFromPath:async(e,t)=>{const n=(await e.getAddress(t.replace("m/",""))).address;return U.encode(n)},Icon:()=>N.createElement(P.$x,null),RampSupportedTokens:[{title:"SOL",icon:r.Wsp,subtitle:"Solana"}],DerivationPathOptions:[{path:e=>(0,a.LMA)(a.$OA.SOLANA,e),label:"m/44/501'/x'"},{path:e=>(0,a.tGr)(a.$OA.SOLANA,e),label:"m/44/501'/x'/0'"},{path:e=>(0,a.tGr)(a.$OA.SOLANA,e)+"/0'",label:"m/44/501'/x'/0'/0'"}].concat(window.localStorage.getItem("sollet")?[{path:e=>(0,a.MZ6)(e),label:"501'/0'/0/0 (Deprecated)"}]:[]),LoadBalances:async e=>{const t={__DEV__:!1,IS_STATIC:"",NODE_ENV:"production",TAMAGUI_TARGET:"web",DEBUG:"0"}.DEFAULT_SOLANA_CONNECTION_URL||a.gPV,n=new l.Connection(t,"confirmed");return(await s.P6.rpc.getMultipleAccounts(n,e.map((e=>new l.PublicKey(e))))).map(((t,n)=>({publicKey:e[n],balance:t?u.O$.from(t.account.lamports):u.O$.from(0),index:n})))},GasTokenDecimals:9,SendTokenConfirmationCard:({token:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i,onViewBalances:o})=>N.createElement(L,{token:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i,onViewBalances:o,blockchain:a.$OA.SOLANA}),MaxFeeOffset:e=>e.mint===a.VUJ?u.O$.from(5e3).add(u.O$.from(a.nN$)):u.O$.from(0),SendNftConfirmationCard:({nft:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i})=>N.createElement(L,{token:{address:e.publicKey,logo:e.imageUrl,decimals:0,mint:e.mint},destinationUser:n,destinationAddress:t,amount:r,onComplete:i,blockchain:a.$OA.SOLANA})},[a.$OA.ECLIPSE]:{Enabled:!0,Name:"Eclipse",GasTokenName:"ECL",AppTokenName:"SPL",LedgerText:"Open the Solana app",LedgerApp:e=>new o.Z(e),PublicKeyFromPath:async(e,t)=>{const n=(await e.getAddress(t.replace("m/",""))).address;return U.encode(n)},Icon:()=>N.createElement(P.af,null),RampSupportedTokens:[],DerivationPathOptions:[{path:e=>(0,a.LMA)(a.$OA.ECLIPSE,e),label:"m/44/501'/x'"},{path:e=>(0,a.tGr)(a.$OA.ECLIPSE,e),label:"m/44/501'/x'/0'"},{path:e=>(0,a.tGr)(a.$OA.ECLIPSE,e)+"/0'",label:"m/44/501'/x'/0'/0'"}],LoadBalances:async e=>{const t={__DEV__:!1,IS_STATIC:"",NODE_ENV:"production",TAMAGUI_TARGET:"web",DEBUG:"0"}.DEFAULT_ECLIPSE_CONNECTION_URL||"https://api.injective.eclipsenetwork.xyz:8899/",n=new l.Connection(t,"confirmed");return(await s.P6.rpc.getMultipleAccounts(n,e.map((e=>new l.PublicKey(e))))).map(((t,n)=>({publicKey:e[n],balance:t?u.O$.from(t.account.lamports):u.O$.from(0),index:n})))},GasTokenDecimals:9,SendTokenConfirmationCard:({token:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i,onViewBalances:o})=>N.createElement(L,{token:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i,onViewBalances:o,blockchain:a.$OA.ECLIPSE}),MaxFeeOffset:e=>u.O$.from(0),SendNftConfirmationCard:({nft:e,destinationAddress:t,destinationUser:n,amount:r,onComplete:i})=>N.createElement(L,{token:{address:e.publicKey,logo:e.imageUrl,decimals:0,mint:e.mint},destinationUser:n,destinationAddress:t,amount:r,onComplete:i,blockchain:a.$OA.SOLANA})}}},8199:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var a=n(2784),r=n(20604),i=n(60041),o=n(88125),s=n(79194),l=n(2784);const c=({publicKey:e,...t})=>{const n=(0,i.Pg)(),[c,d]=(0,a.useState)(!1),u=e.toString();return l.createElement(s.D,{tooltipOpen:c},l.createElement("div",{title:u,"aria-label":u},l.createElement(o.b,{fontSize:13,overwriteBackground:n.custom.colors.bg2,onClick:async()=>{d(!0),setTimeout((()=>d(!1)),1e3),await navigator.clipboard.writeText(u)},label:(0,r.R1Z)(e),...t})))}},41755:(e,t,n)=>{"use strict";n.d(t,{L:()=>a.Vs});var a=n(33757)},64008:(e,t,n)=>{"use strict";n.d(t,{j:()=>l});var a=n(20604),r=n(36375),i=n(60041),o=n(79312),s=n(2784);const l=({style:e,token:t,amount:n,displayLogo:l=!0})=>{const c=(0,i.Pg)(),d=(0,a.Our)(n,t.decimals,!1),u=l?10:12,m=d.length>u?d.slice(0,u)+"...":d;return s.createElement("div",{style:{display:"flex",width:"100%",...e}},s.createElement("div",{style:{flex:1}}),l?s.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",marginRight:"8px"}},s.createElement(r.e4,{src:t.logo,style:{width:"32px",height:"32px",borderRadius:"16px"},removeOnError:!0})):null,s.createElement(o.Z,{style:{color:c.custom.colors.fontColor,fontWeight:500,fontSize:"30px",lineHeight:"36px",textAlign:"center",display:"flex"}},m,s.createElement("span",{style:{marginLeft:"8px",color:c.custom.colors.secondary}},t.ticker)),s.createElement("div",{style:{flex:1}}))}},79194:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var a=n(60041),r=n(50169),i=n(2784);function o({children:e,tooltipOpen:t,title:n}){const o=(0,a.Pg)();return i.createElement(r.Z,{arrow:!0,title:n??"Copied",open:t,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,componentsProps:{tooltip:{sx:{fontSize:"14px",bgcolor:o.custom.colors.copyTooltipColor,color:o.custom.colors.copyTooltipTextColor,"& .MuiTooltip-arrow":{color:o.custom.colors.copyTooltipColor}}},popper:{sx:{position:"fixed"}}}},e)}},27352:(e,t,n)=>{"use strict";n.d(t,{Ps:()=>i});var a=n(83596);const r={"\n  query GetBalanceSummary($address: String!, $providerId: ProviderID!) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        balances {\n          id\n          aggregate {\n            id\n            percentChange\n            value\n            valueChange\n          }\n        }\n      }\n    }\n  }\n":a.ej,"\n  query GetTokenBalances($address: String!, $providerId: ProviderID!) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        balances {\n          id\n          tokens {\n            edges {\n              node {\n                id\n                address\n                displayAmount\n                marketData {\n                  id\n                  percentChange\n                  value       \n                }\n                token\n                tokenListEntry {\n                  id\n                  logo\n                  name\n                  symbol\n                }        \n              }\n            }\n          }\n        }\n      }\n    }\n  }\n":a.v6,"\n  query GetCollectibles($address: String!, $providerId: ProviderID!) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        nfts {\n          edges {\n            node {\n              id\n              address\n              attributes {\n                trait\n                value\n              }\n              collection {\n                id\n                address\n                name\n              }\n              compressed\n              image\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n":a.xI,"\n  mutation SendFriendRequest($otherUserId: String!, $accept: Boolean!) {\n    sendFriendRequest(otherUserId: $otherUserId, accept: $accept)\n  }\n":a.ks,"\n  query GetNotifications($filters: NotificationFiltersInput) {\n    user {\n      id\n      notifications(filters: $filters) {\n        edges {\n          node {\n            id\n            app {\n              id\n              address\n              image\n              name\n            }\n            body\n            dbId\n            source\n            timestamp\n            title\n            viewed\n          }\n        }\n      }\n    }\n  }\n":a.f4,"\n  mutation MarkNotificationsAsRead($ids: [Int!]!) {\n    markNotificationsAsRead(ids: $ids)\n  }\n":a.$3,"\n  query GetTokenListEntryLogo($providerId: ProviderID!, $filters: TokenListEntryFiltersInput) {\n    tokenList(providerId: $providerId, filters: $filters) {\n      id\n      logo\n    }\n  }\n":a.at,"\n  query GetTransactions($address: String!, $providerId: ProviderID!, $filters: TransactionFiltersInput) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        provider {\n          providerId\n        }\n        transactions(filters: $filters) {\n          edges {\n            node {\n              id\n              description\n              fee\n              feePayer\n              error\n              hash\n              nfts\n              source\n              timestamp\n              type\n            }\n          }\n        }\n      }\n    }\n  }\n":a.AN};function i(e){var t;return null!==(t=r[e])&&void 0!==t?t:{}}},85890:(e,t,n)=>{"use strict";n(52322),n(2784),n(3210);var a=n(27352);n(55799),n(20604),(0,a.Ps)("\n  query GetTokenBalances($address: String!, $providerId: ProviderID!) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        balances {\n          id\n          tokens {\n            edges {\n              node {\n                id\n                address\n                displayAmount\n                marketData {\n                  id\n                  percentChange\n                  value       \n                }\n                token\n                tokenListEntry {\n                  id\n                  logo\n                  name\n                  symbol\n                }        \n              }\n            }\n          }\n        }\n      }\n    }\n  }\n")},14499:(e,t,n)=>{"use strict";n(52322),n(2784),n(3210);var a=n(27352);n(55799),n(20604),(0,a.Ps)("\n  query GetCollectibles($address: String!, $providerId: ProviderID!) {\n    user {\n      id\n      wallet(address: $address, providerId: $providerId) {\n        id\n        nfts {\n          edges {\n            node {\n              id\n              address\n              attributes {\n                trait\n                value\n              }\n              collection {\n                id\n                address\n                name\n              }\n              compressed\n              image\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n")},35409:(e,t,n)=>{"use strict";var a=n(20604);n(15640),n(48834).Buffer,(0,a.jl5)("background/backend/keyring")},89760:(e,t,n)=>{"use strict";var a=n(20604);const r={};self.addEventListener("message",(e=>{try{if(!(0,a.xrP)(e))return;if(e.data.type!==a.ZwH)return;const{data:{detail:t}}=e,{id:n,result:i,error:o}=t,s=r[n];if(!s)throw new Error(`resolver not found for request id: ${n}`);const{resolve:l,reject:c}=s;delete r[n],o&&c(o),l(i)}catch(e){console.error(e)}}))},11354:(e,t,n)=>{"use strict";n(20604),n(36832),n(89760),n(48834).Buffer},86742:(e,t,n)=>{"use strict";n(20604),n(82073),n(36832);var a=n(95958);n(10717),n(89760),n(24394),n(48834).Buffer;const{base58:r}=a},14600:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i.Q,z:()=>u});var a=n(42055),r=n(80324),i=n(1556);const o="is-cold-store",s="keyname-store",l="user-data",c="wallet-data",d="keyring-store";class u{db;defaultKeyname;MigrationPrivateStoreInterface;constructor(e){this.db=e,this.defaultKeyname={defaultDerived:e=>`Wallet ${e}`,defaultImported:e=>`Imported Wallet ${e}`,defaultLedger:e=>`Ledger ${e}`},this.MigrationPrivateStoreInterface={store:this,db:this.db,getKeyringCiphertext:this.getKeyringCiphertext.bind(this),getKeyringStore_NO_MIGRATION:this.getKeyringStore_NO_MIGRATION.bind(this),getWalletData_DEPRECATED:this.getWalletData_DEPRECATED.bind(this),setWalletData_DEPRECATED:this.setWalletData_DEPRECATED.bind(this)}}async reset(){return this.db.reset()}async setIsCold(e,t){const n=await this.db.get(o)||{};n[e]=t,await this.db.set(o,n)}async getIsCold(e){const t=await this.db.get(o);return!!t?.[e]}async setKeyname(e,t,n){const a=await this.db.get(s)||{};a[n]||(a[n]={}),a[n][e]=t,await this.db.set(s,a)}async getKeyname(e,t){const n=await this.db.get(s);let a;if(a=n[t]&&n[t][e]?n[t][e]:n[e],!a)throw Error(`unable to find name for key: ${e.toString()}`);return a}async getActiveUser(){return(await this.getUserData()).activeUser}async setActiveUser(e){const t=await this.db.get(l);if(null==t||null==t)await this.db.set(l,{activeUser:e,users:[e]});else{const n=t.users.some((t=>t.uuid===e.uuid))?t.users:t.users.concat([e]);await this.db.set(l,{activeUser:e,users:n})}}async getUserData(){const e=await this.db.get(l);if(void 0===e)throw new Error("user data not found");return e}async setUser(e,t){const n=await this.db.get(l),a={...n.users.find((t=>t.uuid===e)),...t};return await this.db.set(l,{activeUser:n.activeUser.uuid===e?a:n.activeUser,users:n.users.filter((t=>t.uuid!==e)).concat([a])}),a}async setUserData(e){await this.db.set(l,e)}async getWalletDataForUser(e){const t=await this.db.get(this.walletDataKey(e));if(void 0===t)throw new Error(`wallet data for user ${e} is undefined`);return t}async setWalletDataForUser(e,t){await this.db.set(this.walletDataKey(e),t)}walletDataKey(e){return`${c}_${e}`}async getWalletData_DEPRECATED(){return await this.db.get(c)}async setWalletData_DEPRECATED(e){await this.db.set(c,e)}async getKeyringStore(e){return await(0,r.a)(e,this.MigrationPrivateStoreInterface),await this.getKeyringStore_NO_MIGRATION(e.password)}async getKeyringStore_NO_MIGRATION(e){const t=await this.getKeyringCiphertext();if(null==t)throw new Error("keyring store not found on disk");const n=await(0,a.p)(t,e);return JSON.parse(n)}async checkPassword(e){try{return await this.getKeyringStore_NO_MIGRATION(e),!0}catch(e){return!1}}async doesCiphertextExist(){return null!=await this.getKeyringCiphertext()}async setKeyringStore(e,t){const n=JSON.stringify(e),r=await(0,a.H)(n,t);await this.setKeyringCiphertext(r)}async getKeyringCiphertext(){return await this.db.get(d)}async setKeyringCiphertext(e){await this.db.set(d,e)}}},1556:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var a=n(20604);const r={get:async e=>await a.raq.getLocalStorage(e),async set(e,t){await a.raq.setLocalStorage(e,t)},async remove(e){await a.raq.removeLocalStorage(e)},async reset(){await a.raq.clearLocalStorage()}}},42055:(e,t,n)=>{"use strict";n.d(t,{H:()=>s,p:()=>l});var a=n(15640),r=n(5634),i=n(10717),o=n(48834).Buffer;async function s(e,t){const n=(0,i.randomBytes)(16),r=1e5,s="sha256",l=await c(t,n,r,s),d=(0,i.randomBytes)(i.secretbox.nonceLength),u=(0,i.secretbox)(o.from(e),d,l);return{ciphertext:(0,a.encode)(u),nonce:(0,a.encode)(d),kdf:"pbkdf2",salt:(0,a.encode)(n),iterations:r,digest:s}}async function l(e,t){const{ciphertext:n,nonce:r,salt:s,iterations:l,digest:d}=e,u=(0,a.decode)(n),m=(0,a.decode)(r),p=(0,a.decode)(s),g=await c(t,p,l,d),f=i.secretbox.open(u,m,g);if(!f)throw new Error("Incorrect password");return o.from(f).toString()}async function c(e,t,n,a){return new Promise(((o,s)=>(0,r.nk)(e,t,n,i.secretbox.keyLength,a,((e,t)=>e?s(e):o(t)))))}},5585:(e,t,n)=>{"use strict";n(20604),n(36832),n(46501),n(90008)},80324:(e,t,n)=>{"use strict";n.d(t,{a:()=>l});var a=n(20604),r=n(501),i=n(29672),o=n(25703);const s=(0,a.jl5)("background/migrations");async function l(e,t){try{await async function(e,t){const n=5798,l=await m(t);if(s.debug("starting migrations with last migration",l),"development"===a.BwW){const e=await g(t);s.debug("migration log:",e)}if("finalized"===l?.state&&l?.build===n)return void s.debug("already migrated, early exit");if(void 0!==l&&"start"===l?.state)throw new Error("migration failed, please re-install Backpack");s.debug("running all migrations"),void 0===l&&void 0!==await t.getWalletData_DEPRECATED()&&await c(510,t,(async()=>{await(0,r.C)(e,t)})),510===(await m(t))?.build&&await c(2408,t,(async()=>{await(0,i.G)(e,t)})),2408===(await m(t))?.build&&await c(5798,t,(async()=>{await(0,o.Y)(e,t)}));const d=await m(t);if(void 0!==d&&d?.build===n&&"finalized"===d?.state||await p({build:n,state:"finalized"},t),"development"===a.BwW){const e=await g(t);s.debug("migration log:",e)}s.debug("migration success")}(e,t)}catch(e){throw new Error(`migration failed: ${e.toString()}`)}}async function c(e,t,n){s.debug(`running migration ${e}`),await p({build:e,state:"start"},t),await n(),await p({build:e,state:"end"},t),s.debug(`migration ${e} was a success`)}const d="last-migration",u="migration-log";async function m(e){return await e.db.get(d)}async function p(e,t){await t.db.set(d,e),await async function(e,t){let n=await g(t);null==n&&(n=[]),n.push(e),await t.db.set(u,n)}(e,t)}async function g(e){return await e.db.get(u)}},29672:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var a=n(20604);async function r(e,t){const{password:n}=e,r=await t.getKeyringStore_NO_MIGRATION(n);for(const[e,t]of Object.entries(r.users))for(const[n,i]of Object.entries(t.blockchains)){let t=i.hdKeyring;if(t&&void 0!==t.accountIndices){const i=t.accountIndices.map((e=>"bip44"===t.derivationPath?(0,a.LMA)(n,e):"bip44-change"===t.derivationPath?(0,a.tGr)(n,e):(0,a.MZ6)(e))),{accountIndex:o,walletIndex:s}=(0,a.yYq)(i);r.users[e].blockchains[n].hdKeyring={mnemonic:t.mnemonic,seed:t.seed,derivationPaths:i,accountIndex:o,walletIndex:s}}let o=i.ledgerKeyring;if(void 0!==o.derivationPaths){const t=o.derivationPaths.map((e=>{let t;return t="bip44"===e.path?(0,a.LMA)(n,e.account):"bip44-change"===e.path?(0,a.tGr)(n,e.account):(0,a.MZ6)(e.account),{derivationPath:t,publicKey:e.publicKey}}));r.users[e].blockchains[n].ledgerKeyring={walletDescriptors:t}}}await t.store.setKeyringStore(r,n)}},501:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var a=n(20604),r=n(42055);const i=(0,a.jl5)("migrations/0_2_0_510");async function o(e,t){const n=await async function(e,t){const n=await t.getWalletData_DEPRECATED();if(!n)throw i.error("wallet data not found on disk"),new Error("wallet data not found");const r=n.username;if(!r)throw i.error("wallet username not found on disk"),new Error("wallet data not found");if(!e.uuid){const t=await fetch(`${a.FvS}/users/${r}`),n=await t.json();e.uuid=n.id}return await t.store.setWalletDataForUser(e.uuid,{...(0,a.$7I)(),...n}),await t.setWalletData_DEPRECATED(void 0),r}(e,t);await async function(e,t,n){let a=!1;try{await n.store.getUserData(),a=!0}catch{}if(a)throw new Error("getUserdata had unexpected data");const r={username:t,uuid:e.uuid,jwt:""};await n.store.setUserData({activeUser:r,users:[r]})}(e,n,t),await async function(e,t,n){const{uuid:a,password:o}=e,s=await n.getKeyringCiphertext();if(null==s)return void i.error("keyring store not found on disk");const l=await(0,r.p)(s,o),c=JSON.parse(l);if(c.username)return void i.error("keyring store already migrated");const{mnemonic:d,blockchains:u,lastUsedTs:m}=c,p={users:Object.fromEntries([[a,{uuid:a,username:t,mnemonic:d,activeBlockchain:Object.keys(u)[0],blockchains:u}]]),lastUsedTs:m};await n.store.setKeyringStore(p,o)}(e,n,t)}},25703:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var a=n(20604);async function r(e,t){const n=await t.store.getWalletDataForUser(e.uuid);n.eclipse||(n.eclipse=a.MZT[a.$OA.ECLIPSE].PreferencesDefault),await t.store.setWalletDataForUser(e.uuid,n)}},6703:()=>{},83397:()=>{},38087:()=>{},30633:()=>{},20395:()=>{},30488:()=>{},6024:()=>{},85826:()=>{},15862:()=>{},74854:()=>{},66602:()=>{},42728:()=>{}}]);